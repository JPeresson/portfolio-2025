var ch=Object.defineProperty;var dh=(S,t,r)=>t in S?ch(S,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):S[t]=r;var hh=(S,t)=>()=>(t||S((t={exports:{}}).exports,t),t.exports);var $l=(S,t,r)=>(dh(S,typeof t!="symbol"?t+"":t,r),r);var Jb=hh((lh,Es)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();/*! jQuery v3.7.1 | (c) OpenJS Foundation and other contributors | jquery.org/license */(function(S,t){typeof Es=="object"&&typeof Es.exports=="object"?Es.exports=S.document?t(S,!0):function(r){if(!r.document)throw new Error("jQuery requires a window with a document");return t(r)}:t(S)})(typeof window<"u"?window:globalThis,function(S,t){var r=[],i=Object.getPrototypeOf,n=r.slice,o=r.flat?function(j){return r.flat.call(j)}:function(j){return r.concat.apply([],j)},s=r.push,a=r.indexOf,f={},h=f.toString,l=f.hasOwnProperty,u=l.toString,c=u.call(Object),d={},y=function(j){return typeof j=="function"&&typeof j.nodeType!="number"&&typeof j.item!="function"},p=function(j){return j!=null&&j===j.window},m=S.document,g={type:!0,src:!0,nonce:!0,noModule:!0};function v(j,N,X){var J,se,ce=(X=X||m).createElement("script");if(ce.text=j,N)for(J in g)(se=N[J]||N.getAttribute&&N.getAttribute(J))&&ce.setAttribute(J,se);X.head.appendChild(ce).parentNode.removeChild(ce)}function x(j){return j==null?j+"":typeof j=="object"||typeof j=="function"?f[h.call(j)]||"object":typeof j}var T="3.7.1",w=/HTML$/i,b=function(j,N){return new b.fn.init(j,N)};function C(j){var N=!!j&&"length"in j&&j.length,X=x(j);return!y(j)&&!p(j)&&(X==="array"||N===0||typeof N=="number"&&0<N&&N-1 in j)}function A(j,N){return j.nodeName&&j.nodeName.toLowerCase()===N.toLowerCase()}b.fn=b.prototype={jquery:T,constructor:b,length:0,toArray:function(){return n.call(this)},get:function(j){return j==null?n.call(this):j<0?this[j+this.length]:this[j]},pushStack:function(j){var N=b.merge(this.constructor(),j);return N.prevObject=this,N},each:function(j){return b.each(this,j)},map:function(j){return this.pushStack(b.map(this,function(N,X){return j.call(N,X,N)}))},slice:function(){return this.pushStack(n.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(b.grep(this,function(j,N){return(N+1)%2}))},odd:function(){return this.pushStack(b.grep(this,function(j,N){return N%2}))},eq:function(j){var N=this.length,X=+j+(j<0?N:0);return this.pushStack(0<=X&&X<N?[this[X]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:r.sort,splice:r.splice},b.extend=b.fn.extend=function(){var j,N,X,J,se,ce,me=arguments[0]||{},Oe=1,Pe=arguments.length,He=!1;for(typeof me=="boolean"&&(He=me,me=arguments[Oe]||{},Oe++),typeof me=="object"||y(me)||(me={}),Oe===Pe&&(me=this,Oe--);Oe<Pe;Oe++)if((j=arguments[Oe])!=null)for(N in j)J=j[N],N!=="__proto__"&&me!==J&&(He&&J&&(b.isPlainObject(J)||(se=Array.isArray(J)))?(X=me[N],ce=se&&!Array.isArray(X)?[]:se||b.isPlainObject(X)?X:{},se=!1,me[N]=b.extend(He,ce,J)):J!==void 0&&(me[N]=J));return me},b.extend({expando:"jQuery"+(T+Math.random()).replace(/\D/g,""),isReady:!0,error:function(j){throw new Error(j)},noop:function(){},isPlainObject:function(j){var N,X;return!(!j||h.call(j)!=="[object Object]")&&(!(N=i(j))||typeof(X=l.call(N,"constructor")&&N.constructor)=="function"&&u.call(X)===c)},isEmptyObject:function(j){var N;for(N in j)return!1;return!0},globalEval:function(j,N,X){v(j,{nonce:N&&N.nonce},X)},each:function(j,N){var X,J=0;if(C(j))for(X=j.length;J<X&&N.call(j[J],J,j[J])!==!1;J++);else for(J in j)if(N.call(j[J],J,j[J])===!1)break;return j},text:function(j){var N,X="",J=0,se=j.nodeType;if(!se)for(;N=j[J++];)X+=b.text(N);return se===1||se===11?j.textContent:se===9?j.documentElement.textContent:se===3||se===4?j.nodeValue:X},makeArray:function(j,N){var X=N||[];return j!=null&&(C(Object(j))?b.merge(X,typeof j=="string"?[j]:j):s.call(X,j)),X},inArray:function(j,N,X){return N==null?-1:a.call(N,j,X)},isXMLDoc:function(j){var N=j&&j.namespaceURI,X=j&&(j.ownerDocument||j).documentElement;return!w.test(N||X&&X.nodeName||"HTML")},merge:function(j,N){for(var X=+N.length,J=0,se=j.length;J<X;J++)j[se++]=N[J];return j.length=se,j},grep:function(j,N,X){for(var J=[],se=0,ce=j.length,me=!X;se<ce;se++)!N(j[se],se)!==me&&J.push(j[se]);return J},map:function(j,N,X){var J,se,ce=0,me=[];if(C(j))for(J=j.length;ce<J;ce++)(se=N(j[ce],ce,X))!=null&&me.push(se);else for(ce in j)(se=N(j[ce],ce,X))!=null&&me.push(se);return o(me)},guid:1,support:d}),typeof Symbol=="function"&&(b.fn[Symbol.iterator]=r[Symbol.iterator]),b.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(j,N){f["[object "+N+"]"]=N.toLowerCase()});var M=r.pop,k=r.sort,P=r.splice,F="[\\x20\\t\\r\\n\\f]",I=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g");b.contains=function(j,N){var X=N&&N.parentNode;return j===X||!(!X||X.nodeType!==1||!(j.contains?j.contains(X):j.compareDocumentPosition&&16&j.compareDocumentPosition(X)))};var B=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function H(j,N){return N?j==="\0"?"ï¿½":j.slice(0,-1)+"\\"+j.charCodeAt(j.length-1).toString(16)+" ":"\\"+j}b.escapeSelector=function(j){return(j+"").replace(B,H)};var G=m,W=s;(function(){var j,N,X,J,se,ce,me,Oe,Pe,He,it=W,mt=b.expando,tt=0,wt=0,Ot=z(),qt=z(),St=z(),jr=z(),kr=function(_e,Ie){return _e===Ie&&(se=!0),0},Hr="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",bn="(?:\\\\[\\da-fA-F]{1,6}"+F+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",ir="\\["+F+"*("+bn+")(?:"+F+"*([*^$|!~]?=)"+F+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+bn+"))|)"+F+"*\\]",ur=":("+bn+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+ir+")*)|.*)\\)|)",lr=new RegExp(F+"+","g"),Tr=new RegExp("^"+F+"*,"+F+"*"),Wr=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),qs=new RegExp(F+"|>"),_n=new RegExp(ur),Ti=new RegExp("^"+bn+"$"),jn={ID:new RegExp("^#("+bn+")"),CLASS:new RegExp("^\\.("+bn+")"),TAG:new RegExp("^("+bn+"|[*])"),ATTR:new RegExp("^"+ir),PSEUDO:new RegExp("^"+ur),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+Hr+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},Fn=/^(?:input|select|textarea|button)$/i,di=/^h\d$/i,$r=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rr=/[+~]/,Er=new RegExp("\\\\[\\da-fA-F]{1,6}"+F+"?|\\\\([^\\r\\n\\f])","g"),_=function(_e,Ie){var $e="0x"+_e.slice(1)-65536;return Ie||($e<0?String.fromCharCode($e+65536):String.fromCharCode($e>>10|55296,1023&$e|56320))},E=function(){Ge()},L=dt(function(_e){return _e.disabled===!0&&A(_e,"fieldset")},{dir:"parentNode",next:"legend"});try{it.apply(r=n.call(G.childNodes),G.childNodes),r[G.childNodes.length].nodeType}catch{it={apply:function(Ie,$e){W.apply(Ie,n.call($e))},call:function(Ie){W.apply(Ie,n.call(arguments,1))}}}function R(_e,Ie,$e,rt){var pt,Lt,Pt,At,Tt,Gt,zt,It=Ie&&Ie.ownerDocument,Xt=Ie?Ie.nodeType:9;if($e=$e||[],typeof _e!="string"||!_e||Xt!==1&&Xt!==9&&Xt!==11)return $e;if(!rt&&(Ge(Ie),Ie=Ie||ce,Oe)){if(Xt!==11&&(Tt=$r.exec(_e)))if(pt=Tt[1]){if(Xt===9){if(!(Pt=Ie.getElementById(pt)))return $e;if(Pt.id===pt)return it.call($e,Pt),$e}else if(It&&(Pt=It.getElementById(pt))&&R.contains(Ie,Pt)&&Pt.id===pt)return it.call($e,Pt),$e}else{if(Tt[2])return it.apply($e,Ie.getElementsByTagName(_e)),$e;if((pt=Tt[3])&&Ie.getElementsByClassName)return it.apply($e,Ie.getElementsByClassName(pt)),$e}if(!(jr[_e+" "]||Pe&&Pe.test(_e))){if(zt=_e,It=Ie,Xt===1&&(qs.test(_e)||Wr.test(_e))){for((It=rr.test(_e)&&We(Ie.parentNode)||Ie)==Ie&&d.scope||((At=Ie.getAttribute("id"))?At=b.escapeSelector(At):Ie.setAttribute("id",At=mt)),Lt=(Gt=vt(_e)).length;Lt--;)Gt[Lt]=(At?"#"+At:":scope")+" "+Qe(Gt[Lt]);zt=Gt.join(",")}try{return it.apply($e,It.querySelectorAll(zt)),$e}catch{jr(_e,!0)}finally{At===mt&&Ie.removeAttribute("id")}}}return Bt(_e.replace(I,"$1"),Ie,$e,rt)}function z(){var _e=[];return function Ie($e,rt){return _e.push($e+" ")>N.cacheLength&&delete Ie[_e.shift()],Ie[$e+" "]=rt}}function Y(_e){return _e[mt]=!0,_e}function K(_e){var Ie=ce.createElement("fieldset");try{return!!_e(Ie)}catch{return!1}finally{Ie.parentNode&&Ie.parentNode.removeChild(Ie),Ie=null}}function ue(_e){return function(Ie){return A(Ie,"input")&&Ie.type===_e}}function be(_e){return function(Ie){return(A(Ie,"input")||A(Ie,"button"))&&Ie.type===_e}}function ve(_e){return function(Ie){return"form"in Ie?Ie.parentNode&&Ie.disabled===!1?"label"in Ie?"label"in Ie.parentNode?Ie.parentNode.disabled===_e:Ie.disabled===_e:Ie.isDisabled===_e||Ie.isDisabled!==!_e&&L(Ie)===_e:Ie.disabled===_e:"label"in Ie&&Ie.disabled===_e}}function ke(_e){return Y(function(Ie){return Ie=+Ie,Y(function($e,rt){for(var pt,Lt=_e([],$e.length,Ie),Pt=Lt.length;Pt--;)$e[pt=Lt[Pt]]&&($e[pt]=!(rt[pt]=$e[pt]))})})}function We(_e){return _e&&typeof _e.getElementsByTagName<"u"&&_e}function Ge(_e){var Ie,$e=_e?_e.ownerDocument||_e:G;return $e!=ce&&$e.nodeType===9&&$e.documentElement&&(me=(ce=$e).documentElement,Oe=!b.isXMLDoc(ce),He=me.matches||me.webkitMatchesSelector||me.msMatchesSelector,me.msMatchesSelector&&G!=ce&&(Ie=ce.defaultView)&&Ie.top!==Ie&&Ie.addEventListener("unload",E),d.getById=K(function(rt){return me.appendChild(rt).id=b.expando,!ce.getElementsByName||!ce.getElementsByName(b.expando).length}),d.disconnectedMatch=K(function(rt){return He.call(rt,"*")}),d.scope=K(function(){return ce.querySelectorAll(":scope")}),d.cssHas=K(function(){try{return ce.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),d.getById?(N.filter.ID=function(rt){var pt=rt.replace(Er,_);return function(Lt){return Lt.getAttribute("id")===pt}},N.find.ID=function(rt,pt){if(typeof pt.getElementById<"u"&&Oe){var Lt=pt.getElementById(rt);return Lt?[Lt]:[]}}):(N.filter.ID=function(rt){var pt=rt.replace(Er,_);return function(Lt){var Pt=typeof Lt.getAttributeNode<"u"&&Lt.getAttributeNode("id");return Pt&&Pt.value===pt}},N.find.ID=function(rt,pt){if(typeof pt.getElementById<"u"&&Oe){var Lt,Pt,At,Tt=pt.getElementById(rt);if(Tt){if((Lt=Tt.getAttributeNode("id"))&&Lt.value===rt)return[Tt];for(At=pt.getElementsByName(rt),Pt=0;Tt=At[Pt++];)if((Lt=Tt.getAttributeNode("id"))&&Lt.value===rt)return[Tt]}return[]}}),N.find.TAG=function(rt,pt){return typeof pt.getElementsByTagName<"u"?pt.getElementsByTagName(rt):pt.querySelectorAll(rt)},N.find.CLASS=function(rt,pt){if(typeof pt.getElementsByClassName<"u"&&Oe)return pt.getElementsByClassName(rt)},Pe=[],K(function(rt){var pt;me.appendChild(rt).innerHTML="<a id='"+mt+"' href='' disabled='disabled'></a><select id='"+mt+"-\r\\' disabled='disabled'><option selected=''></option></select>",rt.querySelectorAll("[selected]").length||Pe.push("\\["+F+"*(?:value|"+Hr+")"),rt.querySelectorAll("[id~="+mt+"-]").length||Pe.push("~="),rt.querySelectorAll("a#"+mt+"+*").length||Pe.push(".#.+[+~]"),rt.querySelectorAll(":checked").length||Pe.push(":checked"),(pt=ce.createElement("input")).setAttribute("type","hidden"),rt.appendChild(pt).setAttribute("name","D"),me.appendChild(rt).disabled=!0,rt.querySelectorAll(":disabled").length!==2&&Pe.push(":enabled",":disabled"),(pt=ce.createElement("input")).setAttribute("name",""),rt.appendChild(pt),rt.querySelectorAll("[name='']").length||Pe.push("\\["+F+"*name"+F+"*="+F+`*(?:''|"")`)}),d.cssHas||Pe.push(":has"),Pe=Pe.length&&new RegExp(Pe.join("|")),kr=function(rt,pt){if(rt===pt)return se=!0,0;var Lt=!rt.compareDocumentPosition-!pt.compareDocumentPosition;return Lt||(1&(Lt=(rt.ownerDocument||rt)==(pt.ownerDocument||pt)?rt.compareDocumentPosition(pt):1)||!d.sortDetached&&pt.compareDocumentPosition(rt)===Lt?rt===ce||rt.ownerDocument==G&&R.contains(G,rt)?-1:pt===ce||pt.ownerDocument==G&&R.contains(G,pt)?1:J?a.call(J,rt)-a.call(J,pt):0:4&Lt?-1:1)}),ce}for(j in R.matches=function(_e,Ie){return R(_e,null,null,Ie)},R.matchesSelector=function(_e,Ie){if(Ge(_e),Oe&&!jr[Ie+" "]&&(!Pe||!Pe.test(Ie)))try{var $e=He.call(_e,Ie);if($e||d.disconnectedMatch||_e.document&&_e.document.nodeType!==11)return $e}catch{jr(Ie,!0)}return 0<R(Ie,ce,null,[_e]).length},R.contains=function(_e,Ie){return(_e.ownerDocument||_e)!=ce&&Ge(_e),b.contains(_e,Ie)},R.attr=function(_e,Ie){(_e.ownerDocument||_e)!=ce&&Ge(_e);var $e=N.attrHandle[Ie.toLowerCase()],rt=$e&&l.call(N.attrHandle,Ie.toLowerCase())?$e(_e,Ie,!Oe):void 0;return rt!==void 0?rt:_e.getAttribute(Ie)},R.error=function(_e){throw new Error("Syntax error, unrecognized expression: "+_e)},b.uniqueSort=function(_e){var Ie,$e=[],rt=0,pt=0;if(se=!d.sortStable,J=!d.sortStable&&n.call(_e,0),k.call(_e,kr),se){for(;Ie=_e[pt++];)Ie===_e[pt]&&(rt=$e.push(pt));for(;rt--;)P.call(_e,$e[rt],1)}return J=null,_e},b.fn.uniqueSort=function(){return this.pushStack(b.uniqueSort(n.apply(this)))},(N=b.expr={cacheLength:50,createPseudo:Y,match:jn,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(_e){return _e[1]=_e[1].replace(Er,_),_e[3]=(_e[3]||_e[4]||_e[5]||"").replace(Er,_),_e[2]==="~="&&(_e[3]=" "+_e[3]+" "),_e.slice(0,4)},CHILD:function(_e){return _e[1]=_e[1].toLowerCase(),_e[1].slice(0,3)==="nth"?(_e[3]||R.error(_e[0]),_e[4]=+(_e[4]?_e[5]+(_e[6]||1):2*(_e[3]==="even"||_e[3]==="odd")),_e[5]=+(_e[7]+_e[8]||_e[3]==="odd")):_e[3]&&R.error(_e[0]),_e},PSEUDO:function(_e){var Ie,$e=!_e[6]&&_e[2];return jn.CHILD.test(_e[0])?null:(_e[3]?_e[2]=_e[4]||_e[5]||"":$e&&_n.test($e)&&(Ie=vt($e,!0))&&(Ie=$e.indexOf(")",$e.length-Ie)-$e.length)&&(_e[0]=_e[0].slice(0,Ie),_e[2]=$e.slice(0,Ie)),_e.slice(0,3))}},filter:{TAG:function(_e){var Ie=_e.replace(Er,_).toLowerCase();return _e==="*"?function(){return!0}:function($e){return A($e,Ie)}},CLASS:function(_e){var Ie=Ot[_e+" "];return Ie||(Ie=new RegExp("(^|"+F+")"+_e+"("+F+"|$)"))&&Ot(_e,function($e){return Ie.test(typeof $e.className=="string"&&$e.className||typeof $e.getAttribute<"u"&&$e.getAttribute("class")||"")})},ATTR:function(_e,Ie,$e){return function(rt){var pt=R.attr(rt,_e);return pt==null?Ie==="!=":!Ie||(pt+="",Ie==="="?pt===$e:Ie==="!="?pt!==$e:Ie==="^="?$e&&pt.indexOf($e)===0:Ie==="*="?$e&&-1<pt.indexOf($e):Ie==="$="?$e&&pt.slice(-$e.length)===$e:Ie==="~="?-1<(" "+pt.replace(lr," ")+" ").indexOf($e):Ie==="|="&&(pt===$e||pt.slice(0,$e.length+1)===$e+"-"))}},CHILD:function(_e,Ie,$e,rt,pt){var Lt=_e.slice(0,3)!=="nth",Pt=_e.slice(-4)!=="last",At=Ie==="of-type";return rt===1&&pt===0?function(Tt){return!!Tt.parentNode}:function(Tt,Gt,zt){var It,Xt,kt,sr,Lr,wr=Lt!==Pt?"nextSibling":"previousSibling",qr=Tt.parentNode,dn=At&&Tt.nodeName.toLowerCase(),Cn=!zt&&!At,Sr=!1;if(qr){if(Lt){for(;wr;){for(kt=Tt;kt=kt[wr];)if(At?A(kt,dn):kt.nodeType===1)return!1;Lr=wr=_e==="only"&&!Lr&&"nextSibling"}return!0}if(Lr=[Pt?qr.firstChild:qr.lastChild],Pt&&Cn){for(Sr=(sr=(It=(Xt=qr[mt]||(qr[mt]={}))[_e]||[])[0]===tt&&It[1])&&It[2],kt=sr&&qr.childNodes[sr];kt=++sr&&kt&&kt[wr]||(Sr=sr=0)||Lr.pop();)if(kt.nodeType===1&&++Sr&&kt===Tt){Xt[_e]=[tt,sr,Sr];break}}else if(Cn&&(Sr=sr=(It=(Xt=Tt[mt]||(Tt[mt]={}))[_e]||[])[0]===tt&&It[1]),Sr===!1)for(;(kt=++sr&&kt&&kt[wr]||(Sr=sr=0)||Lr.pop())&&!((At?A(kt,dn):kt.nodeType===1)&&++Sr&&(Cn&&((Xt=kt[mt]||(kt[mt]={}))[_e]=[tt,Sr]),kt===Tt)););return(Sr-=pt)===rt||Sr%rt==0&&0<=Sr/rt}}},PSEUDO:function(_e,Ie){var $e,rt=N.pseudos[_e]||N.setFilters[_e.toLowerCase()]||R.error("unsupported pseudo: "+_e);return rt[mt]?rt(Ie):1<rt.length?($e=[_e,_e,"",Ie],N.setFilters.hasOwnProperty(_e.toLowerCase())?Y(function(pt,Lt){for(var Pt,At=rt(pt,Ie),Tt=At.length;Tt--;)pt[Pt=a.call(pt,At[Tt])]=!(Lt[Pt]=At[Tt])}):function(pt){return rt(pt,0,$e)}):rt}},pseudos:{not:Y(function(_e){var Ie=[],$e=[],rt=Ft(_e.replace(I,"$1"));return rt[mt]?Y(function(pt,Lt,Pt,At){for(var Tt,Gt=rt(pt,null,At,[]),zt=pt.length;zt--;)(Tt=Gt[zt])&&(pt[zt]=!(Lt[zt]=Tt))}):function(pt,Lt,Pt){return Ie[0]=pt,rt(Ie,null,Pt,$e),Ie[0]=null,!$e.pop()}}),has:Y(function(_e){return function(Ie){return 0<R(_e,Ie).length}}),contains:Y(function(_e){return _e=_e.replace(Er,_),function(Ie){return-1<(Ie.textContent||b.text(Ie)).indexOf(_e)}}),lang:Y(function(_e){return Ti.test(_e||"")||R.error("unsupported lang: "+_e),_e=_e.replace(Er,_).toLowerCase(),function(Ie){var $e;do if($e=Oe?Ie.lang:Ie.getAttribute("xml:lang")||Ie.getAttribute("lang"))return($e=$e.toLowerCase())===_e||$e.indexOf(_e+"-")===0;while((Ie=Ie.parentNode)&&Ie.nodeType===1);return!1}}),target:function(_e){var Ie=S.location&&S.location.hash;return Ie&&Ie.slice(1)===_e.id},root:function(_e){return _e===me},focus:function(_e){return _e===function(){try{return ce.activeElement}catch{}}()&&ce.hasFocus()&&!!(_e.type||_e.href||~_e.tabIndex)},enabled:ve(!1),disabled:ve(!0),checked:function(_e){return A(_e,"input")&&!!_e.checked||A(_e,"option")&&!!_e.selected},selected:function(_e){return _e.parentNode&&_e.parentNode.selectedIndex,_e.selected===!0},empty:function(_e){for(_e=_e.firstChild;_e;_e=_e.nextSibling)if(_e.nodeType<6)return!1;return!0},parent:function(_e){return!N.pseudos.empty(_e)},header:function(_e){return di.test(_e.nodeName)},input:function(_e){return Fn.test(_e.nodeName)},button:function(_e){return A(_e,"input")&&_e.type==="button"||A(_e,"button")},text:function(_e){var Ie;return A(_e,"input")&&_e.type==="text"&&((Ie=_e.getAttribute("type"))==null||Ie.toLowerCase()==="text")},first:ke(function(){return[0]}),last:ke(function(_e,Ie){return[Ie-1]}),eq:ke(function(_e,Ie,$e){return[$e<0?$e+Ie:$e]}),even:ke(function(_e,Ie){for(var $e=0;$e<Ie;$e+=2)_e.push($e);return _e}),odd:ke(function(_e,Ie){for(var $e=1;$e<Ie;$e+=2)_e.push($e);return _e}),lt:ke(function(_e,Ie,$e){var rt;for(rt=$e<0?$e+Ie:Ie<$e?Ie:$e;0<=--rt;)_e.push(rt);return _e}),gt:ke(function(_e,Ie,$e){for(var rt=$e<0?$e+Ie:$e;++rt<Ie;)_e.push(rt);return _e})}}).pseudos.nth=N.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})N.pseudos[j]=ue(j);for(j in{submit:!0,reset:!0})N.pseudos[j]=be(j);function je(){}function vt(_e,Ie){var $e,rt,pt,Lt,Pt,At,Tt,Gt=qt[_e+" "];if(Gt)return Ie?0:Gt.slice(0);for(Pt=_e,At=[],Tt=N.preFilter;Pt;){for(Lt in $e&&!(rt=Tr.exec(Pt))||(rt&&(Pt=Pt.slice(rt[0].length)||Pt),At.push(pt=[])),$e=!1,(rt=Wr.exec(Pt))&&($e=rt.shift(),pt.push({value:$e,type:rt[0].replace(I," ")}),Pt=Pt.slice($e.length)),N.filter)!(rt=jn[Lt].exec(Pt))||Tt[Lt]&&!(rt=Tt[Lt](rt))||($e=rt.shift(),pt.push({value:$e,type:Lt,matches:rt}),Pt=Pt.slice($e.length));if(!$e)break}return Ie?Pt.length:Pt?R.error(_e):qt(_e,At).slice(0)}function Qe(_e){for(var Ie=0,$e=_e.length,rt="";Ie<$e;Ie++)rt+=_e[Ie].value;return rt}function dt(_e,Ie,$e){var rt=Ie.dir,pt=Ie.next,Lt=pt||rt,Pt=$e&&Lt==="parentNode",At=wt++;return Ie.first?function(Tt,Gt,zt){for(;Tt=Tt[rt];)if(Tt.nodeType===1||Pt)return _e(Tt,Gt,zt);return!1}:function(Tt,Gt,zt){var It,Xt,kt=[tt,At];if(zt){for(;Tt=Tt[rt];)if((Tt.nodeType===1||Pt)&&_e(Tt,Gt,zt))return!0}else for(;Tt=Tt[rt];)if(Tt.nodeType===1||Pt)if(Xt=Tt[mt]||(Tt[mt]={}),pt&&A(Tt,pt))Tt=Tt[rt]||Tt;else{if((It=Xt[Lt])&&It[0]===tt&&It[1]===At)return kt[2]=It[2];if((Xt[Lt]=kt)[2]=_e(Tt,Gt,zt))return!0}return!1}}function Ye(_e){return 1<_e.length?function(Ie,$e,rt){for(var pt=_e.length;pt--;)if(!_e[pt](Ie,$e,rt))return!1;return!0}:_e[0]}function Xe(_e,Ie,$e,rt,pt){for(var Lt,Pt=[],At=0,Tt=_e.length,Gt=Ie!=null;At<Tt;At++)(Lt=_e[At])&&($e&&!$e(Lt,rt,pt)||(Pt.push(Lt),Gt&&Ie.push(At)));return Pt}function Nt(_e,Ie,$e,rt,pt,Lt){return rt&&!rt[mt]&&(rt=Nt(rt)),pt&&!pt[mt]&&(pt=Nt(pt,Lt)),Y(function(Pt,At,Tt,Gt){var zt,It,Xt,kt,sr=[],Lr=[],wr=At.length,qr=Pt||function(Cn,Sr,Ei){for(var An=0,Oo=Sr.length;An<Oo;An++)R(Cn,Sr[An],Ei);return Ei}(Ie||"*",Tt.nodeType?[Tt]:Tt,[]),dn=!_e||!Pt&&Ie?qr:Xe(qr,sr,_e,Tt,Gt);if($e?$e(dn,kt=pt||(Pt?_e:wr||rt)?[]:At,Tt,Gt):kt=dn,rt)for(zt=Xe(kt,Lr),rt(zt,[],Tt,Gt),It=zt.length;It--;)(Xt=zt[It])&&(kt[Lr[It]]=!(dn[Lr[It]]=Xt));if(Pt){if(pt||_e){if(pt){for(zt=[],It=kt.length;It--;)(Xt=kt[It])&&zt.push(dn[It]=Xt);pt(null,kt=[],zt,Gt)}for(It=kt.length;It--;)(Xt=kt[It])&&-1<(zt=pt?a.call(Pt,Xt):sr[It])&&(Pt[zt]=!(At[zt]=Xt))}}else kt=Xe(kt===At?kt.splice(wr,kt.length):kt),pt?pt(null,At,kt,Gt):it.apply(At,kt)})}function Zt(_e){for(var Ie,$e,rt,pt=_e.length,Lt=N.relative[_e[0].type],Pt=Lt||N.relative[" "],At=Lt?1:0,Tt=dt(function(It){return It===Ie},Pt,!0),Gt=dt(function(It){return-1<a.call(Ie,It)},Pt,!0),zt=[function(It,Xt,kt){var sr=!Lt&&(kt||Xt!=X)||((Ie=Xt).nodeType?Tt(It,Xt,kt):Gt(It,Xt,kt));return Ie=null,sr}];At<pt;At++)if($e=N.relative[_e[At].type])zt=[dt(Ye(zt),$e)];else{if(($e=N.filter[_e[At].type].apply(null,_e[At].matches))[mt]){for(rt=++At;rt<pt&&!N.relative[_e[rt].type];rt++);return Nt(1<At&&Ye(zt),1<At&&Qe(_e.slice(0,At-1).concat({value:_e[At-2].type===" "?"*":""})).replace(I,"$1"),$e,At<rt&&Zt(_e.slice(At,rt)),rt<pt&&Zt(_e=_e.slice(rt)),rt<pt&&Qe(_e))}zt.push($e)}return Ye(zt)}function Ft(_e,Ie){var $e,rt,pt,Lt,Pt,At,Tt=[],Gt=[],zt=St[_e+" "];if(!zt){for(Ie||(Ie=vt(_e)),$e=Ie.length;$e--;)(zt=Zt(Ie[$e]))[mt]?Tt.push(zt):Gt.push(zt);(zt=St(_e,(rt=Gt,Lt=0<(pt=Tt).length,Pt=0<rt.length,At=function(It,Xt,kt,sr,Lr){var wr,qr,dn,Cn=0,Sr="0",Ei=It&&[],An=[],Oo=X,Zl=It||Pt&&N.find.TAG("*",Lr),Kl=tt+=Oo==null?1:Math.random()||.1,uh=Zl.length;for(Lr&&(X=Xt==ce||Xt||Lr);Sr!==uh&&(wr=Zl[Sr])!=null;Sr++){if(Pt&&wr){for(qr=0,Xt||wr.ownerDocument==ce||(Ge(wr),kt=!Oe);dn=rt[qr++];)if(dn(wr,Xt||ce,kt)){it.call(sr,wr);break}Lr&&(tt=Kl)}Lt&&((wr=!dn&&wr)&&Cn--,It&&Ei.push(wr))}if(Cn+=Sr,Lt&&Sr!==Cn){for(qr=0;dn=pt[qr++];)dn(Ei,An,Xt,kt);if(It){if(0<Cn)for(;Sr--;)Ei[Sr]||An[Sr]||(An[Sr]=M.call(sr));An=Xe(An)}it.apply(sr,An),Lr&&!It&&0<An.length&&1<Cn+pt.length&&b.uniqueSort(sr)}return Lr&&(tt=Kl,X=Oo),Ei},Lt?Y(At):At))).selector=_e}return zt}function Bt(_e,Ie,$e,rt){var pt,Lt,Pt,At,Tt,Gt=typeof _e=="function"&&_e,zt=!rt&&vt(_e=Gt.selector||_e);if($e=$e||[],zt.length===1){if(2<(Lt=zt[0]=zt[0].slice(0)).length&&(Pt=Lt[0]).type==="ID"&&Ie.nodeType===9&&Oe&&N.relative[Lt[1].type]){if(!(Ie=(N.find.ID(Pt.matches[0].replace(Er,_),Ie)||[])[0]))return $e;Gt&&(Ie=Ie.parentNode),_e=_e.slice(Lt.shift().value.length)}for(pt=jn.needsContext.test(_e)?0:Lt.length;pt--&&(Pt=Lt[pt],!N.relative[At=Pt.type]);)if((Tt=N.find[At])&&(rt=Tt(Pt.matches[0].replace(Er,_),rr.test(Lt[0].type)&&We(Ie.parentNode)||Ie))){if(Lt.splice(pt,1),!(_e=rt.length&&Qe(Lt)))return it.apply($e,rt),$e;break}}return(Gt||Ft(_e,zt))(rt,Ie,!Oe,$e,!Ie||rr.test(_e)&&We(Ie.parentNode)||Ie),$e}je.prototype=N.filters=N.pseudos,N.setFilters=new je,d.sortStable=mt.split("").sort(kr).join("")===mt,Ge(),d.sortDetached=K(function(_e){return 1&_e.compareDocumentPosition(ce.createElement("fieldset"))}),b.find=R,b.expr[":"]=b.expr.pseudos,b.unique=b.uniqueSort,R.compile=Ft,R.select=Bt,R.setDocument=Ge,R.tokenize=vt,R.escape=b.escapeSelector,R.getText=b.text,R.isXML=b.isXMLDoc,R.selectors=b.expr,R.support=b.support,R.uniqueSort=b.uniqueSort})();var Q=function(j,N,X){for(var J=[],se=X!==void 0;(j=j[N])&&j.nodeType!==9;)if(j.nodeType===1){if(se&&b(j).is(X))break;J.push(j)}return J},ne=function(j,N){for(var X=[];j;j=j.nextSibling)j.nodeType===1&&j!==N&&X.push(j);return X},U=b.expr.match.needsContext,D=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function O(j,N,X){return y(N)?b.grep(j,function(J,se){return!!N.call(J,se,J)!==X}):N.nodeType?b.grep(j,function(J){return J===N!==X}):typeof N!="string"?b.grep(j,function(J){return-1<a.call(N,J)!==X}):b.filter(N,j,X)}b.filter=function(j,N,X){var J=N[0];return X&&(j=":not("+j+")"),N.length===1&&J.nodeType===1?b.find.matchesSelector(J,j)?[J]:[]:b.find.matches(j,b.grep(N,function(se){return se.nodeType===1}))},b.fn.extend({find:function(j){var N,X,J=this.length,se=this;if(typeof j!="string")return this.pushStack(b(j).filter(function(){for(N=0;N<J;N++)if(b.contains(se[N],this))return!0}));for(X=this.pushStack([]),N=0;N<J;N++)b.find(j,se[N],X);return 1<J?b.uniqueSort(X):X},filter:function(j){return this.pushStack(O(this,j||[],!1))},not:function(j){return this.pushStack(O(this,j||[],!0))},is:function(j){return!!O(this,typeof j=="string"&&U.test(j)?b(j):j||[],!1).length}});var V,Z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(b.fn.init=function(j,N,X){var J,se;if(!j)return this;if(X=X||V,typeof j=="string"){if(!(J=j[0]==="<"&&j[j.length-1]===">"&&3<=j.length?[null,j,null]:Z.exec(j))||!J[1]&&N)return!N||N.jquery?(N||X).find(j):this.constructor(N).find(j);if(J[1]){if(N=N instanceof b?N[0]:N,b.merge(this,b.parseHTML(J[1],N&&N.nodeType?N.ownerDocument||N:m,!0)),D.test(J[1])&&b.isPlainObject(N))for(J in N)y(this[J])?this[J](N[J]):this.attr(J,N[J]);return this}return(se=m.getElementById(J[2]))&&(this[0]=se,this.length=1),this}return j.nodeType?(this[0]=j,this.length=1,this):y(j)?X.ready!==void 0?X.ready(j):j(b):b.makeArray(j,this)}).prototype=b.fn,V=b(m);var ie=/^(?:parents|prev(?:Until|All))/,re={children:!0,contents:!0,next:!0,prev:!0};function ge(j,N){for(;(j=j[N])&&j.nodeType!==1;);return j}b.fn.extend({has:function(j){var N=b(j,this),X=N.length;return this.filter(function(){for(var J=0;J<X;J++)if(b.contains(this,N[J]))return!0})},closest:function(j,N){var X,J=0,se=this.length,ce=[],me=typeof j!="string"&&b(j);if(!U.test(j)){for(;J<se;J++)for(X=this[J];X&&X!==N;X=X.parentNode)if(X.nodeType<11&&(me?-1<me.index(X):X.nodeType===1&&b.find.matchesSelector(X,j))){ce.push(X);break}}return this.pushStack(1<ce.length?b.uniqueSort(ce):ce)},index:function(j){return j?typeof j=="string"?a.call(b(j),this[0]):a.call(this,j.jquery?j[0]:j):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(j,N){return this.pushStack(b.uniqueSort(b.merge(this.get(),b(j,N))))},addBack:function(j){return this.add(j==null?this.prevObject:this.prevObject.filter(j))}}),b.each({parent:function(j){var N=j.parentNode;return N&&N.nodeType!==11?N:null},parents:function(j){return Q(j,"parentNode")},parentsUntil:function(j,N,X){return Q(j,"parentNode",X)},next:function(j){return ge(j,"nextSibling")},prev:function(j){return ge(j,"previousSibling")},nextAll:function(j){return Q(j,"nextSibling")},prevAll:function(j){return Q(j,"previousSibling")},nextUntil:function(j,N,X){return Q(j,"nextSibling",X)},prevUntil:function(j,N,X){return Q(j,"previousSibling",X)},siblings:function(j){return ne((j.parentNode||{}).firstChild,j)},children:function(j){return ne(j.firstChild)},contents:function(j){return j.contentDocument!=null&&i(j.contentDocument)?j.contentDocument:(A(j,"template")&&(j=j.content||j),b.merge([],j.childNodes))}},function(j,N){b.fn[j]=function(X,J){var se=b.map(this,N,X);return j.slice(-5)!=="Until"&&(J=X),J&&typeof J=="string"&&(se=b.filter(J,se)),1<this.length&&(re[j]||b.uniqueSort(se),ie.test(j)&&se.reverse()),this.pushStack(se)}});var ye=/[^\x20\t\r\n\f]+/g;function he(j){return j}function pe(j){throw j}function we(j,N,X,J){var se;try{j&&y(se=j.promise)?se.call(j).done(N).fail(X):j&&y(se=j.then)?se.call(j,N,X):N.apply(void 0,[j].slice(J))}catch(ce){X.apply(void 0,[ce])}}b.Callbacks=function(j){var N,X;j=typeof j=="string"?(N=j,X={},b.each(N.match(ye)||[],function(tt,wt){X[wt]=!0}),X):b.extend({},j);var J,se,ce,me,Oe=[],Pe=[],He=-1,it=function(){for(me=me||j.once,ce=J=!0;Pe.length;He=-1)for(se=Pe.shift();++He<Oe.length;)Oe[He].apply(se[0],se[1])===!1&&j.stopOnFalse&&(He=Oe.length,se=!1);j.memory||(se=!1),J=!1,me&&(Oe=se?[]:"")},mt={add:function(){return Oe&&(se&&!J&&(He=Oe.length-1,Pe.push(se)),function tt(wt){b.each(wt,function(Ot,qt){y(qt)?j.unique&&mt.has(qt)||Oe.push(qt):qt&&qt.length&&x(qt)!=="string"&&tt(qt)})}(arguments),se&&!J&&it()),this},remove:function(){return b.each(arguments,function(tt,wt){for(var Ot;-1<(Ot=b.inArray(wt,Oe,Ot));)Oe.splice(Ot,1),Ot<=He&&He--}),this},has:function(tt){return tt?-1<b.inArray(tt,Oe):0<Oe.length},empty:function(){return Oe&&(Oe=[]),this},disable:function(){return me=Pe=[],Oe=se="",this},disabled:function(){return!Oe},lock:function(){return me=Pe=[],se||J||(Oe=se=""),this},locked:function(){return!!me},fireWith:function(tt,wt){return me||(wt=[tt,(wt=wt||[]).slice?wt.slice():wt],Pe.push(wt),J||it()),this},fire:function(){return mt.fireWith(this,arguments),this},fired:function(){return!!ce}};return mt},b.extend({Deferred:function(j){var N=[["notify","progress",b.Callbacks("memory"),b.Callbacks("memory"),2],["resolve","done",b.Callbacks("once memory"),b.Callbacks("once memory"),0,"resolved"],["reject","fail",b.Callbacks("once memory"),b.Callbacks("once memory"),1,"rejected"]],X="pending",J={state:function(){return X},always:function(){return se.done(arguments).fail(arguments),this},catch:function(ce){return J.then(null,ce)},pipe:function(){var ce=arguments;return b.Deferred(function(me){b.each(N,function(Oe,Pe){var He=y(ce[Pe[4]])&&ce[Pe[4]];se[Pe[1]](function(){var it=He&&He.apply(this,arguments);it&&y(it.promise)?it.promise().progress(me.notify).done(me.resolve).fail(me.reject):me[Pe[0]+"With"](this,He?[it]:arguments)})}),ce=null}).promise()},then:function(ce,me,Oe){var Pe=0;function He(it,mt,tt,wt){return function(){var Ot=this,qt=arguments,St=function(){var kr,Hr;if(!(it<Pe)){if((kr=tt.apply(Ot,qt))===mt.promise())throw new TypeError("Thenable self-resolution");Hr=kr&&(typeof kr=="object"||typeof kr=="function")&&kr.then,y(Hr)?wt?Hr.call(kr,He(Pe,mt,he,wt),He(Pe,mt,pe,wt)):(Pe++,Hr.call(kr,He(Pe,mt,he,wt),He(Pe,mt,pe,wt),He(Pe,mt,he,mt.notifyWith))):(tt!==he&&(Ot=void 0,qt=[kr]),(wt||mt.resolveWith)(Ot,qt))}},jr=wt?St:function(){try{St()}catch(kr){b.Deferred.exceptionHook&&b.Deferred.exceptionHook(kr,jr.error),Pe<=it+1&&(tt!==pe&&(Ot=void 0,qt=[kr]),mt.rejectWith(Ot,qt))}};it?jr():(b.Deferred.getErrorHook?jr.error=b.Deferred.getErrorHook():b.Deferred.getStackHook&&(jr.error=b.Deferred.getStackHook()),S.setTimeout(jr))}}return b.Deferred(function(it){N[0][3].add(He(0,it,y(Oe)?Oe:he,it.notifyWith)),N[1][3].add(He(0,it,y(ce)?ce:he)),N[2][3].add(He(0,it,y(me)?me:pe))}).promise()},promise:function(ce){return ce!=null?b.extend(ce,J):J}},se={};return b.each(N,function(ce,me){var Oe=me[2],Pe=me[5];J[me[1]]=Oe.add,Pe&&Oe.add(function(){X=Pe},N[3-ce][2].disable,N[3-ce][3].disable,N[0][2].lock,N[0][3].lock),Oe.add(me[3].fire),se[me[0]]=function(){return se[me[0]+"With"](this===se?void 0:this,arguments),this},se[me[0]+"With"]=Oe.fireWith}),J.promise(se),j&&j.call(se,se),se},when:function(j){var N=arguments.length,X=N,J=Array(X),se=n.call(arguments),ce=b.Deferred(),me=function(Oe){return function(Pe){J[Oe]=this,se[Oe]=1<arguments.length?n.call(arguments):Pe,--N||ce.resolveWith(J,se)}};if(N<=1&&(we(j,ce.done(me(X)).resolve,ce.reject,!N),ce.state()==="pending"||y(se[X]&&se[X].then)))return ce.then();for(;X--;)we(se[X],me(X),ce.reject);return ce.promise()}});var oe=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;b.Deferred.exceptionHook=function(j,N){S.console&&S.console.warn&&j&&oe.test(j.name)&&S.console.warn("jQuery.Deferred exception: "+j.message,j.stack,N)},b.readyException=function(j){S.setTimeout(function(){throw j})};var fe=b.Deferred();function Ce(){m.removeEventListener("DOMContentLoaded",Ce),S.removeEventListener("load",Ce),b.ready()}b.fn.ready=function(j){return fe.then(j).catch(function(N){b.readyException(N)}),this},b.extend({isReady:!1,readyWait:1,ready:function(j){(j===!0?--b.readyWait:b.isReady)||(b.isReady=!0)!==j&&0<--b.readyWait||fe.resolveWith(m,[b])}}),b.ready.then=fe.then,m.readyState==="complete"||m.readyState!=="loading"&&!m.documentElement.doScroll?S.setTimeout(b.ready):(m.addEventListener("DOMContentLoaded",Ce),S.addEventListener("load",Ce));var Fe=function(j,N,X,J,se,ce,me){var Oe=0,Pe=j.length,He=X==null;if(x(X)==="object")for(Oe in se=!0,X)Fe(j,N,Oe,X[Oe],!0,ce,me);else if(J!==void 0&&(se=!0,y(J)||(me=!0),He&&(me?(N.call(j,J),N=null):(He=N,N=function(it,mt,tt){return He.call(b(it),tt)})),N))for(;Oe<Pe;Oe++)N(j[Oe],X,me?J:J.call(j[Oe],Oe,N(j[Oe],X)));return se?j:He?N.call(j):Pe?N(j[0],X):ce},Ae=/^-ms-/,De=/-([a-z])/g;function Be(j,N){return N.toUpperCase()}function st(j){return j.replace(Ae,"ms-").replace(De,Be)}var qe=function(j){return j.nodeType===1||j.nodeType===9||!+j.nodeType};function Et(){this.expando=b.expando+Et.uid++}Et.uid=1,Et.prototype={cache:function(j){var N=j[this.expando];return N||(N={},qe(j)&&(j.nodeType?j[this.expando]=N:Object.defineProperty(j,this.expando,{value:N,configurable:!0}))),N},set:function(j,N,X){var J,se=this.cache(j);if(typeof N=="string")se[st(N)]=X;else for(J in N)se[st(J)]=N[J];return se},get:function(j,N){return N===void 0?this.cache(j):j[this.expando]&&j[this.expando][st(N)]},access:function(j,N,X){return N===void 0||N&&typeof N=="string"&&X===void 0?this.get(j,N):(this.set(j,N,X),X!==void 0?X:N)},remove:function(j,N){var X,J=j[this.expando];if(J!==void 0){if(N!==void 0)for(X=(N=Array.isArray(N)?N.map(st):(N=st(N))in J?[N]:N.match(ye)||[]).length;X--;)delete J[N[X]];(N===void 0||b.isEmptyObject(J))&&(j.nodeType?j[this.expando]=void 0:delete j[this.expando])}},hasData:function(j){var N=j[this.expando];return N!==void 0&&!b.isEmptyObject(N)}};var de=new Et,le=new Et,Ue=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ze=/[A-Z]/g;function Me(j,N,X){var J,se;if(X===void 0&&j.nodeType===1)if(J="data-"+N.replace(Ze,"-$&").toLowerCase(),typeof(X=j.getAttribute(J))=="string"){try{X=(se=X)==="true"||se!=="false"&&(se==="null"?null:se===+se+""?+se:Ue.test(se)?JSON.parse(se):se)}catch{}le.set(j,N,X)}else X=void 0;return X}b.extend({hasData:function(j){return le.hasData(j)||de.hasData(j)},data:function(j,N,X){return le.access(j,N,X)},removeData:function(j,N){le.remove(j,N)},_data:function(j,N,X){return de.access(j,N,X)},_removeData:function(j,N){de.remove(j,N)}}),b.fn.extend({data:function(j,N){var X,J,se,ce=this[0],me=ce&&ce.attributes;if(j===void 0){if(this.length&&(se=le.get(ce),ce.nodeType===1&&!de.get(ce,"hasDataAttrs"))){for(X=me.length;X--;)me[X]&&(J=me[X].name).indexOf("data-")===0&&(J=st(J.slice(5)),Me(ce,J,se[J]));de.set(ce,"hasDataAttrs",!0)}return se}return typeof j=="object"?this.each(function(){le.set(this,j)}):Fe(this,function(Oe){var Pe;if(ce&&Oe===void 0)return(Pe=le.get(ce,j))!==void 0||(Pe=Me(ce,j))!==void 0?Pe:void 0;this.each(function(){le.set(this,j,Oe)})},null,N,1<arguments.length,null,!0)},removeData:function(j){return this.each(function(){le.remove(this,j)})}}),b.extend({queue:function(j,N,X){var J;if(j)return N=(N||"fx")+"queue",J=de.get(j,N),X&&(!J||Array.isArray(X)?J=de.access(j,N,b.makeArray(X)):J.push(X)),J||[]},dequeue:function(j,N){N=N||"fx";var X=b.queue(j,N),J=X.length,se=X.shift(),ce=b._queueHooks(j,N);se==="inprogress"&&(se=X.shift(),J--),se&&(N==="fx"&&X.unshift("inprogress"),delete ce.stop,se.call(j,function(){b.dequeue(j,N)},ce)),!J&&ce&&ce.empty.fire()},_queueHooks:function(j,N){var X=N+"queueHooks";return de.get(j,X)||de.access(j,X,{empty:b.Callbacks("once memory").add(function(){de.remove(j,[N+"queue",X])})})}}),b.fn.extend({queue:function(j,N){var X=2;return typeof j!="string"&&(N=j,j="fx",X--),arguments.length<X?b.queue(this[0],j):N===void 0?this:this.each(function(){var J=b.queue(this,j,N);b._queueHooks(this,j),j==="fx"&&J[0]!=="inprogress"&&b.dequeue(this,j)})},dequeue:function(j){return this.each(function(){b.dequeue(this,j)})},clearQueue:function(j){return this.queue(j||"fx",[])},promise:function(j,N){var X,J=1,se=b.Deferred(),ce=this,me=this.length,Oe=function(){--J||se.resolveWith(ce,[ce])};for(typeof j!="string"&&(N=j,j=void 0),j=j||"fx";me--;)(X=de.get(ce[me],j+"queueHooks"))&&X.empty&&(J++,X.empty.add(Oe));return Oe(),se.promise(N)}});var ze=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Re=new RegExp("^(?:([+-])=|)("+ze+")([a-z%]*)$","i"),q=["Top","Right","Bottom","Left"],te=m.documentElement,ee=function(j){return b.contains(j.ownerDocument,j)},ae={composed:!0};te.getRootNode&&(ee=function(j){return b.contains(j.ownerDocument,j)||j.getRootNode(ae)===j.ownerDocument});var Se=function(j,N){return(j=N||j).style.display==="none"||j.style.display===""&&ee(j)&&b.css(j,"display")==="none"};function Le(j,N,X,J){var se,ce,me=20,Oe=J?function(){return J.cur()}:function(){return b.css(j,N,"")},Pe=Oe(),He=X&&X[3]||(b.cssNumber[N]?"":"px"),it=j.nodeType&&(b.cssNumber[N]||He!=="px"&&+Pe)&&Re.exec(b.css(j,N));if(it&&it[3]!==He){for(Pe/=2,He=He||it[3],it=+Pe||1;me--;)b.style(j,N,it+He),(1-ce)*(1-(ce=Oe()/Pe||.5))<=0&&(me=0),it/=ce;it*=2,b.style(j,N,it+He),X=X||[]}return X&&(it=+it||+Pe||0,se=X[1]?it+(X[1]+1)*X[2]:+X[2],J&&(J.unit=He,J.start=it,J.end=se)),se}var Ne={};function at(j,N){for(var X,J,se,ce,me,Oe,Pe,He=[],it=0,mt=j.length;it<mt;it++)(J=j[it]).style&&(X=J.style.display,N?(X==="none"&&(He[it]=de.get(J,"display")||null,He[it]||(J.style.display="")),J.style.display===""&&Se(J)&&(He[it]=(Pe=me=ce=void 0,me=(se=J).ownerDocument,Oe=se.nodeName,(Pe=Ne[Oe])||(ce=me.body.appendChild(me.createElement(Oe)),Pe=b.css(ce,"display"),ce.parentNode.removeChild(ce),Pe==="none"&&(Pe="block"),Ne[Oe]=Pe)))):X!=="none"&&(He[it]="none",de.set(J,"display",X)));for(it=0;it<mt;it++)He[it]!=null&&(j[it].style.display=He[it]);return j}b.fn.extend({show:function(){return at(this,!0)},hide:function(){return at(this)},toggle:function(j){return typeof j=="boolean"?j?this.show():this.hide():this.each(function(){Se(this)?b(this).show():b(this).hide()})}});var ft,bt,Ee=/^(?:checkbox|radio)$/i,Ke=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ot=/^$|^module$|\/(?:java|ecma)script/i;ft=m.createDocumentFragment().appendChild(m.createElement("div")),(bt=m.createElement("input")).setAttribute("type","radio"),bt.setAttribute("checked","checked"),bt.setAttribute("name","t"),ft.appendChild(bt),d.checkClone=ft.cloneNode(!0).cloneNode(!0).lastChild.checked,ft.innerHTML="<textarea>x</textarea>",d.noCloneChecked=!!ft.cloneNode(!0).lastChild.defaultValue,ft.innerHTML="<option></option>",d.option=!!ft.lastChild;var ut={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function _t(j,N){var X;return X=typeof j.getElementsByTagName<"u"?j.getElementsByTagName(N||"*"):typeof j.querySelectorAll<"u"?j.querySelectorAll(N||"*"):[],N===void 0||N&&A(j,N)?b.merge([j],X):X}function jt(j,N){for(var X=0,J=j.length;X<J;X++)de.set(j[X],"globalEval",!N||de.get(N[X],"globalEval"))}ut.tbody=ut.tfoot=ut.colgroup=ut.caption=ut.thead,ut.th=ut.td,d.option||(ut.optgroup=ut.option=[1,"<select multiple='multiple'>","</select>"]);var $t=/<|&#?\w+;/;function ar(j,N,X,J,se){for(var ce,me,Oe,Pe,He,it,mt=N.createDocumentFragment(),tt=[],wt=0,Ot=j.length;wt<Ot;wt++)if((ce=j[wt])||ce===0)if(x(ce)==="object")b.merge(tt,ce.nodeType?[ce]:ce);else if($t.test(ce)){for(me=me||mt.appendChild(N.createElement("div")),Oe=(Ke.exec(ce)||["",""])[1].toLowerCase(),Pe=ut[Oe]||ut._default,me.innerHTML=Pe[1]+b.htmlPrefilter(ce)+Pe[2],it=Pe[0];it--;)me=me.lastChild;b.merge(tt,me.childNodes),(me=mt.firstChild).textContent=""}else tt.push(N.createTextNode(ce));for(mt.textContent="",wt=0;ce=tt[wt++];)if(J&&-1<b.inArray(ce,J))se&&se.push(ce);else if(He=ee(ce),me=_t(mt.appendChild(ce),"script"),He&&jt(me),X)for(it=0;ce=me[it++];)ot.test(ce.type||"")&&X.push(ce);return mt}var fr=/^([^.]*)(?:\.(.+)|)/;function Ut(){return!0}function er(){return!1}function Yt(j,N,X,J,se,ce){var me,Oe;if(typeof N=="object"){for(Oe in typeof X!="string"&&(J=J||X,X=void 0),N)Yt(j,Oe,X,J,N[Oe],ce);return j}if(J==null&&se==null?(se=X,J=X=void 0):se==null&&(typeof X=="string"?(se=J,J=void 0):(se=J,J=X,X=void 0)),se===!1)se=er;else if(!se)return j;return ce===1&&(me=se,(se=function(Pe){return b().off(Pe),me.apply(this,arguments)}).guid=me.guid||(me.guid=b.guid++)),j.each(function(){b.event.add(this,N,se,J,X)})}function _r(j,N,X){X?(de.set(j,N,!1),b.event.add(j,N,{namespace:!1,handler:function(J){var se,ce=de.get(this,N);if(1&J.isTrigger&&this[N]){if(ce)(b.event.special[N]||{}).delegateType&&J.stopPropagation();else if(ce=n.call(arguments),de.set(this,N,ce),this[N](),se=de.get(this,N),de.set(this,N,!1),ce!==se)return J.stopImmediatePropagation(),J.preventDefault(),se}else ce&&(de.set(this,N,b.event.trigger(ce[0],ce.slice(1),this)),J.stopPropagation(),J.isImmediatePropagationStopped=Ut)}})):de.get(j,N)===void 0&&b.event.add(j,N,Ut)}b.event={global:{},add:function(j,N,X,J,se){var ce,me,Oe,Pe,He,it,mt,tt,wt,Ot,qt,St=de.get(j);if(qe(j))for(X.handler&&(X=(ce=X).handler,se=ce.selector),se&&b.find.matchesSelector(te,se),X.guid||(X.guid=b.guid++),(Pe=St.events)||(Pe=St.events=Object.create(null)),(me=St.handle)||(me=St.handle=function(jr){return typeof b<"u"&&b.event.triggered!==jr.type?b.event.dispatch.apply(j,arguments):void 0}),He=(N=(N||"").match(ye)||[""]).length;He--;)wt=qt=(Oe=fr.exec(N[He])||[])[1],Ot=(Oe[2]||"").split(".").sort(),wt&&(mt=b.event.special[wt]||{},wt=(se?mt.delegateType:mt.bindType)||wt,mt=b.event.special[wt]||{},it=b.extend({type:wt,origType:qt,data:J,handler:X,guid:X.guid,selector:se,needsContext:se&&b.expr.match.needsContext.test(se),namespace:Ot.join(".")},ce),(tt=Pe[wt])||((tt=Pe[wt]=[]).delegateCount=0,mt.setup&&mt.setup.call(j,J,Ot,me)!==!1||j.addEventListener&&j.addEventListener(wt,me)),mt.add&&(mt.add.call(j,it),it.handler.guid||(it.handler.guid=X.guid)),se?tt.splice(tt.delegateCount++,0,it):tt.push(it),b.event.global[wt]=!0)},remove:function(j,N,X,J,se){var ce,me,Oe,Pe,He,it,mt,tt,wt,Ot,qt,St=de.hasData(j)&&de.get(j);if(St&&(Pe=St.events)){for(He=(N=(N||"").match(ye)||[""]).length;He--;)if(wt=qt=(Oe=fr.exec(N[He])||[])[1],Ot=(Oe[2]||"").split(".").sort(),wt){for(mt=b.event.special[wt]||{},tt=Pe[wt=(J?mt.delegateType:mt.bindType)||wt]||[],Oe=Oe[2]&&new RegExp("(^|\\.)"+Ot.join("\\.(?:.*\\.|)")+"(\\.|$)"),me=ce=tt.length;ce--;)it=tt[ce],!se&&qt!==it.origType||X&&X.guid!==it.guid||Oe&&!Oe.test(it.namespace)||J&&J!==it.selector&&(J!=="**"||!it.selector)||(tt.splice(ce,1),it.selector&&tt.delegateCount--,mt.remove&&mt.remove.call(j,it));me&&!tt.length&&(mt.teardown&&mt.teardown.call(j,Ot,St.handle)!==!1||b.removeEvent(j,wt,St.handle),delete Pe[wt])}else for(wt in Pe)b.event.remove(j,wt+N[He],X,J,!0);b.isEmptyObject(Pe)&&de.remove(j,"handle events")}},dispatch:function(j){var N,X,J,se,ce,me,Oe=new Array(arguments.length),Pe=b.event.fix(j),He=(de.get(this,"events")||Object.create(null))[Pe.type]||[],it=b.event.special[Pe.type]||{};for(Oe[0]=Pe,N=1;N<arguments.length;N++)Oe[N]=arguments[N];if(Pe.delegateTarget=this,!it.preDispatch||it.preDispatch.call(this,Pe)!==!1){for(me=b.event.handlers.call(this,Pe,He),N=0;(se=me[N++])&&!Pe.isPropagationStopped();)for(Pe.currentTarget=se.elem,X=0;(ce=se.handlers[X++])&&!Pe.isImmediatePropagationStopped();)Pe.rnamespace&&ce.namespace!==!1&&!Pe.rnamespace.test(ce.namespace)||(Pe.handleObj=ce,Pe.data=ce.data,(J=((b.event.special[ce.origType]||{}).handle||ce.handler).apply(se.elem,Oe))!==void 0&&(Pe.result=J)===!1&&(Pe.preventDefault(),Pe.stopPropagation()));return it.postDispatch&&it.postDispatch.call(this,Pe),Pe.result}},handlers:function(j,N){var X,J,se,ce,me,Oe=[],Pe=N.delegateCount,He=j.target;if(Pe&&He.nodeType&&!(j.type==="click"&&1<=j.button)){for(;He!==this;He=He.parentNode||this)if(He.nodeType===1&&(j.type!=="click"||He.disabled!==!0)){for(ce=[],me={},X=0;X<Pe;X++)me[se=(J=N[X]).selector+" "]===void 0&&(me[se]=J.needsContext?-1<b(se,this).index(He):b.find(se,this,null,[He]).length),me[se]&&ce.push(J);ce.length&&Oe.push({elem:He,handlers:ce})}}return He=this,Pe<N.length&&Oe.push({elem:He,handlers:N.slice(Pe)}),Oe},addProp:function(j,N){Object.defineProperty(b.Event.prototype,j,{enumerable:!0,configurable:!0,get:y(N)?function(){if(this.originalEvent)return N(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[j]},set:function(X){Object.defineProperty(this,j,{enumerable:!0,configurable:!0,writable:!0,value:X})}})},fix:function(j){return j[b.expando]?j:new b.Event(j)},special:{load:{noBubble:!0},click:{setup:function(j){var N=this||j;return Ee.test(N.type)&&N.click&&A(N,"input")&&_r(N,"click",!0),!1},trigger:function(j){var N=this||j;return Ee.test(N.type)&&N.click&&A(N,"input")&&_r(N,"click"),!0},_default:function(j){var N=j.target;return Ee.test(N.type)&&N.click&&A(N,"input")&&de.get(N,"click")||A(N,"a")}},beforeunload:{postDispatch:function(j){j.result!==void 0&&j.originalEvent&&(j.originalEvent.returnValue=j.result)}}}},b.removeEvent=function(j,N,X){j.removeEventListener&&j.removeEventListener(N,X)},b.Event=function(j,N){if(!(this instanceof b.Event))return new b.Event(j,N);j&&j.type?(this.originalEvent=j,this.type=j.type,this.isDefaultPrevented=j.defaultPrevented||j.defaultPrevented===void 0&&j.returnValue===!1?Ut:er,this.target=j.target&&j.target.nodeType===3?j.target.parentNode:j.target,this.currentTarget=j.currentTarget,this.relatedTarget=j.relatedTarget):this.type=j,N&&b.extend(this,N),this.timeStamp=j&&j.timeStamp||Date.now(),this[b.expando]=!0},b.Event.prototype={constructor:b.Event,isDefaultPrevented:er,isPropagationStopped:er,isImmediatePropagationStopped:er,isSimulated:!1,preventDefault:function(){var j=this.originalEvent;this.isDefaultPrevented=Ut,j&&!this.isSimulated&&j.preventDefault()},stopPropagation:function(){var j=this.originalEvent;this.isPropagationStopped=Ut,j&&!this.isSimulated&&j.stopPropagation()},stopImmediatePropagation:function(){var j=this.originalEvent;this.isImmediatePropagationStopped=Ut,j&&!this.isSimulated&&j.stopImmediatePropagation(),this.stopPropagation()}},b.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},b.event.addProp),b.each({focus:"focusin",blur:"focusout"},function(j,N){function X(J){if(m.documentMode){var se=de.get(this,"handle"),ce=b.event.fix(J);ce.type=J.type==="focusin"?"focus":"blur",ce.isSimulated=!0,se(J),ce.target===ce.currentTarget&&se(ce)}else b.event.simulate(N,J.target,b.event.fix(J))}b.event.special[j]={setup:function(){var J;if(_r(this,j,!0),!m.documentMode)return!1;(J=de.get(this,N))||this.addEventListener(N,X),de.set(this,N,(J||0)+1)},trigger:function(){return _r(this,j),!0},teardown:function(){var J;if(!m.documentMode)return!1;(J=de.get(this,N)-1)?de.set(this,N,J):(this.removeEventListener(N,X),de.remove(this,N))},_default:function(J){return de.get(J.target,j)},delegateType:N},b.event.special[N]={setup:function(){var J=this.ownerDocument||this.document||this,se=m.documentMode?this:J,ce=de.get(se,N);ce||(m.documentMode?this.addEventListener(N,X):J.addEventListener(j,X,!0)),de.set(se,N,(ce||0)+1)},teardown:function(){var J=this.ownerDocument||this.document||this,se=m.documentMode?this:J,ce=de.get(se,N)-1;ce?de.set(se,N,ce):(m.documentMode?this.removeEventListener(N,X):J.removeEventListener(j,X,!0),de.remove(se,N))}}}),b.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(j,N){b.event.special[j]={delegateType:N,bindType:N,handle:function(X){var J,se=X.relatedTarget,ce=X.handleObj;return se&&(se===this||b.contains(this,se))||(X.type=ce.origType,J=ce.handler.apply(this,arguments),X.type=N),J}}}),b.fn.extend({on:function(j,N,X,J){return Yt(this,j,N,X,J)},one:function(j,N,X,J){return Yt(this,j,N,X,J,1)},off:function(j,N,X){var J,se;if(j&&j.preventDefault&&j.handleObj)return J=j.handleObj,b(j.delegateTarget).off(J.namespace?J.origType+"."+J.namespace:J.origType,J.selector,J.handler),this;if(typeof j=="object"){for(se in j)this.off(se,N,j[se]);return this}return N!==!1&&typeof N!="function"||(X=N,N=void 0),X===!1&&(X=er),this.each(function(){b.event.remove(this,j,X,N)})}});var Ar=/<script|<style|<link/i,hr=/checked\s*(?:[^=]|=\s*.checked.)/i,Pr=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Te(j,N){return A(j,"table")&&A(N.nodeType!==11?N:N.firstChild,"tr")&&b(j).children("tbody")[0]||j}function nt(j){return j.type=(j.getAttribute("type")!==null)+"/"+j.type,j}function gt(j){return(j.type||"").slice(0,5)==="true/"?j.type=j.type.slice(5):j.removeAttribute("type"),j}function Je(j,N){var X,J,se,ce,me,Oe;if(N.nodeType===1){if(de.hasData(j)&&(Oe=de.get(j).events))for(se in de.remove(N,"handle events"),Oe)for(X=0,J=Oe[se].length;X<J;X++)b.event.add(N,se,Oe[se][X]);le.hasData(j)&&(ce=le.access(j),me=b.extend({},ce),le.set(N,me))}}function yt(j,N,X,J){N=o(N);var se,ce,me,Oe,Pe,He,it=0,mt=j.length,tt=mt-1,wt=N[0],Ot=y(wt);if(Ot||1<mt&&typeof wt=="string"&&!d.checkClone&&hr.test(wt))return j.each(function(qt){var St=j.eq(qt);Ot&&(N[0]=wt.call(this,qt,St.html())),yt(St,N,X,J)});if(mt&&(ce=(se=ar(N,j[0].ownerDocument,!1,j,J)).firstChild,se.childNodes.length===1&&(se=ce),ce||J)){for(Oe=(me=b.map(_t(se,"script"),nt)).length;it<mt;it++)Pe=se,it!==tt&&(Pe=b.clone(Pe,!0,!0),Oe&&b.merge(me,_t(Pe,"script"))),X.call(j[it],Pe,it);if(Oe)for(He=me[me.length-1].ownerDocument,b.map(me,gt),it=0;it<Oe;it++)Pe=me[it],ot.test(Pe.type||"")&&!de.access(Pe,"globalEval")&&b.contains(He,Pe)&&(Pe.src&&(Pe.type||"").toLowerCase()!=="module"?b._evalUrl&&!Pe.noModule&&b._evalUrl(Pe.src,{nonce:Pe.nonce||Pe.getAttribute("nonce")},He):v(Pe.textContent.replace(Pr,""),Pe,He))}return j}function Vt(j,N,X){for(var J,se=N?b.filter(N,j):j,ce=0;(J=se[ce])!=null;ce++)X||J.nodeType!==1||b.cleanData(_t(J)),J.parentNode&&(X&&ee(J)&&jt(_t(J,"script")),J.parentNode.removeChild(J));return j}b.extend({htmlPrefilter:function(j){return j},clone:function(j,N,X){var J,se,ce,me,Oe,Pe,He,it=j.cloneNode(!0),mt=ee(j);if(!(d.noCloneChecked||j.nodeType!==1&&j.nodeType!==11||b.isXMLDoc(j)))for(me=_t(it),J=0,se=(ce=_t(j)).length;J<se;J++)Oe=ce[J],Pe=me[J],(He=Pe.nodeName.toLowerCase())==="input"&&Ee.test(Oe.type)?Pe.checked=Oe.checked:He!=="input"&&He!=="textarea"||(Pe.defaultValue=Oe.defaultValue);if(N)if(X)for(ce=ce||_t(j),me=me||_t(it),J=0,se=ce.length;J<se;J++)Je(ce[J],me[J]);else Je(j,it);return 0<(me=_t(it,"script")).length&&jt(me,!mt&&_t(j,"script")),it},cleanData:function(j){for(var N,X,J,se=b.event.special,ce=0;(X=j[ce])!==void 0;ce++)if(qe(X)){if(N=X[de.expando]){if(N.events)for(J in N.events)se[J]?b.event.remove(X,J):b.removeEvent(X,J,N.handle);X[de.expando]=void 0}X[le.expando]&&(X[le.expando]=void 0)}}}),b.fn.extend({detach:function(j){return Vt(this,j,!0)},remove:function(j){return Vt(this,j)},text:function(j){return Fe(this,function(N){return N===void 0?b.text(this):this.empty().each(function(){this.nodeType!==1&&this.nodeType!==11&&this.nodeType!==9||(this.textContent=N)})},null,j,arguments.length)},append:function(){return yt(this,arguments,function(j){this.nodeType!==1&&this.nodeType!==11&&this.nodeType!==9||Te(this,j).appendChild(j)})},prepend:function(){return yt(this,arguments,function(j){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var N=Te(this,j);N.insertBefore(j,N.firstChild)}})},before:function(){return yt(this,arguments,function(j){this.parentNode&&this.parentNode.insertBefore(j,this)})},after:function(){return yt(this,arguments,function(j){this.parentNode&&this.parentNode.insertBefore(j,this.nextSibling)})},empty:function(){for(var j,N=0;(j=this[N])!=null;N++)j.nodeType===1&&(b.cleanData(_t(j,!1)),j.textContent="");return this},clone:function(j,N){return j=j!=null&&j,N=N??j,this.map(function(){return b.clone(this,j,N)})},html:function(j){return Fe(this,function(N){var X=this[0]||{},J=0,se=this.length;if(N===void 0&&X.nodeType===1)return X.innerHTML;if(typeof N=="string"&&!Ar.test(N)&&!ut[(Ke.exec(N)||["",""])[1].toLowerCase()]){N=b.htmlPrefilter(N);try{for(;J<se;J++)(X=this[J]||{}).nodeType===1&&(b.cleanData(_t(X,!1)),X.innerHTML=N);X=0}catch{}}X&&this.empty().append(N)},null,j,arguments.length)},replaceWith:function(){var j=[];return yt(this,arguments,function(N){var X=this.parentNode;b.inArray(this,j)<0&&(b.cleanData(_t(this)),X&&X.replaceChild(N,this))},j)}}),b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(j,N){b.fn[j]=function(X){for(var J,se=[],ce=b(X),me=ce.length-1,Oe=0;Oe<=me;Oe++)J=Oe===me?this:this.clone(!0),b(ce[Oe])[N](J),s.apply(se,J.get());return this.pushStack(se)}});var xe=new RegExp("^("+ze+")(?!px)[a-z%]+$","i"),lt=/^--/,xt=function(j){var N=j.ownerDocument.defaultView;return N&&N.opener||(N=S),N.getComputedStyle(j)},ct=function(j,N,X){var J,se,ce={};for(se in N)ce[se]=j.style[se],j.style[se]=N[se];for(se in J=X.call(j),N)j.style[se]=ce[se];return J},Dt=new RegExp(q.join("|"),"i");function et(j,N,X){var J,se,ce,me,Oe=lt.test(N),Pe=j.style;return(X=X||xt(j))&&(me=X.getPropertyValue(N)||X[N],Oe&&me&&(me=me.replace(I,"$1")||void 0),me!==""||ee(j)||(me=b.style(j,N)),!d.pixelBoxStyles()&&xe.test(me)&&Dt.test(N)&&(J=Pe.width,se=Pe.minWidth,ce=Pe.maxWidth,Pe.minWidth=Pe.maxWidth=Pe.width=me,me=X.width,Pe.width=J,Pe.minWidth=se,Pe.maxWidth=ce)),me!==void 0?me+"":me}function Ht(j,N){return{get:function(){if(!j())return(this.get=N).apply(this,arguments);delete this.get}}}(function(){function j(){if(He){Pe.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",He.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",te.appendChild(Pe).appendChild(He);var it=S.getComputedStyle(He);X=it.top!=="1%",Oe=N(it.marginLeft)===12,He.style.right="60%",ce=N(it.right)===36,J=N(it.width)===36,He.style.position="absolute",se=N(He.offsetWidth/3)===12,te.removeChild(Pe),He=null}}function N(it){return Math.round(parseFloat(it))}var X,J,se,ce,me,Oe,Pe=m.createElement("div"),He=m.createElement("div");He.style&&(He.style.backgroundClip="content-box",He.cloneNode(!0).style.backgroundClip="",d.clearCloneStyle=He.style.backgroundClip==="content-box",b.extend(d,{boxSizingReliable:function(){return j(),J},pixelBoxStyles:function(){return j(),ce},pixelPosition:function(){return j(),X},reliableMarginLeft:function(){return j(),Oe},scrollboxSize:function(){return j(),se},reliableTrDimensions:function(){var it,mt,tt,wt;return me==null&&(it=m.createElement("table"),mt=m.createElement("tr"),tt=m.createElement("div"),it.style.cssText="position:absolute;left:-11111px;border-collapse:separate",mt.style.cssText="box-sizing:content-box;border:1px solid",mt.style.height="1px",tt.style.height="9px",tt.style.display="block",te.appendChild(it).appendChild(mt).appendChild(tt),wt=S.getComputedStyle(mt),me=parseInt(wt.height,10)+parseInt(wt.borderTopWidth,10)+parseInt(wt.borderBottomWidth,10)===mt.offsetHeight,te.removeChild(it)),me}}))})();var Mt=["Webkit","Moz","ms"],Kt=m.createElement("div").style,Ct={};function Jt(j){var N=b.cssProps[j]||Ct[j];return N||(j in Kt?j:Ct[j]=function(X){for(var J=X[0].toUpperCase()+X.slice(1),se=Mt.length;se--;)if((X=Mt[se]+J)in Kt)return X}(j)||j)}var Wt=/^(none|table(?!-c[ea]).+)/,gr={position:"absolute",visibility:"hidden",display:"block"},tr={letterSpacing:"0",fontWeight:"400"};function Rr(j,N,X){var J=Re.exec(N);return J?Math.max(0,J[2]-(X||0))+(J[3]||"px"):N}function Or(j,N,X,J,se,ce){var me=N==="width"?1:0,Oe=0,Pe=0,He=0;if(X===(J?"border":"content"))return 0;for(;me<4;me+=2)X==="margin"&&(He+=b.css(j,X+q[me],!0,se)),J?(X==="content"&&(Pe-=b.css(j,"padding"+q[me],!0,se)),X!=="margin"&&(Pe-=b.css(j,"border"+q[me]+"Width",!0,se))):(Pe+=b.css(j,"padding"+q[me],!0,se),X!=="padding"?Pe+=b.css(j,"border"+q[me]+"Width",!0,se):Oe+=b.css(j,"border"+q[me]+"Width",!0,se));return!J&&0<=ce&&(Pe+=Math.max(0,Math.ceil(j["offset"+N[0].toUpperCase()+N.slice(1)]-ce-Pe-Oe-.5))||0),Pe+He}function Fr(j,N,X){var J=xt(j),se=(!d.boxSizingReliable()||X)&&b.css(j,"boxSizing",!1,J)==="border-box",ce=se,me=et(j,N,J),Oe="offset"+N[0].toUpperCase()+N.slice(1);if(xe.test(me)){if(!X)return me;me="auto"}return(!d.boxSizingReliable()&&se||!d.reliableTrDimensions()&&A(j,"tr")||me==="auto"||!parseFloat(me)&&b.css(j,"display",!1,J)==="inline")&&j.getClientRects().length&&(se=b.css(j,"boxSizing",!1,J)==="border-box",(ce=Oe in j)&&(me=j[Oe])),(me=parseFloat(me)||0)+Or(j,N,X||(se?"border":"content"),ce,J,me)+"px"}function cr(j,N,X,J,se){return new cr.prototype.init(j,N,X,J,se)}b.extend({cssHooks:{opacity:{get:function(j,N){if(N){var X=et(j,"opacity");return X===""?"1":X}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(j,N,X,J){if(j&&j.nodeType!==3&&j.nodeType!==8&&j.style){var se,ce,me,Oe=st(N),Pe=lt.test(N),He=j.style;if(Pe||(N=Jt(Oe)),me=b.cssHooks[N]||b.cssHooks[Oe],X===void 0)return me&&"get"in me&&(se=me.get(j,!1,J))!==void 0?se:He[N];(ce=typeof X)=="string"&&(se=Re.exec(X))&&se[1]&&(X=Le(j,N,se),ce="number"),X!=null&&X==X&&(ce!=="number"||Pe||(X+=se&&se[3]||(b.cssNumber[Oe]?"":"px")),d.clearCloneStyle||X!==""||N.indexOf("background")!==0||(He[N]="inherit"),me&&"set"in me&&(X=me.set(j,X,J))===void 0||(Pe?He.setProperty(N,X):He[N]=X))}},css:function(j,N,X,J){var se,ce,me,Oe=st(N);return lt.test(N)||(N=Jt(Oe)),(me=b.cssHooks[N]||b.cssHooks[Oe])&&"get"in me&&(se=me.get(j,!0,X)),se===void 0&&(se=et(j,N,J)),se==="normal"&&N in tr&&(se=tr[N]),X===""||X?(ce=parseFloat(se),X===!0||isFinite(ce)?ce||0:se):se}}),b.each(["height","width"],function(j,N){b.cssHooks[N]={get:function(X,J,se){if(J)return!Wt.test(b.css(X,"display"))||X.getClientRects().length&&X.getBoundingClientRect().width?Fr(X,N,se):ct(X,gr,function(){return Fr(X,N,se)})},set:function(X,J,se){var ce,me=xt(X),Oe=!d.scrollboxSize()&&me.position==="absolute",Pe=(Oe||se)&&b.css(X,"boxSizing",!1,me)==="border-box",He=se?Or(X,N,se,Pe,me):0;return Pe&&Oe&&(He-=Math.ceil(X["offset"+N[0].toUpperCase()+N.slice(1)]-parseFloat(me[N])-Or(X,N,"border",!1,me)-.5)),He&&(ce=Re.exec(J))&&(ce[3]||"px")!=="px"&&(X.style[N]=J,J=b.css(X,N)),Rr(0,J,He)}}}),b.cssHooks.marginLeft=Ht(d.reliableMarginLeft,function(j,N){if(N)return(parseFloat(et(j,"marginLeft"))||j.getBoundingClientRect().left-ct(j,{marginLeft:0},function(){return j.getBoundingClientRect().left}))+"px"}),b.each({margin:"",padding:"",border:"Width"},function(j,N){b.cssHooks[j+N]={expand:function(X){for(var J=0,se={},ce=typeof X=="string"?X.split(" "):[X];J<4;J++)se[j+q[J]+N]=ce[J]||ce[J-2]||ce[0];return se}},j!=="margin"&&(b.cssHooks[j+N].set=Rr)}),b.fn.extend({css:function(j,N){return Fe(this,function(X,J,se){var ce,me,Oe={},Pe=0;if(Array.isArray(J)){for(ce=xt(X),me=J.length;Pe<me;Pe++)Oe[J[Pe]]=b.css(X,J[Pe],!1,ce);return Oe}return se!==void 0?b.style(X,J,se):b.css(X,J)},j,N,1<arguments.length)}}),((b.Tween=cr).prototype={constructor:cr,init:function(j,N,X,J,se,ce){this.elem=j,this.prop=X,this.easing=se||b.easing._default,this.options=N,this.start=this.now=this.cur(),this.end=J,this.unit=ce||(b.cssNumber[X]?"":"px")},cur:function(){var j=cr.propHooks[this.prop];return j&&j.get?j.get(this):cr.propHooks._default.get(this)},run:function(j){var N,X=cr.propHooks[this.prop];return this.options.duration?this.pos=N=b.easing[this.easing](j,this.options.duration*j,0,1,this.options.duration):this.pos=N=j,this.now=(this.end-this.start)*N+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),X&&X.set?X.set(this):cr.propHooks._default.set(this),this}}).init.prototype=cr.prototype,(cr.propHooks={_default:{get:function(j){var N;return j.elem.nodeType!==1||j.elem[j.prop]!=null&&j.elem.style[j.prop]==null?j.elem[j.prop]:(N=b.css(j.elem,j.prop,""))&&N!=="auto"?N:0},set:function(j){b.fx.step[j.prop]?b.fx.step[j.prop](j):j.elem.nodeType!==1||!b.cssHooks[j.prop]&&j.elem.style[Jt(j.prop)]==null?j.elem[j.prop]=j.now:b.style(j.elem,j.prop,j.now+j.unit)}}}).scrollTop=cr.propHooks.scrollLeft={set:function(j){j.elem.nodeType&&j.elem.parentNode&&(j.elem[j.prop]=j.now)}},b.easing={linear:function(j){return j},swing:function(j){return .5-Math.cos(j*Math.PI)/2},_default:"swing"},b.fx=cr.prototype.init,b.fx.step={};var xr,Mr,Vr,Dr,ai=/^(?:toggle|show|hide)$/,Zi=/queueHooks$/;function qn(){Mr&&(m.hidden===!1&&S.requestAnimationFrame?S.requestAnimationFrame(qn):S.setTimeout(qn,b.fx.interval),b.fx.tick())}function Ki(){return S.setTimeout(function(){xr=void 0}),xr=Date.now()}function Mi(j,N){var X,J=0,se={height:j};for(N=N?1:0;J<4;J+=2-N)se["margin"+(X=q[J])]=se["padding"+X]=j;return N&&(se.opacity=se.width=j),se}function Gs(j,N,X){for(var J,se=(sn.tweeners[N]||[]).concat(sn.tweeners["*"]),ce=0,me=se.length;ce<me;ce++)if(J=se[ce].call(X,N,j))return J}function sn(j,N,X){var J,se,ce=0,me=sn.prefilters.length,Oe=b.Deferred().always(function(){delete Pe.elem}),Pe=function(){if(se)return!1;for(var mt=xr||Ki(),tt=Math.max(0,He.startTime+He.duration-mt),wt=1-(tt/He.duration||0),Ot=0,qt=He.tweens.length;Ot<qt;Ot++)He.tweens[Ot].run(wt);return Oe.notifyWith(j,[He,wt,tt]),wt<1&&qt?tt:(qt||Oe.notifyWith(j,[He,1,0]),Oe.resolveWith(j,[He]),!1)},He=Oe.promise({elem:j,props:b.extend({},N),opts:b.extend(!0,{specialEasing:{},easing:b.easing._default},X),originalProperties:N,originalOptions:X,startTime:xr||Ki(),duration:X.duration,tweens:[],createTween:function(mt,tt){var wt=b.Tween(j,He.opts,mt,tt,He.opts.specialEasing[mt]||He.opts.easing);return He.tweens.push(wt),wt},stop:function(mt){var tt=0,wt=mt?He.tweens.length:0;if(se)return this;for(se=!0;tt<wt;tt++)He.tweens[tt].run(1);return mt?(Oe.notifyWith(j,[He,1,0]),Oe.resolveWith(j,[He,mt])):Oe.rejectWith(j,[He,mt]),this}}),it=He.props;for(!function(mt,tt){var wt,Ot,qt,St,jr;for(wt in mt)if(qt=tt[Ot=st(wt)],St=mt[wt],Array.isArray(St)&&(qt=St[1],St=mt[wt]=St[0]),wt!==Ot&&(mt[Ot]=St,delete mt[wt]),(jr=b.cssHooks[Ot])&&"expand"in jr)for(wt in St=jr.expand(St),delete mt[Ot],St)wt in mt||(mt[wt]=St[wt],tt[wt]=qt);else tt[Ot]=qt}(it,He.opts.specialEasing);ce<me;ce++)if(J=sn.prefilters[ce].call(He,j,it,He.opts))return y(J.stop)&&(b._queueHooks(He.elem,He.opts.queue).stop=J.stop.bind(J)),J;return b.map(it,Gs,He),y(He.opts.start)&&He.opts.start.call(j,He),He.progress(He.opts.progress).done(He.opts.done,He.opts.complete).fail(He.opts.fail).always(He.opts.always),b.fx.timer(b.extend(Pe,{elem:j,anim:He,queue:He.opts.queue})),He}b.Animation=b.extend(sn,{tweeners:{"*":[function(j,N){var X=this.createTween(j,N);return Le(X.elem,j,Re.exec(N),X),X}]},tweener:function(j,N){y(j)?(N=j,j=["*"]):j=j.match(ye);for(var X,J=0,se=j.length;J<se;J++)X=j[J],sn.tweeners[X]=sn.tweeners[X]||[],sn.tweeners[X].unshift(N)},prefilters:[function(j,N,X){var J,se,ce,me,Oe,Pe,He,it,mt="width"in N||"height"in N,tt=this,wt={},Ot=j.style,qt=j.nodeType&&Se(j),St=de.get(j,"fxshow");for(J in X.queue||((me=b._queueHooks(j,"fx")).unqueued==null&&(me.unqueued=0,Oe=me.empty.fire,me.empty.fire=function(){me.unqueued||Oe()}),me.unqueued++,tt.always(function(){tt.always(function(){me.unqueued--,b.queue(j,"fx").length||me.empty.fire()})})),N)if(se=N[J],ai.test(se)){if(delete N[J],ce=ce||se==="toggle",se===(qt?"hide":"show")){if(se!=="show"||!St||St[J]===void 0)continue;qt=!0}wt[J]=St&&St[J]||b.style(j,J)}if((Pe=!b.isEmptyObject(N))||!b.isEmptyObject(wt))for(J in mt&&j.nodeType===1&&(X.overflow=[Ot.overflow,Ot.overflowX,Ot.overflowY],(He=St&&St.display)==null&&(He=de.get(j,"display")),(it=b.css(j,"display"))==="none"&&(He?it=He:(at([j],!0),He=j.style.display||He,it=b.css(j,"display"),at([j]))),(it==="inline"||it==="inline-block"&&He!=null)&&b.css(j,"float")==="none"&&(Pe||(tt.done(function(){Ot.display=He}),He==null&&(it=Ot.display,He=it==="none"?"":it)),Ot.display="inline-block")),X.overflow&&(Ot.overflow="hidden",tt.always(function(){Ot.overflow=X.overflow[0],Ot.overflowX=X.overflow[1],Ot.overflowY=X.overflow[2]})),Pe=!1,wt)Pe||(St?"hidden"in St&&(qt=St.hidden):St=de.access(j,"fxshow",{display:He}),ce&&(St.hidden=!qt),qt&&at([j],!0),tt.done(function(){for(J in qt||at([j]),de.remove(j,"fxshow"),wt)b.style(j,J,wt[J])})),Pe=Gs(qt?St[J]:0,J,tt),J in St||(St[J]=Pe.start,qt&&(Pe.end=Pe.start,Pe.start=0))}],prefilter:function(j,N){N?sn.prefilters.unshift(j):sn.prefilters.push(j)}}),b.speed=function(j,N,X){var J=j&&typeof j=="object"?b.extend({},j):{complete:X||!X&&N||y(j)&&j,duration:j,easing:X&&N||N&&!y(N)&&N};return b.fx.off?J.duration=0:typeof J.duration!="number"&&(J.duration in b.fx.speeds?J.duration=b.fx.speeds[J.duration]:J.duration=b.fx.speeds._default),J.queue!=null&&J.queue!==!0||(J.queue="fx"),J.old=J.complete,J.complete=function(){y(J.old)&&J.old.call(this),J.queue&&b.dequeue(this,J.queue)},J},b.fn.extend({fadeTo:function(j,N,X,J){return this.filter(Se).css("opacity",0).show().end().animate({opacity:N},j,X,J)},animate:function(j,N,X,J){var se=b.isEmptyObject(j),ce=b.speed(N,X,J),me=function(){var Oe=sn(this,b.extend({},j),ce);(se||de.get(this,"finish"))&&Oe.stop(!0)};return me.finish=me,se||ce.queue===!1?this.each(me):this.queue(ce.queue,me)},stop:function(j,N,X){var J=function(se){var ce=se.stop;delete se.stop,ce(X)};return typeof j!="string"&&(X=N,N=j,j=void 0),N&&this.queue(j||"fx",[]),this.each(function(){var se=!0,ce=j!=null&&j+"queueHooks",me=b.timers,Oe=de.get(this);if(ce)Oe[ce]&&Oe[ce].stop&&J(Oe[ce]);else for(ce in Oe)Oe[ce]&&Oe[ce].stop&&Zi.test(ce)&&J(Oe[ce]);for(ce=me.length;ce--;)me[ce].elem!==this||j!=null&&me[ce].queue!==j||(me[ce].anim.stop(X),se=!1,me.splice(ce,1));!se&&X||b.dequeue(this,j)})},finish:function(j){return j!==!1&&(j=j||"fx"),this.each(function(){var N,X=de.get(this),J=X[j+"queue"],se=X[j+"queueHooks"],ce=b.timers,me=J?J.length:0;for(X.finish=!0,b.queue(this,j,[]),se&&se.stop&&se.stop.call(this,!0),N=ce.length;N--;)ce[N].elem===this&&ce[N].queue===j&&(ce[N].anim.stop(!0),ce.splice(N,1));for(N=0;N<me;N++)J[N]&&J[N].finish&&J[N].finish.call(this);delete X.finish})}}),b.each(["toggle","show","hide"],function(j,N){var X=b.fn[N];b.fn[N]=function(J,se,ce){return J==null||typeof J=="boolean"?X.apply(this,arguments):this.animate(Mi(N,!0),J,se,ce)}}),b.each({slideDown:Mi("show"),slideUp:Mi("hide"),slideToggle:Mi("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(j,N){b.fn[j]=function(X,J,se){return this.animate(N,X,J,se)}}),b.timers=[],b.fx.tick=function(){var j,N=0,X=b.timers;for(xr=Date.now();N<X.length;N++)(j=X[N])()||X[N]!==j||X.splice(N--,1);X.length||b.fx.stop(),xr=void 0},b.fx.timer=function(j){b.timers.push(j),b.fx.start()},b.fx.interval=13,b.fx.start=function(){Mr||(Mr=!0,qn())},b.fx.stop=function(){Mr=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fn.delay=function(j,N){return j=b.fx&&b.fx.speeds[j]||j,N=N||"fx",this.queue(N,function(X,J){var se=S.setTimeout(X,j);J.stop=function(){S.clearTimeout(se)}})},Vr=m.createElement("input"),Dr=m.createElement("select").appendChild(m.createElement("option")),Vr.type="checkbox",d.checkOn=Vr.value!=="",d.optSelected=Dr.selected,(Vr=m.createElement("input")).value="t",Vr.type="radio",d.radioValue=Vr.value==="t";var xo,Xn=b.expr.attrHandle;b.fn.extend({attr:function(j,N){return Fe(this,b.attr,j,N,1<arguments.length)},removeAttr:function(j){return this.each(function(){b.removeAttr(this,j)})}}),b.extend({attr:function(j,N,X){var J,se,ce=j.nodeType;if(ce!==3&&ce!==8&&ce!==2)return typeof j.getAttribute>"u"?b.prop(j,N,X):(ce===1&&b.isXMLDoc(j)||(se=b.attrHooks[N.toLowerCase()]||(b.expr.match.bool.test(N)?xo:void 0)),X!==void 0?X===null?void b.removeAttr(j,N):se&&"set"in se&&(J=se.set(j,X,N))!==void 0?J:(j.setAttribute(N,X+""),X):se&&"get"in se&&(J=se.get(j,N))!==null?J:(J=b.find.attr(j,N))==null?void 0:J)},attrHooks:{type:{set:function(j,N){if(!d.radioValue&&N==="radio"&&A(j,"input")){var X=j.value;return j.setAttribute("type",N),X&&(j.value=X),N}}}},removeAttr:function(j,N){var X,J=0,se=N&&N.match(ye);if(se&&j.nodeType===1)for(;X=se[J++];)j.removeAttribute(X)}}),xo={set:function(j,N,X){return N===!1?b.removeAttr(j,X):j.setAttribute(X,X),X}},b.each(b.expr.match.bool.source.match(/\w+/g),function(j,N){var X=Xn[N]||b.find.attr;Xn[N]=function(J,se,ce){var me,Oe,Pe=se.toLowerCase();return ce||(Oe=Xn[Pe],Xn[Pe]=me,me=X(J,se,ce)!=null?Pe:null,Xn[Pe]=Oe),me}});var wo=/^(?:input|select|textarea|button)$/i,So=/^(?:a|area)$/i;function gn(j){return(j.match(ye)||[]).join(" ")}function yn(j){return j.getAttribute&&j.getAttribute("class")||""}function on(j){return Array.isArray(j)?j:typeof j=="string"&&j.match(ye)||[]}b.fn.extend({prop:function(j,N){return Fe(this,b.prop,j,N,1<arguments.length)},removeProp:function(j){return this.each(function(){delete this[b.propFix[j]||j]})}}),b.extend({prop:function(j,N,X){var J,se,ce=j.nodeType;if(ce!==3&&ce!==8&&ce!==2)return ce===1&&b.isXMLDoc(j)||(N=b.propFix[N]||N,se=b.propHooks[N]),X!==void 0?se&&"set"in se&&(J=se.set(j,X,N))!==void 0?J:j[N]=X:se&&"get"in se&&(J=se.get(j,N))!==null?J:j[N]},propHooks:{tabIndex:{get:function(j){var N=b.find.attr(j,"tabindex");return N?parseInt(N,10):wo.test(j.nodeName)||So.test(j.nodeName)&&j.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),d.optSelected||(b.propHooks.selected={get:function(j){var N=j.parentNode;return N&&N.parentNode&&N.parentNode.selectedIndex,null},set:function(j){var N=j.parentNode;N&&(N.selectedIndex,N.parentNode&&N.parentNode.selectedIndex)}}),b.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){b.propFix[this.toLowerCase()]=this}),b.fn.extend({addClass:function(j){var N,X,J,se,ce,me;return y(j)?this.each(function(Oe){b(this).addClass(j.call(this,Oe,yn(this)))}):(N=on(j)).length?this.each(function(){if(J=yn(this),X=this.nodeType===1&&" "+gn(J)+" "){for(ce=0;ce<N.length;ce++)se=N[ce],X.indexOf(" "+se+" ")<0&&(X+=se+" ");me=gn(X),J!==me&&this.setAttribute("class",me)}}):this},removeClass:function(j){var N,X,J,se,ce,me;return y(j)?this.each(function(Oe){b(this).removeClass(j.call(this,Oe,yn(this)))}):arguments.length?(N=on(j)).length?this.each(function(){if(J=yn(this),X=this.nodeType===1&&" "+gn(J)+" "){for(ce=0;ce<N.length;ce++)for(se=N[ce];-1<X.indexOf(" "+se+" ");)X=X.replace(" "+se+" "," ");me=gn(X),J!==me&&this.setAttribute("class",me)}}):this:this.attr("class","")},toggleClass:function(j,N){var X,J,se,ce,me=typeof j,Oe=me==="string"||Array.isArray(j);return y(j)?this.each(function(Pe){b(this).toggleClass(j.call(this,Pe,yn(this),N),N)}):typeof N=="boolean"&&Oe?N?this.addClass(j):this.removeClass(j):(X=on(j),this.each(function(){if(Oe)for(ce=b(this),se=0;se<X.length;se++)J=X[se],ce.hasClass(J)?ce.removeClass(J):ce.addClass(J);else j!==void 0&&me!=="boolean"||((J=yn(this))&&de.set(this,"__className__",J),this.setAttribute&&this.setAttribute("class",J||j===!1?"":de.get(this,"__className__")||""))}))},hasClass:function(j){var N,X,J=0;for(N=" "+j+" ";X=this[J++];)if(X.nodeType===1&&-1<(" "+gn(yn(X))+" ").indexOf(N))return!0;return!1}});var Mo=/\r/g;b.fn.extend({val:function(j){var N,X,J,se=this[0];return arguments.length?(J=y(j),this.each(function(ce){var me;this.nodeType===1&&((me=J?j.call(this,ce,b(this).val()):j)==null?me="":typeof me=="number"?me+="":Array.isArray(me)&&(me=b.map(me,function(Oe){return Oe==null?"":Oe+""})),(N=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()])&&"set"in N&&N.set(this,me,"value")!==void 0||(this.value=me))})):se?(N=b.valHooks[se.type]||b.valHooks[se.nodeName.toLowerCase()])&&"get"in N&&(X=N.get(se,"value"))!==void 0?X:typeof(X=se.value)=="string"?X.replace(Mo,""):X??"":void 0}}),b.extend({valHooks:{option:{get:function(j){var N=b.find.attr(j,"value");return N??gn(b.text(j))}},select:{get:function(j){var N,X,J,se=j.options,ce=j.selectedIndex,me=j.type==="select-one",Oe=me?null:[],Pe=me?ce+1:se.length;for(J=ce<0?Pe:me?ce:0;J<Pe;J++)if(((X=se[J]).selected||J===ce)&&!X.disabled&&(!X.parentNode.disabled||!A(X.parentNode,"optgroup"))){if(N=b(X).val(),me)return N;Oe.push(N)}return Oe},set:function(j,N){for(var X,J,se=j.options,ce=b.makeArray(N),me=se.length;me--;)((J=se[me]).selected=-1<b.inArray(b.valHooks.option.get(J),ce))&&(X=!0);return X||(j.selectedIndex=-1),ce}}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]={set:function(j,N){if(Array.isArray(N))return j.checked=-1<b.inArray(b(j).val(),N)}},d.checkOn||(b.valHooks[this].get=function(j){return j.getAttribute("value")===null?"on":j.value})});var li=S.location,Yn={guid:Date.now()},$i=/\?/;b.parseXML=function(j){var N,X;if(!j||typeof j!="string")return null;try{N=new S.DOMParser().parseFromString(j,"text/xml")}catch{}return X=N&&N.getElementsByTagName("parsererror")[0],N&&!X||b.error("Invalid XML: "+(X?b.map(X.childNodes,function(J){return J.textContent}).join(`
`):j)),N};var To=/^(?:focusinfocus|focusoutblur)$/,Ji=function(j){j.stopPropagation()};b.extend(b.event,{trigger:function(j,N,X,J){var se,ce,me,Oe,Pe,He,it,mt,tt=[X||m],wt=l.call(j,"type")?j.type:j,Ot=l.call(j,"namespace")?j.namespace.split("."):[];if(ce=mt=me=X=X||m,X.nodeType!==3&&X.nodeType!==8&&!To.test(wt+b.event.triggered)&&(-1<wt.indexOf(".")&&(wt=(Ot=wt.split(".")).shift(),Ot.sort()),Pe=wt.indexOf(":")<0&&"on"+wt,(j=j[b.expando]?j:new b.Event(wt,typeof j=="object"&&j)).isTrigger=J?2:3,j.namespace=Ot.join("."),j.rnamespace=j.namespace?new RegExp("(^|\\.)"+Ot.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,j.result=void 0,j.target||(j.target=X),N=N==null?[j]:b.makeArray(N,[j]),it=b.event.special[wt]||{},J||!it.trigger||it.trigger.apply(X,N)!==!1)){if(!J&&!it.noBubble&&!p(X)){for(Oe=it.delegateType||wt,To.test(Oe+wt)||(ce=ce.parentNode);ce;ce=ce.parentNode)tt.push(ce),me=ce;me===(X.ownerDocument||m)&&tt.push(me.defaultView||me.parentWindow||S)}for(se=0;(ce=tt[se++])&&!j.isPropagationStopped();)mt=ce,j.type=1<se?Oe:it.bindType||wt,(He=(de.get(ce,"events")||Object.create(null))[j.type]&&de.get(ce,"handle"))&&He.apply(ce,N),(He=Pe&&ce[Pe])&&He.apply&&qe(ce)&&(j.result=He.apply(ce,N),j.result===!1&&j.preventDefault());return j.type=wt,J||j.isDefaultPrevented()||it._default&&it._default.apply(tt.pop(),N)!==!1||!qe(X)||Pe&&y(X[wt])&&!p(X)&&((me=X[Pe])&&(X[Pe]=null),b.event.triggered=wt,j.isPropagationStopped()&&mt.addEventListener(wt,Ji),X[wt](),j.isPropagationStopped()&&mt.removeEventListener(wt,Ji),b.event.triggered=void 0,me&&(X[Pe]=me)),j.result}},simulate:function(j,N,X){var J=b.extend(new b.Event,X,{type:j,isSimulated:!0});b.event.trigger(J,null,N)}}),b.fn.extend({trigger:function(j,N){return this.each(function(){b.event.trigger(j,N,this)})},triggerHandler:function(j,N){var X=this[0];if(X)return b.event.trigger(j,N,X,!0)}});var Eo=/\[\]$/,jo=/\r?\n/g,Co=/^(?:submit|button|image|reset|file)$/i,Ao=/^(?:input|select|textarea|keygen)/i;function zs(j,N,X,J){var se;if(Array.isArray(N))b.each(N,function(ce,me){X||Eo.test(j)?J(j,me):zs(j+"["+(typeof me=="object"&&me!=null?ce:"")+"]",me,X,J)});else if(X||x(N)!=="object")J(j,N);else for(se in N)zs(j+"["+se+"]",N[se],X,J)}b.param=function(j,N){var X,J=[],se=function(ce,me){var Oe=y(me)?me():me;J[J.length]=encodeURIComponent(ce)+"="+encodeURIComponent(Oe??"")};if(j==null)return"";if(Array.isArray(j)||j.jquery&&!b.isPlainObject(j))b.each(j,function(){se(this.name,this.value)});else for(X in j)zs(X,j[X],N,se);return J.join("&")},b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var j=b.prop(this,"elements");return j?b.makeArray(j):this}).filter(function(){var j=this.type;return this.name&&!b(this).is(":disabled")&&Ao.test(this.nodeName)&&!Co.test(j)&&(this.checked||!Ee.test(j))}).map(function(j,N){var X=b(this).val();return X==null?null:Array.isArray(X)?b.map(X,function(J){return{name:N.name,value:J.replace(jo,`\r
`)}}):{name:N.name,value:X.replace(jo,`\r
`)}}).get()}});var Lo=/%20/g,Sa=/#.*$/,Ma=/([?&])_=[^&]*/,Ta=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ea=/^(?:GET|HEAD)$/,Po=/^\/\//,un={},cn={},ui="*/".concat("*"),Zn=m.createElement("a");function vn(j){return function(N,X){typeof N!="string"&&(X=N,N="*");var J,se=0,ce=N.toLowerCase().match(ye)||[];if(y(X))for(;J=ce[se++];)J[0]==="+"?(J=J.slice(1)||"*",(j[J]=j[J]||[]).unshift(X)):(j[J]=j[J]||[]).push(X)}}function ci(j,N,X,J){var se={},ce=j===cn;function me(Oe){var Pe;return se[Oe]=!0,b.each(j[Oe]||[],function(He,it){var mt=it(N,X,J);return typeof mt!="string"||ce||se[mt]?ce?!(Pe=mt):void 0:(N.dataTypes.unshift(mt),me(mt),!1)}),Pe}return me(N.dataTypes[0])||!se["*"]&&me("*")}function Vs(j,N){var X,J,se=b.ajaxSettings.flatOptions||{};for(X in N)N[X]!==void 0&&((se[X]?j:J||(J={}))[X]=N[X]);return J&&b.extend(!0,j,J),j}Zn.href=li.href,b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:li.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(li.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ui,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(j,N){return N?Vs(Vs(j,b.ajaxSettings),N):Vs(b.ajaxSettings,j)},ajaxPrefilter:vn(un),ajaxTransport:vn(cn),ajax:function(j,N){typeof j=="object"&&(N=j,j=void 0),N=N||{};var X,J,se,ce,me,Oe,Pe,He,it,mt,tt=b.ajaxSetup({},N),wt=tt.context||tt,Ot=tt.context&&(wt.nodeType||wt.jquery)?b(wt):b.event,qt=b.Deferred(),St=b.Callbacks("once memory"),jr=tt.statusCode||{},kr={},Hr={},bn="canceled",ir={readyState:0,getResponseHeader:function(lr){var Tr;if(Pe){if(!ce)for(ce={};Tr=Ta.exec(se);)ce[Tr[1].toLowerCase()+" "]=(ce[Tr[1].toLowerCase()+" "]||[]).concat(Tr[2]);Tr=ce[lr.toLowerCase()+" "]}return Tr==null?null:Tr.join(", ")},getAllResponseHeaders:function(){return Pe?se:null},setRequestHeader:function(lr,Tr){return Pe==null&&(lr=Hr[lr.toLowerCase()]=Hr[lr.toLowerCase()]||lr,kr[lr]=Tr),this},overrideMimeType:function(lr){return Pe==null&&(tt.mimeType=lr),this},statusCode:function(lr){var Tr;if(lr)if(Pe)ir.always(lr[ir.status]);else for(Tr in lr)jr[Tr]=[jr[Tr],lr[Tr]];return this},abort:function(lr){var Tr=lr||bn;return X&&X.abort(Tr),ur(0,Tr),this}};if(qt.promise(ir),tt.url=((j||tt.url||li.href)+"").replace(Po,li.protocol+"//"),tt.type=N.method||N.type||tt.method||tt.type,tt.dataTypes=(tt.dataType||"*").toLowerCase().match(ye)||[""],tt.crossDomain==null){Oe=m.createElement("a");try{Oe.href=tt.url,Oe.href=Oe.href,tt.crossDomain=Zn.protocol+"//"+Zn.host!=Oe.protocol+"//"+Oe.host}catch{tt.crossDomain=!0}}if(tt.data&&tt.processData&&typeof tt.data!="string"&&(tt.data=b.param(tt.data,tt.traditional)),ci(un,tt,N,ir),Pe)return ir;for(it in(He=b.event&&tt.global)&&b.active++==0&&b.event.trigger("ajaxStart"),tt.type=tt.type.toUpperCase(),tt.hasContent=!Ea.test(tt.type),J=tt.url.replace(Sa,""),tt.hasContent?tt.data&&tt.processData&&(tt.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(tt.data=tt.data.replace(Lo,"+")):(mt=tt.url.slice(J.length),tt.data&&(tt.processData||typeof tt.data=="string")&&(J+=($i.test(J)?"&":"?")+tt.data,delete tt.data),tt.cache===!1&&(J=J.replace(Ma,"$1"),mt=($i.test(J)?"&":"?")+"_="+Yn.guid+++mt),tt.url=J+mt),tt.ifModified&&(b.lastModified[J]&&ir.setRequestHeader("If-Modified-Since",b.lastModified[J]),b.etag[J]&&ir.setRequestHeader("If-None-Match",b.etag[J])),(tt.data&&tt.hasContent&&tt.contentType!==!1||N.contentType)&&ir.setRequestHeader("Content-Type",tt.contentType),ir.setRequestHeader("Accept",tt.dataTypes[0]&&tt.accepts[tt.dataTypes[0]]?tt.accepts[tt.dataTypes[0]]+(tt.dataTypes[0]!=="*"?", "+ui+"; q=0.01":""):tt.accepts["*"]),tt.headers)ir.setRequestHeader(it,tt.headers[it]);if(tt.beforeSend&&(tt.beforeSend.call(wt,ir,tt)===!1||Pe))return ir.abort();if(bn="abort",St.add(tt.complete),ir.done(tt.success),ir.fail(tt.error),X=ci(cn,tt,N,ir)){if(ir.readyState=1,He&&Ot.trigger("ajaxSend",[ir,tt]),Pe)return ir;tt.async&&0<tt.timeout&&(me=S.setTimeout(function(){ir.abort("timeout")},tt.timeout));try{Pe=!1,X.send(kr,ur)}catch(lr){if(Pe)throw lr;ur(-1,lr)}}else ur(-1,"No Transport");function ur(lr,Tr,Wr,qs){var _n,Ti,jn,Fn,di,$r=Tr;Pe||(Pe=!0,me&&S.clearTimeout(me),X=void 0,se=qs||"",ir.readyState=0<lr?4:0,_n=200<=lr&&lr<300||lr===304,Wr&&(Fn=function(rr,Er,_){for(var E,L,R,z,Y=rr.contents,K=rr.dataTypes;K[0]==="*";)K.shift(),E===void 0&&(E=rr.mimeType||Er.getResponseHeader("Content-Type"));if(E){for(L in Y)if(Y[L]&&Y[L].test(E)){K.unshift(L);break}}if(K[0]in _)R=K[0];else{for(L in _){if(!K[0]||rr.converters[L+" "+K[0]]){R=L;break}z||(z=L)}R=R||z}if(R)return R!==K[0]&&K.unshift(R),_[R]}(tt,ir,Wr)),!_n&&-1<b.inArray("script",tt.dataTypes)&&b.inArray("json",tt.dataTypes)<0&&(tt.converters["text script"]=function(){}),Fn=function(rr,Er,_,E){var L,R,z,Y,K,ue={},be=rr.dataTypes.slice();if(be[1])for(z in rr.converters)ue[z.toLowerCase()]=rr.converters[z];for(R=be.shift();R;)if(rr.responseFields[R]&&(_[rr.responseFields[R]]=Er),!K&&E&&rr.dataFilter&&(Er=rr.dataFilter(Er,rr.dataType)),K=R,R=be.shift()){if(R==="*")R=K;else if(K!=="*"&&K!==R){if(!(z=ue[K+" "+R]||ue["* "+R])){for(L in ue)if((Y=L.split(" "))[1]===R&&(z=ue[K+" "+Y[0]]||ue["* "+Y[0]])){z===!0?z=ue[L]:ue[L]!==!0&&(R=Y[0],be.unshift(Y[1]));break}}if(z!==!0)if(z&&rr.throws)Er=z(Er);else try{Er=z(Er)}catch(ve){return{state:"parsererror",error:z?ve:"No conversion from "+K+" to "+R}}}}return{state:"success",data:Er}}(tt,Fn,ir,_n),_n?(tt.ifModified&&((di=ir.getResponseHeader("Last-Modified"))&&(b.lastModified[J]=di),(di=ir.getResponseHeader("etag"))&&(b.etag[J]=di)),lr===204||tt.type==="HEAD"?$r="nocontent":lr===304?$r="notmodified":($r=Fn.state,Ti=Fn.data,_n=!(jn=Fn.error))):(jn=$r,!lr&&$r||($r="error",lr<0&&(lr=0))),ir.status=lr,ir.statusText=(Tr||$r)+"",_n?qt.resolveWith(wt,[Ti,$r,ir]):qt.rejectWith(wt,[ir,$r,jn]),ir.statusCode(jr),jr=void 0,He&&Ot.trigger(_n?"ajaxSuccess":"ajaxError",[ir,tt,_n?Ti:jn]),St.fireWith(wt,[ir,$r]),He&&(Ot.trigger("ajaxComplete",[ir,tt]),--b.active||b.event.trigger("ajaxStop")))}return ir},getJSON:function(j,N,X){return b.get(j,N,X,"json")},getScript:function(j,N){return b.get(j,void 0,N,"script")}}),b.each(["get","post"],function(j,N){b[N]=function(X,J,se,ce){return y(J)&&(ce=ce||se,se=J,J=void 0),b.ajax(b.extend({url:X,type:N,dataType:ce,data:J,success:se},b.isPlainObject(X)&&X))}}),b.ajaxPrefilter(function(j){var N;for(N in j.headers)N.toLowerCase()==="content-type"&&(j.contentType=j.headers[N]||"")}),b._evalUrl=function(j,N,X){return b.ajax({url:j,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(J){b.globalEval(J,N,X)}})},b.fn.extend({wrapAll:function(j){var N;return this[0]&&(y(j)&&(j=j.call(this[0])),N=b(j,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&N.insertBefore(this[0]),N.map(function(){for(var X=this;X.firstElementChild;)X=X.firstElementChild;return X}).append(this)),this},wrapInner:function(j){return y(j)?this.each(function(N){b(this).wrapInner(j.call(this,N))}):this.each(function(){var N=b(this),X=N.contents();X.length?X.wrapAll(j):N.append(j)})},wrap:function(j){var N=y(j);return this.each(function(X){b(this).wrapAll(N?j.call(this,X):j)})},unwrap:function(j){return this.parent(j).not("body").each(function(){b(this).replaceWith(this.childNodes)}),this}}),b.expr.pseudos.hidden=function(j){return!b.expr.pseudos.visible(j)},b.expr.pseudos.visible=function(j){return!!(j.offsetWidth||j.offsetHeight||j.getClientRects().length)},b.ajaxSettings.xhr=function(){try{return new S.XMLHttpRequest}catch{}};var In={0:200,1223:204},Nn=b.ajaxSettings.xhr();d.cors=!!Nn&&"withCredentials"in Nn,d.ajax=Nn=!!Nn,b.ajaxTransport(function(j){var N,X;if(d.cors||Nn&&!j.crossDomain)return{send:function(J,se){var ce,me=j.xhr();if(me.open(j.type,j.url,j.async,j.username,j.password),j.xhrFields)for(ce in j.xhrFields)me[ce]=j.xhrFields[ce];for(ce in j.mimeType&&me.overrideMimeType&&me.overrideMimeType(j.mimeType),j.crossDomain||J["X-Requested-With"]||(J["X-Requested-With"]="XMLHttpRequest"),J)me.setRequestHeader(ce,J[ce]);N=function(Oe){return function(){N&&(N=X=me.onload=me.onerror=me.onabort=me.ontimeout=me.onreadystatechange=null,Oe==="abort"?me.abort():Oe==="error"?typeof me.status!="number"?se(0,"error"):se(me.status,me.statusText):se(In[me.status]||me.status,me.statusText,(me.responseType||"text")!=="text"||typeof me.responseText!="string"?{binary:me.response}:{text:me.responseText},me.getAllResponseHeaders()))}},me.onload=N(),X=me.onerror=me.ontimeout=N("error"),me.onabort!==void 0?me.onabort=X:me.onreadystatechange=function(){me.readyState===4&&S.setTimeout(function(){N&&X()})},N=N("abort");try{me.send(j.hasContent&&j.data||null)}catch(Oe){if(N)throw Oe}},abort:function(){N&&N()}}}),b.ajaxPrefilter(function(j){j.crossDomain&&(j.contents.script=!1)}),b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(j){return b.globalEval(j),j}}}),b.ajaxPrefilter("script",function(j){j.cache===void 0&&(j.cache=!1),j.crossDomain&&(j.type="GET")}),b.ajaxTransport("script",function(j){var N,X;if(j.crossDomain||j.scriptAttrs)return{send:function(J,se){N=b("<script>").attr(j.scriptAttrs||{}).prop({charset:j.scriptCharset,src:j.url}).on("load error",X=function(ce){N.remove(),X=null,ce&&se(ce.type==="error"?404:200,ce.type)}),m.head.appendChild(N[0])},abort:function(){X&&X()}}});var Hs,Ws=[],Qi=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var j=Ws.pop()||b.expando+"_"+Yn.guid++;return this[j]=!0,j}}),b.ajaxPrefilter("json jsonp",function(j,N,X){var J,se,ce,me=j.jsonp!==!1&&(Qi.test(j.url)?"url":typeof j.data=="string"&&(j.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Qi.test(j.data)&&"data");if(me||j.dataTypes[0]==="jsonp")return J=j.jsonpCallback=y(j.jsonpCallback)?j.jsonpCallback():j.jsonpCallback,me?j[me]=j[me].replace(Qi,"$1"+J):j.jsonp!==!1&&(j.url+=($i.test(j.url)?"&":"?")+j.jsonp+"="+J),j.converters["script json"]=function(){return ce||b.error(J+" was not called"),ce[0]},j.dataTypes[0]="json",se=S[J],S[J]=function(){ce=arguments},X.always(function(){se===void 0?b(S).removeProp(J):S[J]=se,j[J]&&(j.jsonpCallback=N.jsonpCallback,Ws.push(J)),ce&&y(se)&&se(ce[0]),ce=se=void 0}),"script"}),d.createHTMLDocument=((Hs=m.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",Hs.childNodes.length===2),b.parseHTML=function(j,N,X){return typeof j!="string"?[]:(typeof N=="boolean"&&(X=N,N=!1),N||(d.createHTMLDocument?((J=(N=m.implementation.createHTMLDocument("")).createElement("base")).href=m.location.href,N.head.appendChild(J)):N=m),ce=!X&&[],(se=D.exec(j))?[N.createElement(se[1])]:(se=ar([j],N,ce),ce&&ce.length&&b(ce).remove(),b.merge([],se.childNodes)));var J,se,ce},b.fn.load=function(j,N,X){var J,se,ce,me=this,Oe=j.indexOf(" ");return-1<Oe&&(J=gn(j.slice(Oe)),j=j.slice(0,Oe)),y(N)?(X=N,N=void 0):N&&typeof N=="object"&&(se="POST"),0<me.length&&b.ajax({url:j,type:se||"GET",dataType:"html",data:N}).done(function(Pe){ce=arguments,me.html(J?b("<div>").append(b.parseHTML(Pe)).find(J):Pe)}).always(X&&function(Pe,He){me.each(function(){X.apply(this,ce||[Pe.responseText,He,Pe])})}),this},b.expr.pseudos.animated=function(j){return b.grep(b.timers,function(N){return j===N.elem}).length},b.offset={setOffset:function(j,N,X){var J,se,ce,me,Oe,Pe,He=b.css(j,"position"),it=b(j),mt={};He==="static"&&(j.style.position="relative"),Oe=it.offset(),ce=b.css(j,"top"),Pe=b.css(j,"left"),(He==="absolute"||He==="fixed")&&-1<(ce+Pe).indexOf("auto")?(me=(J=it.position()).top,se=J.left):(me=parseFloat(ce)||0,se=parseFloat(Pe)||0),y(N)&&(N=N.call(j,X,b.extend({},Oe))),N.top!=null&&(mt.top=N.top-Oe.top+me),N.left!=null&&(mt.left=N.left-Oe.left+se),"using"in N?N.using.call(j,mt):it.css(mt)}},b.fn.extend({offset:function(j){if(arguments.length)return j===void 0?this:this.each(function(se){b.offset.setOffset(this,j,se)});var N,X,J=this[0];return J?J.getClientRects().length?(N=J.getBoundingClientRect(),X=J.ownerDocument.defaultView,{top:N.top+X.pageYOffset,left:N.left+X.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var j,N,X,J=this[0],se={top:0,left:0};if(b.css(J,"position")==="fixed")N=J.getBoundingClientRect();else{for(N=this.offset(),X=J.ownerDocument,j=J.offsetParent||X.documentElement;j&&(j===X.body||j===X.documentElement)&&b.css(j,"position")==="static";)j=j.parentNode;j&&j!==J&&j.nodeType===1&&((se=b(j).offset()).top+=b.css(j,"borderTopWidth",!0),se.left+=b.css(j,"borderLeftWidth",!0))}return{top:N.top-se.top-b.css(J,"marginTop",!0),left:N.left-se.left-b.css(J,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var j=this.offsetParent;j&&b.css(j,"position")==="static";)j=j.offsetParent;return j||te})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(j,N){var X=N==="pageYOffset";b.fn[j]=function(J){return Fe(this,function(se,ce,me){var Oe;if(p(se)?Oe=se:se.nodeType===9&&(Oe=se.defaultView),me===void 0)return Oe?Oe[N]:se[ce];Oe?Oe.scrollTo(X?Oe.pageXOffset:me,X?me:Oe.pageYOffset):se[ce]=me},j,J,arguments.length)}}),b.each(["top","left"],function(j,N){b.cssHooks[N]=Ht(d.pixelPosition,function(X,J){if(J)return J=et(X,N),xe.test(J)?b(X).position()[N]+"px":J})}),b.each({Height:"height",Width:"width"},function(j,N){b.each({padding:"inner"+j,content:N,"":"outer"+j},function(X,J){b.fn[J]=function(se,ce){var me=arguments.length&&(X||typeof se!="boolean"),Oe=X||(se===!0||ce===!0?"margin":"border");return Fe(this,function(Pe,He,it){var mt;return p(Pe)?J.indexOf("outer")===0?Pe["inner"+j]:Pe.document.documentElement["client"+j]:Pe.nodeType===9?(mt=Pe.documentElement,Math.max(Pe.body["scroll"+j],mt["scroll"+j],Pe.body["offset"+j],mt["offset"+j],mt["client"+j])):it===void 0?b.css(Pe,He,Oe):b.style(Pe,He,it,Oe)},N,me?se:void 0,me)}})}),b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(j,N){b.fn[N]=function(X){return this.on(N,X)}}),b.fn.extend({bind:function(j,N,X){return this.on(j,null,N,X)},unbind:function(j,N){return this.off(j,null,N)},delegate:function(j,N,X,J){return this.on(N,j,X,J)},undelegate:function(j,N,X){return arguments.length===1?this.off(j,"**"):this.off(N,j||"**",X)},hover:function(j,N){return this.on("mouseenter",j).on("mouseleave",N||j)}}),b.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(j,N){b.fn[N]=function(X,J){return 0<arguments.length?this.on(N,null,X,J):this.trigger(N)}});var Ro=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;b.proxy=function(j,N){var X,J,se;if(typeof N=="string"&&(X=j[N],N=j,j=X),y(j))return J=n.call(arguments,2),(se=function(){return j.apply(N||this,J.concat(n.call(arguments)))}).guid=j.guid=j.guid||b.guid++,se},b.holdReady=function(j){j?b.readyWait++:b.ready(!0)},b.isArray=Array.isArray,b.parseJSON=JSON.parse,b.nodeName=A,b.isFunction=y,b.isWindow=p,b.camelCase=st,b.type=x,b.now=Date.now,b.isNumeric=function(j){var N=b.type(j);return(N==="number"||N==="string")&&!isNaN(j-parseFloat(j))},b.trim=function(j){return j==null?"":(j+"").replace(Ro,"$1")},typeof define=="function"&&define.amd&&define("jquery",[],function(){return b});var Do=S.jQuery,ko=S.$;return b.noConflict=function(j){return S.$===b&&(S.$=ko),j&&S.jQuery===b&&(S.jQuery=Do),b},typeof t>"u"&&(S.jQuery=S.$=b),b});/*! p5.js v1.9.0 November 28, 2023 */(function(S){typeof lh=="object"&&typeof Es<"u"?Es.exports=S():typeof define=="function"&&define.amd?define([],S):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).p5=S()})(function(){var S;return function t(r,i,n){function o(f,h){if(!i[f]){if(!r[f]){var l=typeof require=="function"&&require;if(!h&&l)return l(f,!0);if(s)return s(f,!0);throw(h=new Error("Cannot find module '"+f+"'")).code="MODULE_NOT_FOUND",h}l=i[f]={exports:{}},r[f][0].call(l.exports,function(u){return o(r[f][1][u]||u)},l,l.exports,t,r,i,n)}return i[f].exports}for(var s=typeof require=="function"&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(t,r,i){i.byteLength=function(d){var d=l(d),c=d[0],d=d[1];return 3*(c+d)/4-d},i.toByteArray=function(u){var c,d,p=l(u),y=p[0],p=p[1],m=new s(function(x,T){return 3*(x+T)/4-T}(y,p)),g=0,v=0<p?y-4:y;for(d=0;d<v;d+=4)c=o[u.charCodeAt(d)]<<18|o[u.charCodeAt(d+1)]<<12|o[u.charCodeAt(d+2)]<<6|o[u.charCodeAt(d+3)],m[g++]=c>>16&255,m[g++]=c>>8&255,m[g++]=255&c;return p===2&&(c=o[u.charCodeAt(d)]<<2|o[u.charCodeAt(d+1)]>>4,m[g++]=255&c),p===1&&(c=o[u.charCodeAt(d)]<<10|o[u.charCodeAt(d+1)]<<4|o[u.charCodeAt(d+2)]>>2,m[g++]=c>>8&255,m[g++]=255&c),m},i.fromByteArray=function(u){for(var c,d=u.length,y=d%3,p=[],m=0,g=d-y;m<g;m+=16383)p.push(function(v,x,T){for(var w,b=[],C=x;C<T;C+=3)w=(v[C]<<16&16711680)+(v[C+1]<<8&65280)+(255&v[C+2]),b.push(function(A){return n[A>>18&63]+n[A>>12&63]+n[A>>6&63]+n[63&A]}(w));return b.join("")}(u,m,g<m+16383?g:m+16383));return y==1?(c=u[d-1],p.push(n[c>>2]+n[c<<4&63]+"==")):y==2&&(c=(u[d-2]<<8)+u[d-1],p.push(n[c>>10]+n[c>>4&63]+n[c<<2&63]+"=")),p.join("")};for(var n=[],o=[],s=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,h=a.length;f<h;++f)n[f]=a[f],o[a.charCodeAt(f)]=f;function l(u){var c=u.length;if(0<c%4)throw new Error("Invalid string. Length must be a multiple of 4");return u=u.indexOf("="),c=(u=u===-1?c:u)===c?0:4-u%4,[u,c]}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},{}],2:[function(t,r,i){},{}],3:[function(t,r,i){},{}],4:[function(t,r,i){(function(l){var o=t("base64-js"),s=t("ieee754"),a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,f=(i.Buffer=l,i.SlowBuffer=function(D){return+D!=D&&(D=0),l.alloc(+D)},i.INSPECT_MAX_BYTES=50,2147483647);function h(D){if(f<D)throw new RangeError('The value "'+D+'" is invalid for option "size"');return D=new Uint8Array(D),Object.setPrototypeOf(D,l.prototype),D}function l(D,O,V){if(typeof D!="number")return u(D,O,V);if(typeof O=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(D)}function u(D,O,V){if(typeof D=="string"){var Z=D,ie=O;if(l.isEncoding(ie=typeof ie=="string"&&ie!==""?ie:"utf8"))return re=0|m(Z,ie),ge=h(re),ge=(Z=ge.write(Z,ie))!==re?ge.slice(0,Z):ge;throw new TypeError("Unknown encoding: "+ie)}if(ArrayBuffer.isView(D))return y(D);if(D!=null){if(Q(D,ArrayBuffer)||D&&Q(D.buffer,ArrayBuffer)){var re=D,Z=O,ge=V;if(Z<0||re.byteLength<Z)throw new RangeError('"offset" is outside of buffer bounds');if(re.byteLength<Z+(ge||0))throw new RangeError('"length" is outside of buffer bounds');return re=Z===void 0&&ge===void 0?new Uint8Array(re):ge===void 0?new Uint8Array(re,Z):new Uint8Array(re,Z,ge),Object.setPrototypeOf(re,l.prototype),re}if(typeof D=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');if(ie=D.valueOf&&D.valueOf(),ie!=null&&ie!==D)return l.from(ie,O,V);var ye=function(he){{var pe,we;if(l.isBuffer(he))return pe=0|p(he.length),(we=h(pe)).length!==0&&he.copy(we,0,0,pe),we}if(he.length!==void 0)return typeof he.length!="number"||ne(he.length)?h(0):y(he);if(he.type==="Buffer"&&Array.isArray(he.data))return y(he.data)}(D);if(ye)return ye;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof D[Symbol.toPrimitive]=="function")return l.from(D[Symbol.toPrimitive]("string"),O,V)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof D)}function c(D){if(typeof D!="number")throw new TypeError('"size" argument must be of type number');if(D<0)throw new RangeError('The value "'+D+'" is invalid for option "size"')}function d(D){return c(D),h(D<0?0:0|p(D))}function y(D){for(var O=D.length<0?0:0|p(D.length),V=h(O),Z=0;Z<O;Z+=1)V[Z]=255&D[Z];return V}function p(D){if(f<=D)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f.toString(16)+" bytes");return 0|D}function m(D,O){if(l.isBuffer(D))return D.length;if(ArrayBuffer.isView(D)||Q(D,ArrayBuffer))return D.byteLength;if(typeof D!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof D);var V=D.length,Z=2<arguments.length&&arguments[2]===!0;if(!Z&&V===0)return 0;for(var ie=!1;;)switch(O){case"ascii":case"latin1":case"binary":return V;case"utf8":case"utf-8":return H(D).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*V;case"hex":return V>>>1;case"base64":return G(D).length;default:if(ie)return Z?-1:H(D).length;O=(""+O).toLowerCase(),ie=!0}}function g(D,O,V){var Z,ie=!1;if((O=O===void 0||O<0?0:O)>this.length||(V=V===void 0||V>this.length?this.length:V)<=0||(V>>>=0)<=(O>>>=0))return"";for(D=D||"utf8";;)switch(D){case"hex":var re=this,Ae=O,ge=V,we=re.length;(!ge||ge<0||we<ge)&&(ge=we);for(var ye="",he=Ae=!Ae||Ae<0?0:Ae;he<ge;++he)ye+=U[re[he]];return ye;case"utf8":case"utf-8":return C(this,O,V);case"ascii":var pe=this,we=O,oe=V,fe="";oe=Math.min(pe.length,oe);for(var Ce=we;Ce<oe;++Ce)fe+=String.fromCharCode(127&pe[Ce]);return fe;case"latin1":case"binary":var Fe=this,Ae=O,De=V,Be="";De=Math.min(Fe.length,De);for(var st=Ae;st<De;++st)Be+=String.fromCharCode(Fe[st]);return Be;case"base64":return qe=this,Z=V,(Et=O)===0&&Z===qe.length?o.fromByteArray(qe):o.fromByteArray(qe.slice(Et,Z));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var qe=O,Et=V,de=this.slice(qe,Et),le="",Ue=0;Ue<de.length;Ue+=2)le+=String.fromCharCode(de[Ue]+256*de[Ue+1]);return le;default:if(ie)throw new TypeError("Unknown encoding: "+D);D=(D+"").toLowerCase(),ie=!0}}function v(D,O,V){var Z=D[O];D[O]=D[V],D[V]=Z}function x(D,O,V,Z,ie){if(D.length===0)return-1;if(typeof V=="string"?(Z=V,V=0):2147483647<V?V=2147483647:V<-2147483648&&(V=-2147483648),(V=(V=ne(V=+V)?ie?0:D.length-1:V)<0?D.length+V:V)>=D.length){if(ie)return-1;V=D.length-1}else if(V<0){if(!ie)return-1;V=0}if(typeof O=="string"&&(O=l.from(O,Z)),l.isBuffer(O))return O.length===0?-1:T(D,O,V,Z,ie);if(typeof O=="number")return O&=255,typeof Uint8Array.prototype.indexOf=="function"?(ie?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(D,O,V):T(D,[O],V,Z,ie);throw new TypeError("val must be string, number or Buffer")}function T(D,O,V,Z,ie){var re=1,ge=D.length,ye=O.length;if(Z!==void 0&&((Z=String(Z).toLowerCase())==="ucs2"||Z==="ucs-2"||Z==="utf16le"||Z==="utf-16le")){if(D.length<2||O.length<2)return-1;ge/=re=2,ye/=2,V/=2}function he(Ce,Fe){return re===1?Ce[Fe]:Ce.readUInt16BE(Fe*re)}if(ie)for(var pe=-1,we=V;we<ge;we++)if(he(D,we)===he(O,pe===-1?0:we-pe)){if(we-(pe=pe===-1?we:pe)+1===ye)return pe*re}else pe!==-1&&(we-=we-pe),pe=-1;else for(we=V=ge<V+ye?ge-ye:V;0<=we;we--){for(var oe=!0,fe=0;fe<ye;fe++)if(he(D,we+fe)!==he(O,fe)){oe=!1;break}if(oe)return we}return-1}function w(D,O,V,Z){return W(function(ie){for(var re=[],ge=0;ge<ie.length;++ge)re.push(255&ie.charCodeAt(ge));return re}(O),D,V,Z)}function b(D,O,V,Z){return W(function(ie,re){for(var ge,ye,he=[],pe=0;pe<ie.length&&!((re-=2)<0);++pe)ye=ie.charCodeAt(pe),ge=ye>>8,ye=ye%256,he.push(ye),he.push(ge);return he}(O,D.length-V),D,V,Z)}function C(D,O,V){V=Math.min(D.length,V);for(var Z=[],ie=O;ie<V;){var re,ge,ye,he,pe=D[ie],we=null,oe=239<pe?4:223<pe?3:191<pe?2:1;if(ie+oe<=V)switch(oe){case 1:pe<128&&(we=pe);break;case 2:(192&(re=D[ie+1]))==128&&127<(he=(31&pe)<<6|63&re)&&(we=he);break;case 3:re=D[ie+1],ge=D[ie+2],(192&re)==128&&(192&ge)==128&&2047<(he=(15&pe)<<12|(63&re)<<6|63&ge)&&(he<55296||57343<he)&&(we=he);break;case 4:re=D[ie+1],ge=D[ie+2],ye=D[ie+3],(192&re)==128&&(192&ge)==128&&(192&ye)==128&&65535<(he=(15&pe)<<18|(63&re)<<12|(63&ge)<<6|63&ye)&&he<1114112&&(we=he)}we===null?(we=65533,oe=1):65535<we&&(we-=65536,Z.push(we>>>10&1023|55296),we=56320|1023&we),Z.push(we),ie+=oe}var fe=Z,Ce=fe.length;if(Ce<=A)return String.fromCharCode.apply(String,fe);for(var Fe="",Ae=0;Ae<Ce;)Fe+=String.fromCharCode.apply(String,fe.slice(Ae,Ae+=A));return Fe}i.kMaxLength=f,(l.TYPED_ARRAY_SUPPORT=function(){try{var D=new Uint8Array(1),O={foo:function(){return 42}};return Object.setPrototypeOf(O,Uint8Array.prototype),Object.setPrototypeOf(D,O),D.foo()===42}catch{return!1}}())||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),l.poolSize=8192,l.from=u,Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(D,O,V){return O=O,V=V,c(D=D),!(D<=0)&&O!==void 0?typeof V=="string"?h(D).fill(O,V):h(D).fill(O):h(D)},l.allocUnsafe=d,l.allocUnsafeSlow=d,l.isBuffer=function(D){return D!=null&&D._isBuffer===!0&&D!==l.prototype},l.compare=function(D,O){if(Q(D,Uint8Array)&&(D=l.from(D,D.offset,D.byteLength)),Q(O,Uint8Array)&&(O=l.from(O,O.offset,O.byteLength)),!l.isBuffer(D)||!l.isBuffer(O))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(D===O)return 0;for(var V=D.length,Z=O.length,ie=0,re=Math.min(V,Z);ie<re;++ie)if(D[ie]!==O[ie]){V=D[ie],Z=O[ie];break}return V<Z?-1:Z<V?1:0},l.isEncoding=function(D){switch(String(D).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(D,O){if(!Array.isArray(D))throw new TypeError('"list" argument must be an Array of Buffers');if(D.length===0)return l.alloc(0);if(O===void 0)for(ie=O=0;ie<D.length;++ie)O+=D[ie].length;for(var V=l.allocUnsafe(O),Z=0,ie=0;ie<D.length;++ie){var re=D[ie];if(Q(re,Uint8Array)&&(re=l.from(re)),!l.isBuffer(re))throw new TypeError('"list" argument must be an Array of Buffers');re.copy(V,Z),Z+=re.length}return V},l.byteLength=m,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var D=this.length;if(D%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var O=0;O<D;O+=2)v(this,O,O+1);return this},l.prototype.swap32=function(){var D=this.length;if(D%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var O=0;O<D;O+=4)v(this,O,O+3),v(this,O+1,O+2);return this},l.prototype.swap64=function(){var D=this.length;if(D%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var O=0;O<D;O+=8)v(this,O,O+7),v(this,O+1,O+6),v(this,O+2,O+5),v(this,O+3,O+4);return this},l.prototype.toLocaleString=l.prototype.toString=function(){var D=this.length;return D===0?"":arguments.length===0?C(this,0,D):g.apply(this,arguments)},l.prototype.equals=function(D){if(l.isBuffer(D))return this===D||l.compare(this,D)===0;throw new TypeError("Argument must be a Buffer")},l.prototype.inspect=function(){var O="",D=i.INSPECT_MAX_BYTES,O=this.toString("hex",0,D).replace(/(.{2})/g,"$1 ").trim();return this.length>D&&(O+=" ... "),"<Buffer "+O+">"},a&&(l.prototype[a]=l.prototype.inspect),l.prototype.compare=function(D,O,V,Z,ie){if(Q(D,Uint8Array)&&(D=l.from(D,D.offset,D.byteLength)),!l.isBuffer(D))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof D);if(V===void 0&&(V=D?D.length:0),Z===void 0&&(Z=0),ie===void 0&&(ie=this.length),(O=O===void 0?0:O)<0||V>D.length||Z<0||ie>this.length)throw new RangeError("out of range index");if(ie<=Z&&V<=O)return 0;if(ie<=Z)return-1;if(V<=O)return 1;if(this===D)return 0;for(var re=(ie>>>=0)-(Z>>>=0),ge=(V>>>=0)-(O>>>=0),ye=Math.min(re,ge),he=this.slice(Z,ie),pe=D.slice(O,V),we=0;we<ye;++we)if(he[we]!==pe[we]){re=he[we],ge=pe[we];break}return re<ge?-1:ge<re?1:0},l.prototype.includes=function(D,O,V){return this.indexOf(D,O,V)!==-1},l.prototype.indexOf=function(D,O,V){return x(this,D,O,V,!0)},l.prototype.lastIndexOf=function(D,O,V){return x(this,D,O,V,!1)},l.prototype.write=function(D,O,V,Z){if(O===void 0)Z="utf8",V=this.length,O=0;else if(V===void 0&&typeof O=="string")Z=O,V=this.length,O=0;else{if(!isFinite(O))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");O>>>=0,isFinite(V)?(V>>>=0,Z===void 0&&(Z="utf8")):(Z=V,V=void 0)}var ie=this.length-O;if((V===void 0||ie<V)&&(V=ie),0<D.length&&(V<0||O<0)||O>this.length)throw new RangeError("Attempt to write outside buffer bounds");Z=Z||"utf8";for(var re,ge,ye,he=!1;;)switch(Z){case"hex":var pe=this,we=D,oe=O,fe=V,Ce=(oe=Number(oe)||0,pe.length-oe);(!fe||Ce<(fe=Number(fe)))&&(fe=Ce),(Ce=we.length)/2<fe&&(fe=Ce/2);for(var Fe=0;Fe<fe;++Fe){var Ae=parseInt(we.substr(2*Fe,2),16);if(ne(Ae))return Fe;pe[oe+Fe]=Ae}return Fe;case"utf8":case"utf-8":return Ce=O,ye=V,W(H(D,(ge=this).length-Ce),ge,Ce,ye);case"ascii":return w(this,D,O,V);case"latin1":case"binary":return w(this,D,O,V);case"base64":return ge=this,ye=O,re=V,W(G(D),ge,ye,re);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,D,O,V);default:if(he)throw new TypeError("Unknown encoding: "+Z);Z=(""+Z).toLowerCase(),he=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function M(D,O,V){if(D%1!=0||D<0)throw new RangeError("offset is not uint");if(V<D+O)throw new RangeError("Trying to access beyond buffer length")}function k(D,O,V,Z,ie,re){if(!l.isBuffer(D))throw new TypeError('"buffer" argument must be a Buffer instance');if(ie<O||O<re)throw new RangeError('"value" argument is out of bounds');if(V+Z>D.length)throw new RangeError("Index out of range")}function P(D,O,V,Z){if(V+Z>D.length)throw new RangeError("Index out of range");if(V<0)throw new RangeError("Index out of range")}function F(D,O,V,Z,ie){return O=+O,V>>>=0,ie||P(D,0,V,4),s.write(D,O,V,Z,23,4),V+4}function I(D,O,V,Z,ie){return O=+O,V>>>=0,ie||P(D,0,V,8),s.write(D,O,V,Z,52,8),V+8}l.prototype.slice=function(D,O){var V=this.length,V=((D=~~D)<0?(D+=V)<0&&(D=0):V<D&&(D=V),(O=O===void 0?V:~~O)<0?(O+=V)<0&&(O=0):V<O&&(O=V),O<D&&(O=D),this.subarray(D,O));return Object.setPrototypeOf(V,l.prototype),V},l.prototype.readUIntLE=function(D,O,V){D>>>=0,O>>>=0,V||M(D,O,this.length);for(var Z=this[D],ie=1,re=0;++re<O&&(ie*=256);)Z+=this[D+re]*ie;return Z},l.prototype.readUIntBE=function(D,O,V){D>>>=0,O>>>=0,V||M(D,O,this.length);for(var Z=this[D+--O],ie=1;0<O&&(ie*=256);)Z+=this[D+--O]*ie;return Z},l.prototype.readUInt8=function(D,O){return D>>>=0,O||M(D,1,this.length),this[D]},l.prototype.readUInt16LE=function(D,O){return D>>>=0,O||M(D,2,this.length),this[D]|this[D+1]<<8},l.prototype.readUInt16BE=function(D,O){return D>>>=0,O||M(D,2,this.length),this[D]<<8|this[D+1]},l.prototype.readUInt32LE=function(D,O){return D>>>=0,O||M(D,4,this.length),(this[D]|this[D+1]<<8|this[D+2]<<16)+16777216*this[D+3]},l.prototype.readUInt32BE=function(D,O){return D>>>=0,O||M(D,4,this.length),16777216*this[D]+(this[D+1]<<16|this[D+2]<<8|this[D+3])},l.prototype.readIntLE=function(D,O,V){D>>>=0,O>>>=0,V||M(D,O,this.length);for(var Z=this[D],ie=1,re=0;++re<O&&(ie*=256);)Z+=this[D+re]*ie;return(ie*=128)<=Z&&(Z-=Math.pow(2,8*O)),Z},l.prototype.readIntBE=function(D,O,V){D>>>=0,O>>>=0,V||M(D,O,this.length);for(var Z=O,ie=1,re=this[D+--Z];0<Z&&(ie*=256);)re+=this[D+--Z]*ie;return(ie*=128)<=re&&(re-=Math.pow(2,8*O)),re},l.prototype.readInt8=function(D,O){return D>>>=0,O||M(D,1,this.length),128&this[D]?-1*(255-this[D]+1):this[D]},l.prototype.readInt16LE=function(D,O){return D>>>=0,O||M(D,2,this.length),O=this[D]|this[D+1]<<8,32768&O?4294901760|O:O},l.prototype.readInt16BE=function(D,O){return D>>>=0,O||M(D,2,this.length),O=this[D+1]|this[D]<<8,32768&O?4294901760|O:O},l.prototype.readInt32LE=function(D,O){return D>>>=0,O||M(D,4,this.length),this[D]|this[D+1]<<8|this[D+2]<<16|this[D+3]<<24},l.prototype.readInt32BE=function(D,O){return D>>>=0,O||M(D,4,this.length),this[D]<<24|this[D+1]<<16|this[D+2]<<8|this[D+3]},l.prototype.readFloatLE=function(D,O){return D>>>=0,O||M(D,4,this.length),s.read(this,D,!0,23,4)},l.prototype.readFloatBE=function(D,O){return D>>>=0,O||M(D,4,this.length),s.read(this,D,!1,23,4)},l.prototype.readDoubleLE=function(D,O){return D>>>=0,O||M(D,8,this.length),s.read(this,D,!0,52,8)},l.prototype.readDoubleBE=function(D,O){return D>>>=0,O||M(D,8,this.length),s.read(this,D,!1,52,8)},l.prototype.writeUIntLE=function(D,O,V,Z){D=+D,O>>>=0,V>>>=0,Z||k(this,D,O,V,Math.pow(2,8*V)-1,0);var ie=1,re=0;for(this[O]=255&D;++re<V&&(ie*=256);)this[O+re]=D/ie&255;return O+V},l.prototype.writeUIntBE=function(D,O,V,Z){D=+D,O>>>=0,V>>>=0,Z||k(this,D,O,V,Math.pow(2,8*V)-1,0);var ie=V-1,re=1;for(this[O+ie]=255&D;0<=--ie&&(re*=256);)this[O+ie]=D/re&255;return O+V},l.prototype.writeUInt8=function(D,O,V){return D=+D,O>>>=0,V||k(this,D,O,1,255,0),this[O]=255&D,O+1},l.prototype.writeUInt16LE=function(D,O,V){return D=+D,O>>>=0,V||k(this,D,O,2,65535,0),this[O]=255&D,this[O+1]=D>>>8,O+2},l.prototype.writeUInt16BE=function(D,O,V){return D=+D,O>>>=0,V||k(this,D,O,2,65535,0),this[O]=D>>>8,this[O+1]=255&D,O+2},l.prototype.writeUInt32LE=function(D,O,V){return D=+D,O>>>=0,V||k(this,D,O,4,4294967295,0),this[O+3]=D>>>24,this[O+2]=D>>>16,this[O+1]=D>>>8,this[O]=255&D,O+4},l.prototype.writeUInt32BE=function(D,O,V){return D=+D,O>>>=0,V||k(this,D,O,4,4294967295,0),this[O]=D>>>24,this[O+1]=D>>>16,this[O+2]=D>>>8,this[O+3]=255&D,O+4},l.prototype.writeIntLE=function(D,O,V,Z){D=+D,O>>>=0,Z||k(this,D,O,V,(Z=Math.pow(2,8*V-1))-1,-Z);var ie=0,re=1,ge=0;for(this[O]=255&D;++ie<V&&(re*=256);)D<0&&ge===0&&this[O+ie-1]!==0&&(ge=1),this[O+ie]=(D/re>>0)-ge&255;return O+V},l.prototype.writeIntBE=function(D,O,V,Z){D=+D,O>>>=0,Z||k(this,D,O,V,(Z=Math.pow(2,8*V-1))-1,-Z);var ie=V-1,re=1,ge=0;for(this[O+ie]=255&D;0<=--ie&&(re*=256);)D<0&&ge===0&&this[O+ie+1]!==0&&(ge=1),this[O+ie]=(D/re>>0)-ge&255;return O+V},l.prototype.writeInt8=function(D,O,V){return D=+D,O>>>=0,V||k(this,D,O,1,127,-128),this[O]=255&(D=D<0?255+D+1:D),O+1},l.prototype.writeInt16LE=function(D,O,V){return D=+D,O>>>=0,V||k(this,D,O,2,32767,-32768),this[O]=255&D,this[O+1]=D>>>8,O+2},l.prototype.writeInt16BE=function(D,O,V){return D=+D,O>>>=0,V||k(this,D,O,2,32767,-32768),this[O]=D>>>8,this[O+1]=255&D,O+2},l.prototype.writeInt32LE=function(D,O,V){return D=+D,O>>>=0,V||k(this,D,O,4,2147483647,-2147483648),this[O]=255&D,this[O+1]=D>>>8,this[O+2]=D>>>16,this[O+3]=D>>>24,O+4},l.prototype.writeInt32BE=function(D,O,V){return D=+D,O>>>=0,V||k(this,D,O,4,2147483647,-2147483648),this[O]=(D=D<0?4294967295+D+1:D)>>>24,this[O+1]=D>>>16,this[O+2]=D>>>8,this[O+3]=255&D,O+4},l.prototype.writeFloatLE=function(D,O,V){return F(this,D,O,!0,V)},l.prototype.writeFloatBE=function(D,O,V){return F(this,D,O,!1,V)},l.prototype.writeDoubleLE=function(D,O,V){return I(this,D,O,!0,V)},l.prototype.writeDoubleBE=function(D,O,V){return I(this,D,O,!1,V)},l.prototype.copy=function(D,O,V,Z){if(!l.isBuffer(D))throw new TypeError("argument should be a Buffer");if(V=V||0,Z||Z===0||(Z=this.length),O>=D.length&&(O=D.length),(Z=0<Z&&Z<V?V:Z)===V||D.length===0||this.length===0)return 0;if((O=O||0)<0)throw new RangeError("targetStart out of bounds");if(V<0||V>=this.length)throw new RangeError("Index out of range");if(Z<0)throw new RangeError("sourceEnd out of bounds");Z>this.length&&(Z=this.length);var ie=(Z=D.length-O<Z-V?D.length-O+V:Z)-V;if(this===D&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(O,V,Z);else if(this===D&&V<O&&O<Z)for(var re=ie-1;0<=re;--re)D[re+O]=this[re+V];else Uint8Array.prototype.set.call(D,this.subarray(V,Z),O);return ie},l.prototype.fill=function(D,O,V,Z){if(typeof D=="string"){if(typeof O=="string"?(Z=O,O=0,V=this.length):typeof V=="string"&&(Z=V,V=this.length),Z!==void 0&&typeof Z!="string")throw new TypeError("encoding must be a string");if(typeof Z=="string"&&!l.isEncoding(Z))throw new TypeError("Unknown encoding: "+Z);var ie;D.length===1&&(ie=D.charCodeAt(0),(Z==="utf8"&&ie<128||Z==="latin1")&&(D=ie))}else typeof D=="number"?D&=255:typeof D=="boolean"&&(D=Number(D));if(O<0||this.length<O||this.length<V)throw new RangeError("Out of range index");var re;if(!(V<=O))if(O>>>=0,V=V===void 0?this.length:V>>>0,typeof(D=D||0)=="number")for(re=O;re<V;++re)this[re]=D;else{var ge=l.isBuffer(D)?D:l.from(D,Z),ye=ge.length;if(ye===0)throw new TypeError('The value "'+D+'" is invalid for argument "value"');for(re=0;re<V-O;++re)this[re+O]=ge[re%ye]}return this};var B=/[^+/0-9A-Za-z-_]/g;function H(D,O){O=O||1/0;for(var V,Z=D.length,ie=null,re=[],ge=0;ge<Z;++ge){if(55295<(V=D.charCodeAt(ge))&&V<57344){if(!ie){if(56319<V){-1<(O-=3)&&re.push(239,191,189);continue}if(ge+1===Z){-1<(O-=3)&&re.push(239,191,189);continue}ie=V;continue}if(V<56320){-1<(O-=3)&&re.push(239,191,189),ie=V;continue}V=65536+(ie-55296<<10|V-56320)}else ie&&-1<(O-=3)&&re.push(239,191,189);if(ie=null,V<128){if(--O<0)break;re.push(V)}else if(V<2048){if((O-=2)<0)break;re.push(V>>6|192,63&V|128)}else if(V<65536){if((O-=3)<0)break;re.push(V>>12|224,V>>6&63|128,63&V|128)}else{if(!(V<1114112))throw new Error("Invalid code point");if((O-=4)<0)break;re.push(V>>18|240,V>>12&63|128,V>>6&63|128,63&V|128)}}return re}function G(D){return o.toByteArray(function(O){if((O=(O=O.split("=")[0]).trim().replace(B,"")).length<2)return"";for(;O.length%4!=0;)O+="=";return O}(D))}function W(D,O,V,Z){for(var ie=0;ie<Z&&!(ie+V>=O.length||ie>=D.length);++ie)O[ie+V]=D[ie];return ie}function Q(D,O){return D instanceof O||D!=null&&D.constructor!=null&&D.constructor.name!=null&&D.constructor.name===O.name}function ne(D){return D!=D}var U=function(){for(var D="0123456789abcdef",O=new Array(256),V=0;V<16;++V)for(var Z=16*V,ie=0;ie<16;++ie)O[Z+ie]=D[V]+D[ie];return O}()}).call(this,t("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:246}],5:[function(t,r,i){r.exports=function(n){if(typeof n!="function")throw TypeError(String(n)+" is not a function");return n}},{}],6:[function(t,r,i){var n=t("../internals/is-object");r.exports=function(o){if(n(o)||o===null)return o;throw TypeError("Can't set "+String(o)+" as a prototype")}},{"../internals/is-object":74}],7:[function(s,r,i){var n=s("../internals/well-known-symbol"),o=s("../internals/object-create"),s=s("../internals/object-define-property"),a=n("unscopables"),f=Array.prototype;f[a]==null&&s.f(f,a,{configurable:!0,value:o(null)}),r.exports=function(h){f[a][h]=!0}},{"../internals/object-create":90,"../internals/object-define-property":92,"../internals/well-known-symbol":148}],8:[function(t,r,i){var n=t("../internals/string-multibyte").charAt;r.exports=function(o,s,a){return s+(a?n(o,s).length:1)}},{"../internals/string-multibyte":123}],9:[function(t,r,i){r.exports=function(n,o,s){if(n instanceof o)return n;throw TypeError("Incorrect "+(s?s+" ":"")+"invocation")}},{}],10:[function(t,r,i){var n=t("../internals/is-object");r.exports=function(o){if(n(o))return o;throw TypeError(String(o)+" is not an object")}},{"../internals/is-object":74}],11:[function(t,r,i){r.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},{}],12:[function(P,r,i){function n(I){return h(I)&&l(F,u(I))}var o,s=P("../internals/array-buffer-native"),a=P("../internals/descriptors"),f=P("../internals/global"),h=P("../internals/is-object"),l=P("../internals/has"),u=P("../internals/classof"),c=P("../internals/create-non-enumerable-property"),d=P("../internals/redefine"),y=P("../internals/object-define-property").f,p=P("../internals/object-get-prototype-of"),m=P("../internals/object-set-prototype-of"),A=P("../internals/well-known-symbol"),P=P("../internals/uid"),g=f.Int8Array,v=g&&g.prototype,x=f.Uint8ClampedArray,x=x&&x.prototype,T=g&&p(g),w=v&&p(v),b=Object.prototype,C=b.isPrototypeOf,A=A("toStringTag"),M=P("TYPED_ARRAY_TAG"),k=s&&!!m&&u(f.opera)!=="Opera",P=!1,F={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(o in F)f[o]||(k=!1);if((!k||typeof T!="function"||T===Function.prototype)&&(T=function(){throw TypeError("Incorrect invocation")},k))for(o in F)f[o]&&m(f[o],T);if((!k||!w||w===b)&&(w=T.prototype,k))for(o in F)f[o]&&m(f[o].prototype,w);if(k&&p(x)!==w&&m(x,w),a&&!l(w,A))for(o in P=!0,y(w,A,{get:function(){return h(this)?this[M]:void 0}}),F)f[o]&&c(f[o],M,o);r.exports={NATIVE_ARRAY_BUFFER_VIEWS:k,TYPED_ARRAY_TAG:P&&M,aTypedArray:function(I){if(n(I))return I;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(I){if(m){if(C.call(T,I))return I}else for(var B in F)if(l(F,o)&&(B=f[B],B&&(I===B||C.call(B,I))))return I;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(I,B,H){if(a){if(H)for(var G in F)G=f[G],G&&l(G.prototype,I)&&delete G.prototype[I];w[I]&&!H||d(w,I,!H&&k&&v[I]||B)}},exportTypedArrayStaticMethod:function(I,B,H){var G,W;if(a){if(m){if(H)for(G in F)(W=f[G])&&l(W,I)&&delete W[I];if(T[I]&&!H)return;try{return d(T,I,!H&&k&&g[I]||B)}catch{}}for(G in F)!(W=f[G])||W[I]&&!H||d(W,I,B)}},isView:function(I){return I=u(I),I==="DataView"||l(F,I)},isTypedArray:n,TypedArray:T,TypedArrayPrototype:w}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/uid":145,"../internals/well-known-symbol":148}],13:[function(V,r,i){function n(oe){return[255&oe]}function o(oe){return[255&oe,oe>>8&255]}function s(oe){return[255&oe,oe>>8&255,oe>>16&255,oe>>24&255]}function a(oe){return oe[3]<<24|oe[2]<<16|oe[1]<<8|oe[0]}function f(oe){return re(oe,23,4)}function h(oe){return re(oe,52,8)}function l(oe,fe){P(oe[Q],fe,{get:function(){return B(this)[fe]}})}function u(Be,fe,De,Fe){if(De=b(De),Be=B(Be),De+fe>Be.byteLength)throw ie(ne);var Ae=B(Be.buffer).bytes,De=De+Be.byteOffset,Be=Ae.slice(De,De+fe);return Fe?Be:Be.reverse()}function c(oe,fe,Ce,Fe,Ae,De){if(Ce=b(Ce),oe=B(oe),Ce+fe>oe.byteLength)throw ie(ne);for(var Be=B(oe.buffer).bytes,st=Ce+oe.byteOffset,qe=Fe(+Ae),Et=0;Et<fe;Et++)Be[st+Et]=qe[De?Et:fe-Et-1]}var d=V("../internals/global"),y=V("../internals/descriptors"),p=V("../internals/array-buffer-native"),m=V("../internals/create-non-enumerable-property"),g=V("../internals/redefine-all"),v=V("../internals/fails"),x=V("../internals/an-instance"),T=V("../internals/to-integer"),w=V("../internals/to-length"),b=V("../internals/to-index"),C=V("../internals/ieee754"),A=V("../internals/object-get-prototype-of"),M=V("../internals/object-set-prototype-of"),k=V("../internals/object-get-own-property-names").f,P=V("../internals/object-define-property").f,F=V("../internals/array-fill"),I=V("../internals/set-to-string-tag"),V=V("../internals/internal-state"),B=V.get,H=V.set,G="ArrayBuffer",W="DataView",Q="prototype",ne="Wrong index",U=d[G],D=U,O=d[W],V=O&&O[Q],Z=Object.prototype,ie=d.RangeError,re=C.pack,ge=C.unpack;if(p){if(!v(function(){U(1)})||!v(function(){new U(-1)})||v(function(){return new U,new U(1.5),new U(NaN),U.name!=G})){for(var ye,d=(D=function(Ce){return x(this,D),new U(b(Ce))})[Q]=U[Q],he=k(U),pe=0;he.length>pe;)(ye=he[pe++])in D||m(D,ye,U[ye]);d.constructor=D}M&&A(V)!==Z&&M(V,Z);var C=new O(new D(2)),we=V.setInt8;C.setInt8(0,2147483648),C.setInt8(1,2147483649),!C.getInt8(0)&&C.getInt8(1)||g(V,{setInt8:function(fe,Ce){we.call(this,fe,Ce<<24>>24)},setUint8:function(fe,Ce){we.call(this,fe,Ce<<24>>24)}},{unsafe:!0})}else D=function(oe){x(this,D,G),oe=b(oe),H(this,{bytes:F.call(new Array(oe),0),byteLength:oe}),y||(this.byteLength=oe)},O=function(oe,Ae,Ce){x(this,O,W),x(oe,D,W);var Fe=B(oe).byteLength,Ae=T(Ae);if(Ae<0||Fe<Ae)throw ie("Wrong offset");if(Fe<Ae+(Ce=Ce===void 0?Fe-Ae:w(Ce)))throw ie("Wrong length");H(this,{buffer:oe,byteLength:Ce,byteOffset:Ae}),y||(this.buffer=oe,this.byteLength=Ce,this.byteOffset=Ae)},y&&(l(D,"byteLength"),l(O,"buffer"),l(O,"byteLength"),l(O,"byteOffset")),g(O[Q],{getInt8:function(oe){return u(this,1,oe)[0]<<24>>24},getUint8:function(oe){return u(this,1,oe)[0]},getInt16:function(oe){return oe=u(this,2,oe,1<arguments.length?arguments[1]:void 0),(oe[1]<<8|oe[0])<<16>>16},getUint16:function(oe){return oe=u(this,2,oe,1<arguments.length?arguments[1]:void 0),oe[1]<<8|oe[0]},getInt32:function(oe){return a(u(this,4,oe,1<arguments.length?arguments[1]:void 0))},getUint32:function(oe){return a(u(this,4,oe,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(oe){return ge(u(this,4,oe,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(oe){return ge(u(this,8,oe,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(oe,fe){c(this,1,oe,n,fe)},setUint8:function(oe,fe){c(this,1,oe,n,fe)},setInt16:function(oe,fe){c(this,2,oe,o,fe,2<arguments.length?arguments[2]:void 0)},setUint16:function(oe,fe){c(this,2,oe,o,fe,2<arguments.length?arguments[2]:void 0)},setInt32:function(oe,fe){c(this,4,oe,s,fe,2<arguments.length?arguments[2]:void 0)},setUint32:function(oe,fe){c(this,4,oe,s,fe,2<arguments.length?arguments[2]:void 0)},setFloat32:function(oe,fe){c(this,4,oe,f,fe,2<arguments.length?arguments[2]:void 0)},setFloat64:function(oe,fe){c(this,8,oe,h,fe,2<arguments.length?arguments[2]:void 0)}});I(D,G),I(O,W),r.exports={ArrayBuffer:D,DataView:O}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/ieee754":65,"../internals/internal-state":70,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/to-index":133,"../internals/to-integer":135,"../internals/to-length":136}],14:[function(t,r,i){var n=t("../internals/to-object"),o=t("../internals/to-absolute-index"),s=t("../internals/to-length"),a=Math.min;r.exports=[].copyWithin||function(y,h){var l=n(this),u=s(l.length),c=o(y,u),d=o(h,u),y=2<arguments.length?arguments[2]:void 0,p=a((y===void 0?u:o(y,u))-d,u-c),m=1;for(d<c&&c<d+p&&(m=-1,d+=p-1,c+=p-1);0<p--;)d in l?l[c]=l[d]:delete l[c],c+=m,d+=m;return l}},{"../internals/to-absolute-index":132,"../internals/to-length":136,"../internals/to-object":137}],15:[function(t,r,i){var n=t("../internals/to-object"),o=t("../internals/to-absolute-index"),s=t("../internals/to-length");r.exports=function(a){for(var f=n(this),h=s(f.length),u=arguments.length,l=o(1<u?arguments[1]:void 0,h),u=2<u?arguments[2]:void 0,c=u===void 0?h:o(u,h);l<c;)f[l++]=a;return f}},{"../internals/to-absolute-index":132,"../internals/to-length":136,"../internals/to-object":137}],16:[function(s,r,i){var n=s("../internals/array-iteration").forEach,o=s("../internals/array-method-is-strict"),s=s("../internals/array-method-uses-to-length"),o=o("forEach"),s=s("forEach");r.exports=o&&s?[].forEach:function(a){return n(this,a,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(t,r,i){var n=t("../internals/function-bind-context"),o=t("../internals/to-object"),s=t("../internals/call-with-safe-iteration-closing"),a=t("../internals/is-array-iterator-method"),f=t("../internals/to-length"),h=t("../internals/create-property"),l=t("../internals/get-iterator-method");r.exports=function(x){var c,d,y,p,m,g,v=o(x),x=typeof this=="function"?this:Array,T=arguments.length,w=1<T?arguments[1]:void 0,b=w!==void 0,C=l(v),A=0;if(b&&(w=n(w,2<T?arguments[2]:void 0,2)),C==null||x==Array&&a(C))for(d=new x(c=f(v.length));A<c;A++)g=b?w(v[A],A):v[A],h(d,A,g);else for(m=(p=C.call(v)).next,d=new x;!(y=m.call(p)).done;A++)g=b?s(p,w,[y.value,A],!0):y.value,h(d,A,g);return d.length=A,d}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":136,"../internals/to-object":137}],18:[function(t,r,i){function n(f){return function(h,l,u){var c,d=o(h),y=s(d.length),p=a(u,y);if(f&&l!=l){for(;p<y;)if((c=d[p++])!=c)return!0}else for(;p<y;p++)if((f||p in d)&&d[p]===l)return f||p||0;return!f&&-1}}var o=t("../internals/to-indexed-object"),s=t("../internals/to-length"),a=t("../internals/to-absolute-index");r.exports={includes:n(!0),indexOf:n(!1)}},{"../internals/to-absolute-index":132,"../internals/to-indexed-object":134,"../internals/to-length":136}],19:[function(t,r,i){function n(u){var c=u==1,d=u==2,y=u==3,p=u==4,m=u==6,g=u==5||m;return function(v,x,T,w){for(var b,C,A=a(v),M=s(A),k=o(x,T,3),P=f(M.length),F=0,x=w||h,I=c?x(v,P):d?x(v,0):void 0;F<P;F++)if((g||F in M)&&(C=k(b=M[F],F,A),u)){if(c)I[F]=C;else if(C)switch(u){case 3:return!0;case 5:return b;case 6:return F;case 2:l.call(I,b)}else if(p)return!1}return m?-1:y||p?p:I}}var o=t("../internals/function-bind-context"),s=t("../internals/indexed-object"),a=t("../internals/to-object"),f=t("../internals/to-length"),h=t("../internals/array-species-create"),l=[].push;r.exports={forEach:n(0),map:n(1),filter:n(2),some:n(3),every:n(4),find:n(5),findIndex:n(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":54,"../internals/indexed-object":66,"../internals/to-length":136,"../internals/to-object":137}],20:[function(u,r,i){var n=u("../internals/to-indexed-object"),o=u("../internals/to-integer"),s=u("../internals/to-length"),l=u("../internals/array-method-is-strict"),u=u("../internals/array-method-uses-to-length"),a=Math.min,f=[].lastIndexOf,h=!!f&&1/[1].lastIndexOf(1,-0)<0,l=l("lastIndexOf"),u=u("indexOf",{ACCESSORS:!0,1:0});r.exports=h||!l||!u?function(c){if(h)return f.apply(this,arguments)||0;var d=n(this),y=s(d.length),p=y-1;for((p=1<arguments.length?a(p,o(arguments[1])):p)<0&&(p=y+p);0<=p;p--)if(p in d&&d[p]===c)return p||0;return-1}:f},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":134,"../internals/to-integer":135,"../internals/to-length":136}],21:[function(t,r,i){var n=t("../internals/fails"),o=t("../internals/well-known-symbol"),s=t("../internals/engine-v8-version"),a=o("species");r.exports=function(f){return 51<=s||!n(function(){var h=[];return(h.constructor={})[a]=function(){return{foo:1}},h[f](Boolean).foo!==1})}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":148}],22:[function(t,r,i){var n=t("../internals/fails");r.exports=function(o,s){var a=[][o];return!!a&&n(function(){a.call(null,s||function(){throw 1},1)})}},{"../internals/fails":51}],23:[function(t,r,i){function n(l){throw l}var o=t("../internals/descriptors"),s=t("../internals/fails"),a=t("../internals/has"),f=Object.defineProperty,h={};r.exports=function(l,u){var c,d,y,p;return a(h,l)?h[l]:(c=[][l],d=!!a(u=u||{},"ACCESSORS")&&u.ACCESSORS,y=a(u,0)?u[0]:n,p=a(u,1)?u[1]:void 0,h[l]=!!c&&!s(function(){if(d&&!o)return!0;var m={length:-1};d?f(m,1,{enumerable:!0,get:n}):m[1]=1,c.call(m,y,p)}))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":60}],24:[function(t,r,i){function n(h){return function(l,u,c,d){o(u);var y=s(l),p=a(y),m=f(y.length),g=h?m-1:0,v=h?-1:1;if(c<2)for(;;){if(g in p){d=p[g],g+=v;break}if(g+=v,h?g<0:m<=g)throw TypeError("Reduce of empty array with no initial value")}for(;h?0<=g:g<m;g+=v)g in p&&(d=u(d,p[g],g,y));return d}}var o=t("../internals/a-function"),s=t("../internals/to-object"),a=t("../internals/indexed-object"),f=t("../internals/to-length");r.exports={left:n(!1),right:n(!0)}},{"../internals/a-function":5,"../internals/indexed-object":66,"../internals/to-length":136,"../internals/to-object":137}],25:[function(t,r,i){var n=t("../internals/is-object"),o=t("../internals/is-array"),s=t("../internals/well-known-symbol")("species");r.exports=function(a,f){var h;return new((h=o(a)&&(typeof(h=a.constructor)=="function"&&(h===Array||o(h.prototype))||n(h)&&(h=h[s])===null)?void 0:h)===void 0?Array:h)(f===0?0:f)}},{"../internals/is-array":72,"../internals/is-object":74,"../internals/well-known-symbol":148}],26:[function(t,r,i){var n=t("../internals/an-object");r.exports=function(o,s,a,f){try{return f?s(n(a)[0],a[1]):s(a)}catch(h){throw f=o.return,f!==void 0&&n(f.call(o)),h}}},{"../internals/an-object":10}],27:[function(t,r,i){var n=t("../internals/well-known-symbol")("iterator"),o=!1;try{var s=0,a={next:function(){return{done:!!s++}},return:function(){o=!0}};a[n]=function(){return this},Array.from(a,function(){throw 2})}catch{}r.exports=function(f,h){if(!h&&!o)return!1;var l=!1;try{var u={};u[n]=function(){return{next:function(){return{done:l=!0}}}},f(u)}catch{}return l}},{"../internals/well-known-symbol":148}],28:[function(t,r,i){var n={}.toString;r.exports=function(o){return n.call(o).slice(8,-1)}},{}],29:[function(t,r,i){var n=t("../internals/to-string-tag-support"),o=t("../internals/classof-raw"),s=t("../internals/well-known-symbol")("toStringTag"),a=o(function(){return arguments}())=="Arguments";r.exports=n?o:function(f){var h;return f===void 0?"Undefined":f===null?"Null":typeof(h=function(l,u){try{return l[u]}catch{}}(f=Object(f),s))=="string"?h:a?o(f):(h=o(f))=="Object"&&typeof f.callee=="function"?"Arguments":h}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":141,"../internals/well-known-symbol":148}],30:[function(y,r,i){var n=y("../internals/object-define-property").f,o=y("../internals/object-create"),s=y("../internals/redefine-all"),a=y("../internals/function-bind-context"),f=y("../internals/an-instance"),h=y("../internals/iterate"),l=y("../internals/define-iterator"),u=y("../internals/set-species"),c=y("../internals/descriptors"),d=y("../internals/internal-metadata").fastKey,y=y("../internals/internal-state"),p=y.set,m=y.getterFor;r.exports={getConstructor:function(g,v,x,T){function w(M,k,P){var F,I=A(M),B=b(M,k);return B?B.value=P:(I.last=B={index:F=d(k,!0),key:k,value:P,previous:k=I.last,next:void 0,removed:!1},I.first||(I.first=B),k&&(k.next=B),c?I.size++:M.size++,F!=="F"&&(I.index[F]=B)),M}function b(F,k){var P,F=A(F),I=d(k);if(I!=="F")return F.index[I];for(P=F.first;P;P=P.next)if(P.key==k)return P}var C=g(function(M,k){f(M,C,v),p(M,{type:v,index:o(null),first:void 0,last:void 0,size:0}),c||(M.size=0),k!=null&&h(k,M[T],M,x)}),A=m(v);return s(C.prototype,{clear:function(){for(var M=A(this),k=M.index,P=M.first;P;)P.removed=!0,P.previous&&(P.previous=P.previous.next=void 0),delete k[P.index],P=P.next;M.first=M.last=void 0,c?M.size=0:this.size=0},delete:function(I){var k,P,F=A(this),I=b(this,I);return I&&(k=I.next,P=I.previous,delete F.index[I.index],I.removed=!0,P&&(P.next=k),k&&(k.previous=P),F.first==I&&(F.first=k),F.last==I&&(F.last=P),c?F.size--:this.size--),!!I},forEach:function(M){for(var k,P=A(this),F=a(M,1<arguments.length?arguments[1]:void 0,3);k=k?k.next:P.first;)for(F(k.value,k.key,this);k&&k.removed;)k=k.previous},has:function(M){return!!b(this,M)}}),s(C.prototype,x?{get:function(M){return M=b(this,M),M&&M.value},set:function(M,k){return w(this,M===0?0:M,k)}}:{add:function(M){return w(this,M=M===0?0:M,M)}}),c&&n(C.prototype,"size",{get:function(){return A(this).size}}),C},setStrong:function(g,v,x){var T=v+" Iterator",w=m(v),b=m(T);l(g,v,function(C,A){p(this,{type:T,target:C,state:w(C),kind:A,last:void 0})},function(){for(var C=b(this),A=C.kind,M=C.last;M&&M.removed;)M=M.previous;return C.target&&(C.last=M=M?M.next:C.state.first)?A=="keys"?{value:M.key,done:!1}:A=="values"?{value:M.value,done:!1}:{value:[M.key,M.value],done:!1}:{value:C.target=void 0,done:!0}},x?"entries":"values",!x,!0),u(v)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":54,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/iterate":77,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/redefine-all":107,"../internals/set-species":116}],31:[function(p,r,i){function n(w){return w.frozen||(w.frozen=new o)}function o(){this.entries=[]}function s(w,b){return v(w.entries,function(C){return C[0]===b})}var a=p("../internals/redefine-all"),f=p("../internals/internal-metadata").getWeakData,h=p("../internals/an-object"),l=p("../internals/is-object"),u=p("../internals/an-instance"),c=p("../internals/iterate"),d=p("../internals/array-iteration"),y=p("../internals/has"),p=p("../internals/internal-state"),m=p.set,g=p.getterFor,v=d.find,x=d.findIndex,T=0;o.prototype={get:function(w){if(w=s(this,w),w)return w[1]},has:function(w){return!!s(this,w)},set:function(w,b){var C=s(this,w);C?C[1]=b:this.entries.push([w,b])},delete:function(w){var b=x(this.entries,function(C){return C[0]===w});return~b&&this.entries.splice(b,1),!!~b}},r.exports={getConstructor:function(w,b,C,A){function M(F,I,B){var H=P(F),G=f(h(I),!0);return G===!0?n(H).set(I,B):G[H.id]=B,F}var k=w(function(F,I){u(F,k,b),m(F,{type:b,id:T++,frozen:void 0}),I!=null&&c(I,F[A],F,C)}),P=g(b);return a(k.prototype,{delete:function(F){var I,B=P(this);return!!l(F)&&((I=f(F))===!0?n(B).delete(F):I&&y(I,B.id)&&delete I[B.id])},has:function(F){var I,B=P(this);return!!l(F)&&((I=f(F))===!0?n(B).has(F):I&&y(I,B.id))}}),a(k.prototype,C?{get:function(F){var I,B=P(this);if(l(F))return(I=f(F))===!0?n(B).get(F):I?I[B.id]:void 0},set:function(F,I){return M(this,F,I)}}:{add:function(F){return M(this,F,!0)}}),k}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":60,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine-all":107}],32:[function(t,r,i){var n=t("../internals/export"),o=t("../internals/global"),s=t("../internals/is-forced"),a=t("../internals/redefine"),f=t("../internals/internal-metadata"),h=t("../internals/iterate"),l=t("../internals/an-instance"),u=t("../internals/is-object"),c=t("../internals/fails"),d=t("../internals/check-correctness-of-iteration"),y=t("../internals/set-to-string-tag"),p=t("../internals/inherit-if-required");r.exports=function(m,g,v){function x(G){var W=I[G];a(I,G,G=="add"?function(Q){return W.call(this,Q===0?0:Q),this}:G=="delete"?function(Q){return!(k&&!u(Q))&&W.call(this,Q===0?0:Q)}:G=="get"?function(Q){return k&&!u(Q)?void 0:W.call(this,Q===0?0:Q)}:G=="has"?function(Q){return!(k&&!u(Q))&&W.call(this,Q===0?0:Q)}:function(Q,ne){return W.call(this,Q===0?0:Q,ne),this})}var T,w,b,C,A,M=m.indexOf("Map")!==-1,k=m.indexOf("Weak")!==-1,P=M?"set":"add",F=o[m],I=F&&F.prototype,B=F,H={};return s(m,typeof F!="function"||!(k||I.forEach&&!c(function(){new F().entries().next()})))?(B=v.getConstructor(g,m,M,P),f.REQUIRED=!0):s(m,!0)&&(w=(T=new B)[P](k?{}:-0,1)!=T,b=c(function(){T.has(1)}),C=d(function(G){new F(G)}),A=!k&&c(function(){for(var G=new F,W=5;W--;)G[P](W,W);return!G.has(-0)}),C||(((B=g(function(G,W){return l(G,B,m),G=p(new F,G,B),W!=null&&h(W,G[P],G,M),G})).prototype=I).constructor=B),(b||A)&&(x("delete"),x("has"),M&&x("get")),(A||w)&&x(P),k&&I.clear&&delete I.clear),H[m]=B,n({global:!0,forced:B!=F},H),y(B,m),k||v.setStrong(B,m,M),B}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-metadata":69,"../internals/is-forced":73,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine":108,"../internals/set-to-string-tag":117}],33:[function(t,r,i){var n=t("../internals/has"),o=t("../internals/own-keys"),s=t("../internals/object-get-own-property-descriptor"),a=t("../internals/object-define-property");r.exports=function(f,h){for(var l=o(h),u=a.f,c=s.f,d=0;d<l.length;d++){var y=l[d];n(f,y)||u(f,y,c(h,y))}}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/own-keys":103}],34:[function(t,r,i){var n=t("../internals/well-known-symbol")("match");r.exports=function(o){var s=/./;try{"/./"[o](s)}catch{try{return s[n]=!1,"/./"[o](s)}catch{}}return!1}},{"../internals/well-known-symbol":148}],35:[function(t,r,i){t=t("../internals/fails"),r.exports=!t(function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype})},{"../internals/fails":51}],36:[function(t,r,i){var n=t("../internals/require-object-coercible"),o=/"/g;r.exports=function(l,a,f,h){var l=String(n(l)),u="<"+a;return f!==""&&(u+=" "+f+'="'+String(h).replace(o,"&quot;")+'"'),u+">"+l+"</"+a+">"}},{"../internals/require-object-coercible":113}],37:[function(t,r,i){function n(){return this}var o=t("../internals/iterators-core").IteratorPrototype,s=t("../internals/object-create"),a=t("../internals/create-property-descriptor"),f=t("../internals/set-to-string-tag"),h=t("../internals/iterators");r.exports=function(l,u,c){return u+=" Iterator",l.prototype=s(o,{next:a(1,c)}),f(l,u,!1,!0),h[u]=n,l}},{"../internals/create-property-descriptor":39,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-create":90,"../internals/set-to-string-tag":117}],38:[function(t,r,i){var n=t("../internals/descriptors"),o=t("../internals/object-define-property"),s=t("../internals/create-property-descriptor");r.exports=n?function(a,f,h){return o.f(a,f,s(1,h))}:function(a,f,h){return a[f]=h,a}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":92}],39:[function(t,r,i){r.exports=function(n,o){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:o}}},{}],40:[function(t,r,i){var n=t("../internals/to-primitive"),o=t("../internals/object-define-property"),s=t("../internals/create-property-descriptor");r.exports=function(a,f,h){f=n(f),f in a?o.f(a,f,s(0,h)):a[f]=h}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":92,"../internals/to-primitive":140}],41:[function(p,r,i){function n(){return this}var o=p("../internals/export"),s=p("../internals/create-iterator-constructor"),a=p("../internals/object-get-prototype-of"),f=p("../internals/object-set-prototype-of"),h=p("../internals/set-to-string-tag"),l=p("../internals/create-non-enumerable-property"),u=p("../internals/redefine"),c=p("../internals/well-known-symbol"),d=p("../internals/is-pure"),y=p("../internals/iterators"),p=p("../internals/iterators-core"),m=p.IteratorPrototype,g=p.BUGGY_SAFARI_ITERATORS,v=c("iterator"),x="values",T="entries";r.exports=function(w,b,C,H,M,k,P){s(C,b,H);function F(D){if(D===M&&ne)return ne;if(!g&&D in W)return W[D];switch(D){case"keys":case x:case T:return function(){return new C(this,D)}}return function(){return new C(this)}}var I,B,H=b+" Iterator",G=!1,W=w.prototype,Q=W[v]||W["@@iterator"]||M&&W[M],ne=!g&&Q||F(M),U=b=="Array"&&W.entries||Q;if(U&&(U=a(U.call(new w)),m!==Object.prototype&&U.next&&(d||a(U)===m||(f?f(U,m):typeof U[v]!="function"&&l(U,v,n)),h(U,H,!0,!0),d&&(y[H]=n))),M==x&&Q&&Q.name!==x&&(G=!0,ne=function(){return Q.call(this)}),d&&!P||W[v]===ne||l(W,v,ne),y[b]=ne,M)if(I={values:F(x),keys:k?ne:F("keys"),entries:F(T)},P)for(B in I)!g&&!G&&B in W||u(W,B,I[B]);else o({target:b,proto:!0,forced:g||G},I);return I}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":75,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":148}],42:[function(t,r,i){var n=t("../internals/path"),o=t("../internals/has"),s=t("../internals/well-known-symbol-wrapped"),a=t("../internals/object-define-property").f;r.exports=function(f){var h=n.Symbol||(n.Symbol={});o(h,f)||a(h,f,{value:s.f(f)})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/path":104,"../internals/well-known-symbol-wrapped":147}],43:[function(t,r,i){t=t("../internals/fails"),r.exports=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},{"../internals/fails":51}],44:[function(o,r,i){var n=o("../internals/global"),o=o("../internals/is-object"),s=n.document,a=o(s)&&o(s.createElement);r.exports=function(f){return a?s.createElement(f):{}}},{"../internals/global":59,"../internals/is-object":74}],45:[function(t,r,i){r.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(t,r,i){t=t("../internals/engine-user-agent"),r.exports=/(iphone|ipod|ipad).*applewebkit/i.test(t)},{"../internals/engine-user-agent":47}],47:[function(t,r,i){t=t("../internals/get-built-in"),r.exports=t("navigator","userAgent")||""},{"../internals/get-built-in":56}],48:[function(s,r,i){var n,o,a=s("../internals/global"),s=s("../internals/engine-user-agent"),a=a.process,a=a&&a.versions,a=a&&a.v8;a?o=(n=a.split("."))[0]+n[1]:s&&(!(n=s.match(/Edge\/(\d+)/))||74<=n[1])&&(n=s.match(/Chrome\/(\d+)/))&&(o=n[1]),r.exports=o&&+o},{"../internals/engine-user-agent":47,"../internals/global":59}],49:[function(t,r,i){r.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(t,r,i){var n=t("../internals/global"),o=t("../internals/object-get-own-property-descriptor").f,s=t("../internals/create-non-enumerable-property"),a=t("../internals/redefine"),f=t("../internals/set-global"),h=t("../internals/copy-constructor-properties"),l=t("../internals/is-forced");r.exports=function(u,c){var d,y,p,m=u.target,g=u.global,v=u.stat,x=g?n:v?n[m]||f(m,{}):(n[m]||{}).prototype;if(x)for(d in c){if(y=c[d],p=u.noTargetGet?(p=o(x,d))&&p.value:x[d],!l(g?d:m+(v?".":"#")+d,u.forced)&&p!==void 0){if(typeof y==typeof p)continue;h(y,p)}(u.sham||p&&p.sham)&&s(y,"sham",!0),a(x,d,y,u)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/is-forced":73,"../internals/object-get-own-property-descriptor":93,"../internals/redefine":108,"../internals/set-global":115}],51:[function(t,r,i){r.exports=function(n){try{return!!n()}catch{return!0}}},{}],52:[function(c,r,i){c("../modules/es.regexp.exec");var n=c("../internals/redefine"),o=c("../internals/fails"),s=c("../internals/well-known-symbol"),a=c("../internals/regexp-exec"),f=c("../internals/create-non-enumerable-property"),h=s("species"),l=!o(function(){var p=/./;return p.exec=function(){var m=[];return m.groups={a:"7"},m},"".replace(p,"$<a>")!=="7"}),u="a".replace(/./,"$0")==="$0",c=s("replace"),d=!!/./[c]&&/./[c]("a","$0")==="",y=!o(function(){var m=/(?:)/,p=m.exec,m=(m.exec=function(){return p.apply(this,arguments)},"ab".split(m));return m.length!==2||m[0]!=="a"||m[1]!=="b"});r.exports=function(p,m,g,v){var x,T,w=s(p),b=!o(function(){var A={};return A[w]=function(){return 7},""[p](A)!=7}),C=b&&!o(function(){var A=!1,M=/a/;return p==="split"&&((M={constructor:{}}).constructor[h]=function(){return M},M.flags="",M[w]=/./[w]),M.exec=function(){return A=!0,null},M[w](""),!A});b&&C&&(p!=="replace"||l&&u&&!d)&&(p!=="split"||y)||(x=/./[w],g=(C=g(w,""[p],function(A,M,k,P,F){return M.exec===a?b&&!F?{done:!0,value:x.call(M,k,P)}:{done:!0,value:A.call(k,M,P)}:{done:!1}},{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}))[0],T=C[1],n(String.prototype,p,g),n(RegExp.prototype,w,m==2?function(A,M){return T.call(A,this,M)}:function(A){return T.call(A,this)})),v&&f(RegExp.prototype[w],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":108,"../internals/regexp-exec":110,"../internals/well-known-symbol":148,"../modules/es.regexp.exec":187}],53:[function(t,r,i){t=t("../internals/fails"),r.exports=!t(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":51}],54:[function(t,r,i){var n=t("../internals/a-function");r.exports=function(o,s,a){if(n(o),s===void 0)return o;switch(a){case 0:return function(){return o.call(s)};case 1:return function(f){return o.call(s,f)};case 2:return function(f,h){return o.call(s,f,h)};case 3:return function(f,h,l){return o.call(s,f,h,l)}}return function(){return o.apply(s,arguments)}}},{"../internals/a-function":5}],55:[function(t,r,i){var n=t("../internals/a-function"),o=t("../internals/is-object"),s=[].slice,a={};r.exports=Function.bind||function(f){var h=n(this),l=s.call(arguments,1),u=function(){var c=l.concat(s.call(arguments));if(this instanceof u){var d=h,y=c.length,p=c;if(!(y in a)){for(var m=[],g=0;g<y;g++)m[g]="a["+g+"]";a[y]=Function("C,a","return new C("+m.join(",")+")")}return a[y](d,p)}return h.apply(f,c)};return o(h.prototype)&&(u.prototype=h.prototype),u}},{"../internals/a-function":5,"../internals/is-object":74}],56:[function(t,r,i){function n(a){return typeof a=="function"?a:void 0}var o=t("../internals/path"),s=t("../internals/global");r.exports=function(a,f){return arguments.length<2?n(o[a])||n(s[a]):o[a]&&o[a][f]||s[a]&&s[a][f]}},{"../internals/global":59,"../internals/path":104}],57:[function(t,r,i){var n=t("../internals/classof"),o=t("../internals/iterators"),s=t("../internals/well-known-symbol")("iterator");r.exports=function(a){if(a!=null)return a[s]||a["@@iterator"]||o[n(a)]}},{"../internals/classof":29,"../internals/iterators":79,"../internals/well-known-symbol":148}],58:[function(t,r,i){var n=t("../internals/an-object"),o=t("../internals/get-iterator-method");r.exports=function(s){var a=o(s);if(typeof a!="function")throw TypeError(String(s)+" is not iterable");return n(a.call(s))}},{"../internals/an-object":10,"../internals/get-iterator-method":57}],59:[function(t,r,i){(function(n){function o(s){return s&&s.Math==Math&&s}r.exports=o(typeof globalThis=="object"&&globalThis)||o(typeof window=="object"&&window)||o(typeof self=="object"&&self)||o(typeof n=="object"&&n)||Function("return this")()}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],60:[function(t,r,i){var n={}.hasOwnProperty;r.exports=function(o,s){return n.call(o,s)}},{}],61:[function(t,r,i){r.exports={}},{}],62:[function(t,r,i){var n=t("../internals/global");r.exports=function(o,s){var a=n.console;a&&a.error&&(arguments.length===1?a.error(o):a.error(o,s))}},{"../internals/global":59}],63:[function(t,r,i){t=t("../internals/get-built-in"),r.exports=t("document","documentElement")},{"../internals/get-built-in":56}],64:[function(t,r,i){var n=t("../internals/descriptors"),o=t("../internals/fails"),s=t("../internals/document-create-element");r.exports=!n&&!o(function(){return Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a!=7})},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],65:[function(t,r,i){var n=Math.abs,o=Math.pow,s=Math.floor,a=Math.log,f=Math.LN2;r.exports={pack:function(h,l,g){var c,d,y,p=new Array(g),m=8*g-l-1,g=(1<<m)-1,v=g>>1,x=l===23?o(2,-24)-o(2,-77):0,T=h<0||h===0&&1/h<0?1:0,w=0;for((h=n(h))!=h||h===1/0?(d=h!=h?1:0,c=g):(c=s(a(h)/f),h*(y=o(2,-c))<1&&(c--,y*=2),2<=(h+=1<=c+v?x/y:x*o(2,1-v))*y&&(c++,y/=2),g<=c+v?(d=0,c=g):1<=c+v?(d=(h*y-1)*o(2,l),c+=v):(d=h*o(2,v-1)*o(2,l),c=0));8<=l;p[w++]=255&d,d/=256,l-=8);for(c=c<<l|d,m+=l;0<m;p[w++]=255&c,c/=256,m-=8);return p[--w]|=128*T,p},unpack:function(h,l){var u,c=h.length,g=8*c-l-1,d=(1<<g)-1,y=d>>1,p=g-7,m=c-1,g=h[m--],v=127&g;for(g>>=7;0<p;v=256*v+h[m],m--,p-=8);for(u=v&(1<<-p)-1,v>>=-p,p+=l;0<p;u=256*u+h[m],m--,p-=8);if(v===0)v=1-y;else{if(v===d)return u?NaN:g?-1/0:1/0;u+=o(2,l),v-=y}return(g?-1:1)*u*o(2,v-l)}}},{}],66:[function(t,r,i){var n=t("../internals/fails"),o=t("../internals/classof-raw"),s="".split;r.exports=n(function(){return!Object("z").propertyIsEnumerable(0)})?function(a){return o(a)=="String"?s.call(a,""):Object(a)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],67:[function(t,r,i){var n=t("../internals/is-object"),o=t("../internals/object-set-prototype-of");r.exports=function(s,a,f){return o&&typeof(a=a.constructor)=="function"&&a!==f&&n(a=a.prototype)&&a!==f.prototype&&o(s,a),s}},{"../internals/is-object":74,"../internals/object-set-prototype-of":101}],68:[function(n,r,i){var n=n("../internals/shared-store"),o=Function.toString;typeof n.inspectSource!="function"&&(n.inspectSource=function(s){return o.call(s)}),r.exports=n.inspectSource},{"../internals/shared-store":119}],69:[function(t,r,i){function n(p){f(p,u,{value:{objectID:"O"+ ++c,weakData:{}}})}var o=t("../internals/hidden-keys"),s=t("../internals/is-object"),a=t("../internals/has"),f=t("../internals/object-define-property").f,h=t("../internals/uid"),l=t("../internals/freezing"),u=h("meta"),c=0,d=Object.isExtensible||function(){return!0},y=r.exports={REQUIRED:!1,fastKey:function(p,m){if(!s(p))return typeof p=="symbol"?p:(typeof p=="string"?"S":"P")+p;if(!a(p,u)){if(!d(p))return"F";if(!m)return"E";n(p)}return p[u].objectID},getWeakData:function(p,m){if(!a(p,u)){if(!d(p))return!0;if(!m)return!1;n(p)}return p[u].weakData},onFreeze:function(p){return l&&y.REQUIRED&&d(p)&&!a(p,u)&&n(p),p}};o[u]=!0},{"../internals/freezing":53,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/uid":145}],70:[function(g,r,i){var n,o,s,a,f,h,l,u,c=g("../internals/native-weak-map"),v=g("../internals/global"),d=g("../internals/is-object"),y=g("../internals/create-non-enumerable-property"),p=g("../internals/has"),m=g("../internals/shared-key"),g=g("../internals/hidden-keys"),v=v.WeakMap;l=c?(n=new v,o=n.get,s=n.has,a=n.set,f=function(x,T){return a.call(n,x,T),T},h=function(x){return o.call(n,x)||{}},function(x){return s.call(n,x)}):(g[u=m("state")]=!0,f=function(x,T){return y(x,u,T),T},h=function(x){return p(x,u)?x[u]:{}},function(x){return p(x,u)}),r.exports={set:f,get:h,has:l,enforce:function(x){return l(x)?h(x):f(x,{})},getterFor:function(x){return function(T){if(d(T)&&(T=h(T)).type===x)return T;throw TypeError("Incompatible receiver, "+x+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/shared-key":118}],71:[function(t,r,i){var n=t("../internals/well-known-symbol"),o=t("../internals/iterators"),s=n("iterator"),a=Array.prototype;r.exports=function(f){return f!==void 0&&(o.Array===f||a[s]===f)}},{"../internals/iterators":79,"../internals/well-known-symbol":148}],72:[function(t,r,i){var n=t("../internals/classof-raw");r.exports=Array.isArray||function(o){return n(o)=="Array"}},{"../internals/classof-raw":28}],73:[function(t,r,i){function n(u,c){return(u=f[a(u)])==l||u!=h&&(typeof c=="function"?o(c):!!c)}var o=t("../internals/fails"),s=/#|\.prototype\./,a=n.normalize=function(u){return String(u).replace(s,".").toLowerCase()},f=n.data={},h=n.NATIVE="N",l=n.POLYFILL="P";r.exports=n},{"../internals/fails":51}],74:[function(t,r,i){r.exports=function(n){return typeof n=="object"?n!==null:typeof n=="function"}},{}],75:[function(t,r,i){r.exports=!1},{}],76:[function(t,r,i){var n=t("../internals/is-object"),o=t("../internals/classof-raw"),s=t("../internals/well-known-symbol")("match");r.exports=function(a){var f;return n(a)&&((f=a[s])!==void 0?!!f:o(a)=="RegExp")}},{"../internals/classof-raw":28,"../internals/is-object":74,"../internals/well-known-symbol":148}],77:[function(t,r,i){function n(u,c){this.stopped=u,this.result=c}var o=t("../internals/an-object"),s=t("../internals/is-array-iterator-method"),a=t("../internals/to-length"),f=t("../internals/function-bind-context"),h=t("../internals/get-iterator-method"),l=t("../internals/call-with-safe-iteration-closing");(r.exports=function(u,c,d,y,p){var m,g,v,x,T,w,b=f(c,d,y?2:1);if(p)m=u;else{if(typeof(c=h(u))!="function")throw TypeError("Target is not iterable");if(s(c)){for(g=0,v=a(u.length);g<v;g++)if((x=y?b(o(w=u[g])[0],w[1]):b(u[g]))&&x instanceof n)return x;return new n(!1)}m=c.call(u)}for(T=m.next;!(w=T.call(m)).done;)if(typeof(x=l(m,b,w.value,y))=="object"&&x&&x instanceof n)return x;return new n(!1)}).stop=function(u){return new n(!0,u)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":136}],78:[function(h,r,i){var n,o,s=h("../internals/object-get-prototype-of"),a=h("../internals/create-non-enumerable-property"),f=h("../internals/has"),l=h("../internals/well-known-symbol"),h=h("../internals/is-pure"),l=l("iterator"),u=!1;[].keys&&("next"in(o=[].keys())?(s=s(s(o)))!==Object.prototype&&(n=s):u=!0),n==null&&(n={}),h||f(n,l)||a(n,l,function(){return this}),r.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:u}},{"../internals/create-non-enumerable-property":38,"../internals/has":60,"../internals/is-pure":75,"../internals/object-get-prototype-of":97,"../internals/well-known-symbol":148}],79:[function(t,r,i){r.exports={}},{}],80:[function(t,r,i){r.exports=Math.sign||function(n){return(n=+n)==0||n!=n?n:n<0?-1:1}},{}],81:[function(y,r,i){var n,o,s,a,f,h,l,u,c=y("../internals/global"),T=y("../internals/object-get-own-property-descriptor").f,x=y("../internals/classof-raw"),d=y("../internals/task").set,y=y("../internals/engine-is-ios"),p=c.MutationObserver||c.WebKitMutationObserver,m=c.process,g=c.Promise,v=x(m)=="process",x=T(c,"queueMicrotask"),T=x&&x.value;T||(n=function(){var w,b;for(v&&(w=m.domain)&&w.exit();o;){b=o.fn,o=o.next;try{b()}catch(C){throw o?a():s=void 0,C}}s=void 0,w&&w.enter()},a=v?function(){m.nextTick(n)}:p&&!y?(f=!0,h=document.createTextNode(""),new p(n).observe(h,{characterData:!0}),function(){h.data=f=!f}):g&&g.resolve?(l=g.resolve(void 0),u=l.then,function(){u.call(l,n)}):function(){d.call(c,n)}),r.exports=T||function(w){w={fn:w,next:void 0},s&&(s.next=w),o||(o=w,a()),s=w}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":59,"../internals/object-get-own-property-descriptor":93,"../internals/task":130}],82:[function(t,r,i){t=t("../internals/global"),r.exports=t.Promise},{"../internals/global":59}],83:[function(t,r,i){t=t("../internals/fails"),r.exports=!!Object.getOwnPropertySymbols&&!t(function(){return!String(Symbol())})},{"../internals/fails":51}],84:[function(t,r,i){var n=t("../internals/fails"),o=t("../internals/well-known-symbol"),s=t("../internals/is-pure"),a=o("iterator");r.exports=!n(function(){var f=new URL("b?a=1&b=2&c=3","http://a"),h=f.searchParams,l="";return f.pathname="c%20d",h.forEach(function(u,c){h.delete("b"),l+=c+u}),s&&!f.toJSON||!h.sort||f.href!=="http://a/c%20d?a=1&c=3"||h.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!h[a]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://ÑÐµÑÑ").host!=="xn--e1aybc"||new URL("http://a#Ð±").hash!=="#%D0%B1"||l!=="a1c3"||new URL("http://x",void 0).host!=="x"})},{"../internals/fails":51,"../internals/is-pure":75,"../internals/well-known-symbol":148}],85:[function(n,r,i){var o=n("../internals/global"),n=n("../internals/inspect-source"),o=o.WeakMap;r.exports=typeof o=="function"&&/native code/.test(n(o))},{"../internals/global":59,"../internals/inspect-source":68}],86:[function(t,r,i){function n(s){var a,f;this.promise=new s(function(h,l){if(a!==void 0||f!==void 0)throw TypeError("Bad Promise constructor");a=h,f=l}),this.resolve=o(a),this.reject=o(f)}var o=t("../internals/a-function");r.exports.f=function(s){return new n(s)}},{"../internals/a-function":5}],87:[function(t,r,i){var n=t("../internals/is-regexp");r.exports=function(o){if(n(o))throw TypeError("The method doesn't accept regular expressions");return o}},{"../internals/is-regexp":76}],88:[function(t,r,i){var n=t("../internals/global").isFinite;r.exports=Number.isFinite||function(o){return typeof o=="number"&&n(o)}},{"../internals/global":59}],89:[function(t,r,i){var n=t("../internals/descriptors"),o=t("../internals/fails"),s=t("../internals/object-keys"),a=t("../internals/object-get-own-property-symbols"),f=t("../internals/object-property-is-enumerable"),h=t("../internals/to-object"),l=t("../internals/indexed-object"),u=Object.assign,c=Object.defineProperty;r.exports=!u||o(function(){var d,y,p,m;return!(!n||u({b:1},u(c({},"a",{enumerable:!0,get:function(){c(this,"b",{value:3,enumerable:!1})}}),{b:2})).b===1)||(y={},m="abcdefghijklmnopqrst",(d={})[p=Symbol()]=7,m.split("").forEach(function(g){y[g]=g}),u({},d)[p]!=7||s(u({},y)).join("")!=m)})?function(d,y){for(var p=h(d),m=arguments.length,g=1,v=a.f,x=f.f;g<m;)for(var T,w=l(arguments[g++]),b=v?s(w).concat(v(w)):s(w),C=b.length,A=0;A<C;)T=b[A++],n&&!x.call(w,T)||(p[T]=w[T]);return p}:u},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":66,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/to-object":137}],90:[function(c,r,i){function n(){}var o,s=c("../internals/an-object"),a=c("../internals/object-define-properties"),f=c("../internals/enum-bug-keys"),h=c("../internals/hidden-keys"),l=c("../internals/html"),u=c("../internals/document-create-element"),c=c("../internals/shared-key"),d="prototype",y="script",p=c("IE_PROTO"),m=function(v){return"<"+y+">"+v+"</"+y+">"},g=function(){try{o=document.domain&&new ActiveXObject("htmlfile")}catch{}g=o?((v=o).write(m("")),v.close(),x=v.parentWindow.Object,v=null,x):(v=u("iframe"),x="java"+y+":",v.style.display="none",l.appendChild(v),v.src=String(x),(x=v.contentWindow.document).open(),x.write(m("document.F=Object")),x.close(),x.F);for(var v,x,T=f.length;T--;)delete g[d][f[T]];return g()};h[p]=!0,r.exports=Object.create||function(v,x){var T;return v!==null?(n[d]=s(v),T=new n,n[d]=null,T[p]=v):T=g(),x===void 0?T:a(T,x)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":61,"../internals/html":63,"../internals/object-define-properties":91,"../internals/shared-key":118}],91:[function(t,r,i){var n=t("../internals/descriptors"),o=t("../internals/object-define-property"),s=t("../internals/an-object"),a=t("../internals/object-keys");r.exports=n?Object.defineProperties:function(f,h){s(f);for(var l,u=a(h),c=u.length,d=0;d<c;)o.f(f,l=u[d++],h[l]);return f}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":92,"../internals/object-keys":99}],92:[function(t,r,i){var n=t("../internals/descriptors"),o=t("../internals/ie8-dom-define"),s=t("../internals/an-object"),a=t("../internals/to-primitive"),f=Object.defineProperty;i.f=n?f:function(h,l,u){if(s(h),l=a(l,!0),s(u),o)try{return f(h,l,u)}catch{}if("get"in u||"set"in u)throw TypeError("Accessors not supported");return"value"in u&&(h[l]=u.value),h}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":64,"../internals/to-primitive":140}],93:[function(t,r,i){var n=t("../internals/descriptors"),o=t("../internals/object-property-is-enumerable"),s=t("../internals/create-property-descriptor"),a=t("../internals/to-indexed-object"),f=t("../internals/to-primitive"),h=t("../internals/has"),l=t("../internals/ie8-dom-define"),u=Object.getOwnPropertyDescriptor;i.f=n?u:function(c,d){if(c=a(c),d=f(d,!0),l)try{return u(c,d)}catch{}if(h(c,d))return s(!o.f.call(c,d),c[d])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":60,"../internals/ie8-dom-define":64,"../internals/object-property-is-enumerable":100,"../internals/to-indexed-object":134,"../internals/to-primitive":140}],94:[function(t,r,i){var n=t("../internals/to-indexed-object"),o=t("../internals/object-get-own-property-names").f,s={}.toString,a=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];r.exports.f=function(f){if(!a||s.call(f)!="[object Window]")return o(n(f));try{return o(f)}catch{return a.slice()}}},{"../internals/object-get-own-property-names":95,"../internals/to-indexed-object":134}],95:[function(t,r,i){var n=t("../internals/object-keys-internal"),o=t("../internals/enum-bug-keys").concat("length","prototype");i.f=Object.getOwnPropertyNames||function(s){return n(s,o)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":98}],96:[function(t,r,i){i.f=Object.getOwnPropertySymbols},{}],97:[function(a,r,i){var n=a("../internals/has"),o=a("../internals/to-object"),s=a("../internals/shared-key"),a=a("../internals/correct-prototype-getter"),f=s("IE_PROTO"),h=Object.prototype;r.exports=a?Object.getPrototypeOf:function(l){return l=o(l),n(l,f)?l[f]:typeof l.constructor=="function"&&l instanceof l.constructor?l.constructor.prototype:l instanceof Object?h:null}},{"../internals/correct-prototype-getter":35,"../internals/has":60,"../internals/shared-key":118,"../internals/to-object":137}],98:[function(t,r,i){var n=t("../internals/has"),o=t("../internals/to-indexed-object"),s=t("../internals/array-includes").indexOf,a=t("../internals/hidden-keys");r.exports=function(f,h){var l,u=o(f),c=0,d=[];for(l in u)!n(a,l)&&n(u,l)&&d.push(l);for(;h.length>c;)!n(u,l=h[c++])||~s(d,l)||d.push(l);return d}},{"../internals/array-includes":18,"../internals/has":60,"../internals/hidden-keys":61,"../internals/to-indexed-object":134}],99:[function(t,r,i){var n=t("../internals/object-keys-internal"),o=t("../internals/enum-bug-keys");r.exports=Object.keys||function(s){return n(s,o)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":98}],100:[function(t,r,i){var n={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,s=o&&!n.call({1:2},1);i.f=s?function(a){return a=o(this,a),!!a&&a.enumerable}:n},{}],101:[function(t,r,i){var n=t("../internals/an-object"),o=t("../internals/a-possible-prototype");r.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var s,a=!1,f={};try{(s=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(f,[]),a=f instanceof Array}catch{}return function(h,l){return n(h),o(l),a?s.call(h,l):h.__proto__=l,h}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],102:[function(t,r,i){var n=t("../internals/to-string-tag-support"),o=t("../internals/classof");r.exports=n?{}.toString:function(){return"[object "+o(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":141}],103:[function(t,r,i){var n=t("../internals/get-built-in"),o=t("../internals/object-get-own-property-names"),s=t("../internals/object-get-own-property-symbols"),a=t("../internals/an-object");r.exports=n("Reflect","ownKeys")||function(f){var h=o.f(a(f)),l=s.f;return l?h.concat(l(f)):h}},{"../internals/an-object":10,"../internals/get-built-in":56,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-symbols":96}],104:[function(t,r,i){t=t("../internals/global"),r.exports=t},{"../internals/global":59}],105:[function(t,r,i){r.exports=function(n){try{return{error:!1,value:n()}}catch(o){return{error:!0,value:o}}}},{}],106:[function(t,r,i){var n=t("../internals/an-object"),o=t("../internals/is-object"),s=t("../internals/new-promise-capability");r.exports=function(a,f){return n(a),o(f)&&f.constructor===a?f:((0,(a=s.f(a)).resolve)(f),a.promise)}},{"../internals/an-object":10,"../internals/is-object":74,"../internals/new-promise-capability":86}],107:[function(t,r,i){var n=t("../internals/redefine");r.exports=function(o,s,a){for(var f in s)n(o,f,s[f],a);return o}},{"../internals/redefine":108}],108:[function(h,r,i){var n=h("../internals/global"),o=h("../internals/create-non-enumerable-property"),s=h("../internals/has"),a=h("../internals/set-global"),f=h("../internals/inspect-source"),h=h("../internals/internal-state"),l=h.get,u=h.enforce,c=String(String).split("String");(r.exports=function(d,y,p,x){var g=!!x&&!!x.unsafe,v=!!x&&!!x.enumerable,x=!!x&&!!x.noTargetGet;typeof p=="function"&&(typeof y!="string"||s(p,"name")||o(p,"name",y),u(p).source=c.join(typeof y=="string"?y:"")),d===n?v?d[y]=p:a(y,p):(g?!x&&d[y]&&(v=!0):delete d[y],v?d[y]=p:o(d,y,p))})(Function.prototype,"toString",function(){return typeof this=="function"&&l(this).source||f(this)})},{"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/has":60,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/set-global":115}],109:[function(t,r,i){var n=t("./classof-raw"),o=t("./regexp-exec");r.exports=function(s,a){var f=s.exec;if(typeof f=="function"){if(f=f.call(s,a),typeof f!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return f}if(n(s)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return o.call(s,a)}},{"./classof-raw":28,"./regexp-exec":110}],110:[function(a,r,i){var n,o,s=a("./regexp-flags"),a=a("./regexp-sticky-helpers"),f=RegExp.prototype.exec,h=String.prototype.replace,l=f,u=(n=/a/,o=/b*/g,f.call(n,"a"),f.call(o,"a"),n.lastIndex!==0||o.lastIndex!==0),c=a.UNSUPPORTED_Y||a.BROKEN_CARET,d=/()??/.exec("")[1]!==void 0;r.exports=l=u||d||c?function(y){var p,m,g,v,x=this,T=c&&x.sticky,w=s.call(x),b=x.source,C=0,A=y;return T&&((w=w.replace("y","")).indexOf("g")===-1&&(w+="g"),A=String(y).slice(x.lastIndex),0<x.lastIndex&&(!x.multiline||x.multiline&&y[x.lastIndex-1]!==`
`)&&(b="(?: "+b+")",A=" "+A,C++),m=new RegExp("^(?:"+b+")",w)),d&&(m=new RegExp("^"+b+"$(?!\\s)",w)),u&&(p=x.lastIndex),g=f.call(T?m:x,A),T?g?(g.input=g.input.slice(C),g[0]=g[0].slice(C),g.index=x.lastIndex,x.lastIndex+=g[0].length):x.lastIndex=0:u&&g&&(x.lastIndex=x.global?g.index+g[0].length:p),d&&g&&1<g.length&&h.call(g[0],m,function(){for(v=1;v<arguments.length-2;v++)arguments[v]===void 0&&(g[v]=void 0)}),g}:l},{"./regexp-flags":111,"./regexp-sticky-helpers":112}],111:[function(t,r,i){var n=t("../internals/an-object");r.exports=function(){var o=n(this),s="";return o.global&&(s+="g"),o.ignoreCase&&(s+="i"),o.multiline&&(s+="m"),o.dotAll&&(s+="s"),o.unicode&&(s+="u"),o.sticky&&(s+="y"),s}},{"../internals/an-object":10}],112:[function(t,r,i){t=t("./fails");function n(o,s){return RegExp(o,s)}i.UNSUPPORTED_Y=t(function(){var o=n("a","y");return o.lastIndex=2,o.exec("abcd")!=null}),i.BROKEN_CARET=t(function(){var o=n("^r","gy");return o.lastIndex=2,o.exec("str")!=null})},{"./fails":51}],113:[function(t,r,i){r.exports=function(n){if(n==null)throw TypeError("Can't call method on "+n);return n}},{}],114:[function(t,r,i){r.exports=Object.is||function(n,o){return n===o?n!==0||1/n==1/o:n!=n&&o!=o}},{}],115:[function(t,r,i){var n=t("../internals/global"),o=t("../internals/create-non-enumerable-property");r.exports=function(s,a){try{o(n,s,a)}catch{n[s]=a}return a}},{"../internals/create-non-enumerable-property":38,"../internals/global":59}],116:[function(t,r,i){var n=t("../internals/get-built-in"),o=t("../internals/object-define-property"),s=t("../internals/well-known-symbol"),a=t("../internals/descriptors"),f=s("species");r.exports=function(l){var l=n(l),u=o.f;a&&l&&!l[f]&&u(l,f,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":56,"../internals/object-define-property":92,"../internals/well-known-symbol":148}],117:[function(t,r,i){var n=t("../internals/object-define-property").f,o=t("../internals/has"),s=t("../internals/well-known-symbol")("toStringTag");r.exports=function(a,f,h){a&&!o(a=h?a:a.prototype,s)&&n(a,s,{configurable:!0,value:f})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/well-known-symbol":148}],118:[function(t,r,i){var n=t("../internals/shared"),o=t("../internals/uid"),s=n("keys");r.exports=function(a){return s[a]||(s[a]=o(a))}},{"../internals/shared":120,"../internals/uid":145}],119:[function(n,r,i){var s=n("../internals/global"),n=n("../internals/set-global"),o="__core-js_shared__",s=s[o]||n(o,{});r.exports=s},{"../internals/global":59,"../internals/set-global":115}],120:[function(t,r,i){var n=t("../internals/is-pure"),o=t("../internals/shared-store");(r.exports=function(s,a){return o[s]||(o[s]=a!==void 0?a:{})})("versions",[]).push({version:"3.6.5",mode:n?"pure":"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":75,"../internals/shared-store":119}],121:[function(t,r,i){var n=t("../internals/an-object"),o=t("../internals/a-function"),s=t("../internals/well-known-symbol")("species");r.exports=function(h,f){var h=n(h).constructor;return h===void 0||(h=n(h)[s])==null?f:o(h)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":148}],122:[function(t,r,i){var n=t("../internals/fails");r.exports=function(o){return n(function(){var s=""[o]('"');return s!==s.toLowerCase()||3<s.split('"').length})}},{"../internals/fails":51}],123:[function(t,r,i){function n(a){return function(u,c){var l,u=String(s(u)),c=o(c),d=u.length;return c<0||d<=c?a?"":void 0:(l=u.charCodeAt(c))<55296||56319<l||c+1===d||(d=u.charCodeAt(c+1))<56320||57343<d?a?u.charAt(c):l:a?u.slice(c,c+2):d-56320+(l-55296<<10)+65536}}var o=t("../internals/to-integer"),s=t("../internals/require-object-coercible");r.exports={codeAt:n(!1),charAt:n(!0)}},{"../internals/require-object-coercible":113,"../internals/to-integer":135}],124:[function(t,r,i){t=t("../internals/engine-user-agent"),r.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(t)},{"../internals/engine-user-agent":47}],125:[function(t,r,i){function n(h){return function(d,m,p){var d=String(a(d)),y=d.length,p=p===void 0?" ":String(p),m=o(m);return m<=y||p==""?d:((y=s.call(p,f((m=m-y)/p.length))).length>m&&(y=y.slice(0,m)),h?d+y:y+d)}}var o=t("../internals/to-length"),s=t("../internals/string-repeat"),a=t("../internals/require-object-coercible"),f=Math.ceil;r.exports={start:n(!1),end:n(!0)}},{"../internals/require-object-coercible":113,"../internals/string-repeat":127,"../internals/to-length":136}],126:[function(t,r,i){function n(g){return g+22+75*(g<26)}function o(g){var v,x=[],T=(g=function(Q){for(var ne=[],U=0,D=Q.length;U<D;){var O,V=Q.charCodeAt(U++);55296<=V&&V<=56319&&U<D?(64512&(O=Q.charCodeAt(U++)))==56320?ne.push(((1023&V)<<10)+(1023&O)+65536):(ne.push(V),U--):ne.push(V)}return ne}(g)).length,w=128,b=0,C=72;for(P=0;P<g.length;P++)(v=g[P])<128&&x.push(m(v));var A=x.length,M=A;for(A&&x.push("-");M<T;){for(var k=s,P=0;P<g.length;P++)w<=(v=g[P])&&v<k&&(k=v);var F=M+1;if(k-w>p((s-b)/F))throw RangeError(d);for(b+=(k-w)*F,w=k,P=0;P<g.length;P++){if((v=g[P])<w&&++b>s)throw RangeError(d);if(v==w){for(var I=b,B=a;;B+=a){var H=B<=C?1:C+f<=B?f:B-C;if(I<H)break;var G=I-H,W=a-H;x.push(m(n(H+G%W))),I=p(G/W)}x.push(m(n(I))),C=function(Q,ne,U){var D=0;for(Q=U?p(Q/l):Q>>1,Q+=p(Q/ne);y*f>>1<Q;D+=a)Q=p(Q/y);return p(D+(y+1)*Q/(Q+h))}(b,F,M==A),b=0,++M}}++b,++w}return x.join("")}var s=2147483647,a=36,f=26,h=38,l=700,u=/[^\0-\u007E]/,c=/[.\u3002\uFF0E\uFF61]/g,d="Overflow: input needs wider integers to process",y=a-1,p=Math.floor,m=String.fromCharCode;r.exports=function(g){for(var v,x=[],T=g.toLowerCase().replace(c,".").split("."),w=0;w<T.length;w++)v=T[w],x.push(u.test(v)?"xn--"+o(v):v);return x.join(".")}},{}],127:[function(t,r,i){var n=t("../internals/to-integer"),o=t("../internals/require-object-coercible");r.exports="".repeat||function(s){var a=String(o(this)),f="",h=n(s);if(h<0||h==1/0)throw RangeError("Wrong number of repetitions");for(;0<h;(h>>>=1)&&(a+=a))1&h&&(f+=a);return f}},{"../internals/require-object-coercible":113,"../internals/to-integer":135}],128:[function(t,r,i){var n=t("../internals/fails"),o=t("../internals/whitespaces");r.exports=function(s){return n(function(){return!!o[s]()||"âÂá "[s]()!="âÂá "||o[s].name!==s})}},{"../internals/fails":51,"../internals/whitespaces":149}],129:[function(s,r,i){function n(h){return function(l){return l=String(o(l)),1&h&&(l=l.replace(a,"")),l=2&h?l.replace(f,""):l}}var o=s("../internals/require-object-coercible"),s="["+s("../internals/whitespaces")+"]",a=RegExp("^"+s+s+"*"),f=RegExp(s+s+"*$");r.exports={start:n(1),end:n(2),trim:n(3)}},{"../internals/require-object-coercible":113,"../internals/whitespaces":149}],130:[function(y,r,i){function n(M){return function(){A(M)}}function o(M){A(M.data)}function s(M){f.postMessage(M+"",p.protocol+"//"+p.host)}var a,f=y("../internals/global"),h=y("../internals/fails"),l=y("../internals/classof-raw"),u=y("../internals/function-bind-context"),c=y("../internals/html"),d=y("../internals/document-create-element"),y=y("../internals/engine-is-ios"),p=f.location,m=f.setImmediate,g=f.clearImmediate,v=f.process,x=f.MessageChannel,T=f.Dispatch,w=0,b={},C="onreadystatechange",A=function(M){var k;b.hasOwnProperty(M)&&(k=b[M],delete b[M],k())};m&&g||(m=function(M){for(var k=[],P=1;P<arguments.length;)k.push(arguments[P++]);return b[++w]=function(){(typeof M=="function"?M:Function(M)).apply(void 0,k)},a(w),w},g=function(M){delete b[M]},l(v)=="process"?a=function(M){v.nextTick(n(M))}:T&&T.now?a=function(M){T.now(n(M))}:x&&!y?(y=(l=new x).port2,l.port1.onmessage=o,a=u(y.postMessage,y,1)):!f.addEventListener||typeof postMessage!="function"||f.importScripts||h(s)||p.protocol==="file:"?a=C in d("script")?function(M){c.appendChild(d("script"))[C]=function(){c.removeChild(this),A(M)}}:function(M){setTimeout(n(M),0)}:(a=s,f.addEventListener("message",o,!1))),r.exports={set:m,clear:g}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":54,"../internals/global":59,"../internals/html":63}],131:[function(t,r,i){var n=t("../internals/classof-raw");r.exports=function(o){if(typeof o!="number"&&n(o)!="Number")throw TypeError("Incorrect invocation");return+o}},{"../internals/classof-raw":28}],132:[function(t,r,i){var n=t("../internals/to-integer"),o=Math.max,s=Math.min;r.exports=function(a,f){return a=n(a),a<0?o(a+f,0):s(a,f)}},{"../internals/to-integer":135}],133:[function(t,r,i){var n=t("../internals/to-integer"),o=t("../internals/to-length");r.exports=function(a){if(a===void 0)return 0;var a=n(a),f=o(a);if(a!==f)throw RangeError("Wrong length or index");return f}},{"../internals/to-integer":135,"../internals/to-length":136}],134:[function(t,r,i){var n=t("../internals/indexed-object"),o=t("../internals/require-object-coercible");r.exports=function(s){return n(o(s))}},{"../internals/indexed-object":66,"../internals/require-object-coercible":113}],135:[function(t,r,i){var n=Math.ceil,o=Math.floor;r.exports=function(s){return isNaN(s=+s)?0:(0<s?o:n)(s)}},{}],136:[function(t,r,i){var n=t("../internals/to-integer"),o=Math.min;r.exports=function(s){return 0<s?o(n(s),9007199254740991):0}},{"../internals/to-integer":135}],137:[function(t,r,i){var n=t("../internals/require-object-coercible");r.exports=function(o){return Object(n(o))}},{"../internals/require-object-coercible":113}],138:[function(t,r,i){var n=t("../internals/to-positive-integer");r.exports=function(o,s){if(o=n(o),o%s)throw RangeError("Wrong offset");return o}},{"../internals/to-positive-integer":139}],139:[function(t,r,i){var n=t("../internals/to-integer");r.exports=function(o){if(o=n(o),o<0)throw RangeError("The argument can't be less than 0");return o}},{"../internals/to-integer":135}],140:[function(t,r,i){var n=t("../internals/is-object");r.exports=function(o,s){if(!n(o))return o;var a,f;if(s&&typeof(a=o.toString)=="function"&&!n(f=a.call(o))||typeof(a=o.valueOf)=="function"&&!n(f=a.call(o))||!s&&typeof(a=o.toString)=="function"&&!n(f=a.call(o)))return f;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":74}],141:[function(t,r,i){var n={};n[t("../internals/well-known-symbol")("toStringTag")]="z",r.exports=String(n)==="[object z]"},{"../internals/well-known-symbol":148}],142:[function(t,r,i){function n(Ae,De){for(var Be=0,st=De.length,qe=new(oe(Ae))(st);Be<st;)qe[Be]=De[Be++];return qe}function o(Ae,De){O(Ae,De,{get:function(){return U(this)[De]}})}function s(Ae){return Ae instanceof re||(Ae=A(Ae))=="ArrayBuffer"||Ae=="SharedArrayBuffer"}function a(Ae,De){return fe(Ae)&&typeof De!="symbol"&&De in Ae&&String(+De)==String(De)}function f(Ae,De){return a(Ae,De=b(De,!0))?g(2,Ae[De]):V(Ae,De)}function h(Ae,De,Be){return!(a(Ae,De=b(De,!0))&&M(Be)&&C(Be,"value"))||C(Be,"get")||C(Be,"set")||Be.configurable||C(Be,"writable")&&!Be.writable||C(Be,"enumerable")&&!Be.enumerable?O(Ae,De,Be):(Ae[De]=Be.value,Ae)}var l=t("../internals/export"),u=t("../internals/global"),c=t("../internals/descriptors"),d=t("../internals/typed-array-constructors-require-wrappers"),y=t("../internals/array-buffer-view-core"),p=t("../internals/array-buffer"),m=t("../internals/an-instance"),g=t("../internals/create-property-descriptor"),v=t("../internals/create-non-enumerable-property"),x=t("../internals/to-length"),T=t("../internals/to-index"),w=t("../internals/to-offset"),b=t("../internals/to-primitive"),C=t("../internals/has"),A=t("../internals/classof"),M=t("../internals/is-object"),k=t("../internals/object-create"),P=t("../internals/object-set-prototype-of"),F=t("../internals/object-get-own-property-names").f,I=t("../internals/typed-array-from"),B=t("../internals/array-iteration").forEach,H=t("../internals/set-species"),G=t("../internals/object-define-property"),W=t("../internals/object-get-own-property-descriptor"),Q=t("../internals/internal-state"),ne=t("../internals/inherit-if-required"),U=Q.get,D=Q.set,O=G.f,V=W.f,Z=Math.round,ie=u.RangeError,re=p.ArrayBuffer,ge=p.DataView,ye=y.NATIVE_ARRAY_BUFFER_VIEWS,he=y.TYPED_ARRAY_TAG,pe=y.TypedArray,we=y.TypedArrayPrototype,oe=y.aTypedArrayConstructor,fe=y.isTypedArray,Ce="BYTES_PER_ELEMENT",Fe="Wrong length";c?(ye||(W.f=f,G.f=h,o(we,"buffer"),o(we,"byteOffset"),o(we,"byteLength"),o(we,"length")),l({target:"Object",stat:!0,forced:!ye},{getOwnPropertyDescriptor:f,defineProperty:h}),r.exports=function(Me,De,Be){function st(Re,q){O(Re,q,{get:function(){var te=this,ee=q;return(te=U(te)).view[de](ee*qe+te.byteOffset,!0)},set:function(te){var ee=this,ae=q;ee=U(ee),Be&&(te=(te=Z(te))<0?0:255<te?255:255&te),ee.view[le](ae*qe+ee.byteOffset,te,!0)},enumerable:!0})}var qe=Me.match(/\d+$/)[0]/8,Et=Me+(Be?"Clamped":"")+"Array",de="get"+Me,le="set"+Me,Ue=u[Et],Ze=Ue,Me=Ze&&Ze.prototype,ze={};ye?d&&(Ze=De(function(Re,q,te,ee){return m(Re,Ze,Et),ne(M(q)?s(q)?ee!==void 0?new Ue(q,w(te,qe),ee):te!==void 0?new Ue(q,w(te,qe)):new Ue(q):fe(q)?n(Ze,q):I.call(Ze,q):new Ue(T(q)),Re,Ze)}),P&&P(Ze,pe),B(F(Ue),function(Re){Re in Ze||v(Ze,Re,Ue[Re])}),Ze.prototype=Me):(Ze=De(function(Re,q,te,ee){m(Re,Ze,Et);var ae,Se,Le=0,Ne=0;if(M(q)){if(!s(q))return fe(q)?n(Ze,q):I.call(Ze,q);var at=q,Ne=w(te,qe),te=q.byteLength;if(ee===void 0){if(te%qe||(ae=te-Ne)<0)throw ie(Fe)}else if(te<(ae=x(ee)*qe)+Ne)throw ie(Fe);Se=ae/qe}else Se=T(q),at=new re(ae=Se*qe);for(D(Re,{buffer:at,byteOffset:Ne,byteLength:ae,length:Se,view:new ge(at)});Le<Se;)st(Re,Le++)}),P&&P(Ze,pe),Me=Ze.prototype=k(we)),Me.constructor!==Ze&&v(Me,"constructor",Ze),he&&v(Me,he,Et),ze[Et]=Ze,l({global:!0,forced:Ze!=Ue,sham:!ye},ze),Ce in Ze||v(Ze,Ce,qe),Ce in Me||v(Me,Ce,qe),H(Et)}):r.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-object":74,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-set-prototype-of":101,"../internals/set-species":116,"../internals/to-index":133,"../internals/to-length":136,"../internals/to-offset":138,"../internals/to-primitive":140,"../internals/typed-array-constructors-require-wrappers":143,"../internals/typed-array-from":144}],143:[function(a,r,i){var n=a("../internals/global"),o=a("../internals/fails"),s=a("../internals/check-correctness-of-iteration"),a=a("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,f=n.ArrayBuffer,h=n.Int8Array;r.exports=!a||!o(function(){h(1)})||!o(function(){new h(-1)})||!s(function(l){new h,new h(null),new h(1.5),new h(l)},!0)||o(function(){return new h(new f(2),1,void 0).length!==1})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":59}],144:[function(t,r,i){var n=t("../internals/to-object"),o=t("../internals/to-length"),s=t("../internals/get-iterator-method"),a=t("../internals/is-array-iterator-method"),f=t("../internals/function-bind-context"),h=t("../internals/array-buffer-view-core").aTypedArrayConstructor;r.exports=function(l){var u,c,d,y,p,m,g=n(l),v=arguments.length,x=1<v?arguments[1]:void 0,T=x!==void 0,w=s(g);if(w!=null&&!a(w))for(m=(p=w.call(g)).next,g=[];!(y=m.call(p)).done;)g.push(y.value);for(T&&2<v&&(x=f(x,arguments[2],2)),c=o(g.length),d=new(h(this))(c),u=0;u<c;u++)d[u]=T?x(g[u],u):g[u];return d}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":136,"../internals/to-object":137}],145:[function(t,r,i){var n=0,o=Math.random();r.exports=function(s){return"Symbol("+String(s===void 0?"":s)+")_"+(++n+o).toString(36)}},{}],146:[function(t,r,i){t=t("../internals/native-symbol"),r.exports=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/native-symbol":83}],147:[function(t,r,i){t=t("../internals/well-known-symbol"),i.f=t},{"../internals/well-known-symbol":148}],148:[function(h,r,i){var n=h("../internals/global"),o=h("../internals/shared"),s=h("../internals/has"),a=h("../internals/uid"),f=h("../internals/native-symbol"),h=h("../internals/use-symbol-as-uid"),l=o("wks"),u=n.Symbol,c=h?u:u&&u.withoutSetter||a;r.exports=function(d){return s(l,d)||(f&&s(u,d)?l[d]=u[d]:l[d]=c("Symbol."+d)),l[d]}},{"../internals/global":59,"../internals/has":60,"../internals/native-symbol":83,"../internals/shared":120,"../internals/uid":145,"../internals/use-symbol-as-uid":146}],149:[function(t,r,i){r.exports=`	
\v\f\r Â áââââââââââââ¯âã\u2028\u2029\uFEFF`},{}],150:[function(s,r,i){var n=s("../internals/export"),o=s("../internals/global"),f=s("../internals/array-buffer"),s=s("../internals/set-species"),a="ArrayBuffer",f=f[a];n({global:!0,forced:o[a]!==f},{ArrayBuffer:f}),s(a)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":59,"../internals/set-species":116}],151:[function(g,r,i){var n=g("../internals/export"),o=g("../internals/fails"),s=g("../internals/is-array"),a=g("../internals/is-object"),f=g("../internals/to-object"),h=g("../internals/to-length"),l=g("../internals/create-property"),u=g("../internals/array-species-create"),c=g("../internals/array-method-has-species-support"),m=g("../internals/well-known-symbol"),g=g("../internals/engine-v8-version"),d=m("isConcatSpreadable"),y=9007199254740991,p="Maximum allowed index exceeded",m=51<=g||!o(function(){var v=[];return v[d]=!1,v.concat()[0]!==v}),g=c("concat");n({target:"Array",proto:!0,forced:!m||!g},{concat:function(v){for(var x,T,w,b,C,A=f(this),M=u(A,0),k=0,P=-1,F=arguments.length;P<F;P++)if(C=void 0,!a(b=w=P===-1?A:arguments[P])||((C=b[d])!==void 0?!C:!s(b))){if(y<=k)throw TypeError(p);l(M,k++,w)}else{if(T=h(w.length),y<k+T)throw TypeError(p);for(x=0;x<T;x++,k++)x in w&&l(M,k,w[x])}return M.length=k,M}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-length":136,"../internals/to-object":137,"../internals/well-known-symbol":148}],152:[function(s,r,i){var n=s("../internals/export"),o=s("../internals/array-copy-within"),s=s("../internals/add-to-unscopables");n({target:"Array",proto:!0},{copyWithin:o}),s("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],153:[function(a,r,i){var n=a("../internals/export"),o=a("../internals/array-iteration").every,s=a("../internals/array-method-is-strict"),a=a("../internals/array-method-uses-to-length"),s=s("every"),a=a("every");n({target:"Array",proto:!0,forced:!s||!a},{every:function(f){return o(this,f,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],154:[function(s,r,i){var n=s("../internals/export"),o=s("../internals/array-fill"),s=s("../internals/add-to-unscopables");n({target:"Array",proto:!0},{fill:o}),s("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],155:[function(a,r,i){var n=a("../internals/export"),o=a("../internals/array-iteration").filter,s=a("../internals/array-method-has-species-support"),a=a("../internals/array-method-uses-to-length"),s=s("filter"),a=a("filter");n({target:"Array",proto:!0,forced:!s||!a},{filter:function(f){return o(this,f,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],156:[function(h,r,i){var n=h("../internals/export"),o=h("../internals/array-iteration").findIndex,s=h("../internals/add-to-unscopables"),h=h("../internals/array-method-uses-to-length"),a="findIndex",f=!0,h=h(a);a in[]&&Array(1)[a](function(){f=!1}),n({target:"Array",proto:!0,forced:f||!h},{findIndex:function(l){return o(this,l,1<arguments.length?arguments[1]:void 0)}}),s(a)},{"../internals/add-to-unscopables":7,"../internals/array-iteration":19,"../internals/array-method-uses-to-length":23,"../internals/export":50}],157:[function(o,r,i){var n=o("../internals/export"),o=o("../internals/array-for-each");n({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},{"../internals/array-for-each":16,"../internals/export":50}],158:[function(t,r,i){var n=t("../internals/export"),o=t("../internals/array-from");n({target:"Array",stat:!0,forced:!t("../internals/check-correctness-of-iteration")(function(s){Array.from(s)})},{from:o})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],159:[function(t,r,i){var n=t("../internals/export"),o=t("../internals/array-includes").includes,s=t("../internals/add-to-unscopables");n({target:"Array",proto:!0,forced:!t("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(a){return o(this,a,1<arguments.length?arguments[1]:void 0)}}),s("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],160:[function(h,r,i){var n=h("../internals/export"),o=h("../internals/array-includes").indexOf,f=h("../internals/array-method-is-strict"),h=h("../internals/array-method-uses-to-length"),s=[].indexOf,a=!!s&&1/[1].indexOf(1,-0)<0,f=f("indexOf"),h=h("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:a||!f||!h},{indexOf:function(l){return a?s.apply(this,arguments)||0:o(this,l,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],161:[function(f,r,i){var n=f("../internals/to-indexed-object"),o=f("../internals/add-to-unscopables"),s=f("../internals/iterators"),a=f("../internals/internal-state"),f=f("../internals/define-iterator"),h="Array Iterator",l=a.set,u=a.getterFor(h);r.exports=f(Array,"Array",function(c,d){l(this,{type:h,target:n(c),index:0,kind:d})},function(){var c=u(this),d=c.target,y=c.kind,p=c.index++;return!d||p>=d.length?{value:c.target=void 0,done:!0}:y=="keys"?{value:p,done:!1}:y=="values"?{value:d[p],done:!1}:{value:[p,d[p]],done:!1}},"values"),s.Arguments=s.Array,o("keys"),o("values"),o("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":70,"../internals/iterators":79,"../internals/to-indexed-object":134}],162:[function(f,r,i){var n=f("../internals/export"),a=f("../internals/indexed-object"),o=f("../internals/to-indexed-object"),f=f("../internals/array-method-is-strict"),s=[].join,a=a!=Object,f=f("join",",");n({target:"Array",proto:!0,forced:a||!f},{join:function(h){return s.call(o(this),h===void 0?",":h)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":66,"../internals/to-indexed-object":134}],163:[function(o,r,i){var n=o("../internals/export"),o=o("../internals/array-last-index-of");n({target:"Array",proto:!0,forced:o!==[].lastIndexOf},{lastIndexOf:o})},{"../internals/array-last-index-of":20,"../internals/export":50}],164:[function(a,r,i){var n=a("../internals/export"),o=a("../internals/array-iteration").map,s=a("../internals/array-method-has-species-support"),a=a("../internals/array-method-uses-to-length"),s=s("map"),a=a("map");n({target:"Array",proto:!0,forced:!s||!a},{map:function(f){return o(this,f,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],165:[function(d,r,i){var n=d("../internals/export"),o=d("../internals/is-object"),s=d("../internals/is-array"),a=d("../internals/to-absolute-index"),f=d("../internals/to-length"),h=d("../internals/to-indexed-object"),l=d("../internals/create-property"),u=d("../internals/well-known-symbol"),c=d("../internals/array-method-has-species-support"),d=d("../internals/array-method-uses-to-length"),c=c("slice"),d=d("slice",{ACCESSORS:!0,0:0,1:2}),y=u("species"),p=[].slice,m=Math.max;n({target:"Array",proto:!0,forced:!c||!d},{slice:function(g,v){var x,T,w,b=h(this),C=f(b.length),A=a(g,C),M=a(v===void 0?C:v,C);if(s(b)&&((x=typeof(x=b.constructor)=="function"&&(x===Array||s(x.prototype))||o(x)&&(x=x[y])===null?void 0:x)===Array||x===void 0))return p.call(b,A,M);for(T=new(x===void 0?Array:x)(m(M-A,0)),w=0;A<M;A++,w++)A in b&&l(T,w,b[A]);return T.length=w,T}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-absolute-index":132,"../internals/to-indexed-object":134,"../internals/to-length":136,"../internals/well-known-symbol":148}],166:[function(a,r,i){var n=a("../internals/export"),o=a("../internals/array-iteration").some,s=a("../internals/array-method-is-strict"),a=a("../internals/array-method-uses-to-length"),s=s("some"),a=a("some");n({target:"Array",proto:!0,forced:!s||!a},{some:function(f){return o(this,f,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],167:[function(c,r,i){var n=c("../internals/export"),o=c("../internals/to-absolute-index"),s=c("../internals/to-integer"),a=c("../internals/to-length"),f=c("../internals/to-object"),h=c("../internals/array-species-create"),l=c("../internals/create-property"),u=c("../internals/array-method-has-species-support"),c=c("../internals/array-method-uses-to-length"),u=u("splice"),c=c("splice",{ACCESSORS:!0,0:0,1:2}),d=Math.max,y=Math.min;n({target:"Array",proto:!0,forced:!u||!c},{splice:function(k,m){var g,v,x,T,w,b,C=f(this),A=a(C.length),M=o(k,A),k=arguments.length;if(k===0?g=v=0:v=k===1?(g=0,A-M):(g=k-2,y(d(s(m),0),A-M)),9007199254740991<A+g-v)throw TypeError("Maximum allowed length exceeded");for(x=h(C,v),T=0;T<v;T++)(w=M+T)in C&&l(x,T,C[w]);if(g<(x.length=v)){for(T=M;T<A-v;T++)b=T+g,(w=T+v)in C?C[b]=C[w]:delete C[b];for(T=A;A-v+g<T;T--)delete C[T-1]}else if(v<g)for(T=A-v;M<T;T--)b=T+g-1,(w=T+v-1)in C?C[b]=C[w]:delete C[b];for(T=0;T<g;T++)C[T+M]=arguments[T+2];return C.length=A-v+g,x}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":132,"../internals/to-integer":135,"../internals/to-length":136,"../internals/to-object":137}],168:[function(o,r,i){var n=o("../internals/descriptors"),o=o("../internals/object-define-property").f,s=Function.prototype,a=s.toString,f=/^\s*function ([^ (]*)/;!n||"name"in s||o(s,"name",{configurable:!0,get:function(){try{return a.call(this).match(f)[1]}catch{return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":92}],169:[function(o,r,i){var n=o("../internals/collection"),o=o("../internals/collection-strong");r.exports=n("Map",function(s){return function(){return s(this,arguments.length?arguments[0]:void 0)}},o)},{"../internals/collection":32,"../internals/collection-strong":30}],170:[function(n,r,i){var n=n("../internals/export"),o=Math.hypot,s=Math.abs,a=Math.sqrt;n({target:"Math",stat:!0,forced:!!o&&o(1/0,NaN)!==1/0},{hypot:function(f,h){for(var l,u,c=0,d=0,y=arguments.length,p=0;d<y;)p<(l=s(arguments[d++]))?(c=c*(u=p/l)*u+1,p=l):c+=0<l?(u=l/p)*u:l;return p===1/0?1/0:p*a(c)}})},{"../internals/export":50}],171:[function(n,r,i){var n=n("../internals/export"),o=Math.log,s=Math.LN2;n({target:"Math",stat:!0},{log2:function(a){return o(a)/s}})},{"../internals/export":50}],172:[function(t,r,i){t("../internals/export")({target:"Math",stat:!0},{sign:t("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":80}],173:[function(t,r,i){function n(P){var F,I,B,H,G,W,Q,ne=c(P,!1);if(typeof ne=="string"&&2<ne.length){if((P=(ne=v(ne)).charCodeAt(0))===43||P===45){if((F=ne.charCodeAt(2))===88||F===120)return NaN}else if(P===48){switch(ne.charCodeAt(1)){case 66:case 98:I=2,B=49;break;case 79:case 111:I=8,B=55;break;default:return+ne}for(G=(H=ne.slice(2)).length,W=0;W<G;W++)if((Q=H.charCodeAt(W))<48||B<Q)return NaN;return parseInt(H,I)}}return+ne}var o=t("../internals/descriptors"),s=t("../internals/global"),a=t("../internals/is-forced"),f=t("../internals/redefine"),h=t("../internals/has"),l=t("../internals/classof-raw"),u=t("../internals/inherit-if-required"),c=t("../internals/to-primitive"),d=t("../internals/fails"),y=t("../internals/object-create"),p=t("../internals/object-get-own-property-names").f,m=t("../internals/object-get-own-property-descriptor").f,g=t("../internals/object-define-property").f,v=t("../internals/string-trim").trim,x="Number",T=s[x],w=T.prototype,b=l(y(w))==x;if(a(x,!T(" 0o1")||!T("0b1")||T("+0x1"))){for(var C,A=function(F){var F=arguments.length<1?0:F,I=this;return I instanceof A&&(b?d(function(){w.valueOf.call(I)}):l(I)!=x)?u(new T(n(F)),I,A):n(F)},M=o?p(T):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;M.length>k;k++)h(T,C=M[k])&&!h(A,C)&&g(A,C,m(T,C));(A.prototype=w).constructor=A,f(s,x,A)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/is-forced":73,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/string-trim":129,"../internals/to-primitive":140}],174:[function(t,r,i){t("../internals/export")({target:"Number",stat:!0},{isFinite:t("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":88}],175:[function(h,r,i){function n(c,d,y){return d===0?y:d%2==1?n(c,d-1,y*c):n(c*c,d/2,y)}var o=h("../internals/export"),s=h("../internals/to-integer"),a=h("../internals/this-number-value"),f=h("../internals/string-repeat"),h=h("../internals/fails"),l=1 .toFixed,u=Math.floor;o({target:"Number",proto:!0,forced:l&&(8e-5 .toFixed(3)!=="0.000"||.9 .toFixed(0)!=="1"||1.255 .toFixed(2)!=="1.25"||0xde0b6b3a7640080 .toFixed(0)!=="1000000000000000128")||!h(function(){l.call({})})},{toFixed:function(x){function d(C,A){for(var M=-1,k=A;++M<6;)k+=C*T[M],T[M]=k%1e7,k=u(k/1e7)}function y(C){for(var A=6,M=0;0<=--A;)M+=T[A],T[A]=u(M/C),M=M%C*1e7}function p(){for(var C,A=6,M="";0<=--A;)M===""&&A!==0&&T[A]===0||(C=String(T[A]),M=M===""?C:M+f.call("0",7-C.length)+C);return M}var m,g,v=a(this),x=s(x),T=[0,0,0,0,0,0],w="",b="0";if(x<0||20<x)throw RangeError("Incorrect fraction digits");if(v!=v)return"NaN";if(v<=-1e21||1e21<=v)return String(v);if(v<0&&(w="-",v=-v),1e-21<v)if(v=(m=function(C){for(var A=0,M=C;4096<=M;)A+=12,M/=4096;for(;2<=M;)A+=1,M/=2;return A}(v*n(2,69,1))-69)<0?v*n(2,-m,1):v/n(2,m,1),v*=4503599627370496,0<(m=52-m)){for(d(0,v),g=x;7<=g;)d(1e7,0),g-=7;for(d(n(10,g,1),0),g=m-1;23<=g;)y(1<<23),g-=23;y(1<<g),d(1,1),y(2),b=p()}else d(0,v),d(1<<-m,0),b=p()+f.call("0",x);return b=0<x?w+((v=b.length)<=x?"0."+f.call("0",x-v)+b:b.slice(0,v-x)+"."+b.slice(v-x)):w+b}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":127,"../internals/this-number-value":131,"../internals/to-integer":135}],176:[function(o,r,i){var n=o("../internals/export"),o=o("../internals/object-assign");n({target:"Object",stat:!0,forced:Object.assign!==o},{assign:o})},{"../internals/export":50,"../internals/object-assign":89}],177:[function(t,r,i){var n=t("../internals/export"),o=t("../internals/iterate"),s=t("../internals/create-property");n({target:"Object",stat:!0},{fromEntries:function(a){var f={};return o(a,function(h,l){s(f,h,l)},void 0,!0),f}})},{"../internals/create-property":40,"../internals/export":50,"../internals/iterate":77}],178:[function(a,r,i){var n=a("../internals/export"),f=a("../internals/fails"),o=a("../internals/to-indexed-object"),s=a("../internals/object-get-own-property-descriptor").f,a=a("../internals/descriptors"),f=f(function(){s(1)});n({target:"Object",stat:!0,forced:!a||f,sham:!a},{getOwnPropertyDescriptor:function(h,l){return s(o(h),l)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":93,"../internals/to-indexed-object":134}],179:[function(s,r,i){var n=s("../internals/export"),o=s("../internals/fails"),s=s("../internals/object-get-own-property-names-external").f;n({target:"Object",stat:!0,forced:o(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:s})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":94}],180:[function(f,r,i){var n=f("../internals/export"),o=f("../internals/fails"),s=f("../internals/to-object"),a=f("../internals/object-get-prototype-of"),f=f("../internals/correct-prototype-getter");n({target:"Object",stat:!0,forced:o(function(){a(1)}),sham:!f},{getPrototypeOf:function(h){return a(s(h))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":97,"../internals/to-object":137}],181:[function(t,r,i){var n=t("../internals/export"),o=t("../internals/to-object"),s=t("../internals/object-keys");n({target:"Object",stat:!0,forced:t("../internals/fails")(function(){s(1)})},{keys:function(a){return s(o(a))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":99,"../internals/to-object":137}],182:[function(s,r,i){var n=s("../internals/to-string-tag-support"),o=s("../internals/redefine"),s=s("../internals/object-to-string");n||o(Object.prototype,"toString",s,{unsafe:!0})},{"../internals/object-to-string":102,"../internals/redefine":108,"../internals/to-string-tag-support":141}],183:[function(Be,r,i){var n,o,s,a,f=Be("../internals/export"),h=Be("../internals/is-pure"),l=Be("../internals/global"),u=Be("../internals/get-built-in"),c=Be("../internals/native-promise-constructor"),d=Be("../internals/redefine"),y=Be("../internals/redefine-all"),p=Be("../internals/set-to-string-tag"),m=Be("../internals/set-species"),g=Be("../internals/is-object"),v=Be("../internals/a-function"),x=Be("../internals/an-instance"),T=Be("../internals/classof-raw"),w=Be("../internals/inspect-source"),b=Be("../internals/iterate"),C=Be("../internals/check-correctness-of-iteration"),A=Be("../internals/species-constructor"),M=Be("../internals/task").set,k=Be("../internals/microtask"),P=Be("../internals/promise-resolve"),F=Be("../internals/host-report-errors"),I=Be("../internals/new-promise-capability"),B=Be("../internals/perform"),H=Be("../internals/internal-state"),G=Be("../internals/is-forced"),st=Be("../internals/well-known-symbol"),W=Be("../internals/engine-v8-version"),Q=st("species"),ne="Promise",U=H.get,D=H.set,O=H.getterFor(ne),V=c,Z=l.TypeError,ie=l.document,re=l.process,ge=u("fetch"),ye=I.f,he=ye,pe=T(re)=="process",we=!!(ie&&ie.createEvent&&l.dispatchEvent),oe="unhandledrejection",fe="rejectionhandled",Ce=1,Fe=2,Ae=1,De=2,Be=G(ne,function(){var ze,Re;return w(V)===String(V)&&(W===66||!pe&&typeof PromiseRejectionEvent!="function")?!0:!(!h||V.prototype.finally)||!(51<=W&&/native code/.test(V))&&(Re=function(q){q(function(){},function(){})},((ze=V.resolve(1)).constructor={})[Q]=Re,!(ze.then(function(){})instanceof Re))}),st=Be||!C(function(ze){V.all(ze).catch(function(){})}),qe=function(ze){var Re;return!(!g(ze)||typeof(Re=ze.then)!="function")&&Re},Et=function(ze,Re,q){var te;Re.notified||(Re.notified=!0,te=Re.reactions,k(function(){for(var ee,ae,Se=Re.value,Le=Re.state==Ce,Ne=0;te.length>Ne;){var at,ft,bt,Ee=te[Ne++],Ke=Le?Ee.ok:Ee.fail,ot=Ee.resolve,ut=Ee.reject,_t=Ee.domain;try{Ke?(Le||(Re.rejection===De&&function(jt,$t){M.call(l,function(){pe?re.emit("rejectionHandled",jt):de(fe,jt,$t.value)})}(ze,Re),Re.rejection=Ae),Ke===!0?at=Se:(_t&&_t.enter(),at=Ke(Se),_t&&(_t.exit(),bt=!0)),at===Ee.promise?ut(Z("Promise-chain cycle")):(ft=qe(at))?ft.call(at,ot,ut):ot(at)):ut(Se)}catch(jt){_t&&!bt&&_t.exit(),ut(jt)}}Re.reactions=[],Re.notified=!1,q&&!Re.rejection&&(ee=ze,ae=Re,M.call(l,function(){var jt=ae.value,$t=le(ae);if($t&&($t=B(function(){pe?re.emit("unhandledRejection",jt,ee):de(oe,ee,jt)}),ae.rejection=pe||le(ae)?De:Ae,$t.error))throw $t.value}))}))},de=function(ze,Re,q){var te;we?((te=ie.createEvent("Event")).promise=Re,te.reason=q,te.initEvent(ze,!1,!0),l.dispatchEvent(te)):te={promise:Re,reason:q},(Re=l["on"+ze])?Re(te):ze===oe&&F("Unhandled promise rejection",q)},le=function(ze){return ze.rejection!==Ae&&!ze.parent},Ue=function(ze,Re,q,te){return function(ee){ze(Re,q,ee,te)}},Ze=function(ze,Re,q,te){Re.done||(Re.done=!0,(Re=te||Re).value=q,Re.state=Fe,Et(ze,Re,!0))},Me=function(ze,Re,q,te){if(!Re.done){Re.done=!0,te&&(Re=te);try{if(ze===q)throw Z("Promise can't be resolved itself");var ee=qe(q);ee?k(function(){var ae={done:!1};try{ee.call(q,Ue(Me,ze,ae,Re),Ue(Ze,ze,ae,Re))}catch(Se){Ze(ze,ae,Se,Re)}}):(Re.value=q,Re.state=Ce,Et(ze,Re,!1))}catch(ae){Ze(ze,{done:!1},ae,Re)}}};Be&&(V=function(ze){x(this,V,ne),v(ze),n.call(this);var Re=U(this);try{ze(Ue(Me,this,Re),Ue(Ze,this,Re))}catch(q){Ze(this,Re,q)}},(n=function(ze){D(this,{type:ne,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=y(V.prototype,{then:function(ze,Re){var q=O(this),te=ye(A(this,V));return te.ok=typeof ze!="function"||ze,te.fail=typeof Re=="function"&&Re,te.domain=pe?re.domain:void 0,q.parent=!0,q.reactions.push(te),q.state!=0&&Et(this,q,!1),te.promise},catch:function(ze){return this.then(void 0,ze)}}),o=function(){var ze=new n,Re=U(ze);this.promise=ze,this.resolve=Ue(Me,ze,Re),this.reject=Ue(Ze,ze,Re)},I.f=ye=function(ze){return ze===V||ze===s?new o:he(ze)},h||typeof c!="function"||(a=c.prototype.then,d(c.prototype,"then",function(ze,Re){var q=this;return new V(function(te,ee){a.call(q,te,ee)}).then(ze,Re)},{unsafe:!0}),typeof ge=="function"&&f({global:!0,enumerable:!0,forced:!0},{fetch:function(ze){return P(V,ge.apply(l,arguments))}}))),f({global:!0,wrap:!0,forced:Be},{Promise:V}),p(V,ne,!1,!0),m(ne),s=u(ne),f({target:ne,stat:!0,forced:Be},{reject:function(ze){var Re=ye(this);return Re.reject.call(void 0,ze),Re.promise}}),f({target:ne,stat:!0,forced:h||Be},{resolve:function(ze){return P(h&&this===s?V:this,ze)}}),f({target:ne,stat:!0,forced:st},{all:function(ze){var Re=this,q=ye(Re),te=q.resolve,ee=q.reject,ae=B(function(){var Se=v(Re.resolve),Le=[],Ne=0,at=1;b(ze,function(ft){var bt=Ne++,Ee=!1;Le.push(void 0),at++,Se.call(Re,ft).then(function(Ke){Ee||(Ee=!0,Le[bt]=Ke,--at||te(Le))},ee)}),--at||te(Le)});return ae.error&&ee(ae.value),q.promise},race:function(ze){var Re=this,q=ye(Re),te=q.reject,ee=B(function(){var ae=v(Re.resolve);b(ze,function(Se){ae.call(Re,Se).then(q.resolve,te)})});return ee.error&&te(ee.value),q.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":56,"../internals/global":59,"../internals/host-report-errors":62,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-object":74,"../internals/is-pure":75,"../internals/iterate":77,"../internals/microtask":81,"../internals/native-promise-constructor":82,"../internals/new-promise-capability":86,"../internals/perform":105,"../internals/promise-resolve":106,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-species":116,"../internals/set-to-string-tag":117,"../internals/species-constructor":121,"../internals/task":130,"../internals/well-known-symbol":148}],184:[function(l,r,i){var n=l("../internals/export"),y=l("../internals/get-built-in"),o=l("../internals/a-function"),s=l("../internals/an-object"),a=l("../internals/is-object"),f=l("../internals/object-create"),h=l("../internals/function-bind"),l=l("../internals/fails"),u=y("Reflect","construct"),c=l(function(){function p(){}return!(u(function(){},[],p)instanceof p)}),d=!l(function(){u(function(){})}),y=c||d;n({target:"Reflect",stat:!0,forced:y,sham:y},{construct:function(p,m){o(p),s(m);var g=arguments.length<3?p:o(arguments[2]);if(d&&!c)return u(p,m,g);if(p==g){switch(m.length){case 0:return new p;case 1:return new p(m[0]);case 2:return new p(m[0],m[1]);case 3:return new p(m[0],m[1],m[2]);case 4:return new p(m[0],m[1],m[2],m[3])}var v=[null];return v.push.apply(v,m),new(h.apply(p,v))}return v=g.prototype,g=f(a(v)?v:Object.prototype),v=Function.apply.call(p,g,m),a(v)?v:g}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":55,"../internals/get-built-in":56,"../internals/is-object":74,"../internals/object-create":90}],185:[function(t,r,i){var n=t("../internals/export"),o=t("../internals/is-object"),s=t("../internals/an-object"),a=t("../internals/has"),f=t("../internals/object-get-own-property-descriptor"),h=t("../internals/object-get-prototype-of");n({target:"Reflect",stat:!0},{get:function l(u,c){var d,y=arguments.length<3?u:arguments[2];return s(u)===y?u[c]:(d=f.f(u,c))?a(d,"value")?d.value:d.get===void 0?void 0:d.get.call(y):o(d=h(u))?l(d,c,y):void 0}})},{"../internals/an-object":10,"../internals/export":50,"../internals/has":60,"../internals/is-object":74,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-prototype-of":97}],186:[function(t,r,i){var n=t("../internals/descriptors"),o=t("../internals/global"),s=t("../internals/is-forced"),a=t("../internals/inherit-if-required"),f=t("../internals/object-define-property").f,h=t("../internals/object-get-own-property-names").f,l=t("../internals/is-regexp"),u=t("../internals/regexp-flags"),c=t("../internals/regexp-sticky-helpers"),d=t("../internals/redefine"),y=t("../internals/fails"),p=t("../internals/internal-state").set,m=t("../internals/set-species"),g=t("../internals/well-known-symbol")("match"),v=o.RegExp,x=v.prototype,T=/a/g,w=/a/g,b=new v(T)!==T,C=c.UNSUPPORTED_Y;if(n&&s("RegExp",!b||C||y(function(){return w[g]=!1,v(T)!=T||v(w)==w||v(T,"i")!="/a/i"}))){for(var A=function(P,F){var I,B=this instanceof A,H=l(P),G=F===void 0;return!B&&H&&P.constructor===A&&G?P:(b?H&&!G&&(P=P.source):P instanceof A&&(G&&(F=u.call(P)),P=P.source),C&&(I=!!F&&-1<F.indexOf("y"))&&(F=F.replace(/y/g,"")),H=a(b?new v(P,F):v(P,F),B?this:x,A),C&&I&&p(H,{sticky:I}),H)},M=h(v),k=0;M.length>k;)(function(P){P in A||f(A,P,{configurable:!0,get:function(){return v[P]},set:function(F){v[P]=F}})})(M[k++]);(x.constructor=A).prototype=x,d(o,"RegExp",A)}m("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-regexp":76,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/regexp-flags":111,"../internals/regexp-sticky-helpers":112,"../internals/set-species":116,"../internals/well-known-symbol":148}],187:[function(o,r,i){var n=o("../internals/export"),o=o("../internals/regexp-exec");n({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},{"../internals/export":50,"../internals/regexp-exec":110}],188:[function(a,r,i){var n=a("../internals/redefine"),o=a("../internals/an-object"),l=a("../internals/fails"),s=a("../internals/regexp-flags"),a="toString",f=RegExp.prototype,h=f[a],l=l(function(){return h.call({source:"a",flags:"b"})!="/a/b"}),u=h.name!=a;(l||u)&&n(RegExp.prototype,a,function(){var c=o(this),d=String(c.source),y=c.flags;return"/"+d+"/"+String(y===void 0&&c instanceof RegExp&&!("flags"in f)?s.call(c):y)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":108,"../internals/regexp-flags":111}],189:[function(o,r,i){var n=o("../internals/collection"),o=o("../internals/collection-strong");r.exports=n("Set",function(s){return function(){return s(this,arguments.length?arguments[0]:void 0)}},o)},{"../internals/collection":32,"../internals/collection-strong":30}],190:[function(h,r,i){var n=h("../internals/export"),o=h("../internals/object-get-own-property-descriptor").f,s=h("../internals/to-length"),a=h("../internals/not-a-regexp"),f=h("../internals/require-object-coercible"),c=h("../internals/correct-is-regexp-logic"),h=h("../internals/is-pure"),l="".endsWith,u=Math.min,c=c("endsWith");n({target:"String",proto:!0,forced:!!(h||c||!(n=o(String.prototype,"endsWith"))||n.writable)&&!c},{endsWith:function(d){var y=String(f(this)),p=(a(d),1<arguments.length?arguments[1]:void 0),m=s(y.length),p=p===void 0?m:u(s(p),m),m=String(d);return l?l.call(y,m,p):y.slice(p-m.length,p)===m}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":75,"../internals/not-a-regexp":87,"../internals/object-get-own-property-descriptor":93,"../internals/require-object-coercible":113,"../internals/to-length":136}],191:[function(t,r,i){var n=t("../internals/export"),o=t("../internals/not-a-regexp"),s=t("../internals/require-object-coercible");n({target:"String",proto:!0,forced:!t("../internals/correct-is-regexp-logic")("includes")},{includes:function(a){return!!~String(s(this)).indexOf(o(a),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":87,"../internals/require-object-coercible":113}],192:[function(s,r,i){var n=s("../internals/string-multibyte").charAt,o=s("../internals/internal-state"),s=s("../internals/define-iterator"),a="String Iterator",f=o.set,h=o.getterFor(a);s(String,"String",function(l){f(this,{type:a,string:String(l),index:0})},function(){var l=h(this),u=l.string,c=l.index;return c>=u.length?{value:void 0,done:!0}:(u=n(u,c),l.index+=u.length,{value:u,done:!1})})},{"../internals/define-iterator":41,"../internals/internal-state":70,"../internals/string-multibyte":123}],193:[function(t,r,i){var n=t("../internals/fix-regexp-well-known-symbol-logic"),o=t("../internals/an-object"),s=t("../internals/to-length"),a=t("../internals/require-object-coercible"),f=t("../internals/advance-string-index"),h=t("../internals/regexp-exec-abstract");n("match",1,function(l,u,c){return[function(d){var y=a(this),p=d==null?void 0:d[l];return p!==void 0?p.call(d,y):new RegExp(d)[l](String(y))},function(d){var y=c(u,d,this);if(y.done)return y.value;var p=o(d),m=String(this);if(!p.global)return h(p,m);for(var g=p.unicode,v=[],x=p.lastIndex=0;(T=h(p,m))!==null;){var T=String(T[0]);(v[x]=T)===""&&(p.lastIndex=f(m,s(p.lastIndex),g)),x++}return x===0?null:v}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-length":136}],194:[function(t,r,i){var n=t("../internals/export"),o=t("../internals/string-pad").start;n({target:"String",proto:!0,forced:t("../internals/string-pad-webkit-bug")},{padStart:function(s){return o(this,s,1<arguments.length?arguments[1]:void 0)}})},{"../internals/export":50,"../internals/string-pad":125,"../internals/string-pad-webkit-bug":124}],195:[function(t,r,i){t("../internals/export")({target:"String",proto:!0},{repeat:t("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":127}],196:[function(t,r,i){var n=t("../internals/fix-regexp-well-known-symbol-logic"),o=t("../internals/an-object"),s=t("../internals/to-object"),a=t("../internals/to-length"),f=t("../internals/to-integer"),h=t("../internals/require-object-coercible"),l=t("../internals/advance-string-index"),u=t("../internals/regexp-exec-abstract"),c=Math.max,d=Math.min,y=Math.floor,p=/\$([$&'`]|\d\d?|<[^>]*>)/g,m=/\$([$&'`]|\d\d?)/g;n("replace",2,function(g,v,x,T){var w=T.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,b=T.REPLACE_KEEPS_$0,C=w?"$":"$0";return[function(A,M){var k=h(this),P=A==null?void 0:A[g];return P!==void 0?P.call(A,k,M):v.call(String(k),A,M)},function(A,M){if(!w&&b||typeof M=="string"&&M.indexOf(C)===-1){var k=x(v,A,this,M);if(k.done)return k.value}for(var P,F=o(A),I=String(this),B=typeof M=="function",H=(B||(M=String(M)),F.global),G=(H&&(P=F.unicode,F.lastIndex=0),[]);(D=u(F,I))!==null&&(G.push(D),H);)String(D[0])===""&&(F.lastIndex=l(I,a(F.lastIndex),P));for(var W,Q="",ne=0,U=0;U<G.length;U++){for(var D=G[U],O=String(D[0]),V=c(d(f(D.index),I.length),0),Z=[],ie=1;ie<D.length;ie++)Z.push((W=D[ie])===void 0?W:String(W));var re=D.groups,ge=B?(ge=[O].concat(Z,V,I),re!==void 0&&ge.push(re),String(M.apply(void 0,ge))):function(ye,he,pe,we,oe,fe){var Ce=pe+ye.length,Fe=we.length,Ae=m;return oe!==void 0&&(oe=s(oe),Ae=p),v.call(fe,Ae,function(De,Be){var st;switch(Be.charAt(0)){case"$":return"$";case"&":return ye;case"`":return he.slice(0,pe);case"'":return he.slice(Ce);case"<":st=oe[Be.slice(1,-1)];break;default:var qe,Et=+Be;if(Et==0)return De;if(Fe<Et)return(qe=y(Et/10))!==0&&qe<=Fe?we[qe-1]===void 0?Be.charAt(1):we[qe-1]+Be.charAt(1):De;st=we[Et-1]}return st===void 0?"":st})}(O,I,V,Z,re,M);ne<=V&&(Q+=I.slice(ne,V)+ge,ne=V+O.length)}return Q+I.slice(ne)}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-integer":135,"../internals/to-length":136,"../internals/to-object":137}],197:[function(t,r,i){var n=t("../internals/fix-regexp-well-known-symbol-logic"),o=t("../internals/an-object"),s=t("../internals/require-object-coercible"),a=t("../internals/same-value"),f=t("../internals/regexp-exec-abstract");n("search",1,function(h,l,u){return[function(c){var d=s(this),y=c==null?void 0:c[h];return y!==void 0?y.call(c,d):new RegExp(c)[h](String(d))},function(c){var d,y=u(l,c,this);return y.done?y.value:(y=o(c),c=String(this),d=y.lastIndex,a(d,0)||(y.lastIndex=0),c=f(y,c),a(y.lastIndex,d)||(y.lastIndex=d),c===null?-1:c.index)}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/same-value":114}],198:[function(d,r,i){var n=d("../internals/fix-regexp-well-known-symbol-logic"),o=d("../internals/is-regexp"),s=d("../internals/an-object"),a=d("../internals/require-object-coercible"),f=d("../internals/species-constructor"),h=d("../internals/advance-string-index"),l=d("../internals/to-length"),u=d("../internals/regexp-exec-abstract"),c=d("../internals/regexp-exec"),d=d("../internals/fails"),y=[].push,p=Math.min,m=4294967295,g=!d(function(){return!RegExp(m,"y")});n("split",2,function(v,x,T){var w="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(b,C){var A=String(a(this)),M=C===void 0?m:C>>>0;if(M==0)return[];if(b===void 0)return[A];if(!o(b))return x.call(A,b,M);for(var k,P,F,I=[],C=(b.ignoreCase?"i":"")+(b.multiline?"m":"")+(b.unicode?"u":"")+(b.sticky?"y":""),B=0,H=new RegExp(b.source,C+"g");(k=c.call(H,A))&&!(B<(P=H.lastIndex)&&(I.push(A.slice(B,k.index)),1<k.length&&k.index<A.length&&y.apply(I,k.slice(1)),F=k[0].length,B=P,I.length>=M));)H.lastIndex===k.index&&H.lastIndex++;return B===A.length?!F&&H.test("")||I.push(""):I.push(A.slice(B)),I.length>M?I.slice(0,M):I}:"0".split(void 0,0).length?function(b,C){return b===void 0&&C===0?[]:x.call(this,b,C)}:x;return[function(b,C){var A=a(this),M=b==null?void 0:b[v];return M!==void 0?M.call(b,A,C):w.call(String(A),b,C)},function(k,C){var A=T(w,k,this,C,w!==x);if(A.done)return A.value;var A=s(k),M=String(this),k=f(A,RegExp),P=A.unicode,F=(A.ignoreCase?"i":"")+(A.multiline?"m":"")+(A.unicode?"u":"")+(g?"y":"g"),I=new k(g?A:"^(?:"+A.source+")",F),B=C===void 0?m:C>>>0;if(B==0)return[];if(M.length===0)return u(I,M)===null?[M]:[];for(var H=0,G=0,W=[];G<M.length;){I.lastIndex=g?G:0;var Q,ne=u(I,g?M:M.slice(G));if(ne===null||(Q=p(l(I.lastIndex+(g?0:G)),M.length))===H)G=h(M,G,P);else{if(W.push(M.slice(H,G)),W.length===B)return W;for(var U=1;U<=ne.length-1;U++)if(W.push(ne[U]),W.length===B)return W;G=H=Q}}return W.push(M.slice(H)),W}]},!g)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":76,"../internals/regexp-exec":110,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/species-constructor":121,"../internals/to-length":136}],199:[function(h,r,i){var n=h("../internals/export"),o=h("../internals/object-get-own-property-descriptor").f,s=h("../internals/to-length"),a=h("../internals/not-a-regexp"),f=h("../internals/require-object-coercible"),c=h("../internals/correct-is-regexp-logic"),h=h("../internals/is-pure"),l="".startsWith,u=Math.min,c=c("startsWith");n({target:"String",proto:!0,forced:!!(h||c||!(n=o(String.prototype,"startsWith"))||n.writable)&&!c},{startsWith:function(m){var y=String(f(this)),p=(a(m),s(u(1<arguments.length?arguments[1]:void 0,y.length))),m=String(m);return l?l.call(y,m,p):y.slice(p,p+m.length)===m}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":75,"../internals/not-a-regexp":87,"../internals/object-get-own-property-descriptor":93,"../internals/require-object-coercible":113,"../internals/to-length":136}],200:[function(t,r,i){var n=t("../internals/export"),o=t("../internals/create-html");n({target:"String",proto:!0,forced:t("../internals/string-html-forced")("sub")},{sub:function(){return o(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":122}],201:[function(t,r,i){var n=t("../internals/export"),o=t("../internals/string-trim").trim;n({target:"String",proto:!0,forced:t("../internals/string-trim-forced")("trim")},{trim:function(){return o(this)}})},{"../internals/export":50,"../internals/string-trim":129,"../internals/string-trim-forced":128}],202:[function(p,r,i){var n,o,s,a,f,h=p("../internals/export"),l=p("../internals/descriptors"),u=p("../internals/global"),c=p("../internals/has"),d=p("../internals/is-object"),y=p("../internals/object-define-property").f,p=p("../internals/copy-constructor-properties"),m=u.Symbol;!l||typeof m!="function"||"description"in m.prototype&&m().description===void 0||(n={},p(o=function(){var g=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),v=this instanceof o?new m(g):g===void 0?m():m(g);return g===""&&(n[v]=!0),v},m),(u=o.prototype=m.prototype).constructor=o,s=u.toString,a=String(m("test"))=="Symbol(test)",f=/^Symbol\((.*)\)[^)]+$/,y(u,"description",{configurable:!0,get:function(){var g=d(this)?this.valueOf():this,v=s.call(g);return c(n,g)?"":(g=a?v.slice(7,-1):v.replace(f,"$1"))===""?void 0:g}}),h({global:!0,forced:!0},{Symbol:o}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92}],203:[function(t,r,i){t("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],204:[function(he,r,i){function n(ee,ae){var Se=st[ee]=A(fe[ye]);return pe(Se,{type:ge,tag:ee,description:ae}),c||(Se.description=ae),Se}function o(ee,Le){x(ee);var Se=w(Le),Le=M(Se).concat(te(Se));return ie(Le,function(Ne){c&&!q.call(Se,Ne)||Re(ee,Ne,Se[Ne])}),ee}function s(Le,Ne){var Se,Le=w(Le),Ne=b(Ne,!0);if(Le!==oe||!m(st,Ne)||m(qe,Ne))return!(Se=Fe(Le,Ne))||!m(st,Ne)||m(Le,re)&&Le[re][Ne]||(Se.enumerable=!0),Se}function a(ae){var ae=De(w(ae)),Se=[];return ie(ae,function(Le){m(st,Le)||m(ne,Le)||Se.push(Le)}),Se}var f=he("../internals/export"),h=he("../internals/global"),l=he("../internals/get-built-in"),u=he("../internals/is-pure"),c=he("../internals/descriptors"),d=he("../internals/native-symbol"),y=he("../internals/use-symbol-as-uid"),p=he("../internals/fails"),m=he("../internals/has"),g=he("../internals/is-array"),v=he("../internals/is-object"),x=he("../internals/an-object"),T=he("../internals/to-object"),w=he("../internals/to-indexed-object"),b=he("../internals/to-primitive"),C=he("../internals/create-property-descriptor"),A=he("../internals/object-create"),M=he("../internals/object-keys"),k=he("../internals/object-get-own-property-names"),P=he("../internals/object-get-own-property-names-external"),F=he("../internals/object-get-own-property-symbols"),I=he("../internals/object-get-own-property-descriptor"),B=he("../internals/object-define-property"),H=he("../internals/object-property-is-enumerable"),G=he("../internals/create-non-enumerable-property"),W=he("../internals/redefine"),Q=he("../internals/shared"),le=he("../internals/shared-key"),ne=he("../internals/hidden-keys"),U=he("../internals/uid"),D=he("../internals/well-known-symbol"),O=he("../internals/well-known-symbol-wrapped"),V=he("../internals/define-well-known-symbol"),Z=he("../internals/set-to-string-tag"),Ue=he("../internals/internal-state"),ie=he("../internals/array-iteration").forEach,re=le("hidden"),ge="Symbol",ye="prototype",he=D("toPrimitive"),pe=Ue.set,we=Ue.getterFor(ge),oe=Object[ye],fe=h.Symbol,Ce=l("JSON","stringify"),Fe=I.f,Ae=B.f,De=P.f,Be=H.f,st=Q("symbols"),qe=Q("op-symbols"),Et=Q("string-to-symbol-registry"),de=Q("symbol-to-string-registry"),le=Q("wks"),Ue=h.QObject,Ze=!Ue||!Ue[ye]||!Ue[ye].findChild,Me=c&&p(function(){return A(Ae({},"a",{get:function(){return Ae(this,"a",{value:7}).a}})).a!=7})?function(ee,ae,Se){var Le=Fe(oe,ae);Le&&delete oe[ae],Ae(ee,ae,Se),Le&&ee!==oe&&Ae(oe,ae,Le)}:Ae,ze=y?function(ee){return typeof ee=="symbol"}:function(ee){return Object(ee)instanceof fe},Re=function(ee,ae,Se){return ee===oe&&Re(qe,ae,Se),x(ee),ae=b(ae,!0),x(Se),(m(st,ae)?(Se.enumerable?(m(ee,re)&&ee[re][ae]&&(ee[re][ae]=!1),Se=A(Se,{enumerable:C(0,!1)})):(m(ee,re)||Ae(ee,re,C(1,{})),ee[re][ae]=!0),Me):Ae)(ee,ae,Se)},q=function(ae){var ae=b(ae,!0),Se=Be.call(this,ae);return!(this===oe&&m(st,ae)&&!m(qe,ae))&&(!(Se||!m(this,ae)||!m(st,ae)||m(this,re)&&this[re][ae])||Se)},te=function(Se){var ae=Se===oe,Se=De(ae?qe:w(Se)),Le=[];return ie(Se,function(Ne){!m(st,Ne)||ae&&!m(oe,Ne)||Le.push(st[Ne])}),Le};d||(W((fe=function(){if(this instanceof fe)throw TypeError("Symbol is not a constructor");var ee=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,ae=U(ee),Se=function(Le){this===oe&&Se.call(qe,Le),m(this,re)&&m(this[re],ae)&&(this[re][ae]=!1),Me(this,ae,C(1,Le))};return c&&Ze&&Me(oe,ae,{configurable:!0,set:Se}),n(ae,ee)})[ye],"toString",function(){return we(this).tag}),W(fe,"withoutSetter",function(ee){return n(U(ee),ee)}),H.f=q,B.f=Re,I.f=s,k.f=P.f=a,F.f=te,O.f=function(ee){return n(D(ee),ee)},c&&(Ae(fe[ye],"description",{configurable:!0,get:function(){return we(this).description}}),u||W(oe,"propertyIsEnumerable",q,{unsafe:!0}))),f({global:!0,wrap:!0,forced:!d,sham:!d},{Symbol:fe}),ie(M(le),function(ee){V(ee)}),f({target:ge,stat:!0,forced:!d},{for:function(Se){var ae,Se=String(Se);return m(Et,Se)?Et[Se]:(ae=fe(Se),Et[Se]=ae,de[ae]=Se,ae)},keyFor:function(ee){if(!ze(ee))throw TypeError(ee+" is not a symbol");if(m(de,ee))return de[ee]},useSetter:function(){Ze=!0},useSimple:function(){Ze=!1}}),f({target:"Object",stat:!0,forced:!d,sham:!c},{create:function(ee,ae){return ae===void 0?A(ee):o(A(ee),ae)},defineProperty:Re,defineProperties:o,getOwnPropertyDescriptor:s}),f({target:"Object",stat:!0,forced:!d},{getOwnPropertyNames:a,getOwnPropertySymbols:te}),f({target:"Object",stat:!0,forced:p(function(){F.f(1)})},{getOwnPropertySymbols:function(ee){return F.f(T(ee))}}),Ce&&f({target:"JSON",stat:!0,forced:!d||p(function(){var ee=fe();return Ce([ee])!="[null]"||Ce({a:ee})!="{}"||Ce(Object(ee))!="{}"})},{stringify:function(ee,ae,Se){for(var Le,Ne=[ee],at=1;at<arguments.length;)Ne.push(arguments[at++]);if((v(Le=ae)||ee!==void 0)&&!ze(ee))return g(ae)||(ae=function(ft,bt){if(typeof Le=="function"&&(bt=Le.call(this,ft,bt)),!ze(bt))return bt}),Ne[1]=ae,Ce.apply(null,Ne)}}),fe[ye][he]||G(fe[ye],he,fe[ye].valueOf),Z(fe,ge),ne[re]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":56,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/internal-state":70,"../internals/is-array":72,"../internals/is-object":74,"../internals/is-pure":75,"../internals/native-symbol":83,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-names-external":94,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/shared":120,"../internals/shared-key":118,"../internals/to-indexed-object":134,"../internals/to-object":137,"../internals/to-primitive":140,"../internals/uid":145,"../internals/use-symbol-as-uid":146,"../internals/well-known-symbol":148,"../internals/well-known-symbol-wrapped":147}],205:[function(t,r,i){var n=t("../internals/array-buffer-view-core"),o=t("../internals/array-copy-within"),s=n.aTypedArray;(0,n.exportTypedArrayMethod)("copyWithin",function(a,f){return o.call(s(this),a,f,2<arguments.length?arguments[2]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],206:[function(t,r,i){var n=t("../internals/array-buffer-view-core"),o=t("../internals/array-iteration").every,s=n.aTypedArray;(0,n.exportTypedArrayMethod)("every",function(a){return o(s(this),a,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],207:[function(t,r,i){var n=t("../internals/array-buffer-view-core"),o=t("../internals/array-fill"),s=n.aTypedArray;(0,n.exportTypedArrayMethod)("fill",function(a){return o.apply(s(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],208:[function(t,r,i){var n=t("../internals/array-buffer-view-core"),o=t("../internals/array-iteration").filter,s=t("../internals/species-constructor"),a=n.aTypedArray,f=n.aTypedArrayConstructor;(0,n.exportTypedArrayMethod)("filter",function(h){for(var l=o(a(this),h,1<arguments.length?arguments[1]:void 0),h=s(this,this.constructor),u=0,c=l.length,d=new(f(h))(c);u<c;)d[u]=l[u++];return d})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],209:[function(t,r,i){var n=t("../internals/array-buffer-view-core"),o=t("../internals/array-iteration").findIndex,s=n.aTypedArray;(0,n.exportTypedArrayMethod)("findIndex",function(a){return o(s(this),a,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],210:[function(t,r,i){var n=t("../internals/array-buffer-view-core"),o=t("../internals/array-iteration").find,s=n.aTypedArray;(0,n.exportTypedArrayMethod)("find",function(a){return o(s(this),a,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],211:[function(t,r,i){t("../internals/typed-array-constructor")("Float32",function(n){return function(o,s,a){return n(this,o,s,a)}})},{"../internals/typed-array-constructor":142}],212:[function(t,r,i){t("../internals/typed-array-constructor")("Float64",function(n){return function(o,s,a){return n(this,o,s,a)}})},{"../internals/typed-array-constructor":142}],213:[function(t,r,i){var n=t("../internals/array-buffer-view-core"),o=t("../internals/array-iteration").forEach,s=n.aTypedArray;(0,n.exportTypedArrayMethod)("forEach",function(a){o(s(this),a,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],214:[function(t,r,i){var n=t("../internals/array-buffer-view-core"),o=t("../internals/array-includes").includes,s=n.aTypedArray;(0,n.exportTypedArrayMethod)("includes",function(a){return o(s(this),a,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],215:[function(t,r,i){var n=t("../internals/array-buffer-view-core"),o=t("../internals/array-includes").indexOf,s=n.aTypedArray;(0,n.exportTypedArrayMethod)("indexOf",function(a){return o(s(this),a,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],216:[function(t,r,i){t("../internals/typed-array-constructor")("Int16",function(n){return function(o,s,a){return n(this,o,s,a)}})},{"../internals/typed-array-constructor":142}],217:[function(t,r,i){t("../internals/typed-array-constructor")("Int32",function(n){return function(o,s,a){return n(this,o,s,a)}})},{"../internals/typed-array-constructor":142}],218:[function(o,r,i){function n(){return s.call(h(this))}var c=o("../internals/global"),u=o("../internals/array-buffer-view-core"),l=o("../modules/es.array.iterator"),o=o("../internals/well-known-symbol")("iterator"),c=c.Uint8Array,s=l.values,a=l.keys,f=l.entries,h=u.aTypedArray,l=u.exportTypedArrayMethod,u=c&&c.prototype[o],c=!!u&&(u.name=="values"||u.name==null);l("entries",function(){return f.call(h(this))}),l("keys",function(){return a.call(h(this))}),l("values",n,!c),l(o,n,!c)},{"../internals/array-buffer-view-core":12,"../internals/global":59,"../internals/well-known-symbol":148,"../modules/es.array.iterator":161}],219:[function(o,r,i){var o=o("../internals/array-buffer-view-core"),n=o.aTypedArray,o=o.exportTypedArrayMethod,s=[].join;o("join",function(a){return s.apply(n(this),arguments)})},{"../internals/array-buffer-view-core":12}],220:[function(t,r,i){var n=t("../internals/array-buffer-view-core"),o=t("../internals/array-last-index-of"),s=n.aTypedArray;(0,n.exportTypedArrayMethod)("lastIndexOf",function(a){return o.apply(s(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],221:[function(t,r,i){var n=t("../internals/array-buffer-view-core"),o=t("../internals/array-iteration").map,s=t("../internals/species-constructor"),a=n.aTypedArray,f=n.aTypedArrayConstructor;(0,n.exportTypedArrayMethod)("map",function(h){return o(a(this),h,1<arguments.length?arguments[1]:void 0,function(l,u){return new(f(s(l,l.constructor)))(u)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],222:[function(t,r,i){var n=t("../internals/array-buffer-view-core"),o=t("../internals/array-reduce").right,s=n.aTypedArray;(0,n.exportTypedArrayMethod)("reduceRight",function(a){return o(s(this),a,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],223:[function(t,r,i){var n=t("../internals/array-buffer-view-core"),o=t("../internals/array-reduce").left,s=n.aTypedArray;(0,n.exportTypedArrayMethod)("reduce",function(a){return o(s(this),a,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],224:[function(o,r,i){var o=o("../internals/array-buffer-view-core"),n=o.aTypedArray,o=o.exportTypedArrayMethod,s=Math.floor;o("reverse",function(){for(var a,f=n(this).length,h=s(f/2),l=0;l<h;)a=this[l],this[l++]=this[--f],this[f]=a;return this})},{"../internals/array-buffer-view-core":12}],225:[function(f,r,i){var n=f("../internals/array-buffer-view-core"),o=f("../internals/to-length"),s=f("../internals/to-offset"),a=f("../internals/to-object"),f=f("../internals/fails"),h=n.aTypedArray;(0,n.exportTypedArrayMethod)("set",function(l){h(this);var u=s(1<arguments.length?arguments[1]:void 0,1),c=this.length,d=a(l),y=o(d.length),p=0;if(c<y+u)throw RangeError("Wrong length");for(;p<y;)this[u+p]=d[p++]},f(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":136,"../internals/to-object":137,"../internals/to-offset":138}],226:[function(o,r,i){var f=o("../internals/array-buffer-view-core"),n=o("../internals/species-constructor"),o=o("../internals/fails"),s=f.aTypedArray,a=f.aTypedArrayConstructor,f=f.exportTypedArrayMethod,h=[].slice;f("slice",function(l,u){for(var c=h.call(s(this),l,u),l=n(this,this.constructor),d=0,y=c.length,p=new(a(l))(y);d<y;)p[d]=c[d++];return p},o(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":121}],227:[function(t,r,i){var n=t("../internals/array-buffer-view-core"),o=t("../internals/array-iteration").some,s=n.aTypedArray;(0,n.exportTypedArrayMethod)("some",function(a){return o(s(this),a,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],228:[function(o,r,i){var o=o("../internals/array-buffer-view-core"),n=o.aTypedArray,o=o.exportTypedArrayMethod,s=[].sort;o("sort",function(a){return s.call(n(this),a)})},{"../internals/array-buffer-view-core":12}],229:[function(t,r,i){var n=t("../internals/array-buffer-view-core"),o=t("../internals/to-length"),s=t("../internals/to-absolute-index"),a=t("../internals/species-constructor"),f=n.aTypedArray;(0,n.exportTypedArrayMethod)("subarray",function(d,l){var u=f(this),c=u.length,d=s(d,c);return new(a(u,u.constructor))(u.buffer,u.byteOffset+d*u.BYTES_PER_ELEMENT,o((l===void 0?c:s(l,c))-d))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":121,"../internals/to-absolute-index":132,"../internals/to-length":136}],230:[function(o,r,i){var f=o("../internals/global"),n=o("../internals/array-buffer-view-core"),o=o("../internals/fails"),s=f.Int8Array,a=n.aTypedArray,f=n.exportTypedArrayMethod,h=[].toLocaleString,l=[].slice,u=!!s&&o(function(){h.call(new s(1))});f("toLocaleString",function(){return h.apply(u?l.call(a(this)):a(this),arguments)},o(function(){return[1,2].toLocaleString()!=new s([1,2]).toLocaleString()})||!o(function(){s.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":59}],231:[function(o,r,i){var n=o("../internals/array-buffer-view-core").exportTypedArrayMethod,f=o("../internals/fails"),o=o("../internals/global").Uint8Array,o=o&&o.prototype||{},s=[].toString,a=[].join,f=(f(function(){s.call({})})&&(s=function(){return a.call(this)}),o.toString!=s);n("toString",s,f)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":59}],232:[function(t,r,i){t("../internals/typed-array-constructor")("Uint16",function(n){return function(o,s,a){return n(this,o,s,a)}})},{"../internals/typed-array-constructor":142}],233:[function(t,r,i){t("../internals/typed-array-constructor")("Uint32",function(n){return function(o,s,a){return n(this,o,s,a)}})},{"../internals/typed-array-constructor":142}],234:[function(t,r,i){t("../internals/typed-array-constructor")("Uint8",function(n){return function(o,s,a){return n(this,o,s,a)}})},{"../internals/typed-array-constructor":142}],235:[function(t,r,i){t("../internals/typed-array-constructor")("Uint8",function(n){return function(o,s,a){return n(this,o,s,a)}},!0)},{"../internals/typed-array-constructor":142}],236:[function(m,x,i){function n(T){return function(){return T(this,arguments.length?arguments[0]:void 0)}}var o,s,a,f,h,g=m("../internals/global"),l=m("../internals/redefine-all"),u=m("../internals/internal-metadata"),c=m("../internals/collection"),d=m("../internals/collection-weak"),y=m("../internals/is-object"),p=m("../internals/internal-state").enforce,m=m("../internals/native-weak-map"),g=!g.ActiveXObject&&"ActiveXObject"in g,v=Object.isExtensible,x=x.exports=c("WeakMap",n,d);m&&g&&(o=d.getConstructor(n,"WeakMap",!0),u.REQUIRED=!0,c=x.prototype,s=c.delete,a=c.has,f=c.get,h=c.set,l(c,{delete:function(T){var w;return y(T)&&!v(T)?((w=p(this)).frozen||(w.frozen=new o),s.call(this,T)||w.frozen.delete(T)):s.call(this,T)},has:function(T){var w;return y(T)&&!v(T)?((w=p(this)).frozen||(w.frozen=new o),a.call(this,T)||w.frozen.has(T)):a.call(this,T)},get:function(T){var w;return!y(T)||v(T)||((w=p(this)).frozen||(w.frozen=new o),a.call(this,T))?f.call(this,T):w.frozen.get(T)},set:function(T,w){var b;return!y(T)||v(T)||((b=p(this)).frozen||(b.frozen=new o),a.call(this,T))?h.call(this,T,w):b.frozen.set(T,w),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":59,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/redefine-all":107}],237:[function(t,r,i){var n,o=t("../internals/global"),s=t("../internals/dom-iterables"),a=t("../internals/array-for-each"),f=t("../internals/create-non-enumerable-property");for(n in s){var h=o[n],h=h&&h.prototype;if(h&&h.forEach!==a)try{f(h,"forEach",a)}catch{h.forEach=a}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":59}],238:[function(h,r,i){var n,o=h("../internals/global"),s=h("../internals/dom-iterables"),a=h("../modules/es.array.iterator"),f=h("../internals/create-non-enumerable-property"),h=h("../internals/well-known-symbol"),l=h("iterator"),u=h("toStringTag"),c=a.values;for(n in s){var d=o[n],y=d&&d.prototype;if(y){if(y[l]!==c)try{f(y,l,c)}catch{y[l]=c}if(y[u]||f(y,u,n),s[n]){for(var p in a)if(y[p]!==a[p])try{f(y,p,a[p])}catch{y[p]=a[p]}}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":59,"../internals/well-known-symbol":148,"../modules/es.array.iterator":161}],239:[function(re,r,i){re("../modules/es.array.iterator");function n(ge){try{return decodeURIComponent(ge)}catch{return ge}}function o(ge){return V[ge]}function s(ge){return encodeURIComponent(ge).replace(O,o)}function a(ge){this.entries.length=0,Z(this.entries,ge)}function f(ge,ye){if(ge<ye)throw TypeError("Not enough arguments")}function h(){g(this,h,B);var ge,ye,he,pe,we,oe,fe,Ce,Fe=0<arguments.length?arguments[0]:void 0,Ae=[];if(G(this,{type:B,entries:Ae,updateURL:function(){},updateSearchParams:a}),Fe!==void 0)if(b(Fe))if(typeof(ge=k(Fe))=="function")for(he=(ye=ge.call(Fe)).next;!(pe=he.call(ye)).done;){if((oe=(we=(pe=M(w(pe.value))).next).call(pe)).done||(fe=we.call(pe)).done||!we.call(pe).done)throw TypeError("Expected sequence with length 2");Ae.push({key:oe.value+"",value:fe.value+""})}else for(Ce in Fe)v(Fe,Ce)&&Ae.push({key:Ce,value:Fe[Ce]+""});else Z(Ae,typeof Fe=="string"?Fe.charAt(0)==="?"?Fe.slice(1):Fe:Fe+"")}var l=re("../internals/export"),I=re("../internals/get-built-in"),u=re("../internals/native-url"),c=re("../internals/redefine"),d=re("../internals/redefine-all"),y=re("../internals/set-to-string-tag"),p=re("../internals/create-iterator-constructor"),m=re("../internals/internal-state"),g=re("../internals/an-instance"),v=re("../internals/has"),x=re("../internals/function-bind-context"),T=re("../internals/classof"),w=re("../internals/an-object"),b=re("../internals/is-object"),C=re("../internals/object-create"),A=re("../internals/create-property-descriptor"),M=re("../internals/get-iterator"),k=re("../internals/get-iterator-method"),re=re("../internals/well-known-symbol"),P=I("fetch"),F=I("Headers"),I=re("iterator"),B="URLSearchParams",H=B+"Iterator",G=m.set,W=m.getterFor(B),Q=m.getterFor(H),ne=/\+/g,U=Array(4),D=function(ge){var ye,he=ge.replace(ne," "),pe=4;try{return decodeURIComponent(he)}catch{for(;pe;)he=he.replace((ye=pe--,U[ye-1]||(U[ye-1]=RegExp("((?:%[\\da-f]{2}){"+ye+"})","gi"))),n);return he}},O=/[!'()~]|%20/g,V={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Z=function(ge,ye){if(ye)for(var he,pe=ye.split("&"),we=0;we<pe.length;)(he=pe[we++]).length&&(he=he.split("="),ge.push({key:D(he.shift()),value:D(he.join("="))}))},ie=p(function(ge,ye){G(this,{type:H,iterator:M(W(ge).entries),kind:ye})},"Iterator",function(){var ye=Q(this),ge=ye.kind,ye=ye.iterator.next(),he=ye.value;return ye.done||(ye.value=ge==="keys"?he.key:ge==="values"?he.value:[he.key,he.value]),ye}),re=h.prototype;d(re,{append:function(ge,ye){f(arguments.length,2);var he=W(this);he.entries.push({key:ge+"",value:ye+""}),he.updateURL()},delete:function(ge){f(arguments.length,1);for(var ye=W(this),he=ye.entries,pe=ge+"",we=0;we<he.length;)he[we].key===pe?he.splice(we,1):we++;ye.updateURL()},get:function(ge){f(arguments.length,1);for(var ye=W(this).entries,he=ge+"",pe=0;pe<ye.length;pe++)if(ye[pe].key===he)return ye[pe].value;return null},getAll:function(ge){f(arguments.length,1);for(var ye=W(this).entries,he=ge+"",pe=[],we=0;we<ye.length;we++)ye[we].key===he&&pe.push(ye[we].value);return pe},has:function(ge){f(arguments.length,1);for(var ye=W(this).entries,he=ge+"",pe=0;pe<ye.length;)if(ye[pe++].key===he)return!0;return!1},set:function(ge,ye){f(arguments.length,1);for(var he,pe=W(this),we=pe.entries,oe=!1,fe=ge+"",Ce=ye+"",Fe=0;Fe<we.length;Fe++)(he=we[Fe]).key===fe&&(oe?we.splice(Fe--,1):(oe=!0,he.value=Ce));oe||we.push({key:fe,value:Ce}),pe.updateURL()},sort:function(){for(var ge,ye,he=W(this),pe=he.entries,we=pe.slice(),oe=pe.length=0;oe<we.length;oe++){for(ge=we[oe],ye=0;ye<oe;ye++)if(pe[ye].key>ge.key){pe.splice(ye,0,ge);break}ye===oe&&pe.push(ge)}he.updateURL()},forEach:function(ge){for(var ye,he=W(this).entries,pe=x(ge,1<arguments.length?arguments[1]:void 0,3),we=0;we<he.length;)pe((ye=he[we++]).value,ye.key,this)},keys:function(){return new ie(this,"keys")},values:function(){return new ie(this,"values")},entries:function(){return new ie(this,"entries")}},{enumerable:!0}),c(re,I,re.entries),c(re,"toString",function(){for(var ge,ye=W(this).entries,he=[],pe=0;pe<ye.length;)ge=ye[pe++],he.push(s(ge.key)+"="+s(ge.value));return he.join("&")},{enumerable:!0}),y(h,B),l({global:!0,forced:!u},{URLSearchParams:h}),u||typeof P!="function"||typeof F!="function"||l({global:!0,enumerable:!0,forced:!0},{fetch:function(we){var ye,he,pe,we=[we];return 1<arguments.length&&(b(ye=arguments[1])&&(he=ye.body,T(he)===B&&((pe=ye.headers?new F(ye.headers):new F).has("content-type")||pe.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),ye=C(ye,{body:A(0,String(he)),headers:A(0,pe)}))),we.push(ye)),P.apply(this,we)}}),r.exports={URLSearchParams:h,getState:W}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":54,"../internals/get-built-in":56,"../internals/get-iterator":58,"../internals/get-iterator-method":57,"../internals/has":60,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-url":84,"../internals/object-create":90,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":148,"../modules/es.array.iterator":161}],240:[function(M,r,i){M("../modules/es.string.iterator");function n(xe){var lt,xt,ct,Dt;if(typeof xe=="number"){for(lt=[],xt=0;xt<4;xt++)lt.unshift(xe%256),xe=H(xe/256);return lt.join(".")}if(typeof xe!="object")return xe;for(lt="",ct=fe(xe),xt=0;xt<8;xt++)Dt&&xe[xt]===0||(Dt=Dt&&!1,ct===xt?(lt+=xt?":":"::",Dt=!0):(lt+=xe[xt].toString(16),xt<7&&(lt+=":")));return"["+lt+"]"}function o(xe){return!xe.host||xe.cannotBeABaseURL||xe.scheme=="file"}function s(xe,lt,xt,ct){var Dt,et,Ht,Mt=xt||ze,Kt=0,Ct="",Jt=!1,Wt=!1,gr=!1;for(xt||(xe.scheme="",xe.username="",xe.password="",xe.host=null,xe.port=null,xe.path=[],xe.query=null,xe.fragment=null,xe.cannotBeABaseURL=!1,lt=lt.replace(pe,"")),lt=lt.replace(we,""),Dt=T(lt);Kt<=Dt.length;){switch(et=Dt[Kt],Mt){case ze:if(!et||!D.test(et)){if(xt)return Q;Mt=q;continue}Ct+=et.toLowerCase(),Mt=Re;break;case Re:if(et&&(O.test(et)||et=="+"||et=="-"||et=="."))Ct+=et.toLowerCase();else{if(et!=":"){if(xt)return Q;Ct="",Mt=q,Kt=0;continue}if(xt&&(qe(xe)!=v(st,Ct)||Ct=="file"&&(Et(xe)||xe.port!==null)||xe.scheme=="file"&&!xe.host))return;if(xe.scheme=Ct,xt)return void(qe(xe)&&st[xe.scheme]==xe.port&&(xe.port=null));Ct="",xe.scheme=="file"?Mt=Ke:qe(xe)&&ct&&ct.scheme==xe.scheme?Mt=te:qe(xe)?Mt=Le:Dt[Kt+1]=="/"?(Mt=ee,Kt++):(xe.cannotBeABaseURL=!0,xe.path.push(""),Mt=$t)}break;case q:if(!ct||ct.cannotBeABaseURL&&et!="#")return Q;if(ct.cannotBeABaseURL&&et=="#"){xe.scheme=ct.scheme,xe.path=ct.path.slice(),xe.query=ct.query,xe.fragment="",xe.cannotBeABaseURL=!0,Mt=fr;break}Mt=ct.scheme=="file"?Ke:ae;continue;case te:if(et!="/"||Dt[Kt+1]!="/"){Mt=ae;continue}Mt=Ne,Kt++;break;case ee:if(et=="/"){Mt=at;break}Mt=jt;continue;case ae:if(xe.scheme=ct.scheme,et==h)xe.username=ct.username,xe.password=ct.password,xe.host=ct.host,xe.port=ct.port,xe.path=ct.path.slice(),xe.query=ct.query;else if(et=="/"||et=="\\"&&qe(xe))Mt=Se;else if(et=="?")xe.username=ct.username,xe.password=ct.password,xe.host=ct.host,xe.port=ct.port,xe.path=ct.path.slice(),xe.query="",Mt=ar;else{if(et!="#"){xe.username=ct.username,xe.password=ct.password,xe.host=ct.host,xe.port=ct.port,xe.path=ct.path.slice(),xe.path.pop(),Mt=jt;continue}xe.username=ct.username,xe.password=ct.password,xe.host=ct.host,xe.port=ct.port,xe.path=ct.path.slice(),xe.query=ct.query,xe.fragment="",Mt=fr}break;case Se:if(!qe(xe)||et!="/"&&et!="\\"){if(et!="/"){xe.username=ct.username,xe.password=ct.password,xe.host=ct.host,xe.port=ct.port,Mt=jt;continue}Mt=at}else Mt=Ne;break;case Le:if(Mt=Ne,et!="/"||Ct.charAt(Kt+1)!="/")continue;Kt++;break;case Ne:if(et=="/"||et=="\\")break;Mt=at;continue;case at:if(et=="@"){Jt&&(Ct="%40"+Ct);for(var Jt=!0,tr=T(Ct),Rr=0;Rr<tr.length;Rr++){var Or=tr[Rr];Or!=":"||gr?(Or=Be(Or,De),gr?xe.password+=Or:xe.username+=Or):gr=!0}Ct=""}else if(et==h||et=="/"||et=="?"||et=="#"||et=="\\"&&qe(xe)){if(Jt&&Ct=="")return W;Kt-=T(Ct).length+1,Ct="",Mt=ft}else Ct+=et;break;case ft:case bt:if(xt&&xe.scheme=="file"){Mt=ut;continue}if(et!=":"||Wt){if(et==h||et=="/"||et=="?"||et=="#"||et=="\\"&&qe(xe)){if(qe(xe)&&Ct=="")return ne;if(xt&&Ct==""&&(Et(xe)||xe.port!==null))return;if(Ht=oe(xe,Ct))return Ht;if(Ct="",Mt=_t,xt)return;continue}et=="["?Wt=!0:et=="]"&&(Wt=!1),Ct+=et}else{if(Ct=="")return ne;if(Ht=oe(xe,Ct))return Ht;if(Ct="",Mt=Ee,xt==bt)return}break;case Ee:if(!V.test(et)){if(et==h||et=="/"||et=="?"||et=="#"||et=="\\"&&qe(xe)||xt){if(Ct!=""){var Fr=parseInt(Ct,10);if(65535<Fr)return U;xe.port=qe(xe)&&Fr===st[xe.scheme]?null:Fr,Ct=""}if(xt)return;Mt=_t;continue}return U}Ct+=et;break;case Ke:if(xe.scheme="file",et=="/"||et=="\\")Mt=ot;else{if(!ct||ct.scheme!="file"){Mt=jt;continue}if(et==h)xe.host=ct.host,xe.path=ct.path.slice(),xe.query=ct.query;else if(et=="?")xe.host=ct.host,xe.path=ct.path.slice(),xe.query="",Mt=ar;else{if(et!="#"){le(Dt.slice(Kt).join(""))||(xe.host=ct.host,xe.path=ct.path.slice(),Ue(xe)),Mt=jt;continue}xe.host=ct.host,xe.path=ct.path.slice(),xe.query=ct.query,xe.fragment="",Mt=fr}}break;case ot:if(et=="/"||et=="\\"){Mt=ut;break}ct&&ct.scheme=="file"&&!le(Dt.slice(Kt).join(""))&&(de(ct.path[0],!0)?xe.path.push(ct.path[0]):xe.host=ct.host),Mt=jt;continue;case ut:if(et==h||et=="/"||et=="\\"||et=="?"||et=="#"){if(!xt&&de(Ct))Mt=jt;else{if(Ct==""){if(xe.host="",xt)return}else{if(Ht=oe(xe,Ct))return Ht;if(xe.host=="localhost"&&(xe.host=""),xt)return;Ct=""}Mt=_t}continue}Ct+=et;break;case _t:if(qe(xe)){if(Mt=jt,et!="/"&&et!="\\")continue}else if(xt||et!="?")if(xt||et!="#"){if(et!=h&&(Mt=jt,et!="/"))continue}else xe.fragment="",Mt=fr;else xe.query="",Mt=ar;break;case jt:if(et==h||et=="/"||et=="\\"&&qe(xe)||!xt&&(et=="?"||et=="#")){if(Me(Ct)?(Ue(xe),et=="/"||et=="\\"&&qe(xe)||xe.path.push("")):Ze(Ct)?et=="/"||et=="\\"&&qe(xe)||xe.path.push(""):(xe.scheme=="file"&&!xe.path.length&&de(Ct)&&(xe.host&&(xe.host=""),Ct=Ct.charAt(0)+":"),xe.path.push(Ct)),Ct="",xe.scheme=="file"&&(et==h||et=="?"||et=="#"))for(;1<xe.path.length&&xe.path[0]==="";)xe.path.shift();et=="?"?(xe.query="",Mt=ar):et=="#"&&(xe.fragment="",Mt=fr)}else Ct+=Be(et,Ae);break;case $t:et=="?"?(xe.query="",Mt=ar):et=="#"?(xe.fragment="",Mt=fr):et!=h&&(xe.path[0]+=Be(et,Ce));break;case ar:xt||et!="#"?et!=h&&(et=="'"&&qe(xe)?xe.query+="%27":xe.query+=et=="#"?"%23":Be(et,Ce)):(xe.fragment="",Mt=fr);break;case fr:et!=h&&(xe.fragment+=Be(et,Fe))}Kt++}}function a(et){var lt,xt,ct=g(this,a,"URL"),Dt=1<arguments.length?arguments[1]:void 0,et=String(et),Ht=I(ct,{type:"URL"});if(Dt!==void 0){if(Dt instanceof a)lt=B(Dt);else if(xt=s(lt={},String(Dt)))throw TypeError(xt)}if(xt=s(Ht,et,null,lt))throw TypeError(xt);var Mt=Ht.searchParams=new P;(Dt=F(Mt)).updateSearchParams(Ht.query),Dt.updateURL=function(){Ht.query=String(Mt)||null},d||(ct.href=er.call(ct),ct.origin=Yt.call(ct),ct.protocol=_r.call(ct),ct.username=Ar.call(ct),ct.password=hr.call(ct),ct.host=Pr.call(ct),ct.hostname=Te.call(ct),ct.port=nt.call(ct),ct.pathname=gt.call(ct),ct.search=Je.call(ct),ct.searchParams=yt.call(ct),ct.hash=Vt.call(ct))}function f(xe,lt){return{get:xe,set:lt,configurable:!0,enumerable:!0}}var h,l,u,c=M("../internals/export"),d=M("../internals/descriptors"),y=M("../internals/native-url"),Ut=M("../internals/global"),p=M("../internals/object-define-properties"),m=M("../internals/redefine"),g=M("../internals/an-instance"),v=M("../internals/has"),x=M("../internals/object-assign"),T=M("../internals/array-from"),w=M("../internals/string-multibyte").codeAt,b=M("../internals/string-punycode-to-ascii"),C=M("../internals/set-to-string-tag"),A=M("../modules/web.url-search-params"),M=M("../internals/internal-state"),k=Ut.URL,P=A.URLSearchParams,F=A.getState,I=M.set,B=M.getterFor("URL"),H=Math.floor,G=Math.pow,W="Invalid authority",Q="Invalid scheme",ne="Invalid host",U="Invalid port",D=/[A-Za-z]/,O=/[\d+-.A-Za-z]/,V=/\d/,Z=/^(0x|0X)/,ie=/^[0-7]+$/,re=/^\d+$/,ge=/^[\dA-Fa-f]+$/,ye=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,he=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,pe=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,we=/[\u0009\u000A\u000D]/g,oe=function(xe,lt){var xt,ct,Dt;if(lt.charAt(0)=="[")return lt.charAt(lt.length-1)=="]"&&(xt=function(et){var Ht=[0,0,0,0,0,0,0,0],Mt=0,Kt=null,Ct=0,Jt,Wt,gr,tr,Rr,Or,Fr,cr=function(){return et.charAt(Ct)};if(cr()==":"){if(et.charAt(1)!=":")return;Ct+=2,Mt++,Kt=Mt}for(;cr();){if(Mt==8)return;if(cr()==":"){if(Kt!==null)return;Ct++,Mt++,Kt=Mt;continue}for(Jt=Wt=0;Wt<4&&ge.test(cr());)Jt=Jt*16+parseInt(cr(),16),Ct++,Wt++;if(cr()=="."){if(Wt==0||(Ct-=Wt,Mt>6))return;for(gr=0;cr();){if(tr=null,gr>0)if(cr()=="."&&gr<4)Ct++;else return;if(!V.test(cr()))return;for(;V.test(cr());){if(Rr=parseInt(cr(),10),tr===null)tr=Rr;else{if(tr==0)return;tr=tr*10+Rr}if(tr>255)return;Ct++}Ht[Mt]=Ht[Mt]*256+tr,gr++,(gr==2||gr==4)&&Mt++}if(gr!=4)return;break}else if(cr()==":"){if(Ct++,!cr())return}else if(cr())return;Ht[Mt++]=Jt}if(Kt!==null)for(Or=Mt-Kt,Mt=7;Mt!=0&&Or>0;)Fr=Ht[Mt],Ht[Mt--]=Ht[Kt+Or-1],Ht[Kt+--Or]=Fr;else if(Mt!=8)return;return Ht}(lt.slice(1,-1)))?void(xe.host=xt):ne;if(qe(xe))return lt=b(lt),ye.test(lt)||(xt=function(et){var Ht=et.split("."),Mt,Kt,Ct,Jt,Wt,gr,tr;if(Ht.length&&Ht[Ht.length-1]==""&&Ht.pop(),(Mt=Ht.length)>4)return et;for(Kt=[],Ct=0;Ct<Mt;Ct++){if(Jt=Ht[Ct],Jt=="")return et;if(Wt=10,Jt.length>1&&Jt.charAt(0)=="0"&&(Wt=Z.test(Jt)?16:8,Jt=Jt.slice(Wt==8?1:2)),Jt==="")gr=0;else{if(!(Wt==10?re:Wt==8?ie:ge).test(Jt))return et;gr=parseInt(Jt,Wt)}Kt.push(gr)}for(Ct=0;Ct<Mt;Ct++)if(gr=Kt[Ct],Ct==Mt-1){if(gr>=G(256,5-Mt))return null}else if(gr>255)return null;for(tr=Kt.pop(),Ct=0;Ct<Kt.length;Ct++)tr+=Kt[Ct]*G(256,3-Ct);return tr}(lt))===null?ne:void(xe.host=xt);if(he.test(lt))return ne;for(xt="",ct=T(lt),Dt=0;Dt<ct.length;Dt++)xt+=Be(ct[Dt],Ce);xe.host=xt},fe=function(xe){for(var lt=null,xt=1,ct=null,Dt=0,et=0;et<8;et++)xe[et]!==0?(xt<Dt&&(lt=ct,xt=Dt),ct=null,Dt=0):(ct===null&&(ct=et),++Dt);return xt<Dt&&(lt=ct,xt=Dt),lt},Ce={},Fe=x({},Ce,{" ":1,'"':1,"<":1,">":1,"`":1}),Ae=x({},Fe,{"#":1,"?":1,"{":1,"}":1}),De=x({},Ae,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Be=function(xe,lt){var xt=w(xe,0);return 32<xt&&xt<127&&!v(lt,xe)?xe:encodeURIComponent(xe)},st={ftp:21,file:null,http:80,https:443,ws:80,wss:443},qe=function(xe){return v(st,xe.scheme)},Et=function(xe){return xe.username!=""||xe.password!=""},de=function(xe,lt){return xe.length==2&&D.test(xe.charAt(0))&&((xe=xe.charAt(1))==":"||!lt&&xe=="|")},le=function(xe){return 1<xe.length&&de(xe.slice(0,2))&&(xe.length==2||(xe=xe.charAt(2))==="/"||xe==="\\"||xe==="?"||xe==="#")},Ue=function(xe){var lt=xe.path,xt=lt.length;!xt||xe.scheme=="file"&&xt==1&&de(lt[0],!0)||lt.pop()},Ze=function(xe){return xe==="."||xe.toLowerCase()==="%2e"},Me=function(xe){return(xe=xe.toLowerCase())===".."||xe==="%2e."||xe===".%2e"||xe==="%2e%2e"},ze={},Re={},q={},te={},ee={},ae={},Se={},Le={},Ne={},at={},ft={},bt={},Ee={},Ke={},ot={},ut={},_t={},jt={},$t={},ar={},fr={},Ut=a.prototype,er=function(){var xe=B(this),lt=xe.scheme,xt=xe.username,ct=xe.password,Dt=xe.host,et=xe.port,Ht=xe.path,Mt=xe.query,Kt=xe.fragment,Ct=lt+":";return Dt!==null?(Ct+="//",Et(xe)&&(Ct+=xt+(ct?":"+ct:"")+"@"),Ct+=n(Dt),et!==null&&(Ct+=":"+et)):lt=="file"&&(Ct+="//"),Ct+=xe.cannotBeABaseURL?Ht[0]:Ht.length?"/"+Ht.join("/"):"",Mt!==null&&(Ct+="?"+Mt),Kt!==null&&(Ct+="#"+Kt),Ct},Yt=function(){var xe=B(this),lt=xe.scheme,xt=xe.port;if(lt=="blob")try{return new URL(lt.path[0]).origin}catch{return"null"}return lt!="file"&&qe(xe)?lt+"://"+n(xe.host)+(xt!==null?":"+xt:""):"null"},_r=function(){return B(this).scheme+":"},Ar=function(){return B(this).username},hr=function(){return B(this).password},Pr=function(){var lt=B(this),xe=lt.host,lt=lt.port;return xe===null?"":lt===null?n(xe):n(xe)+":"+lt},Te=function(){var xe=B(this).host;return xe===null?"":n(xe)},nt=function(){var xe=B(this).port;return xe===null?"":String(xe)},gt=function(){var xe=B(this),lt=xe.path;return xe.cannotBeABaseURL?lt[0]:lt.length?"/"+lt.join("/"):""},Je=function(){var xe=B(this).query;return xe?"?"+xe:""},yt=function(){return B(this).searchParams},Vt=function(){var xe=B(this).fragment;return xe?"#"+xe:""};d&&p(Ut,{href:f(er,function(xt){var lt=B(this),xt=String(xt),xt=s(lt,xt);if(xt)throw TypeError(xt);F(lt.searchParams).updateSearchParams(lt.query)}),origin:f(Yt),protocol:f(_r,function(xe){var lt=B(this);s(lt,String(xe)+":",ze)}),username:f(Ar,function(xe){var lt=B(this),xt=T(String(xe));if(!o(lt)){lt.username="";for(var ct=0;ct<xt.length;ct++)lt.username+=Be(xt[ct],De)}}),password:f(hr,function(xe){var lt=B(this),xt=T(String(xe));if(!o(lt)){lt.password="";for(var ct=0;ct<xt.length;ct++)lt.password+=Be(xt[ct],De)}}),host:f(Pr,function(xe){var lt=B(this);lt.cannotBeABaseURL||s(lt,String(xe),ft)}),hostname:f(Te,function(xe){var lt=B(this);lt.cannotBeABaseURL||s(lt,String(xe),bt)}),port:f(nt,function(xe){var lt=B(this);o(lt)||((xe=String(xe))==""?lt.port=null:s(lt,xe,Ee))}),pathname:f(gt,function(xe){var lt=B(this);lt.cannotBeABaseURL||(lt.path=[],s(lt,xe+"",_t))}),search:f(Je,function(xe){var lt=B(this);(xe=String(xe))==""?lt.query=null:(xe.charAt(0)=="?"&&(xe=xe.slice(1)),lt.query="",s(lt,xe,ar)),F(lt.searchParams).updateSearchParams(lt.query)}),searchParams:f(yt),hash:f(Vt,function(xe){var lt=B(this);(xe=String(xe))==""?lt.fragment=null:(xe.charAt(0)=="#"&&(xe=xe.slice(1)),lt.fragment="",s(lt,xe,fr))})}),m(Ut,"toJSON",function(){return er.call(this)},{enumerable:!0}),m(Ut,"toString",function(){return er.call(this)},{enumerable:!0}),k&&(l=k.createObjectURL,u=k.revokeObjectURL,l&&m(a,"createObjectURL",function(xe){return l.apply(k,arguments)}),u&&m(a,"revokeObjectURL",function(xe){return u.apply(k,arguments)})),C(a,"URL"),c({global:!0,forced:!y,sham:!d},{URL:a})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/internal-state":70,"../internals/native-url":84,"../internals/object-assign":89,"../internals/object-define-properties":91,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/string-multibyte":123,"../internals/string-punycode-to-ascii":126,"../modules/es.string.iterator":192,"../modules/web.url-search-params":239}],241:[function(t,r,i){r.exports=t("./").polyfill()},{"./":242}],242:[function(t,r,i){(function(n,o){var s,a;s=this,a=function(){function f(oe){return typeof oe=="function"}var h=Array.isArray||function(oe){return Object.prototype.toString.call(oe)==="[object Array]"},l=0,u=void 0,c=void 0,d=function(oe,fe){x[l]=oe,x[l+1]=fe,(l+=2)===2&&(c?c(T):P())},y=typeof window<"u"?window:void 0,p=y||{},p=p.MutationObserver||p.WebKitMutationObserver,m=typeof self>"u"&&n!==void 0&&{}.toString.call(n)==="[object process]",g=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function v(){var oe=setTimeout;return function(){return oe(T,1)}}var x=new Array(1e3);function T(){for(var oe=0;oe<l;oe+=2)(0,x[oe])(x[oe+1]),x[oe]=void 0,x[oe+1]=void 0;l=0}function w(){try{var oe=Function("return this")().require("vertx");return(u=oe.runOnLoop||oe.runOnContext)!==void 0?function(){u(T)}:v()}catch{return v()}}var b,C,A,P=void 0;function M(oe,fe){var Ce,Fe=this,Ae=new this.constructor(I),De=(Ae[F]===void 0&&ge(Ae),Fe._state);return De?(Ce=arguments[De-1],d(function(){return ie(De,Ae,Ce,Fe._result)})):V(Fe,Ae,oe,fe),Ae}function k(oe){var fe;return oe&&typeof oe=="object"&&oe.constructor===this?oe:(ne(fe=new this(I),oe),fe)}var P=m?function(){return n.nextTick(T)}:p?(C=0,m=new p(T),A=document.createTextNode(""),m.observe(A,{characterData:!0}),function(){A.data=C=++C%2}):g?((b=new MessageChannel).port1.onmessage=T,function(){return b.port2.postMessage(0)}):(y===void 0&&typeof t=="function"?w:v)(),F=Math.random().toString(36).substring(2);function I(){}var B=void 0,H=1,G=2;function W(oe,fe,Ce){d(function(Fe){var Ae=!1,De=function(Be,st,qe,Et){try{Be.call(st,qe,Et)}catch(de){return de}}(Ce,fe,function(Be){Ae||(Ae=!0,(fe!==Be?ne:D)(Fe,Be))},function(Be){Ae||(Ae=!0,O(Fe,Be))},Fe._label);!Ae&&De&&(Ae=!0,O(Fe,De))},oe)}function Q(oe,fe,Ce){var Fe,Ae;fe.constructor===oe.constructor&&Ce===M&&fe.constructor.resolve===k?(Fe=oe,(Ae=fe)._state===H?D(Fe,Ae._result):Ae._state===G?O(Fe,Ae._result):V(Ae,void 0,function(De){return ne(Fe,De)},function(De){return O(Fe,De)})):Ce!==void 0&&f(Ce)?W(oe,fe,Ce):D(oe,fe)}function ne(oe,fe){if(oe===fe)O(oe,new TypeError("You cannot resolve a promise with itself"));else if(Ce=typeof fe,fe===null||Ce!="object"&&Ce!="function")D(oe,fe);else{Ce=void 0;try{Ce=fe.then}catch(Fe){return void O(oe,Fe)}Q(oe,fe,Ce)}var Ce}function U(oe){oe._onerror&&oe._onerror(oe._result),Z(oe)}function D(oe,fe){oe._state===B&&(oe._result=fe,oe._state=H,oe._subscribers.length!==0&&d(Z,oe))}function O(oe,fe){oe._state===B&&(oe._state=G,oe._result=fe,d(U,oe))}function V(oe,fe,Ce,Fe){var Ae=oe._subscribers,De=Ae.length;oe._onerror=null,Ae[De]=fe,Ae[De+H]=Ce,Ae[De+G]=Fe,De===0&&oe._state&&d(Z,oe)}function Z(oe){var fe=oe._subscribers,Ce=oe._state;if(fe.length!==0){for(var Fe,Ae=void 0,De=oe._result,Be=0;Be<fe.length;Be+=3)Fe=fe[Be],Ae=fe[Be+Ce],Fe?ie(Ce,Fe,Ae,De):Ae(De);oe._subscribers.length=0}}function ie(oe,fe,Ce,Fe){var Ae=f(Ce),De=void 0,Be=void 0,st=!0;if(Ae){try{De=Ce(Fe)}catch(qe){st=!1,Be=qe}if(fe===De)return void O(fe,new TypeError("A promises callback cannot return that same promise."))}else De=Fe;fe._state===B&&(Ae&&st?ne(fe,De):st===!1?O(fe,Be):oe===H?D(fe,De):oe===G&&O(fe,De))}var re=0;function ge(oe){oe[F]=re++,oe._state=void 0,oe._result=void 0,oe._subscribers=[]}he.prototype._enumerate=function(oe){for(var fe=0;this._state===B&&fe<oe.length;fe++)this._eachEntry(oe[fe],fe)},he.prototype._eachEntry=function(oe,fe){var Ce=this._instanceConstructor,Fe=Ce.resolve;if(Fe===k){var Ae,De=void 0,Be=void 0,st=!1;try{De=oe.then}catch(qe){st=!0,Be=qe}De===M&&oe._state!==B?this._settledAt(oe._state,fe,oe._result):typeof De!="function"?(this._remaining--,this._result[fe]=oe):Ce===pe?(Ae=new Ce(I),st?O(Ae,Be):Q(Ae,oe,De),this._willSettleAt(Ae,fe)):this._willSettleAt(new Ce(function(qe){return qe(oe)}),fe)}else this._willSettleAt(Fe(oe),fe)},he.prototype._settledAt=function(oe,fe,Ce){var Fe=this.promise;Fe._state===B&&(this._remaining--,oe===G?O(Fe,Ce):this._result[fe]=Ce),this._remaining===0&&D(Fe,this._result)},he.prototype._willSettleAt=function(oe,fe){var Ce=this;V(oe,void 0,function(Fe){return Ce._settledAt(H,fe,Fe)},function(Fe){return Ce._settledAt(G,fe,Fe)})};var ye=he;function he(oe,fe){this._instanceConstructor=oe,this.promise=new oe(I),this.promise[F]||ge(this.promise),h(fe)?(this.length=fe.length,this._remaining=fe.length,this._result=new Array(this.length),this.length!==0&&(this.length=this.length||0,this._enumerate(fe),this._remaining!==0)||D(this.promise,this._result)):O(this.promise,new Error("Array Methods must be provided an Array"))}we.prototype.catch=function(oe){return this.then(null,oe)},we.prototype.finally=function(oe){var fe=this.constructor;return f(oe)?this.then(function(Ce){return fe.resolve(oe()).then(function(){return Ce})},function(Ce){return fe.resolve(oe()).then(function(){throw Ce})}):this.then(oe,oe)};var pe=we;function we(oe){if(this[F]=re++,this._result=this._state=void 0,this._subscribers=[],I!==oe){if(typeof oe!="function")throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof we))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var fe=this;try{oe(function(Ce){ne(fe,Ce)},function(Ce){O(fe,Ce)})}catch(Ce){O(fe,Ce)}}}return pe.prototype.then=M,pe.all=function(oe){return new ye(this,oe).promise},pe.race=function(oe){var fe=this;return h(oe)?new fe(function(Ce,Fe){for(var Ae=oe.length,De=0;De<Ae;De++)fe.resolve(oe[De]).then(Ce,Fe)}):new fe(function(Ce,Fe){return Fe(new TypeError("You must pass an array to race."))})},pe.resolve=k,pe.reject=function(oe){var fe=new this(I);return O(fe,oe),fe},pe._setScheduler=function(oe){c=oe},pe._setAsap=function(oe){d=oe},pe._asap=d,pe.polyfill=function(){var oe=void 0;if(o!==void 0)oe=o;else if(typeof self<"u")oe=self;else try{oe=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var fe=oe.Promise;if(fe){var Ce=null;try{Ce=Object.prototype.toString.call(fe.resolve())}catch{}if(Ce==="[object Promise]"&&!fe.cast)return}oe.Promise=pe},pe.Promise=pe},typeof i=="object"&&r!==void 0?r.exports=a():s.ES6Promise=a()}).call(this,t("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:251}],243:[function(t,r,i){var n,o;n=this,o=function(s,a){var f=5e3,h="callback";function l(c){try{delete window[c]}catch{window[c]=void 0}}function u(c){c=document.getElementById(c),c&&document.getElementsByTagName("head")[0].removeChild(c)}a.exports=function(c){var d=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],y=c,p=d.timeout||f,m=d.jsonpCallback||h,g=void 0;return new Promise(function(v,x){var T=d.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),w=m+"_"+T,b=(window[T]=function(C){v({ok:!0,json:function(){return Promise.resolve(C)}}),g&&clearTimeout(g),u(w),l(T)},y+=y.indexOf("?")===-1?"?":"&",document.createElement("script"));b.setAttribute("src",""+y+m+"="+T),d.charset&&b.setAttribute("charset",d.charset),b.id=w,document.getElementsByTagName("head")[0].appendChild(b),g=setTimeout(function(){x(new Error("JSONP request to "+c+" timed out")),l(T),u(w),window[T]=function(){l(T)}},p),b.onerror=function(){x(new Error("JSONP request to "+c+" failed")),l(T),u(w),g&&clearTimeout(g)}})}},i!==void 0&&r!==void 0?o(0,r):(o(o={exports:{}},o),n.fetchJsonp=o.exports)},{}],244:[function(t,r,i){var n=function(o){var s,a,f,h,l,u,c,d,y,p,m;if(!(o===void 0||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent)))return m=o.document,s=function(){return o.URL||o.webkitURL||o},a=m.createElementNS("http://www.w3.org/1999/xhtml","a"),f="download"in a,h=/constructor/i.test(o.HTMLElement)||o.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent),u=function(g){(o.setImmediate||o.setTimeout)(function(){throw g},0)},c=4e4,d=function(g){setTimeout(function(){typeof g=="string"?s().revokeObjectURL(g):g.remove()},c)},y=function(g){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(g.type)?new Blob([String.fromCharCode(65279),g],{type:g.type}):g},m=(p=function(g,v,C){C||(g=y(g));var T,w,b=this,C=g.type==="application/octet-stream",A=function(){for(var M=b,k="writestart progress write writeend".split(" "),P=void 0,F=(k=[].concat(k)).length;F--;){var I=M["on"+k[F]];if(typeof I=="function")try{I.call(M,P||M)}catch(B){u(B)}}};b.readyState=b.INIT,f?(T=s().createObjectURL(g),setTimeout(function(){var M,k;a.href=T,a.download=v,M=a,k=new MouseEvent("click"),M.dispatchEvent(k),A(),d(T),b.readyState=b.DONE})):(l||C&&h)&&o.FileReader?((w=new FileReader).onloadend=function(){var M=l?w.result:w.result.replace(/^data:[^;]*;/,"data:attachment/file;");o.open(M,"_blank")||(o.location.href=M),M=void 0,b.readyState=b.DONE,A()},w.readAsDataURL(g),b.readyState=b.INIT):(T=T||s().createObjectURL(g),!C&&o.open(T,"_blank")||(o.location.href=T),b.readyState=b.DONE,A(),d(T))}).prototype,typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(g,v,x){return v=v||g.name||"download",x||(g=y(g)),navigator.msSaveOrOpenBlob(g,v)}:(m.abort=function(){},m.readyState=m.INIT=0,m.WRITING=1,m.DONE=2,m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null,function(g,v,x){return new p(g,v||g.name||"download",x)})}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);r!==void 0&&r.exports?r.exports.saveAs=n:S!=null},{}],245:[function(t,r,i){var n,o=Object.defineProperty,s=(o(i,"__esModule",{value:!0}),i),a={GIFEncoder:()=>A,applyPalette:()=>function(B,H,G="rgb565"){if(!B||!B.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(B instanceof Uint8Array||B instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<H.length)throw new Error("applyPalette() only works with 256 colors or less");const W=new Uint32Array(B.buffer),Q=W.length,ne=G==="rgb444"?4096:65536,U=new Uint8Array(Q),D=new Array(ne);if(G==="rgba4444")for(let we=0;we<Q;we++){var ie=W[we],O=ie>>24&255,V=ie>>16&255,Z=ie>>8&255,ie=255&ie,re=d(ie,Z,V,O),re=re in D?D[re]:D[re]=function(oe,fe,Ce,Fe,Ae){let De=0,Be=1e100;for(let de=0;de<Ae.length;de++){var st,qe=Ae[de],Et=w(qe[3]-Fe);Et>Be||(st=qe[0],(Et+=w(st-oe))>Be||(st=qe[1],(Et+=w(st-fe))>Be||(st=qe[2],(Et+=w(st-Ce))>Be||(Be=Et,De=de))))}return De}(ie,Z,V,O,H);U[we]=re}else{const we=G==="rgb444"?y:c;for(let oe=0;oe<Q;oe++){var he=W[oe],ge=he>>16&255,ye=he>>8&255,he=255&he,pe=we(he,ye,ge),pe=pe in D?D[pe]:D[pe]=function(fe,Ce,Fe,Ae){let De=0,Be=1e100;for(let de=0;de<Ae.length;de++){var st,qe=Ae[de],Et=w(qe[0]-fe);Et>Be||(st=qe[1],(Et+=w(st-Ce))>Be||(st=qe[2],(Et+=w(st-Fe))>Be||(Be=Et,De=de)))}return De}(he,ye,ge,H);U[oe]=pe}}return U},default:()=>I,nearestColor:()=>function(B,H,G=x){return B[b(B,H,G)]},nearestColorIndex:()=>b,nearestColorIndexWithDistance:()=>C,prequantize:()=>function(B,{roundRGB:H=5,roundAlpha:G=10,oneBitAlpha:W=null}={}){const Q=new Uint32Array(B.buffer);for(let V=0;V<Q.length;V++){var O=Q[V];let Z=O>>24&255;var ne,U=O>>16&255,D=O>>8&255,O=255&O;Z=T(Z,G),W&&(ne=typeof W=="number"?W:127,Z=Z<=ne?0:255),O=T(O,H),D=T(D,H),U=T(U,H),Q[V]=Z<<24|U<<16|D<<8|O<<0}},quantize:()=>function(B,H,G={}){var{format:W="rgb565",clearAlpha:Q=!0,clearAlphaColor:ne=0,clearAlphaThreshold:U=0,oneBitAlpha:D=!1}=G;if(!B||!B.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(B instanceof Uint8Array||B instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");B=new Uint32Array(B.buffer);let O=G.useSqrt!==!1;const V=W==="rgba4444",Z=function(le,Ue){const Ze=Ue==="rgb444"?4096:65536,Me=new Array(Ze),ze=le.length;if(Ue==="rgba4444")for(let ot=0;ot<ze;++ot){var ee=le[ot],Re=ee>>24&255,q=ee>>16&255,te=ee>>8&255,ee=255&ee,ae=d(ee,te,q,Re);let ut=ae in Me?Me[ae]:Me[ae]=v();ut.rc+=ee,ut.gc+=te,ut.bc+=q,ut.ac+=Re,ut.cnt++}else if(Ue==="rgb444")for(let ot=0;ot<ze;++ot){var Ne=le[ot],Se=Ne>>16&255,Le=Ne>>8&255,Ne=255&Ne,at=y(Ne,Le,Se);let ut=at in Me?Me[at]:Me[at]=v();ut.rc+=Ne,ut.gc+=Le,ut.bc+=Se,ut.cnt++}else for(let ot=0;ot<ze;++ot){var Ee=le[ot],ft=Ee>>16&255,bt=Ee>>8&255,Ee=255&Ee,Ke=c(Ee,bt,ft);let ut=Ke in Me?Me[Ke]:Me[Ke]=v();ut.rc+=Ee,ut.gc+=bt,ut.bc+=ft,ut.cnt++}return Me}(B,W),ie=Z.length,re=ie-1,ge=new Uint32Array(ie+1);for(var ye=0,he=0;he<ie;++he){const le=Z[he];le!=null&&(qe=1/le.cnt,V&&(le.ac*=qe),le.rc*=qe,le.gc*=qe,le.bc*=qe,Z[ye++]=le)}m(H)/ye<.022&&(O=!1);for(var pe,we,oe,he=0;he<ye-1;++he)Z[he].fw=he+1,Z[he+1].bk=he,O&&(Z[he].cnt=Math.sqrt(Z[he].cnt));for(O&&(Z[he].cnt=Math.sqrt(Z[he].cnt)),he=0;he<ye;++he){g(Z,he,!1);var fe=Z[he].err;for(we=++ge[0];1<we&&(oe=we>>1,!(Z[pe=ge[oe]].err<=fe));we=oe)ge[we]=pe;ge[we]=he}var Ce,Fe=ye-H;for(he=0;he<Fe;){for(;;){var Ae=ge[1];if((Ce=Z[Ae]).tm>=Ce.mtm&&Z[Ce.nn].mtm<=Ce.tm)break;for(Ce.mtm==re?Ae=ge[1]=ge[ge[0]--]:(g(Z,Ae,!1),Ce.tm=he),fe=Z[Ae].err,we=1;(oe=we+we)<=ge[0]&&(oe<ge[0]&&Z[ge[oe]].err>Z[ge[oe+1]].err&&oe++,!(fe<=Z[pe=ge[oe]].err));we=oe)ge[we]=pe;ge[we]=Ae}var De=Z[Ce.nn],Be=Ce.cnt,st=De.cnt,qe=1/(Be+st);V&&(Ce.ac=qe*(Be*Ce.ac+st*De.ac)),Ce.rc=qe*(Be*Ce.rc+st*De.rc),Ce.gc=qe*(Be*Ce.gc+st*De.gc),Ce.bc=qe*(Be*Ce.bc+st*De.bc),Ce.cnt+=De.cnt,Ce.mtm=++he,Z[De.bk].fw=De.fw,Z[De.fw].bk=De.bk,De.mtm=re}let Et=[];for(he=0;;0){let le=p(Math.round(Z[he].rc),0,255),Ue=p(Math.round(Z[he].gc),0,255),Ze=p(Math.round(Z[he].bc),0,255),Me=255;V&&(Me=p(Math.round(Z[he].ac),0,255),D&&(de=typeof D=="number"?D:127,Me=Me<=de?0:255),Q&&Me<=U&&(le=Ue=Ze=ne,Me=0));var de=V?[le,Ue,Ze,Me]:[le,Ue,Ze];if(function(ze,Re){for(let ee=0;ee<ze.length;ee++){var te=ze[ee],q=te[0]===Re[0]&&te[1]===Re[1]&&te[2]===Re[2],te=!(4<=te.length&&4<=Re.length)||te[3]===Re[3];if(q&&te)return!0}return!1}(Et,de)||Et.push(de),(he=Z[he].fw)==0)break}return Et},snapColorsToPalette:()=>function(B,H,G=5){if(B.length&&H.length){var W=B.map(O=>O.slice(0,3)),Q=G*G,ne=B[0].length;for(let O=0;O<H.length;O++){let V=H[O];V=V.length<ne?[V[0],V[1],V[2],255]:V.length>ne?V.slice(0,3):V.slice();var D=C(W,V.slice(0,3),x),U=D[0],D=D[1];0<D&&D<=Q&&(B[U]=V)}}}};for(n in a)o(s,n,{get:a[n],enumerable:!0});var f={signature:"GIF",version:"89a",trailer:59,extensionIntroducer:33,applicationExtensionLabel:255,graphicControlExtensionLabel:249,imageSeparator:44,signatureSize:3,versionSize:3,globalColorTableFlagMask:128,colorResolutionMask:112,sortFlagMask:8,globalColorTableSizeMask:7,applicationIdentifierSize:8,applicationAuthCodeSize:3,disposalMethodMask:28,userInputFlagMask:2,transparentColorFlagMask:1,localColorTableFlagMask:128,interlaceFlagMask:64,idSortFlagMask:32,localColorTableSizeMask:7};function h(B=256){let H=0,G=new Uint8Array(B);return{get buffer(){return G.buffer},reset(){H=0},bytesView(){return G.subarray(0,H)},bytes(){return G.slice(0,H)},writeByte(Q){W(H+1),G[H]=Q,H++},writeBytes(Q,ne=0,U=Q.length){W(H+U);for(let D=0;D<U;D++)G[H++]=Q[D+ne]},writeBytesView(Q,ne=0,U=Q.byteLength){W(H+U),G.set(Q.subarray(ne,ne+U),H),H+=U}};function W(Q){var ne=G.length;if(!(Q<=ne)){Q=Math.max(Q,ne*(ne<1048576?2:1.125)>>>0),ne!=0&&(Q=Math.max(Q,256));const U=G;G=new Uint8Array(Q),0<H&&G.set(U.subarray(0,H),0)}}}var l=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],u=function(B,H,G,V,Q=h(512),ne=new Uint8Array(256),U=new Int32Array(5003),D=new Int32Array(5003)){var O=U.length,V=Math.max(2,V);ne.fill(0),D.fill(0),U.fill(-1);let Z=0,ie=0;var re=V+1;const ge=re;let ye=!1,he=ge,pe=(1<<he)-1;var we=1<<re-1;const oe=1+we;let fe=2+we,Ce=0,Fe=G[0],Ae=0;for(let de=O;de<65536;de*=2)++Ae;Ae=8-Ae,Q.writeByte(V),Et(we);var De=G.length;for(let de=1;de<De;de++)e:{var Be=G[de],st=(Be<<12)+Fe;let le=Be<<Ae^Fe;if(U[le]===st)Fe=D[le];else{for(var qe=le===0?1:O-le;0<=U[le];)if((le-=qe)<0&&(le+=O),U[le]===st){Fe=D[le];break e}Et(Fe),Fe=Be,fe<4096?(D[le]=fe++,U[le]=st):(U.fill(-1),fe=2+we,ye=!0,Et(we))}}return Et(Fe),Et(oe),Q.writeByte(0),Q.bytesView();function Et(de){for(Z&=l[ie],0<ie?Z|=de<<ie:Z=de,ie+=he;8<=ie;)ne[Ce++]=255&Z,254<=Ce&&(Q.writeByte(Ce),Q.writeBytesView(ne,0,Ce),Ce=0),Z>>=8,ie-=8;if((fe>pe||ye)&&(ye?(he=ge,pe=(1<<he)-1,ye=!1):(++he,pe=he===12?1<<he:(1<<he)-1)),de==oe){for(;0<ie;)ne[Ce++]=255&Z,254<=Ce&&(Q.writeByte(Ce),Q.writeBytesView(ne,0,Ce),Ce=0),Z>>=8,ie-=8;0<Ce&&(Q.writeByte(Ce),Q.writeBytesView(ne,0,Ce),Ce=0)}}};function c(B,H,G){return B<<8&63488|H<<2&992|G>>3}function d(B,H,G,W){return B>>4|240&H|(240&G)<<4|(240&W)<<8}function y(B,H,G){return B>>4<<8|240&H|G>>4}function p(B,H,G){return B<H?H:G<B?G:B}function m(B){return B*B}function g(B,H,G){var W=0,Q=1e100;const ne=B[H];for(var U=ne.cnt,D=ne.ac,O=ne.rc,V=ne.gc,Z=ne.bc,ie=ne.fw;ie!=0;ie=B[ie].fw){var re,ge=B[ie],ye=ge.cnt,ye=U*ye/(U+ye);Q<=ye||(re=0,G&&Q<=(re+=ye*m(ge.ac-D))||Q<=(re+=ye*m(ge.rc-O))||Q<=(re+=ye*m(ge.gc-V))||Q<=(re+=ye*m(ge.bc-Z))||(Q=re,W=ie))}ne.err=Q,ne.nn=W}function v(){return{ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0}}function x(B,H){for(var G=0,W=0;W<B.length;W++){var Q=B[W]-H[W];G+=Q*Q}return G}function T(B,H){return 1<H?Math.round(B/H)*H:B}function w(B){return B*B}function b(B,H,G=x){let W=1/0,Q=-1;for(let U=0;U<B.length;U++){var ne=G(H,B[U]);ne<W&&(W=ne,Q=U)}return Q}function C(B,H,G=x){let W=1/0,Q=-1;for(let U=0;U<B.length;U++){var ne=G(H,B[U]);ne<W&&(W=ne,Q=U)}return[Q,W]}function A(B={}){const{initialCapacity:H=4096,auto:G=!0}=B,W=h(H),Q=new Uint8Array(256),ne=new Int32Array(5003),U=new Int32Array(5003);let D=!1;return{reset(){W.reset(),D=!1},finish(){W.writeByte(f.trailer)},bytes(){return W.bytes()},bytesView(){return W.bytesView()},get buffer(){return W.buffer},get stream(){return W},writeHeader:O,writeFrame(V,Z,ie,Fe={}){var{transparent:ge=!1,transparentIndex:ye=0,delay:qe=0,palette:he=null,repeat:De=0,colorDepth:pe=8,dispose:we=-1}=Fe;let oe=!1;if(G?D||(oe=!0,O(),D=!0):oe=Boolean(Fe.first),Z=Math.max(0,Math.floor(Z)),ie=Math.max(0,Math.floor(ie)),oe){if(!he)throw new Error("First frame must include a { palette } option");var[Fe,Be,Ce,st,Ae=8]=[W,Z,ie,he,pe];st=F(st.length)-1,Ae=128|Ae-1<<4|st,k(Fe,Be),k(Fe,Ce),Fe.writeBytes([Ae,0,0]),M(W,he),0<=De&&(st=W,Be=De,st.writeByte(33),st.writeByte(255),st.writeByte(11),P(st,"NETSCAPE2.0"),st.writeByte(3),st.writeByte(1),k(st,Be),st.writeByte(0))}var fe,Ce=Math.round(qe/10),Fe=W,Ae=we,De=Ce,Be=ge,st=ye,qe=(Fe.writeByte(33),Fe.writeByte(249),Fe.writeByte(4),st<0&&(st=0,Be=!1),Be=Be?(fe=1,2):fe=0,0<=Ae&&(Be=7&Ae),Be<<=2,Fe.writeByte(0|Be|fe),k(Fe,De),Fe.writeByte(st||0),Fe.writeByte(0),Boolean(he)&&!oe);we=W,ge=Z,ye=ie,fe=qe?he:null,we.writeByte(44),k(we,0),k(we,0),k(we,ge),k(we,ye),fe?(ge=F(fe.length)-1,we.writeByte(128|ge)):we.writeByte(0),qe&&M(W,he),[De,Fe,ye,ge,we=8,qe,he,V]=[W,V,Z,ie,pe,Q,ne,U],u(ye,ge,Fe,we,De,qe,he,V)}};function O(){P(W,"GIF89a")}}function M(B,H){var G=1<<F(H.length);for(let W=0;W<G;W++){let Q=[0,0,0];W<H.length&&(Q=H[W]),B.writeByte(Q[0]),B.writeByte(Q[1]),B.writeByte(Q[2])}}function k(B,H){B.writeByte(255&H),B.writeByte(H>>8&255)}function P(B,H){for(var G=0;G<H.length;G++)B.writeByte(H.charCodeAt(G))}function F(B){return Math.max(Math.ceil(Math.log2(B)),1)}var I=A},{}],246:[function(t,r,i){i.read=function(n,o,s,a,g){var h,l,u=8*g-a-1,c=(1<<u)-1,d=c>>1,y=-7,p=s?g-1:0,m=s?-1:1,g=n[o+p];for(p+=m,h=g&(1<<-y)-1,g>>=-y,y+=u;0<y;h=256*h+n[o+p],p+=m,y-=8);for(l=h&(1<<-y)-1,h>>=-y,y+=a;0<y;l=256*l+n[o+p],p+=m,y-=8);if(h===0)h=1-d;else{if(h===c)return l?NaN:1/0*(g?-1:1);l+=Math.pow(2,a),h-=d}return(g?-1:1)*l*Math.pow(2,h-a)},i.write=function(n,o,s,a,f,v){var l,u,c=8*v-f-1,d=(1<<c)-1,y=d>>1,p=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=a?0:v-1,g=a?1:-1,v=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(u=isNaN(o)?1:0,l=d):(l=Math.floor(Math.log(o)/Math.LN2),o*(a=Math.pow(2,-l))<1&&(l--,a*=2),2<=(o+=1<=l+y?p/a:p*Math.pow(2,1-y))*a&&(l++,a/=2),d<=l+y?(u=0,l=d):1<=l+y?(u=(o*a-1)*Math.pow(2,f),l+=y):(u=o*Math.pow(2,y-1)*Math.pow(2,f),l=0));8<=f;n[s+m]=255&u,m+=g,u/=256,f-=8);for(l=l<<f|u,c+=f;0<c;n[s+m]=255&l,m+=g,l/=256,c-=8);n[s+m-g]|=128*v}},{}],247:[function(t,r,i){var n;function o(q,te){return q.b===te.b&&q.a===te.a}function s(q,te){return q.b<te.b||q.b===te.b&&q.a<=te.a}function a(q,te,ee){var ae=te.b-q.b,Se=ee.b-te.b;return 0<ae+Se?ae<Se?te.a-q.a+ae/(ae+Se)*(q.a-ee.a):te.a-ee.a+Se/(ae+Se)*(ee.a-q.a):0}function f(q,te,ee){var ae=te.b-q.b,Se=ee.b-te.b;return 0<ae+Se?(te.a-ee.a)*ae+(te.a-q.a)*Se:0}function h(q,te){return q.a<te.a||q.a===te.a&&q.b<=te.b}function l(q,te,ee){var ae=te.a-q.a,Se=ee.a-te.a;return 0<ae+Se?ae<Se?te.b-q.b+ae/(ae+Se)*(q.b-ee.b):te.b-ee.b+Se/(ae+Se)*(ee.b-q.b):0}function u(q,te,ee){var ae=te.a-q.a,Se=ee.a-te.a;return 0<ae+Se?(te.b-ee.b)*ae+(te.b-q.b)*Se:0}function c(q,te,ee,ae){return(q=q<0?0:q)<=(ee=ee<0?0:ee)?ee===0?(te+ae)/2:te+q/(q+ee)*(ae-te):ae+ee/(q+ee)*(te-ae)}function d(q){var te=v(q.b);return T(te,q.c),T(te.b,q.c),w(te,q.a),te}function y(q,te){var ee=!1,ae=!1;q!==te&&(te.a!==q.a&&(ae=!0,C(te.a,q.a)),te.d!==q.d&&(ee=!0,A(te.d,q.d)),x(te,q),ae||(T(te,q.a),q.a.c=q),ee||(w(te,q.d),q.d.a=q))}function p(q){var te=q.b,ee=!1;q.d!==q.b.d&&(ee=!0,A(q.d,q.b.d)),q.c===q?C(q.a,null):(q.b.d.a=q.b.e,q.a.c=q.c,x(q,q.b.e),ee||w(q,q.d)),te.c===te?(C(te.a,null),A(te.d,null)):(q.d.a=te.b.e,te.a.c=te.c,x(te,te.b.e)),b(q)}function m(q){var te=v(q),ee=te.b;return x(te,q.e),te.a=q.b.a,T(ee,te.a),te.d=ee.d=q.d,te=te.b,x(q.b,q.b.b.e),x(q.b,te),q.b.a=te.a,te.b.a.c=te.b,te.b.d=q.b.d,te.f=q.f,te.b.f=q.b.f,te}function g(q,te){var ee=!1,ae=v(q),Se=ae.b;return te.d!==q.d&&(ee=!0,A(te.d,q.d)),x(ae,q.e),x(Se,te),ae.a=q.b.a,Se.a=te.a,ae.d=Se.d=q.d,q.d.a=Se,ee||w(ae,q.d),ae}function v(q){var te=new Ce,ee=new Ce,ae=q.b.h;return(((ee.h=ae).b.h=te).h=q).b.h=ee,te.b=ee,((te.c=te).e=ee).b=te,(ee.c=ee).e=te}function x(q,te){var ee=q.c,ae=te.c;ee.b.e=te,(ae.b.e=q).c=ae,te.c=ee}function T(q,te){var ee=te.f,ae=new Ae(te,ee);for(ee.e=ae,ee=(te.f=ae).c=q;ee.a=ae,(ee=ee.c)!==q;);}function w(q,te){var ee=te.d,ae=new fe(te,ee);for(ee.b=ae,(te.d=ae).a=q,ae.c=te.c,ee=q;ee.d=ae,(ee=ee.e)!==q;);}function b(q){var te=q.h;q=q.b.h,(te.b.h=q).b.h=te}function C(q,te){for(var ee=q.c,ae=ee;ae.a=te,(ae=ae.c)!==ee;);ee=q.f,((ae=q.e).f=ee).e=ae}function A(q,te){for(var ee=q.a,ae=ee;ae.d=te,(ae=ae.e)!==ee;);ee=q.d,((ae=q.b).d=ee).b=ae}function M(q){var te=0;return Math.abs(q[1])>Math.abs(q[0])&&(te=1),te=Math.abs(q[2])>Math.abs(q[te])?2:te}function k(q,te){q.f+=te.f,q.b.f+=te.b.f}function P(q,te,ee){return q=q.a,te=te.a,ee=ee.a,te.b.a===q?ee.b.a===q?s(te.a,ee.a)?f(ee.b.a,te.a,ee.a)<=0:0<=f(te.b.a,ee.a,te.a):f(ee.b.a,q,ee.a)<=0:ee.b.a===q?0<=f(te.b.a,q,te.a):(te=a(te.b.a,q,te.a),(q=a(ee.b.a,q,ee.a))<=te)}function F(q){q.a.i=null;var te=q.e;te.a.c=te.c,te.c.a=te.a,q.e=null}function I(q,te){p(q.a),q.c=!1,(q.a=te).i=q}function B(q){for(var te=q.a.a;(q=Re(q)).a.a===te;);return q.c&&(I(q,te=g(ze(q).a.b,q.a.e)),q=Re(q)),q}function H(q,te,ee){var ae=new Me;return ae.a=ee,ae.e=ye(q.f,te.e,ae),ee.i=ae}function G(q,te){switch(q.s){case 100130:return(1&te)!=0;case 100131:return te!==0;case 100132:return 0<te;case 100133:return te<0;case 100134:return 2<=te||te<=-2}return!1}function W(q){var te=q.a,ee=te.d;ee.c=q.d,ee.a=te,F(q)}function Q(q,te,ee){for(te=(q=te).a;q!==ee;){q.c=!1;var ae=ze(q),Se=ae.a;if(Se.a!==te.a){if(!ae.c){W(q);break}I(ae,Se=g(te.c.b,Se.b))}te.c!==Se&&(y(Se.b.e,Se),y(te,Se)),W(q),te=ae.a,q=ae}return te}function ne(q,te,ee,ae,Se,Le){for(var Ne=!0;H(q,te,ee.b),(ee=ee.c)!==ae;);for(Se===null&&(Se=ze(te).a.b.c);(ee=(ae=ze(te)).a.b).a===Se.a;)ee.c!==Se&&(y(ee.b.e,ee),y(Se.b.e,ee)),ae.f=te.f-ee.f,ae.d=G(q,ae.f),te.b=!0,!Ne&&V(q,te)&&(k(ee,Se),F(te),p(Se)),Ne=!1,te=ae,Se=ee;te.b=!0,Le&&ie(q,te)}function U(q,te,ee,ae,Se){var Le=[te.g[0],te.g[1],te.g[2]];te.d=null,te.d=q.o&&q.o(Le,ee,ae,q.c)||null,te.d===null&&(Se?q.n||(oe(q,100156),q.n=!0):te.d=ee[0])}function D(q,te,ee){var ae=[null,null,null,null];ae[0]=te.a.d,ae[1]=ee.a.d,U(q,te.a,ae,[.5,.5,0,0],!1),y(te,ee)}function O(q,te,ee,ae,Se){var Le=Math.abs(te.b-q.b)+Math.abs(te.a-q.a),Ne=Math.abs(ee.b-q.b)+Math.abs(ee.a-q.a),at=Se+1;ae[Se]=.5*Ne/(Le+Ne),ae[at]=.5*Le/(Le+Ne),q.g[0]+=ae[Se]*te.g[0]+ae[at]*ee.g[0],q.g[1]+=ae[Se]*te.g[1]+ae[at]*ee.g[1],q.g[2]+=ae[Se]*te.g[2]+ae[at]*ee.g[2]}function V(q,te){var ee=ze(te),ae=te.a,Se=ee.a;if(s(ae.a,Se.a)){if(0<f(Se.b.a,ae.a,Se.a))return;if(o(ae.a,Se.a)){if(ae.a!==Se.a){var ee=q.e,Le=ae.a.h;if(0<=Le){var Ne=(ee=ee.b).d,at=ee.e,ft=ee.c,bt=ft[Le];Ne[bt]=Ne[ee.a],(ft[Ne[bt]]=bt)<=--ee.a&&(bt<=1||s(at[Ne[bt>>1]],at[Ne[bt]])?Ue:Ze)(ee,bt),at[Le]=null,ft[Le]=ee.b,ee.b=Le}else for(ee.c[-(Le+1)]=null;0<ee.a&&ee.c[ee.d[ee.a-1]]===null;)--ee.a;D(q,Se.b.e,ae)}}else m(Se.b),y(ae,Se.b.e),te.b=ee.b=!0}else{if(f(ae.b.a,Se.a,ae.a)<0)return;Re(te).b=te.b=!0,m(ae.b),y(Se.b.e,ae)}return 1}function Z(q,te){var ee=ze(te),ae=te.a,Se=ee.a,Le=ae.a,Ne=Se.a,at=ae.b.a,ft=Se.b.a,bt=new Ae;if(f(at,q.a,Le),f(ft,q.a,Ne),!(Le===Ne||Math.min(Le.a,at.a)>Math.max(Ne.a,ft.a))){if(s(Le,Ne)){if(0<f(ft,Le,Ne))return}else if(f(at,Ne,Le)<0)return;var Ee,Ke,ot=at,ut=Le,_t=ft,jt=Ne;if(s(ot,ut)||(Ee=ot,ot=ut,ut=Ee),s(_t,jt)||(Ee=_t,_t=jt,jt=Ee),s(ot,_t)||(Ee=ot,ot=_t,_t=Ee,Ee=ut,ut=jt,jt=Ee),s(_t,ut)?s(ut,jt)?((Ee=a(ot,_t,ut))+(Ke=a(_t,ut,jt))<0&&(Ee=-Ee,Ke=-Ke),bt.b=c(Ee,_t.b,Ke,ut.b)):((Ee=f(ot,_t,ut))+(Ke=-f(ot,jt,ut))<0&&(Ee=-Ee,Ke=-Ke),bt.b=c(Ee,_t.b,Ke,jt.b)):bt.b=(_t.b+ut.b)/2,h(ot,ut)||(Ee=ot,ot=ut,ut=Ee),h(_t,jt)||(Ee=_t,_t=jt,jt=Ee),h(ot,_t)||(Ee=ot,ot=_t,_t=Ee,Ee=ut,ut=jt,jt=Ee),h(_t,ut)?h(ut,jt)?((Ee=l(ot,_t,ut))+(Ke=l(_t,ut,jt))<0&&(Ee=-Ee,Ke=-Ke),bt.a=c(Ee,_t.a,Ke,ut.a)):((Ee=u(ot,_t,ut))+(Ke=-u(ot,jt,ut))<0&&(Ee=-Ee,Ke=-Ke),bt.a=c(Ee,_t.a,Ke,jt.a)):bt.a=(_t.a+ut.a)/2,s(bt,q.a)&&(bt.b=q.a.b,bt.a=q.a.a),ot=s(Le,Ne)?Le:Ne,s(ot,bt)&&(bt.b=ot.b,bt.a=ot.a),o(bt,Le)||o(bt,Ne))return V(q,te),0;if(!o(at,q.a)&&0<=f(at,q.a,bt)||!o(ft,q.a)&&f(ft,q.a,bt)<=0){if(ft===q.a)m(ae.b),y(Se.b,ae),ae=ze(te=B(te)).a,Q(q,ze(te),ee),ne(q,te,ae.b.e,ae,ae,!0);else{if(at!==q.a)return 0<=f(at,q.a,bt)&&(Re(te).b=te.b=!0,m(ae.b),ae.a.b=q.a.b,ae.a.a=q.a.a),void(f(ft,q.a,bt)<=0&&(te.b=ee.b=!0,m(Se.b),Se.a.b=q.a.b,Se.a.a=q.a.a));for(m(Se.b),y(ae.e,Se.b.e),Ne=(Le=ee=te).a.b.a;(Le=Re(Le)).a.b.a===Ne;);Le=ze(te=Le).a.b.c,ee.a=Se.b.e,ne(q,te,(Se=Q(q,ee,null)).c,ae.b.c,Le,!0)}return 1}m(ae.b),m(Se.b),y(Se.b.e,ae),ae.a.b=bt.b,ae.a.a=bt.a,ae.a.h=Be(q.e,ae.a),ae=ae.a,Se=[0,0,0,0],bt=[Le.d,at.d,Ne.d,ft.d],ae.g[0]=ae.g[1]=ae.g[2]=0,O(ae,Le,at,Se,0),O(ae,Ne,ft,Se,2),U(q,ae,bt,Se,!0),Re(te).b=te.b=ee.b=!0}}function ie(q,te){for(var ee=ze(te);;){for(;ee.b;)ee=ze(te=ee);if(!te.b&&((te=Re(ee=te))===null||!te.b))break;te.b=!1;var ae=te.a,Se=ee.a;if(Le=ae.b.a!==Se.b.a)e:{var Le,Ne=ze(Le=te),at=Le.a,ft=Ne.a,bt=void 0;if(s(at.b.a,ft.b.a)){if(f(at.b.a,ft.b.a,at.a)<0){Le=!1;break e}Re(Le).b=Le.b=!0,bt=m(at),y(ft.b,bt),bt.d.c=Le.d}else{if(0<f(ft.b.a,at.b.a,ft.a)){Le=!1;break e}Le.b=Ne.b=!0,bt=m(ft),y(at.e,ft.b),bt.b.d.c=Le.d}Le=!0}if(Le&&(ee.c?(F(ee),p(Se),Se=(ee=ze(te)).a):te.c&&(F(te),p(ae),ae=(te=Re(ee)).a)),ae.a!==Se.a){if(ae.b.a===Se.b.a||te.c||ee.c||ae.b.a!==q.a&&Se.b.a!==q.a)V(q,te);else if(Z(q,te))break}ae.a===Se.a&&ae.b.a===Se.b.a&&(k(Se,ae),F(te),p(ae),te=Re(ee))}}function re(q,te){var ee=new Me,ae=d(q.b);ae.a.b=4e150,ae.a.a=te,ae.b.a.b=-4e150,ae.b.a.a=te,q.a=ae.b.a,ee.a=ae,ee.f=0,ee.d=!1,ee.c=!1,ee.h=!0,ee.b=!1,ae=ye(ae=q.f,ae.a,ee),ee.e=ae}function ge(q){this.a=new he,this.b=q,this.c=P}function ye(q,te,ee){for(;(te=te.c).b!==null&&!q.c(q.b,te.b,ee););return q=new he(ee,te.a,te),te.a.c=q,te.a=q}function he(q,te,ee){this.b=q||null,this.a=te||this,this.c=ee||this}function pe(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function we(q,te){if(q.d!==te)for(;q.d!==te;)if(q.d<te)switch(q.d){case 0:oe(q,100151),q.u(null);break;case 1:oe(q,100152),q.t()}else switch(q.d){case 2:oe(q,100154),q.v();break;case 1:oe(q,100153),q.w()}}function oe(q,te){q.p&&q.p(te,q.c)}function fe(q,te){this.b=q||this,this.d=te||this,this.a=null,this.c=!1}function Ce(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function Fe(){this.c=new Ae,this.a=new fe,this.b=new Ce,this.d=new Ce,this.b.b=this.d,this.d.b=this.b}function Ae(q,te){this.e=q||this,this.f=te||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function De(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new qe}function Be(q,te){var ee,ae,Se;return q.e?(2*(ae=++(ee=q.b).a)>ee.f&&(ee.f*=2,ee.c=Et(ee.c,ee.f+1)),ee.b===0?Se=ae:(Se=ee.b,ee.b=ee.c[ee.b]),ee.e[Se]=te,ee.c[Se]=ae,ee.d[ae]=Se,ee.h&&Ze(ee,ae),Se):(ee=q.a++,q.c[ee]=te,-(ee+1))}function st(q){if(q.a===0)return le(q.b);var te=q.c[q.d[q.a-1]];if(q.b.a!==0&&s(de(q.b),te))return le(q.b);for(;--q.a,0<q.a&&q.c[q.d[q.a-1]]===null;);return te}function qe(){this.d=Et([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function Et(q,te){for(var ee=Array(te),ae=0;ae<q.length;ae++)ee[ae]=q[ae];for(;ae<te;ae++)ee[ae]=0;return ee}function de(q){return q.e[q.d[1]]}function le(q){var te=q.d,ee=q.e,ae=q.c,Se=te[1],Le=ee[Se];return 0<q.a&&(te[1]=te[q.a],ae[te[1]]=1,ee[Se]=null,ae[Se]=q.b,q.b=Se,0<--q.a&&Ue(q,1)),Le}function Ue(q,te){for(var ee=q.d,ae=q.e,Se=q.c,Le=te,Ne=ee[Le];;){var at=Le<<1,ft=(at<q.a&&s(ae[ee[at+1]],ae[ee[at]])&&(at+=1),ee[at]);if(at>q.a||s(ae[Ne],ae[ft])){Se[ee[Le]=Ne]=Le;break}Se[ee[Le]=ft]=Le,Le=at}}function Ze(q,te){for(var ee=q.d,ae=q.e,Se=q.c,Le=te,Ne=ee[Le];;){var at=Le>>1,ft=ee[at];if(at==0||s(ae[ft],ae[Ne])){Se[ee[Le]=Ne]=Le;break}Se[ee[Le]=ft]=Le,Le=at}}function Me(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function ze(q){return q.e.c.b}function Re(q){return q.e.a.b}(n=pe.prototype).x=function(){we(this,0)},n.B=function(q,te){switch(q){case 100142:return;case 100140:switch(te){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=te)}break;case 100141:return void(this.m=!!te);default:return void oe(this,100900)}oe(this,100901)},n.y=function(q){switch(q){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:oe(this,100900)}return!1},n.A=function(q,te,ee){this.j[0]=q,this.j[1]=te,this.j[2]=ee},n.z=function(q,te){var ee=te||null;switch(q){case 100100:case 100106:this.h=ee;break;case 100104:case 100110:this.l=ee;break;case 100101:case 100107:this.k=ee;break;case 100102:case 100108:this.i=ee;break;case 100103:case 100109:this.p=ee;break;case 100105:case 100111:this.o=ee;break;case 100112:this.r=ee;break;default:oe(this,100900)}},n.C=function(q,te){var ee=!1,ae=[0,0,0];we(this,2);for(var Se=0;Se<3;++Se){var Le=q[Se];Le<-1e150&&(Le=-1e150,ee=!0),1e150<Le&&(Le=1e150,ee=!0),ae[Se]=Le}ee&&oe(this,100155),(ee=this.q)===null?y(ee=d(this.b),ee.b):(m(ee),ee=ee.e),ee.a.d=te,ee.a.g[0]=ae[0],ee.a.g[1]=ae[1],ee.a.g[2]=ae[2],ee.f=1,ee.b.f=-1,this.q=ee},n.u=function(q){we(this,0),this.d=1,this.b=new Fe,this.c=q},n.t=function(){we(this,1),this.d=2,this.q=null},n.v=function(){we(this,2),this.d=1},n.w=function(){we(this,1),this.d=0;var q,te,ee=this.j[0],ae=this.j[1],Se=this.j[2],Le=!1,Ne=[ee,ae,Se];if(ee===0&&ae===0&&Se===0){for(var ae=[-2e150,-2e150,-2e150],at=[2e150,2e150,2e150],Se=[],ft=[],ee=(Le=this.b.c).e;ee!==Le;ee=ee.e)for(var bt=0;bt<3;++bt){var Ee=ee.g[bt];Ee<at[bt]&&(at[bt]=Ee,ft[bt]=ee),Ee>ae[bt]&&(ae[bt]=Ee,Se[bt]=ee)}if(ae[1]-at[1]>ae[ee=0]-at[0]&&(ee=1),at[ee=ae[2]-at[2]>ae[ee]-at[ee]?2:ee]>=ae[ee])Ne[0]=0,Ne[1]=0,Ne[2]=1;else{for(at=ft[ee],Se=Se[ee],ft=[ae=0,0,0],at=[at.g[0]-Se.g[0],at.g[1]-Se.g[1],at.g[2]-Se.g[2]],bt=[0,0,0],ee=Le.e;ee!==Le;ee=ee.e)bt[0]=ee.g[0]-Se.g[0],bt[1]=ee.g[1]-Se.g[1],bt[2]=ee.g[2]-Se.g[2],ft[0]=at[1]*bt[2]-at[2]*bt[1],ft[1]=at[2]*bt[0]-at[0]*bt[2],ft[2]=at[0]*bt[1]-at[1]*bt[0],ae<(Ee=ft[0]*ft[0]+ft[1]*ft[1]+ft[2]*ft[2])&&(ae=Ee,Ne[0]=ft[0],Ne[1]=ft[1],Ne[2]=ft[2]);ae<=0&&(Ne[0]=Ne[1]=Ne[2]=0,Ne[M(at)]=1)}Le=!0}for(ft=M(Ne),ee=this.b.c,ae=(ft+1)%3,Se=(ft+2)%3,ft=0<Ne[ft]?1:-1,Ne=ee.e;Ne!==ee;Ne=Ne.e)Ne.b=Ne.g[ae],Ne.a=ft*Ne.g[Se];if(Le){for(Ne=0,ee=(Le=this.b.a).b;ee!==Le;ee=ee.b)if(!((ae=ee.a).f<=0))for(;Ne+=(ae.a.b-ae.b.a.b)*(ae.a.a+ae.b.a.a),(ae=ae.e)!==ee.a;);if(Ne<0)for(Le=(Ne=this.b.c).e;Le!==Ne;Le=Le.e)Le.a=-Le.a}for(this.n=!1,Ne=this.b.b,ee=Ne.h;ee!==Ne;ee=Le)Le=ee.h,ae=ee.e,o(ee.a,ee.b.a)&&ee.e.e!==ee&&(D(this,ae,ee),p(ee),ae=(ee=ae).e),ae.e===ee&&(ae!==ee&&(ae!==Le&&ae!==Le.b||(Le=Le.h),p(ae)),ee!==Le&&ee!==Le.b||(Le=Le.h),p(ee));for(this.e=Ne=new De,Le=this.b.c,ee=Le.e;ee!==Le;ee=ee.e)ee.h=Be(Ne,ee);var Ke=Ne;Ke.d=[];for(var ot=0;ot<Ke.a;ot++)Ke.d[ot]=ot;Ke.d.sort(function(jt){return function($t,ar){return s(jt[$t],jt[ar])?1:-1}}(Ke.c)),Ke.e=!0;for(var ut=Ke.b,_t=ut.a;1<=_t;--_t)Ue(ut,_t);for(ut.h=!0,this.f=new ge(this),re(this,-4e150),re(this,4e150);(Ne=st(this.e))!==null;){for(;;){e:if((ee=this.e).a===0)Le=de(ee.b);else if(Le=ee.c[ee.d[ee.a-1]],ee.b.a!==0&&s(ee=de(ee.b),Le)){Le=ee;break e}if(Le===null||!o(Le,Ne))break;Le=st(this.e),D(this,Ne.c,Le.c)}(function jt($t,ar){for(var fr,Ut=($t.a=ar).c;Ut.i===null;)if((Ut=Ut.c)===ar.c){var Ut=$t,er=ar;(hr=new Me).a=er.c.b;for(var Pr=(Yt=Ut.f).a;(Pr=Pr.a).b!==null&&!Yt.c(Yt.b,hr,Pr.b););var Yt,_r,Ar=ze(Yt=Pr.b),hr=Yt.a,Pr=Ar.a;return void(f(hr.b.a,er,hr.a)===0?o((hr=Yt.a).a,er)||o(hr.b.a,er)||(m(hr.b),Yt.c&&(p(hr.c),Yt.c=!1),y(er.c,hr),jt(Ut,er)):(_r=s(Pr.b.a,hr.b.a)?Yt:Ar,Ar=void 0,Yt.d||_r.c?(Ar=_r===Yt?g(er.c.b,hr.e):g(Pr.b.c.b,er.c).b,_r.c?I(_r,Ar):((Yt=H(hr=Ut,Yt,Ar)).f=Re(Yt).f+Yt.a.f,Yt.d=G(hr,Yt.f)),jt(Ut,er)):ne(Ut,Yt,er.c,er.c,null,!0)))}Yt=(hr=ze(Ut=B(Ut.i))).a,(hr=Q($t,hr,null)).c===Yt?(hr=(Yt=hr).c,Pr=ze(Ut),Ar=Ut.a,_r=Pr.a,fr=!1,Ar.b.a!==_r.b.a&&Z($t,Ut),o(Ar.a,$t.a)&&(y(hr.b.e,Ar),hr=ze(Ut=B(Ut)).a,Q($t,ze(Ut),Pr),fr=!0),o(_r.a,$t.a)&&(y(Yt,_r.b.e),Yt=Q($t,Pr,null),fr=!0),fr?ne($t,Ut,Yt.c,hr,hr,!0):(er=s(_r.a,Ar.a)?_r.b.e:Ar,ne($t,Ut,er=g(Yt.c.b,er),er.c,er.c,!1),er.b.i.c=!0,ie($t,Ut))):ne($t,Ut,hr.c,Yt,Yt,!0)})(this,Ne)}for(this.a=this.f.a.a.b.a.a,Ne=0;(Le=this.f.a.a.b)!==null;)Le.h||++Ne,F(Le);for(this.f=null,(Ne=this.e).b=null,Ne.d=null,this.e=Ne.c=null,Ne=this.b,ee=Ne.a.b;ee!==Ne.a;ee=Le)Le=ee.b,(ee=ee.a).e.e===ee&&(k(ee.c,ee),p(ee));if(!this.n){if(Ne=this.b,this.m)for(ee=Ne.b.h;ee!==Ne.b;ee=Le)Le=ee.h,ee.b.d.c!==ee.d.c?ee.f=ee.d.c?1:-1:p(ee);else for(ee=Ne.a.b;ee!==Ne.a;ee=Le)if(Le=ee.b,ee.c){for(ee=ee.a;s(ee.b.a,ee.a);ee=ee.c.b);for(;s(ee.a,ee.b.a);ee=ee.e);for(ae=ee.c.b,Se=void 0;ee.e!==ae;)if(s(ee.b.a,ae.a)){for(;ae.e!==ee&&(s((te=ae.e).b.a,te.a)||f(ae.a,ae.b.a,ae.e.b.a)<=0);)ae=(Se=g(ae.e,ae)).b;ae=ae.c.b}else{for(;ae.e!==ee&&(s((q=ee.c.b).a,q.b.a)||0<=f(ee.b.a,ee.a,ee.c.b.a));)ee=(Se=g(ee,ee.c.b)).b;ee=ee.e}for(;ae.e.e!==ee;)Se=g(ae.e,ae),ae=Se.b}if(this.h||this.i||this.k||this.l)if(this.m){for(Le=(Ne=this.b).a.b;Le!==Ne.a;Le=Le.b)if(Le.c){for(this.h&&this.h(2,this.c),ee=Le.a;this.k&&this.k(ee.a.d,this.c),(ee=ee.e)!==Le.a;);this.i&&this.i(this.c)}}else{for(Ne=this.b,Le=!!this.l,ee=!1,ae=-1,Se=Ne.a.d;Se!==Ne.a;Se=Se.d)if(Se.c)for(ee||(this.h&&this.h(4,this.c),ee=!0),ft=Se.a;Le&&(at=ft.b.d.c?0:1,ae!==at&&(ae=at,this.l&&this.l(!!ae,this.c))),this.k&&this.k(ft.a.d,this.c),(ft=ft.e)!==Se.a;);ee&&this.i&&this.i(this.c)}if(this.r){for(Ne=this.b,ee=Ne.a.b;ee!==Ne.a;ee=Le)if(Le=ee.b,!ee.c){for(Se=(ae=ee.a).e,ft=void 0;Se=(ft=Se).e,(ft.d=null)===ft.b.d&&(ft.c===ft?C(ft.a,null):(ft.a.c=ft.c,x(ft,ft.b.e)),(at=ft.b).c===at?C(at.a,null):(at.a.c=at.c,x(at,at.b.e)),b(ft)),ft!==ae;);ae=ee.d,((ee=ee.b).d=ae).b=ee}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:pe,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},pe.prototype.gluDeleteTess=pe.prototype.x,pe.prototype.gluTessProperty=pe.prototype.B,pe.prototype.gluGetTessProperty=pe.prototype.y,pe.prototype.gluTessNormal=pe.prototype.A,pe.prototype.gluTessCallback=pe.prototype.z,pe.prototype.gluTessVertex=pe.prototype.C,pe.prototype.gluTessBeginPolygon=pe.prototype.u,pe.prototype.gluTessBeginContour=pe.prototype.t,pe.prototype.gluTessEndContour=pe.prototype.v,pe.prototype.gluTessEndPolygon=pe.prototype.w,r!==void 0&&(r.exports=this.libtess)},{}],248:[function(t,r,i){function n(s,a,f,h){var l=0,u=(h=h===void 0?{}:h).loop===void 0?null:h.loop,c=h.palette===void 0?null:h.palette;if(a<=0||f<=0||65535<a||65535<f)throw new Error("Width/Height invalid.");function d(w){if(w=w.length,w<2||256<w||w&w-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return w}s[l++]=71,s[l++]=73,s[l++]=70,s[l++]=56,s[l++]=57,s[l++]=97;var y=0,p=0;if(c!==null){for(var m=d(c);m>>=1;)++y;if(m=1<<y,--y,h.background!==void 0){if(m<=(p=h.background))throw new Error("Background index out of range.");if(p===0)throw new Error("Background index explicitly passed as 0.")}}if(s[l++]=255&a,s[l++]=a>>8&255,s[l++]=255&f,s[l++]=f>>8&255,s[l++]=(c!==null?128:0)|y,s[l++]=p,s[l++]=0,c!==null)for(var g=0,v=c.length;g<v;++g){var x=c[g];s[l++]=x>>16&255,s[l++]=x>>8&255,s[l++]=255&x}if(u!==null){if(u<0||65535<u)throw new Error("Loop count invalid.");s[l++]=33,s[l++]=255,s[l++]=11,s[l++]=78,s[l++]=69,s[l++]=84,s[l++]=83,s[l++]=67,s[l++]=65,s[l++]=80,s[l++]=69,s[l++]=50,s[l++]=46,s[l++]=48,s[l++]=3,s[l++]=1,s[l++]=255&u,s[l++]=u>>8&255,s[l++]=0}var T=!1;this.addFrame=function(w,b,C,A,M,k){if(T===!0&&(--l,T=!1),k=k===void 0?{}:k,w<0||b<0||65535<w||65535<b)throw new Error("x/y invalid.");if(C<=0||A<=0||65535<C||65535<A)throw new Error("Width/Height invalid.");if(M.length<C*A)throw new Error("Not enough pixels for the frame size.");var P=!0,F=k.palette;if(F==null&&(P=!1,F=c),F==null)throw new Error("Must supply either a local or global palette.");for(var B=d(F),I=0;B>>=1;)++I;var B=1<<I,H=k.delay===void 0?0:k.delay,G=k.disposal===void 0?0:k.disposal;if(G<0||3<G)throw new Error("Disposal out of range.");var W=!1,Q=0;if(k.transparent!==void 0&&k.transparent!==null&&(W=!0,(Q=k.transparent)<0||B<=Q))throw new Error("Transparent color index.");if(G===0&&!W&&H===0||(s[l++]=33,s[l++]=249,s[l++]=4,s[l++]=G<<2|(W===!0?1:0),s[l++]=255&H,s[l++]=H>>8&255,s[l++]=Q,s[l++]=0),s[l++]=44,s[l++]=255&w,s[l++]=w>>8&255,s[l++]=255&b,s[l++]=b>>8&255,s[l++]=255&C,s[l++]=C>>8&255,s[l++]=255&A,s[l++]=A>>8&255,s[l++]=P===!0?128|I-1:0,P===!0)for(var ne=0,U=F.length;ne<U;++ne){var D=F[ne];s[l++]=D>>16&255,s[l++]=D>>8&255,s[l++]=255&D}return l=function(O,V,Z,ie){O[V++]=Z;var re=V++,ge=1<<Z,ye=ge-1,he=1+ge,pe=1+he,we=Z+1,oe=0,fe=0;function Ce(le){for(;le<=oe;)O[V++]=255&fe,fe>>=8,oe-=8,V===re+256&&(O[re]=255,re=V++)}function Fe(le){fe|=le<<oe,oe+=we,Ce(8)}var Ae=ie[0]&ye,De={};Fe(ge);for(var Be=1,st=ie.length;Be<st;++Be){var qe=ie[Be]&ye,Et=Ae<<8|qe,de=De[Et];if(de===void 0){for(fe|=Ae<<oe,oe+=we;8<=oe;)O[V++]=255&fe,fe>>=8,oe-=8,V===re+256&&(O[re]=255,re=V++);pe===4096?(Fe(ge),pe=1+he,we=Z+1,De={}):(1<<we<=pe&&++we,De[Et]=pe++),Ae=qe}else Ae=de}return Fe(Ae),Fe(he),Ce(1),re+1===V?O[re]=0:(O[re]=V-re-1,O[V++]=0),V}(s,l,I<2?2:I,M)},this.end=function(){return T===!1&&(s[l++]=59,T=!0),l},this.getOutputBuffer=function(){return s},this.setOutputBuffer=function(w){s=w},this.getOutputBufferPosition=function(){return l},this.setOutputBufferPosition=function(w){l=w}}function o(s,a,f,h){for(var l=s[a++],u=1<<l,c=1+u,d=1+c,y=l+1,p=(1<<y)-1,m=0,g=0,v=0,x=s[a++],T=new Int32Array(4096),w=null;;){for(;m<16&&x!==0;)g|=s[a++]<<m,m+=8,x===1?x=s[a++]:--x;if(m<y)break;var b=g&p;if(g>>=y,m-=y,b==u)d=1+c,p=(1<<(y=l+1))-1,w=null;else{if(b==c)break;for(var C=b<d?b:w,A=0,M=C;u<M;)M=T[M]>>8,++A;var k=M;if(h<v+A+(C!==b?1:0))return void console.log("Warning, gif stream longer than expected.");f[v++]=k;var P=v+=A;for(C!==b&&(f[v++]=k),M=C;A--;)M=T[M],f[--P]=255&M,M>>=8;w!==null&&d<4096&&(T[d++]=w<<8|k,p+1<=d&&y<12&&(++y,p=p<<1|1)),w=b}}v!==h&&console.log("Warning, gif stream shorter than expected.")}try{i.GifWriter=n,i.GifReader=function(s){var a=0;if(s[a++]!==71||s[a++]!==73||s[a++]!==70||s[a++]!==56||(s[a++]+1&253)!=56||s[a++]!==97)throw new Error("Invalid GIF 87a/89a header.");var f=s[a++]|s[a++]<<8,h=s[a++]|s[a++]<<8,l=s[a++],u=1<<1+(7&l),c=(s[a++],s[a++],null),d=null,y=(l>>7&&(c=a,a+=3*(d=u)),!0),p=[],m=0,g=null,v=0,x=null;for(this.width=f,this.height=h;y&&a<s.length;)switch(s[a++]){case 33:switch(s[a++]){case 255:if(s[a]!==11||s[a+1]==78&&s[a+2]==69&&s[a+3]==84&&s[a+4]==83&&s[a+5]==67&&s[a+6]==65&&s[a+7]==80&&s[a+8]==69&&s[a+9]==50&&s[a+10]==46&&s[a+11]==48&&s[a+12]==3&&s[a+13]==1&&s[a+16]==0)a+=14,x=s[a++]|s[a++]<<8,a++;else for(a+=12;;){if(!(0<=(w=s[a++])))throw Error("Invalid block size");if(w===0)break;a+=w}break;case 249:if(s[a++]!==4||s[a+4]!==0)throw new Error("Invalid graphics extension block.");var T=s[a++],m=s[a++]|s[a++]<<8,g=s[a++];!(1&T)&&(g=null),v=T>>2&7,a++;break;case 254:for(;;){if(!(0<=(w=s[a++])))throw Error("Invalid block size");if(w===0)break;a+=w}break;default:throw new Error("Unknown graphic control label: 0x"+s[a-1].toString(16))}break;case 44:var w,b=s[a++]|s[a++]<<8,C=s[a++]|s[a++]<<8,A=s[a++]|s[a++]<<8,M=s[a++]|s[a++]<<8,H=s[a++],k=H>>6&1,P=1<<1+(7&H),F=c,I=d,B=!1,H=(H>>7&&(B=!0,F=a,a+=3*(I=P)),a);for(a++;;){if(!(0<=(w=s[a++])))throw Error("Invalid block size");if(w===0)break;a+=w}p.push({x:b,y:C,width:A,height:M,has_local_palette:B,palette_offset:F,palette_size:I,data_offset:H,data_length:a-H,transparent_index:g,interlaced:!!k,delay:m,disposal:v});break;case 59:y=!1;break;default:throw new Error("Unknown gif block: 0x"+s[a-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return x},this.frameInfo=function(G){if(G<0||G>=p.length)throw new Error("Frame index out of range.");return p[G]},this.decodeAndBlitFrameBGRA=function(G,W){for(var G=this.frameInfo(G),Q=G.width*G.height,ne=new Uint8Array(Q),U=(o(s,G.data_offset,ne,Q),G.palette_offset),D=G.transparent_index,O=(D===null&&(D=256),G.width),V=f-O,Z=O,ie=4*(G.y*f+G.x),re=4*((G.y+G.height)*f+G.x),ge=ie,ye=4*V,he=(G.interlaced===!0&&(ye+=4*f*7),8),pe=0,we=ne.length;pe<we;++pe){var oe,fe,Ce=ne[pe];Z===0&&(Z=O,re<=(ge+=ye)&&(ye=4*V+4*f*(he-1),ge=ie+(O+V)*(he<<1),he>>=1)),Ce===D?ge+=4:(oe=s[U+3*Ce],fe=s[U+3*Ce+1],Ce=s[U+3*Ce+2],W[ge++]=Ce,W[ge++]=fe,W[ge++]=oe,W[ge++]=255),--Z}},this.decodeAndBlitFrameRGBA=function(G,W){for(var G=this.frameInfo(G),Q=G.width*G.height,ne=new Uint8Array(Q),U=(o(s,G.data_offset,ne,Q),G.palette_offset),D=G.transparent_index,O=(D===null&&(D=256),G.width),V=f-O,Z=O,ie=4*(G.y*f+G.x),re=4*((G.y+G.height)*f+G.x),ge=ie,ye=4*V,he=(G.interlaced===!0&&(ye+=4*f*7),8),pe=0,we=ne.length;pe<we;++pe){var oe,fe,Ce=ne[pe];Z===0&&(Z=O,re<=(ge+=ye)&&(ye=4*V+4*f*(he-1),ge=ie+(O+V)*(he<<1),he>>=1)),Ce===D?ge+=4:(oe=s[U+3*Ce],fe=s[U+3*Ce+1],Ce=s[U+3*Ce+2],W[ge++]=oe,W[ge++]=fe,W[ge++]=Ce,W[ge++]=255),--Z}}}}catch{}},{}],249:[function(t,r,i){(function(n){var o,s;o=this,s=function(a){function f(z){if(this==null)throw TypeError();var E,L=String(this),R=L.length,z=z?Number(z):0;if(!((z=z!=z?0:z)<0||R<=z))return 55296<=(E=L.charCodeAt(z))&&E<=56319&&z+1<R&&56320<=(R=L.charCodeAt(z+1))&&R<=57343?1024*(E-55296)+R-56320+65536:E}String.prototype.codePointAt||((h=function(){try{var _={},E=Object.defineProperty,L=E(_,_,_)&&E}catch{}return L}())?h(String.prototype,"codePointAt",{value:f,configurable:!0,writable:!0}):String.prototype.codePointAt=f);var h,l=0,u=-3;function c(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function d(_,E){this.source=_,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=E,this.destLen=0,this.ltree=new c,this.dtree=new c}var y=new c,p=new c,m=new Uint8Array(30),g=new Uint16Array(30),v=new Uint8Array(30),x=new Uint16Array(30),T=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),w=new c,b=new Uint8Array(320);function C(_,E,L,R){for(var z,Y=0;Y<L;++Y)_[Y]=0;for(Y=0;Y<30-L;++Y)_[Y+L]=Y/L|0;for(z=R,Y=0;Y<30;++Y)E[Y]=z,z+=1<<_[Y]}var A=new Uint16Array(16);function M(_,E,L,R){for(var z,Y=0;Y<16;++Y)_.table[Y]=0;for(Y=0;Y<R;++Y)_.table[E[L+Y]]++;for(Y=z=_.table[0]=0;Y<16;++Y)A[Y]=z,z+=_.table[Y];for(Y=0;Y<R;++Y)E[L+Y]&&(_.trans[A[E[L+Y]]++]=Y)}function k(_,E,L){if(!E)return L;for(;_.bitcount<24;)_.tag|=_.source[_.sourceIndex++]<<_.bitcount,_.bitcount+=8;var R=_.tag&65535>>>16-E;return _.tag>>>=E,_.bitcount-=E,R+L}function P(_,E){for(;_.bitcount<24;)_.tag|=_.source[_.sourceIndex++]<<_.bitcount,_.bitcount+=8;for(var L=0,R=0,z=0,Y=_.tag;R=2*R+(1&Y),Y>>>=1,L+=E.table[++z],0<=(R-=E.table[z]););return _.tag=Y,_.bitcount-=z,E.trans[L+R]}function F(_,E,L){for(;;){var R=P(_,E);if(R===256)return l;if(R<256)_.dest[_.destLen++]=R;else for(var z,Y=k(_,m[R-=257],g[R]),R=P(_,L),K=z=_.destLen-k(_,v[R],x[R]);K<z+Y;++K)_.dest[_.destLen++]=_.dest[K]}}for(var I=y,B=p,H=0;H<7;++H)I.table[H]=0;for(I.table[7]=24,I.table[8]=152,I.table[9]=112,H=0;H<24;++H)I.trans[H]=256+H;for(H=0;H<144;++H)I.trans[24+H]=H;for(H=0;H<8;++H)I.trans[168+H]=280+H;for(H=0;H<112;++H)I.trans[176+H]=144+H;for(H=0;H<5;++H)B.table[H]=0;for(B.table[5]=32,H=0;H<32;++H)B.trans[H]=H;C(m,g,4,3),C(v,x,2,1),m[28]=0,g[28]=258;var G=function(_,E){var L,R,z,Y=new d(_,E);do{switch(z=void 0,(R=Y).bitcount--||(R.tag=R.source[R.sourceIndex++],R.bitcount=7),z=1&R.tag,R.tag>>>=1,R=z,k(Y,2,0)){case 0:L=function(Xe){for(var Nt,Zt;8<Xe.bitcount;)Xe.sourceIndex--,Xe.bitcount-=8;if((Nt=256*Xe.source[Xe.sourceIndex+1]+Xe.source[Xe.sourceIndex])!==(65535&~(256*Xe.source[Xe.sourceIndex+3]+Xe.source[Xe.sourceIndex+2])))return u;for(Xe.sourceIndex+=4,Zt=Nt;Zt;--Zt)Xe.dest[Xe.destLen++]=Xe.source[Xe.sourceIndex++];return Xe.bitcount=0,l}(Y);break;case 1:L=F(Y,y,p);break;case 2:dt=Qe=vt=Ye=K=je=Ge=We=ke=ve=be=ue=void 0;for(var K,ue=Y,be=Y.ltree,ve=Y.dtree,ke=k(ue,5,257),We=k(ue,5,1),Ge=k(ue,4,4),je=0;je<19;++je)b[je]=0;for(je=0;je<Ge;++je){var vt=k(ue,3,0);b[T[je]]=vt}for(M(w,b,0,19),K=0;K<ke+We;){var Qe=P(ue,w);switch(Qe){case 16:for(var dt=b[K-1],Ye=k(ue,2,3);Ye;--Ye)b[K++]=dt;break;case 17:for(Ye=k(ue,3,3);Ye;--Ye)b[K++]=0;break;case 18:for(Ye=k(ue,7,11);Ye;--Ye)b[K++]=0;break;default:b[K++]=Qe}}M(be,b,0,ke),M(ve,b,ke,We),L=F(Y,Y.ltree,Y.dtree);break;default:L=u}if(L!==l)throw new Error("Data error")}while(!R);return Y.destLen<Y.dest.length?typeof Y.dest.slice=="function"?Y.dest.slice(0,Y.destLen):Y.dest.subarray(0,Y.destLen):Y.dest};function W(_,E,L,R,z){return Math.pow(1-z,3)*_+3*Math.pow(1-z,2)*z*E+3*(1-z)*Math.pow(z,2)*L+Math.pow(z,3)*R}function Q(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function ne(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function U(_){throw new Error(_)}function D(_,E){_||U(E)}Q.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},Q.prototype.addPoint=function(_,E){typeof _=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=_,this.x2=_),_<this.x1&&(this.x1=_),_>this.x2&&(this.x2=_)),typeof E=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=E,this.y2=E),E<this.y1&&(this.y1=E),E>this.y2&&(this.y2=E))},Q.prototype.addX=function(_){this.addPoint(_,null)},Q.prototype.addY=function(_){this.addPoint(null,_)},Q.prototype.addBezier=function(_,E,L,R,z,Y,K,ue){var be=[_,E],ve=[L,R],ke=[z,Y],We=[K,ue];this.addPoint(_,E),this.addPoint(K,ue);for(var Ge=0;Ge<=1;Ge++){var je,vt=6*be[Ge]-12*ve[Ge]+6*ke[Ge],Qe=-3*be[Ge]+9*ve[Ge]-9*ke[Ge]+3*We[Ge],dt=3*ve[Ge]-3*be[Ge];Qe==0?vt==0||0<(je=-dt/vt)&&je<1&&(Ge===0&&this.addX(W(be[Ge],ve[Ge],ke[Ge],We[Ge],je)),Ge===1&&this.addY(W(be[Ge],ve[Ge],ke[Ge],We[Ge],je))):(je=Math.pow(vt,2)-4*dt*Qe)<0||(0<(dt=(-vt+Math.sqrt(je))/(2*Qe))&&dt<1&&(Ge===0&&this.addX(W(be[Ge],ve[Ge],ke[Ge],We[Ge],dt)),Ge===1&&this.addY(W(be[Ge],ve[Ge],ke[Ge],We[Ge],dt))),0<(dt=(-vt-Math.sqrt(je))/(2*Qe))&&dt<1&&(Ge===0&&this.addX(W(be[Ge],ve[Ge],ke[Ge],We[Ge],dt)),Ge===1&&this.addY(W(be[Ge],ve[Ge],ke[Ge],We[Ge],dt))))}},Q.prototype.addQuad=function(_,E,L,R,z,Y){L=_+2/3*(L-_),R=E+2/3*(R-E),this.addBezier(_,E,L,R,L+1/3*(z-_),R+1/3*(Y-E),z,Y)},ne.prototype.moveTo=function(_,E){this.commands.push({type:"M",x:_,y:E})},ne.prototype.lineTo=function(_,E){this.commands.push({type:"L",x:_,y:E})},ne.prototype.curveTo=ne.prototype.bezierCurveTo=function(_,E,L,R,z,Y){this.commands.push({type:"C",x1:_,y1:E,x2:L,y2:R,x:z,y:Y})},ne.prototype.quadTo=ne.prototype.quadraticCurveTo=function(_,E,L,R){this.commands.push({type:"Q",x1:_,y1:E,x:L,y:R})},ne.prototype.close=ne.prototype.closePath=function(){this.commands.push({type:"Z"})},ne.prototype.extend=function(_){var E;if(_.commands)_=_.commands;else if(_ instanceof Q)return E=_,this.moveTo(E.x1,E.y1),this.lineTo(E.x2,E.y1),this.lineTo(E.x2,E.y2),this.lineTo(E.x1,E.y2),void this.close();Array.prototype.push.apply(this.commands,_)},ne.prototype.getBoundingBox=function(){for(var _=new Q,E=0,L=0,R=0,z=0,Y=0;Y<this.commands.length;Y++){var K=this.commands[Y];switch(K.type){case"M":_.addPoint(K.x,K.y),E=R=K.x,L=z=K.y;break;case"L":_.addPoint(K.x,K.y),R=K.x,z=K.y;break;case"Q":_.addQuad(R,z,K.x1,K.y1,K.x,K.y),R=K.x,z=K.y;break;case"C":_.addBezier(R,z,K.x1,K.y1,K.x2,K.y2,K.x,K.y),R=K.x,z=K.y;break;case"Z":R=E,z=L;break;default:throw new Error("Unexpected path command "+K.type)}}return _.isEmpty()&&_.addPoint(0,0),_},ne.prototype.draw=function(_){_.beginPath();for(var E=0;E<this.commands.length;E+=1){var L=this.commands[E];L.type==="M"?_.moveTo(L.x,L.y):L.type==="L"?_.lineTo(L.x,L.y):L.type==="C"?_.bezierCurveTo(L.x1,L.y1,L.x2,L.y2,L.x,L.y):L.type==="Q"?_.quadraticCurveTo(L.x1,L.y1,L.x,L.y):L.type==="Z"&&_.closePath()}this.fill&&(_.fillStyle=this.fill,_.fill()),this.stroke&&(_.strokeStyle=this.stroke,_.lineWidth=this.strokeWidth,_.stroke())},ne.prototype.toPathData=function(_){function E(){for(var Y=arguments,K="",ue=0;ue<arguments.length;ue+=1){var be=Y[ue];0<=be&&0<ue&&(K+=" "),K+=(be=be,Math.round(be)===be?""+Math.round(be):be.toFixed(_))}return K}_=_!==void 0?_:2;for(var L="",R=0;R<this.commands.length;R+=1){var z=this.commands[R];z.type==="M"?L+="M"+E(z.x,z.y):z.type==="L"?L+="L"+E(z.x,z.y):z.type==="C"?L+="C"+E(z.x1,z.y1,z.x2,z.y2,z.x,z.y):z.type==="Q"?L+="Q"+E(z.x1,z.y1,z.x,z.y):z.type==="Z"&&(L+="Z")}return L},ne.prototype.toSVG=function(_){var E=(E='<path d="')+this.toPathData(_)+'"';return this.fill&&this.fill!=="black"&&(this.fill===null?E+=' fill="none"':E+=' fill="'+this.fill+'"'),this.stroke&&(E+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),E+="/>"},ne.prototype.toDOMElement=function(E){var E=this.toPathData(E),L=document.createElementNS("http://www.w3.org/2000/svg","path");return L.setAttribute("d",E),L};var O={fail:U,argument:D,assert:D},V={},Z={},ie={};function re(_){return function(){return _}}Z.BYTE=function(_){return O.argument(0<=_&&_<=255,"Byte value should be between 0 and 255."),[_]},ie.BYTE=re(1),Z.CHAR=function(_){return[_.charCodeAt(0)]},ie.CHAR=re(1),Z.CHARARRAY=function(_){for(var E=[],L=0;L<_.length;L+=1)E[L]=_.charCodeAt(L);return E},ie.CHARARRAY=function(_){return _.length},Z.USHORT=function(_){return[_>>8&255,255&_]},ie.USHORT=re(2),Z.SHORT=function(_){return[(_=32768<=_?-(65536-_):_)>>8&255,255&_]},ie.SHORT=re(2),Z.UINT24=function(_){return[_>>16&255,_>>8&255,255&_]},ie.UINT24=re(3),Z.ULONG=function(_){return[_>>24&255,_>>16&255,_>>8&255,255&_]},ie.ULONG=re(4),Z.LONG=function(_){return[(_=2147483648<=_?-(4294967296-_):_)>>24&255,_>>16&255,_>>8&255,255&_]},ie.LONG=re(4),Z.FIXED=Z.ULONG,ie.FIXED=ie.ULONG,Z.FWORD=Z.SHORT,ie.FWORD=ie.SHORT,Z.UFWORD=Z.USHORT,ie.UFWORD=ie.USHORT,Z.LONGDATETIME=function(_){return[0,0,0,0,_>>24&255,_>>16&255,_>>8&255,255&_]},ie.LONGDATETIME=re(8),Z.TAG=function(_){return O.argument(_.length===4,"Tag should be exactly 4 ASCII characters."),[_.charCodeAt(0),_.charCodeAt(1),_.charCodeAt(2),_.charCodeAt(3)]},ie.TAG=re(4),Z.Card8=Z.BYTE,ie.Card8=ie.BYTE,Z.Card16=Z.USHORT,ie.Card16=ie.USHORT,Z.OffSize=Z.BYTE,ie.OffSize=ie.BYTE,Z.SID=Z.USHORT,ie.SID=ie.USHORT,Z.NUMBER=function(_){return-107<=_&&_<=107?[_+139]:108<=_&&_<=1131?[247+((_-=108)>>8),255&_]:-1131<=_&&_<=-108?[251+((_=-_-108)>>8),255&_]:-32768<=_&&_<=32767?Z.NUMBER16(_):Z.NUMBER32(_)},ie.NUMBER=function(_){return Z.NUMBER(_).length},Z.NUMBER16=function(_){return[28,_>>8&255,255&_]},ie.NUMBER16=re(3),Z.NUMBER32=function(_){return[29,_>>24&255,_>>16&255,_>>8&255,255&_]},ie.NUMBER32=re(5),Z.REAL=function(_){for(var E=_.toString(),L=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(E),R=(L&&(L=parseFloat("1e"+((L[2]?+L[2]:0)+L[1].length)),E=(Math.round(_*L)/L).toString()),""),z=0,Y=E.length;z<Y;z+=1){var K=E[z];R+=K==="e"?E[++z]==="-"?"c":"b":K==="."?"a":K==="-"?"e":K}for(var ue=[30],be=0,ve=(R+=1&R.length?"f":"ff").length;be<ve;be+=2)ue.push(parseInt(R.substr(be,2),16));return ue},ie.REAL=function(_){return Z.REAL(_).length},Z.NAME=Z.CHARARRAY,ie.NAME=ie.CHARARRAY,Z.STRING=Z.CHARARRAY,ie.STRING=ie.CHARARRAY,V.UTF8=function(_,E,L){for(var R=[],z=L,Y=0;Y<z;Y++,E+=1)R[Y]=_.getUint8(E);return String.fromCharCode.apply(null,R)},V.UTF16=function(_,E,L){for(var R=[],z=L/2,Y=0;Y<z;Y++,E+=2)R[Y]=_.getUint16(E);return String.fromCharCode.apply(null,R)},Z.UTF16=function(_){for(var E=[],L=0;L<_.length;L+=1){var R=_.charCodeAt(L);E[E.length]=R>>8&255,E[E.length]=255&R}return E},ie.UTF16=function(_){return 2*_.length};var ge,ye={"x-mac-croatian":"ÃÃÃÃÃÃÃÃ¡Ã Ã¢Ã¤Ã£Ã¥Ã§Ã©Ã¨ÃªÃ«Ã­Ã¬Ã®Ã¯Ã±Ã³Ã²Ã´Ã¶ÃµÃºÃ¹Ã»Ã¼â Â°Â¢Â£Â§â¢Â¶ÃÂ®Å â¢Â´Â¨â Å½ÃâÂ±â¤â¥âÂµâââÅ¡â«ÂªÂºÎ©Å¾Ã¸Â¿Â¡Â¬âÆâÄÂ«Äâ¦Â ÃÃÃÅÅÄâââââÃ·âï£¿Â©ââ¬â¹âºÃÂ»âÂ·âââ°ÃÄÃÄÃÃÃÃÃÃÃÄÃÃÃÃÄ±ËËÂ¯ÏÃËÂ¸ÃÃ¦Ë","x-mac-cyrillic":"ÐÐÐÐÐÐÐÐÐÐÐÐÐÐÐÐÐ Ð¡Ð¢Ð£Ð¤Ð¥Ð¦Ð§Ð¨Ð©ÐªÐ«Ð¬Ð­Ð®Ð¯â Â°ÒÂ£Â§â¢Â¶ÐÂ®Â©â¢ÐÑâ ÐÑâÂ±â¤â¥ÑÂµÒÐÐÑÐÑÐÑÐÑÑÐÂ¬âÆââÂ«Â»â¦Â ÐÑÐÑÑââââââÃ·âÐÑÐÑâÐÑÑÐ°Ð±Ð²Ð³Ð´ÐµÐ¶Ð·Ð¸Ð¹ÐºÐ»Ð¼Ð½Ð¾Ð¿ÑÑÑÑÑÑÑÑÑÑÑÑÑÑÑ","x-mac-gaelic":"ÃÃÃÃÃÃÃÃ¡Ã Ã¢Ã¤Ã£Ã¥Ã§Ã©Ã¨ÃªÃ«Ã­Ã¬Ã®Ã¯Ã±Ã³Ã²Ã´Ã¶ÃµÃºÃ¹Ã»Ã¼â Â°Â¢Â£Â§â¢Â¶ÃÂ®Â©â¢Â´Â¨â ÃÃá¸Â±â¤â¥á¸ÄÄá¸á¸á¸á¸Ä Ä¡á¹Ã¦Ã¸á¹á¹á¹É¼ÆÅ¿á¹ Â«Â»â¦Â ÃÃÃÅÅââââââá¹¡áºÃ¿Å¸á¹ªâ¬â¹âºÅ¶Å·á¹«Â·á»²á»³âÃÃÃÃÃÃÃÃÃÃÃâ£ÃÃÃÃÄ±ÃÃ½Å´Åµáºáºáºáºáºáº","x-mac-greek":"ÃÂ¹Â²ÃÂ³ÃÃÎÃ Ã¢Ã¤ÎÂ¨Ã§Ã©Ã¨ÃªÃ«Â£â¢Ã®Ã¯â¢Â½â°Ã´Ã¶Â¦â¬Ã¹Ã»Ã¼â ÎÎÎÎÎÎ ÃÂ®Â©Î£ÎªÂ§â Â°Â·ÎÂ±â¤â¥Â¥ÎÎÎÎÎÎÎÎ¦Î«Î¨Î©Î¬ÎÂ¬ÎÎ¡âÎ¤Â«Â»â¦Â Î¥Î§ÎÎÅââââââÃ·ÎÎÎÎÎ­Î®Î¯ÏÎÏÎ±Î²ÏÎ´ÎµÏÎ³Î·Î¹Î¾ÎºÎ»Î¼Î½Î¿ÏÏÏÏÏÎ¸ÏÏÏÏÎ¶ÏÏÎÎ°Â­","x-mac-icelandic":"ÃÃÃÃÃÃÃÃ¡Ã Ã¢Ã¤Ã£Ã¥Ã§Ã©Ã¨ÃªÃ«Ã­Ã¬Ã®Ã¯Ã±Ã³Ã²Ã´Ã¶ÃµÃºÃ¹Ã»Ã¼ÃÂ°Â¢Â£Â§â¢Â¶ÃÂ®Â©â¢Â´Â¨â ÃÃâÂ±â¤â¥Â¥ÂµâââÏâ«ÂªÂºÎ©Ã¦Ã¸Â¿Â¡Â¬âÆââÂ«Â»â¦Â ÃÃÃÅÅââââââÃ·âÃ¿Å¸ââ¬ÃÃ°ÃÃ¾Ã½Â·âââ°ÃÃÃÃÃÃÃÃÃÃÃï£¿ÃÃÃÃÄ±ËËÂ¯ËËËÂ¸ËËË","x-mac-inuit":"ááááááá±á²á³á´á¸á¹áááááááá¦á­á®á¯á°á²á³áááááááÂ°á¡á¥á¦â¢Â¶á§Â®Â©â¢á¨áªá«á»áááááááá¯á°á±á²á´áµááááááááªá¨á©áªá«á­â¦Â á®á¾áááââââââáááááááááááá¿áááááááááááááá±á²á³á´áµá¶áá á¡á¢á£á¤á¥á¦á¼ÅÅ","x-mac-ce":"ÃÄÄÃÄÃÃÃ¡ÄÄÃ¤ÄÄÄÃ©Å¹ÅºÄÃ­ÄÄÄÄÃ³ÄÃ´Ã¶ÃµÃºÄÄÃ¼â Â°ÄÂ£Â§â¢Â¶ÃÂ®Â©â¢ÄÂ¨â Ä£Ä®Ä¯Äªâ¤â¥Ä«Ä¶ââÅÄ»Ä¼Ä½Ä¾Ä¹ÄºÅÅÅÂ¬âÅÅâÂ«Â»â¦Â ÅÅÃÅÅââââââÃ·âÅÅÅÅâ¹âºÅÅÅÅ ââÅ¡ÅÅÃÅ¤Å¥ÃÅ½Å¾ÅªÃÃÅ«Å®ÃÅ¯Å°Å±Å²Å³ÃÃ½Ä·Å»ÅÅ¼Ä¢Ë",macintosh:"ÃÃÃÃÃÃÃÃ¡Ã Ã¢Ã¤Ã£Ã¥Ã§Ã©Ã¨ÃªÃ«Ã­Ã¬Ã®Ã¯Ã±Ã³Ã²Ã´Ã¶ÃµÃºÃ¹Ã»Ã¼â Â°Â¢Â£Â§â¢Â¶ÃÂ®Â©â¢Â´Â¨â ÃÃâÂ±â¤â¥Â¥ÂµâââÏâ«ÂªÂºÎ©Ã¦Ã¸Â¿Â¡Â¬âÆââÂ«Â»â¦Â ÃÃÃÅÅââââââÃ·âÃ¿Å¸ââ¬â¹âºï¬ï¬â¡Â·âââ°ÃÃÃÃÃÃÃÃÃÃÃï£¿ÃÃÃÃÄ±ËËÂ¯ËËËÂ¸ËËË","x-mac-romanian":"ÃÃÃÃÃÃÃÃ¡Ã Ã¢Ã¤Ã£Ã¥Ã§Ã©Ã¨ÃªÃ«Ã­Ã¬Ã®Ã¯Ã±Ã³Ã²Ã´Ã¶ÃµÃºÃ¹Ã»Ã¼â Â°Â¢Â£Â§â¢Â¶ÃÂ®Â©â¢Â´Â¨â ÄÈâÂ±â¤â¥Â¥ÂµâââÏâ«ÂªÂºÎ©ÄÈÂ¿Â¡Â¬âÆââÂ«Â»â¦Â ÃÃÃÅÅââââââÃ·âÃ¿Å¸ââ¬â¹âºÈÈâ¡Â·âââ°ÃÃÃÃÃÃÃÃÃÃÃï£¿ÃÃÃÃÄ±ËËÂ¯ËËËÂ¸ËËË","x-mac-turkish":"ÃÃÃÃÃÃÃÃ¡Ã Ã¢Ã¤Ã£Ã¥Ã§Ã©Ã¨ÃªÃ«Ã­Ã¬Ã®Ã¯Ã±Ã³Ã²Ã´Ã¶ÃµÃºÃ¹Ã»Ã¼â Â°Â¢Â£Â§â¢Â¶ÃÂ®Â©â¢Â´Â¨â ÃÃâÂ±â¤â¥Â¥ÂµâââÏâ«ÂªÂºÎ©Ã¦Ã¸Â¿Â¡Â¬âÆââÂ«Â»â¦Â ÃÃÃÅÅââââââÃ·âÃ¿Å¸ÄÄÄ°Ä±ÅÅâ¡Â·âââ°ÃÃÃÃÃÃÃÃÃÃÃï£¿ÃÃÃÃï¢ ËËÂ¯ËËËÂ¸ËËË"},he=(V.MACSTRING=function(_,E,L,R){var z=ye[R];if(z!==void 0){for(var Y="",K=0;K<L;K++){var ue=_.getUint8(E+K);Y+=ue<=127?String.fromCharCode(ue):z[127&ue]}return Y}},typeof WeakMap=="function"&&new WeakMap);function pe(_){return-128<=_&&_<=127}Z.MACSTRING=function(_,E){var L=function(K){if(!ge)for(var ue in ge={},ye)ge[ue]=new String(ue);var be=ge[K];if(be!==void 0){if(he){var ve=he.get(be);if(ve!==void 0)return ve}var ke=ye[K];if(ke!==void 0){for(var We={},Ge=0;Ge<ke.length;Ge++)We[ke.charCodeAt(Ge)]=Ge+128;return he&&he.set(be,We),We}}}(E);if(L!==void 0){for(var R=[],z=0;z<_.length;z++){var Y=_.charCodeAt(z);if(128<=Y&&(Y=L[Y])===void 0)return;R[z]=Y}return R}},ie.MACSTRING=function(_,E){return _=Z.MACSTRING(_,E),_!==void 0?_.length:0},Z.VARDELTAS=function(_){for(var R=0,E=[];R<_.length;)var L=_[R],R=(L===0?function(z,Y,K){for(var ue=0,be=z.length;Y<be&&ue<64&&z[Y]===0;)++Y,++ue;return K.push(128|ue-1),Y}:-128<=L&&L<=127?function(z,Y,K){for(var ue=0,be=z.length,ve=Y;ve<be&&ue<64;){var ke=z[ve];if(!pe(ke)||ke===0&&ve+1<be&&z[ve+1]===0)break;++ve,++ue}K.push(ue-1);for(var We=Y;We<ve;++We)K.push(z[We]+256&255);return ve}:function(z,Y,K){for(var ue=0,be=z.length,ve=Y;ve<be&&ue<64;){var ke=z[ve];if(ke===0||pe(ke)&&ve+1<be&&pe(z[ve+1]))break;++ve,++ue}K.push(64|ue-1);for(var We=Y;We<ve;++We){var Ge=z[We];K.push(Ge+65536>>8&255,Ge+256&255)}return ve})(_,R,E);return E},Z.INDEX=function(_){for(var E=1,L=[E],R=[],z=0;z<_.length;z+=1){var Y=Z.OBJECT(_[z]);Array.prototype.push.apply(R,Y),E+=Y.length,L.push(E)}if(R.length===0)return[0,0];for(var K=[],ue=1+Math.floor(Math.log(E)/Math.log(2))/8|0,be=[void 0,Z.BYTE,Z.USHORT,Z.UINT24,Z.ULONG][ue],ve=0;ve<L.length;ve+=1){var ke=be(L[ve]);Array.prototype.push.apply(K,ke)}return Array.prototype.concat(Z.Card16(_.length),Z.OffSize(ue),K,R)},ie.INDEX=function(_){return Z.INDEX(_).length},Z.DICT=function(_){for(var E=[],L=Object.keys(_),R=L.length,z=0;z<R;z+=1){var Y=parseInt(L[z],0),K=_[Y];E=(E=E.concat(Z.OPERAND(K.value,K.type))).concat(Z.OPERATOR(Y))}return E},ie.DICT=function(_){return Z.DICT(_).length},Z.OPERATOR=function(_){return _<1200?[_]:[12,_-1200]},Z.OPERAND=function(_,E){var L=[];if(Array.isArray(E))for(var R=0;R<E.length;R+=1)O.argument(_.length===E.length,"Not enough arguments given for type"+E),L=L.concat(Z.OPERAND(_[R],E[R]));else if(E==="SID")L=L.concat(Z.NUMBER(_));else if(E==="offset")L=L.concat(Z.NUMBER32(_));else if(E==="number")L=L.concat(Z.NUMBER(_));else{if(E!=="real")throw new Error("Unknown operand type "+E);L=L.concat(Z.REAL(_))}return L},Z.OP=Z.BYTE,ie.OP=ie.BYTE;var we=typeof WeakMap=="function"&&new WeakMap;function oe(_,E,L){for(var R=0;R<E.length;R+=1){var z=E[R];this[z.name]=z.value}if(this.tableName=_,this.fields=E,L)for(var Y=Object.keys(L),K=0;K<Y.length;K+=1){var ue=Y[K],be=L[ue];this[ue]!==void 0&&(this[ue]=be)}}function fe(_,E,L){L===void 0&&(L=E.length);var R=new Array(E.length+1);R[0]={name:_+"Count",type:"USHORT",value:L};for(var z=0;z<E.length;z++)R[z+1]={name:_+z,type:"USHORT",value:E[z]};return R}function Ce(_,E,L){var R=E.length,z=new Array(R+1);z[0]={name:_+"Count",type:"USHORT",value:R};for(var Y=0;Y<R;Y++)z[Y+1]={name:_+Y,type:"TABLE",value:L(E[Y],Y)};return z}function Fe(_,E,L){var R=E.length,z=[];z[0]={name:_+"Count",type:"USHORT",value:R};for(var Y=0;Y<R;Y++)z=z.concat(L(E[Y],Y));return z}function Ae(_){_.format===1?oe.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(fe("glyph",_.glyphs))):O.assert(!1,"Can't create coverage table format 2 yet.")}function De(_){oe.call(this,"scriptListTable",Fe("scriptRecord",_,function(E,L){var R=E.script,z=R.defaultLangSys;return O.assert(!!z,"Unable to write GSUB: script "+E.tag+" has no default language system."),[{name:"scriptTag"+L,type:"TAG",value:E.tag},{name:"script"+L,type:"TABLE",value:new oe("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new oe("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:z.reqFeatureIndex}].concat(fe("featureIndex",z.featureIndexes)))}].concat(Fe("langSys",R.langSysRecords,function(Y,K){var ue=Y.langSys;return[{name:"langSysTag"+K,type:"TAG",value:Y.tag},{name:"langSys"+K,type:"TABLE",value:new oe("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:ue.reqFeatureIndex}].concat(fe("featureIndex",ue.featureIndexes)))}]})))}]}))}function Be(_){oe.call(this,"featureListTable",Fe("featureRecord",_,function(E,L){var R=E.feature;return[{name:"featureTag"+L,type:"TAG",value:E.tag},{name:"feature"+L,type:"TABLE",value:new oe("featureTable",[{name:"featureParams",type:"USHORT",value:R.featureParams}].concat(fe("lookupListIndex",R.lookupListIndexes)))}]}))}function st(_,E){oe.call(this,"lookupListTable",Ce("lookup",_,function(L){var R=E[L.lookupType];return O.assert(!!R,"Unable to write GSUB lookup type "+L.lookupType+" tables."),new oe("lookupTable",[{name:"lookupType",type:"USHORT",value:L.lookupType},{name:"lookupFlag",type:"USHORT",value:L.lookupFlag}].concat(Ce("subtable",L.subtables,R)))}))}Z.CHARSTRING=function(_){if(we){var E=we.get(_);if(E!==void 0)return E}for(var Y=[],L=_.length,R=0;R<L;R+=1)var z=_[R],Y=Y.concat(Z[z.type](z.value));return we&&we.set(_,Y),Y},ie.CHARSTRING=function(_){return Z.CHARSTRING(_).length},Z.OBJECT=function(_){var E=Z[_.type];return O.argument(E!==void 0,"No encoding function for type "+_.type),E(_.value)},ie.OBJECT=function(_){var E=ie[_.type];return O.argument(E!==void 0,"No sizeOf function for type "+_.type),E(_.value)},Z.TABLE=function(_){for(var E=[],L=_.fields.length,R=[],z=[],Y=0;Y<L;Y+=1){var K=_.fields[Y],be=Z[K.type],ue=(O.argument(be!==void 0,"No encoding function for field type "+K.type+" ("+K.name+")"),_[K.name]),be=be(ue=ue===void 0?K.value:ue);K.type==="TABLE"?(z.push(E.length),E=E.concat([0,0]),R.push(be)):E=E.concat(be)}for(var ve=0;ve<R.length;ve+=1){var ke=z[ve],We=E.length;O.argument(We<65536,"Table "+_.tableName+" too big."),E[ke]=We>>8,E[ke+1]=255&We,E=E.concat(R[ve])}return E},ie.TABLE=function(_){for(var E=0,L=_.fields.length,R=0;R<L;R+=1){var z=_.fields[R],Y=ie[z.type],K=(O.argument(Y!==void 0,"No sizeOf function for field type "+z.type+" ("+z.name+")"),_[z.name]);E+=Y(K=K===void 0?z.value:K),z.type==="TABLE"&&(E+=2)}return E},Z.RECORD=Z.TABLE,ie.RECORD=ie.TABLE,Z.LITERAL=function(_){return _},ie.LITERAL=function(_){return _.length},oe.prototype.encode=function(){return Z.TABLE(this)},oe.prototype.sizeOf=function(){return ie.TABLE(this)};var qe={Table:oe,Record:oe,Coverage:(Ae.prototype=Object.create(oe.prototype)).constructor=Ae,ScriptList:(De.prototype=Object.create(oe.prototype)).constructor=De,FeatureList:(Be.prototype=Object.create(oe.prototype)).constructor=Be,LookupList:(st.prototype=Object.create(oe.prototype)).constructor=st,ushortList:fe,tableList:Ce,recordList:Fe};function Et(_,E){return _.getUint8(E)}function de(_,E){return _.getUint16(E,!1)}function le(_,E){return _.getUint32(E,!1)}function Ue(_,E){return _.getInt16(E,!1)+_.getUint16(E+2,!1)/65535}var Ze={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function Me(_,E){this.data=_,this.offset=E,this.relativeOffset=0}Me.prototype.parseByte=function(){var _=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,_},Me.prototype.parseChar=function(){var _=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,_},Me.prototype.parseCard8=Me.prototype.parseByte,Me.prototype.parseCard16=Me.prototype.parseUShort=function(){var _=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,_},Me.prototype.parseSID=Me.prototype.parseUShort,Me.prototype.parseOffset16=Me.prototype.parseUShort,Me.prototype.parseShort=function(){var _=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,_},Me.prototype.parseF2Dot14=function(){var _=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,_},Me.prototype.parseOffset32=Me.prototype.parseULong=function(){var _=le(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,_},Me.prototype.parseFixed=function(){var _=Ue(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,_},Me.prototype.parseString=function(_){var E=this.data,L=this.offset+this.relativeOffset,R="";this.relativeOffset+=_;for(var z=0;z<_;z++)R+=String.fromCharCode(E.getUint8(L+z));return R},Me.prototype.parseTag=function(){return this.parseString(4)},Me.prototype.parseLongDateTime=function(){var _=le(this.data,this.offset+this.relativeOffset+4);return _-=2082844800,this.relativeOffset+=8,_},Me.prototype.parseVersion=function(_){var E=de(this.data,this.offset+this.relativeOffset),L=de(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,E+L/(_=_===void 0?4096:_)/10},Me.prototype.skip=function(_,E){this.relativeOffset+=Ze[_]*(E=E===void 0?1:E)},Me.prototype.parseULongList=function(_){_===void 0&&(_=this.parseULong());for(var E=new Array(_),L=this.data,R=this.offset+this.relativeOffset,z=0;z<_;z++)E[z]=L.getUint32(R),R+=4;return this.relativeOffset+=4*_,E},Me.prototype.parseOffset16List=Me.prototype.parseUShortList=function(_){_===void 0&&(_=this.parseUShort());for(var E=new Array(_),L=this.data,R=this.offset+this.relativeOffset,z=0;z<_;z++)E[z]=L.getUint16(R),R+=2;return this.relativeOffset+=2*_,E},Me.prototype.parseShortList=function(_){for(var E=new Array(_),L=this.data,R=this.offset+this.relativeOffset,z=0;z<_;z++)E[z]=L.getInt16(R),R+=2;return this.relativeOffset+=2*_,E},Me.prototype.parseByteList=function(_){for(var E=new Array(_),L=this.data,R=this.offset+this.relativeOffset,z=0;z<_;z++)E[z]=L.getUint8(R++);return this.relativeOffset+=_,E},Me.prototype.parseList=function(_,E){E||(E=_,_=this.parseUShort());for(var L=new Array(_),R=0;R<_;R++)L[R]=E.call(this);return L},Me.prototype.parseList32=function(_,E){E||(E=_,_=this.parseULong());for(var L=new Array(_),R=0;R<_;R++)L[R]=E.call(this);return L},Me.prototype.parseRecordList=function(_,E){E||(E=_,_=this.parseUShort());for(var L=new Array(_),R=Object.keys(E),z=0;z<_;z++){for(var Y={},K=0;K<R.length;K++){var ue=R[K],be=E[ue];Y[ue]=be.call(this)}L[z]=Y}return L},Me.prototype.parseRecordList32=function(_,E){E||(E=_,_=this.parseULong());for(var L=new Array(_),R=Object.keys(E),z=0;z<_;z++){for(var Y={},K=0;K<R.length;K++){var ue=R[K],be=E[ue];Y[ue]=be.call(this)}L[z]=Y}return L},Me.prototype.parseStruct=function(_){if(typeof _=="function")return _.call(this);for(var E=Object.keys(_),L={},R=0;R<E.length;R++){var z=E[R],Y=_[z];L[z]=Y.call(this)}return L},Me.prototype.parseValueRecord=function(_){var E;if((_=_===void 0?this.parseUShort():_)!==0)return E={},1&_&&(E.xPlacement=this.parseShort()),2&_&&(E.yPlacement=this.parseShort()),4&_&&(E.xAdvance=this.parseShort()),8&_&&(E.yAdvance=this.parseShort()),16&_&&(E.xPlaDevice=void 0,this.parseShort()),32&_&&(E.yPlaDevice=void 0,this.parseShort()),64&_&&(E.xAdvDevice=void 0,this.parseShort()),128&_&&(E.yAdvDevice=void 0,this.parseShort()),E},Me.prototype.parseValueRecordList=function(){for(var _=this.parseUShort(),E=this.parseUShort(),L=new Array(E),R=0;R<E;R++)L[R]=this.parseValueRecord(_);return L},Me.prototype.parsePointer=function(_){var E=this.parseOffset16();if(0<E)return new Me(this.data,this.offset+E).parseStruct(_)},Me.prototype.parsePointer32=function(_){var E=this.parseOffset32();if(0<E)return new Me(this.data,this.offset+E).parseStruct(_)},Me.prototype.parseListOfLists=function(_){for(var E=this.parseOffset16List(),L=E.length,R=this.relativeOffset,z=new Array(L),Y=0;Y<L;Y++){var K=E[Y];if(K===0)z[Y]=void 0;else if(this.relativeOffset=K,_){for(var ue=this.parseOffset16List(),be=new Array(ue.length),ve=0;ve<ue.length;ve++)this.relativeOffset=K+ue[ve],be[ve]=_.call(this);z[Y]=be}else z[Y]=this.parseUShortList()}return this.relativeOffset=R,z},Me.prototype.parseCoverage=function(){var _=this.offset+this.relativeOffset,E=this.parseUShort(),L=this.parseUShort();if(E===1)return{format:1,glyphs:this.parseUShortList(L)};if(E!==2)throw new Error("0x"+_.toString(16)+": Coverage format must be 1 or 2.");for(var R=new Array(L),z=0;z<L;z++)R[z]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:R}},Me.prototype.parseClassDef=function(){var _=this.offset+this.relativeOffset,E=this.parseUShort();if(E===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(E===2)return{format:2,ranges:this.parseRecordList({start:Me.uShort,end:Me.uShort,classId:Me.uShort})};throw new Error("0x"+_.toString(16)+": ClassDef format must be 1 or 2.")},Me.list=function(_,E){return function(){return this.parseList(_,E)}},Me.list32=function(_,E){return function(){return this.parseList32(_,E)}},Me.recordList=function(_,E){return function(){return this.parseRecordList(_,E)}},Me.recordList32=function(_,E){return function(){return this.parseRecordList32(_,E)}},Me.pointer=function(_){return function(){return this.parsePointer(_)}},Me.pointer32=function(_){return function(){return this.parsePointer32(_)}},Me.tag=Me.prototype.parseTag,Me.byte=Me.prototype.parseByte,Me.uShort=Me.offset16=Me.prototype.parseUShort,Me.uShortList=Me.prototype.parseUShortList,Me.uLong=Me.offset32=Me.prototype.parseULong,Me.uLongList=Me.prototype.parseULongList,Me.struct=Me.prototype.parseStruct,Me.coverage=Me.prototype.parseCoverage,Me.classDef=Me.prototype.parseClassDef;var ze={reserved:Me.uShort,reqFeatureIndex:Me.uShort,featureIndexes:Me.uShortList},Re=(Me.prototype.parseScriptList=function(){return this.parsePointer(Me.recordList({tag:Me.tag,script:Me.pointer({defaultLangSys:Me.pointer(ze),langSysRecords:Me.recordList({tag:Me.tag,langSys:Me.pointer(ze)})})}))||[]},Me.prototype.parseFeatureList=function(){return this.parsePointer(Me.recordList({tag:Me.tag,feature:Me.pointer({featureParams:Me.offset16,lookupListIndexes:Me.uShortList})}))||[]},Me.prototype.parseLookupList=function(_){return this.parsePointer(Me.list(Me.pointer(function(){var E=this.parseUShort(),L=(O.argument(1<=E&&E<=9,"GPOS/GSUB lookup type "+E+" unknown."),this.parseUShort()),R=16&L;return{lookupType:E,lookupFlag:L,subtables:this.parseList(Me.pointer(_[E])),markFilteringSet:R?this.parseUShort():void 0}})))||[]},Me.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var _=this.parseUShort(),E=this.parseUShort();return O.argument(_===1&&E<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:Me.offset32,featureTableSubstitutionOffset:Me.offset32})})||[]},{getByte:Et,getCard8:Et,getUShort:de,getCard16:de,getShort:function(_,E){return _.getInt16(E,!1)},getULong:le,getFixed:Ue,getTag:function(_,E){for(var L="",R=E;R<E+4;R+=1)L+=String.fromCharCode(_.getInt8(R));return L},getOffset:function(_,E,L){for(var R=0,z=0;z<L;z+=1)R=(R<<=8)+_.getUint8(E+z);return R},getBytes:function(_,E,L){for(var R=[],z=E;z<L;z+=1)R.push(_.getUint8(z));return R},bytesToString:function(_){for(var E="",L=0;L<_.length;L+=1)E+=String.fromCharCode(_[L]);return E},Parser:Me}),q={parse:function(_,E){for(var L={},R=(L.version=Re.getUShort(_,E),O.argument(L.version===0,"cmap table version should be 0."),L.numTables=Re.getUShort(_,E+2),-1),z=L.numTables-1;0<=z;--z){var Y=Re.getUShort(_,E+4+8*z),K=Re.getUShort(_,E+4+8*z+2);if(Y===3&&(K===0||K===1||K===10)||Y===0&&(K===0||K===1||K===2||K===3||K===4)){R=Re.getULong(_,E+4+8*z+4);break}}if(R===-1)throw new Error("No valid cmap sub-tables found.");var ue=new Re.Parser(_,E+R);if(L.format=ue.parseUShort(),L.format===12){var be,ve=L,ke=ue;ke.parseUShort(),ve.length=ke.parseULong(),ve.language=ke.parseULong(),ve.groupCount=be=ke.parseULong(),ve.glyphIndexMap={};for(var We=0;We<be;We+=1)for(var Ge=ke.parseULong(),je=ke.parseULong(),vt=ke.parseULong(),Qe=Ge;Qe<=je;Qe+=1)ve.glyphIndexMap[Qe]=vt,vt++}else{if(L.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+L.format+").");var dt=L,Ye=_,Xe=E,Nt=R;dt.length=ue.parseUShort(),dt.language=ue.parseUShort(),dt.segCount=Zt=ue.parseUShort()>>1,ue.skip("uShort",3),dt.glyphIndexMap={};for(var Zt,Ft=new Re.Parser(Ye,Xe+Nt+14),Bt=new Re.Parser(Ye,Xe+Nt+16+2*Zt),_e=new Re.Parser(Ye,Xe+Nt+16+4*Zt),Ie=new Re.Parser(Ye,Xe+Nt+16+6*Zt),$e=Xe+Nt+16+8*Zt,rt=0;rt<Zt-1;rt+=1)for(var pt=void 0,Lt=Ft.parseUShort(),Pt=Bt.parseUShort(),At=_e.parseShort(),Tt=Ie.parseUShort(),Gt=Pt;Gt<=Lt;Gt+=1)Tt!==0?($e=($e=Ie.offset+Ie.relativeOffset-2)+Tt+2*(Gt-Pt),(pt=Re.getUShort(Ye,$e))!==0&&(pt=pt+At&65535)):pt=Gt+At&65535,dt.glyphIndexMap[Gt]=pt}return L},make:function(_){for(var E=!0,L=_.length-1;0<L;--L)if(65535<_.get(L).unicode){console.log("Adding CMAP format 12 (needed!)"),E=!1;break}var R,z,Y=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:E?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:E?12:20}],K=(Y=(Y=E?Y:Y.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new qe.Table("cmap",Y));for(K.segments=[],L=0;L<_.length;L+=1){for(var ue=_.get(L),be=0;be<ue.unicodes.length;be+=1)R=ue.unicodes[be],z=L,K.segments.push({end:R,start:R,delta:-(R-z),offset:0,glyphIndex:z});K.segments=K.segments.sort(function(Xe,Nt){return Xe.start-Nt.start})}K.segments.push({end:65535,start:65535,delta:1,offset:0});var ve=K.segments.length,ke=0,We=[],Ge=[],je=[],vt=[],Qe=[],dt=[];for(L=0;L<ve;L+=1){var Ye=K.segments[L];Ye.end<=65535&&Ye.start<=65535?(We=We.concat({name:"end_"+L,type:"USHORT",value:Ye.end}),Ge=Ge.concat({name:"start_"+L,type:"USHORT",value:Ye.start}),je=je.concat({name:"idDelta_"+L,type:"SHORT",value:Ye.delta}),vt=vt.concat({name:"idRangeOffset_"+L,type:"USHORT",value:Ye.offset}),Ye.glyphId!==void 0&&(Qe=Qe.concat({name:"glyph_"+L,type:"USHORT",value:Ye.glyphId}))):ke+=1,E||Ye.glyphIndex===void 0||(dt=(dt=(dt=dt.concat({name:"cmap12Start_"+L,type:"ULONG",value:Ye.start})).concat({name:"cmap12End_"+L,type:"ULONG",value:Ye.end})).concat({name:"cmap12Glyph_"+L,type:"ULONG",value:Ye.glyphIndex}))}return K.segCountX2=2*(ve-ke),K.searchRange=2*Math.pow(2,Math.floor(Math.log(ve-ke)/Math.log(2))),K.entrySelector=Math.log(K.searchRange/2)/Math.log(2),K.rangeShift=K.segCountX2-K.searchRange,K.fields=K.fields.concat(We),K.fields.push({name:"reservedPad",type:"USHORT",value:0}),K.fields=K.fields.concat(Ge),K.fields=K.fields.concat(je),K.fields=K.fields.concat(vt),K.fields=K.fields.concat(Qe),K.cmap4Length=14+2*We.length+2+2*Ge.length+2*je.length+2*vt.length+2*Qe.length,E||(Y=16+4*dt.length,K.cmap12Offset=20+K.cmap4Length,K.fields=K.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:Y},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:dt.length/3}]),K.fields=K.fields.concat(dt)),K}},te=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],ee=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],ae=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],Se=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function Le(_){this.font=_}function Ne(_){this.cmap=_}function at(_,E){this.encoding=_,this.charset=E}function ft(_){switch(_.version){case 1:this.names=Se.slice();break;case 2:this.names=new Array(_.numberOfGlyphs);for(var E=0;E<_.numberOfGlyphs;E++)_.glyphNameIndex[E]<Se.length?this.names[E]=Se[_.glyphNameIndex[E]]:this.names[E]=_.names[_.glyphNameIndex[E]-Se.length];break;case 2.5:this.names=new Array(_.numberOfGlyphs);for(var L=0;L<_.numberOfGlyphs;L++)this.names[L]=Se[L+_.glyphNameIndex[L]];break;default:this.names=[]}}Le.prototype.charToGlyphIndex=function(_){var E=_.codePointAt(0),L=this.font.glyphs;if(L){for(var R=0;R<L.length;R+=1)for(var z=L.get(R),Y=0;Y<z.unicodes.length;Y+=1)if(z.unicodes[Y]===E)return R}return null},Ne.prototype.charToGlyphIndex=function(_){return this.cmap.glyphIndexMap[_.codePointAt(0)]||0},at.prototype.charToGlyphIndex=function(_){return _=_.codePointAt(0),_=this.encoding[_],this.charset.indexOf(_)},ft.prototype.nameToGlyphIndex=function(_){return this.names.indexOf(_)},ft.prototype.glyphIndexToName=function(_){return this.names[_]};var bt={line:function(_,E,L,R,z){_.beginPath(),_.moveTo(E,L),_.lineTo(R,z),_.stroke()}};function Ee(_){this.bindConstructorValues(_)}function Ke(_,E,L){Object.defineProperty(_,E,{get:function(){return _.path,_[L]},set:function(R){_[L]=R},enumerable:!0,configurable:!0})}function ot(_,E){if(this.font=_,this.glyphs={},Array.isArray(E))for(var L=0;L<E.length;L++)this.glyphs[L]=E[L];this.length=E&&E.length||0}Ee.prototype.bindConstructorValues=function(_){var E;this.index=_.index||0,this.name=_.name||null,this.unicode=_.unicode||void 0,this.unicodes=_.unicodes||_.unicode!==void 0?[_.unicode]:[],_.xMin&&(this.xMin=_.xMin),_.yMin&&(this.yMin=_.yMin),_.xMax&&(this.xMax=_.xMax),_.yMax&&(this.yMax=_.yMax),_.advanceWidth&&(this.advanceWidth=_.advanceWidth),Object.defineProperty(this,"path",(_=_.path,E=_||new ne,{configurable:!0,get:function(){return E=typeof E=="function"?E():E},set:function(L){E=L}}))},Ee.prototype.addUnicode=function(_){this.unicodes.length===0&&(this.unicode=_),this.unicodes.push(_)},Ee.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},Ee.prototype.getPath=function(_,E,L,R,z){_=_!==void 0?_:0,E=E!==void 0?E:0,L=L!==void 0?L:72;for(var Y,K,ue=(R=R||{}).xScale,be=R.yScale,ve=((Y=R.hinting&&z&&z.hinting?this.path&&z.hinting.exec(this,L):Y)?(K=z.hinting.getCommands(Y),_=Math.round(_),E=Math.round(E),ue=be=1):(K=this.path.commands,R=1/this.path.unitsPerEm*L,ue===void 0&&(ue=R),be===void 0&&(be=R)),new ne),ke=0;ke<K.length;ke+=1){var We=K[ke];We.type==="M"?ve.moveTo(_+We.x*ue,E+-We.y*be):We.type==="L"?ve.lineTo(_+We.x*ue,E+-We.y*be):We.type==="Q"?ve.quadraticCurveTo(_+We.x1*ue,E+-We.y1*be,_+We.x*ue,E+-We.y*be):We.type==="C"?ve.curveTo(_+We.x1*ue,E+-We.y1*be,_+We.x2*ue,E+-We.y2*be,_+We.x*ue,E+-We.y*be):We.type==="Z"&&ve.closePath()}return ve},Ee.prototype.getContours=function(){if(this.points===void 0)return[];for(var _=[],E=[],L=0;L<this.points.length;L+=1){var R=this.points[L];E.push(R),R.lastPointOfContour&&(_.push(E),E=[])}return O.argument(E.length===0,"There are still points left in the current contour."),_},Ee.prototype.getMetrics=function(){for(var _=this.path.commands,E=[],L=[],R=0;R<_.length;R+=1){var z=_[R];z.type!=="Z"&&(E.push(z.x),L.push(z.y)),z.type!=="Q"&&z.type!=="C"||(E.push(z.x1),L.push(z.y1)),z.type==="C"&&(E.push(z.x2),L.push(z.y2))}var Y={xMin:Math.min.apply(null,E),yMin:Math.min.apply(null,L),xMax:Math.max.apply(null,E),yMax:Math.max.apply(null,L),leftSideBearing:this.leftSideBearing};return isFinite(Y.xMin)||(Y.xMin=0),isFinite(Y.xMax)||(Y.xMax=this.advanceWidth),isFinite(Y.yMin)||(Y.yMin=0),isFinite(Y.yMax)||(Y.yMax=0),Y.rightSideBearing=this.advanceWidth-Y.leftSideBearing-(Y.xMax-Y.xMin),Y},Ee.prototype.draw=function(_,E,L,R,z){this.getPath(E,L,R,z).draw(_)},Ee.prototype.drawPoints=function(_,E,L,R){function z(ke,We,Ge,je){var vt=2*Math.PI;_.beginPath();for(var Qe=0;Qe<ke.length;Qe+=1)_.moveTo(We+ke[Qe].x*je,Ge+ke[Qe].y*je),_.arc(We+ke[Qe].x*je,Ge+ke[Qe].y*je,2,0,vt,!1);_.closePath(),_.fill()}E=E!==void 0?E:0,L=L!==void 0?L:0;for(var R=1/this.path.unitsPerEm*(R=R!==void 0?R:24),Y=[],K=[],ue=this.path,be=0;be<ue.commands.length;be+=1){var ve=ue.commands[be];ve.x!==void 0&&Y.push({x:ve.x,y:-ve.y}),ve.x1!==void 0&&K.push({x:ve.x1,y:-ve.y1}),ve.x2!==void 0&&K.push({x:ve.x2,y:-ve.y2})}_.fillStyle="blue",z(Y,E,L,R),_.fillStyle="red",z(K,E,L,R)},Ee.prototype.drawMetrics=function(_,E,L,R){E=E!==void 0?E:0,L=L!==void 0?L:0,R=1/this.path.unitsPerEm*(R=R!==void 0?R:24),_.lineWidth=1,_.strokeStyle="black",bt.line(_,E,-1e4,E,1e4),bt.line(_,-1e4,L,1e4,L);var z=this.xMin||0,Y=this.yMin||0,K=this.xMax||0,ue=this.yMax||0,be=this.advanceWidth||0;_.strokeStyle="blue",bt.line(_,E+z*R,-1e4,E+z*R,1e4),bt.line(_,E+K*R,-1e4,E+K*R,1e4),bt.line(_,-1e4,L+-Y*R,1e4,L+-Y*R),bt.line(_,-1e4,L+-ue*R,1e4,L+-ue*R),_.strokeStyle="green",bt.line(_,E+be*R,-1e4,E+be*R,1e4)},ot.prototype.get=function(_){return typeof this.glyphs[_]=="function"&&(this.glyphs[_]=this.glyphs[_]()),this.glyphs[_]},ot.prototype.push=function(_,E){this.glyphs[_]=E,this.length++};var ut={GlyphSet:ot,glyphLoader:function(_,E){return new Ee({index:E,font:_})},ttfGlyphLoader:function(_,E,L,R,z,Y){return function(){var K=new Ee({index:E,font:_});return K.path=function(){L(K,R,z);var ue=Y(_.glyphs,K);return ue.unitsPerEm=_.unitsPerEm,ue},Ke(K,"xMin","_xMin"),Ke(K,"xMax","_xMax"),Ke(K,"yMin","_yMin"),Ke(K,"yMax","_yMax"),K}},cffGlyphLoader:function(_,E,L,R){return function(){var z=new Ee({index:E,font:_});return z.path=function(){var Y=L(_,z,R);return Y.unitsPerEm=_.unitsPerEm,Y},z}}};function _t(_){return _=_.length<1240?107:_.length<33900?1131:32768,_}function jt(_,E,L){var R,z=[],Y=[],K=Re.getCard16(_,E);if(K!==0){for(var ue=Re.getByte(_,E+2),be=E+(K+1)*ue+2,ve=E+3,ke=0;ke<K+1;ke+=1)z.push(Re.getOffset(_,ve,ue)),ve+=ue;R=be+z[K]}else R=E+2;for(var We=0;We<z.length-1;We+=1){var Ge=Re.getBytes(_,be+z[We],be+z[We+1]);L&&(Ge=L(Ge)),Y.push(Ge)}return{objects:Y,startOffset:E,endOffset:R}}function $t(_,E){if(E===28)return _.parseByte()<<8|_.parseByte();if(E===29)return _.parseByte()<<24|_.parseByte()<<16|_.parseByte()<<8|_.parseByte();if(E===30){for(var L=_,R="",z=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var K=L.parseByte(),Y=K>>4,K=15&K;if(Y==15||(R+=z[Y],K==15))break;R+=z[K]}return parseFloat(R)}if(32<=E&&E<=246)return E-139;if(247<=E&&E<=250)return 256*(E-247)+_.parseByte()+108;if(251<=E&&E<=254)return 256*-(E-251)-_.parseByte()-108;throw new Error("Invalid b0 "+E)}function ar(_,E,L){var R=new Re.Parser(_,E=E!==void 0?E:0),z=[],Y=[];for(L=L!==void 0?L:_.length;R.relativeOffset<L;){var K=R.parseByte();K<=21?(K===12&&(K=1200+R.parseByte()),z.push([K,Y]),Y=[]):Y.push($t(R,K))}for(var ue=z,be={},ve=0;ve<ue.length;ve+=1){var ke=ue[ve][0],We=ue[ve][1],Ge=void 0,Ge=We.length===1?We[0]:We;if(be.hasOwnProperty(ke)&&!isNaN(be[ke]))throw new Error("Object "+be+" already has key "+ke);be[ke]=Ge}return be}function fr(_,E){return E=E<=390?te[E]:_[E-391]}function Ut(_,E,L){for(var R,z={},Y=0;Y<E.length;Y+=1){var K=E[Y];if(Array.isArray(K.type)){var ue=[];ue.length=K.type.length;for(var be=0;be<K.type.length;be++)(R=_[K.op]!==void 0?_[K.op][be]:void 0)===void 0&&(R=K.value!==void 0&&K.value[be]!==void 0?K.value[be]:null),K.type[be]==="SID"&&(R=fr(L,R)),ue[be]=R;z[K.name]=ue}else(R=_[K.op])===void 0&&(R=K.value!==void 0?K.value:null),K.type==="SID"&&(R=fr(L,R)),z[K.name]=R}return z}var er=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Yt=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function _r(_,E,L,R){return Ut(ar(_,E,L),Yt,R)}function Ar(_,E,L,R){for(var z=[],Y=0;Y<L.length;Y+=1){var K=new DataView(new Uint8Array(L[Y]).buffer),K=(ue=R,Ut(ar(K,0,K.byteLength),er,ue)),ue=(K._subrs=[],K._subrsBias=0,K.private[0]),be=K.private[1];ue!==0&&be!==0&&(ue=_r(_,be+E,ue,R),K._defaultWidthX=ue.defaultWidthX,K._nominalWidthX=ue.nominalWidthX,ue.subrs!==0&&(be=jt(_,be+ue.subrs+E),K._subrs=be.objects,K._subrsBias=_t(K._subrs)),K._privateDict=ue),z.push(K)}return z}function hr(_,E,L){var R,z,Y,K,ue,be,ve,ke,We,Ge=new ne,je=[],vt=0,Qe=!1,dt=!1,Ye=0,Xe=0,Nt=(We=(_.isCIDFont?(ue=_.tables.cff.topDict._fdSelect[E.index],ue=_.tables.cff.topDict._fdArray[ue],be=ue._subrs,ve=ue._subrsBias,ke=ue._defaultWidthX,ue):(be=_.tables.cff.topDict._subrs,ve=_.tables.cff.topDict._subrsBias,ke=_.tables.cff.topDict._defaultWidthX,_.tables.cff.topDict))._nominalWidthX,ke);function Zt(Bt,_e){dt&&Ge.closePath(),Ge.moveTo(Bt,_e),dt=!0}function Ft(){je.length%2==0||Qe||(Nt=je.shift()+We),vt+=je.length>>1,je.length=0,Qe=!0}return function Bt(_e){for(var Ie,$e,rt,pt,Lt,Pt,At,Tt,Gt,zt,It,Xt,kt=0;kt<_e.length;){var sr=_e[kt];switch(kt+=1,sr){case 1:case 3:Ft();break;case 4:1<je.length&&!Qe&&(Nt=je.shift()+We,Qe=!0),Xe+=je.pop(),Zt(Ye,Xe);break;case 5:for(;0<je.length;)Ye+=je.shift(),Xe+=je.shift(),Ge.lineTo(Ye,Xe);break;case 6:for(;0<je.length&&(Ye+=je.shift(),Ge.lineTo(Ye,Xe),je.length!==0);)Xe+=je.shift(),Ge.lineTo(Ye,Xe);break;case 7:for(;0<je.length&&(Xe+=je.shift(),Ge.lineTo(Ye,Xe),je.length!==0);)Ye+=je.shift(),Ge.lineTo(Ye,Xe);break;case 8:for(;0<je.length;)R=Ye+je.shift(),z=Xe+je.shift(),Y=R+je.shift(),K=z+je.shift(),Ye=Y+je.shift(),Xe=K+je.shift(),Ge.curveTo(R,z,Y,K,Ye,Xe);break;case 10:Lt=je.pop()+ve,(Pt=be[Lt])&&Bt(Pt);break;case 11:return;case 12:switch(sr=_e[kt],kt+=1,sr){case 35:R=Ye+je.shift(),z=Xe+je.shift(),Y=R+je.shift(),K=z+je.shift(),At=Y+je.shift(),Tt=K+je.shift(),Gt=At+je.shift(),zt=Tt+je.shift(),It=Gt+je.shift(),Xt=zt+je.shift(),Ye=It+je.shift(),Xe=Xt+je.shift(),je.shift(),Ge.curveTo(R,z,Y,K,At,Tt),Ge.curveTo(Gt,zt,It,Xt,Ye,Xe);break;case 34:R=Ye+je.shift(),z=Xe,Y=R+je.shift(),K=z+je.shift(),At=Y+je.shift(),Tt=K,Gt=At+je.shift(),zt=K,It=Gt+je.shift(),Xt=Xe,Ye=It+je.shift(),Ge.curveTo(R,z,Y,K,At,Tt),Ge.curveTo(Gt,zt,It,Xt,Ye,Xe);break;case 36:R=Ye+je.shift(),z=Xe+je.shift(),Y=R+je.shift(),K=z+je.shift(),At=Y+je.shift(),Tt=K,Gt=At+je.shift(),zt=K,It=Gt+je.shift(),Xt=zt+je.shift(),Ye=It+je.shift(),Ge.curveTo(R,z,Y,K,At,Tt),Ge.curveTo(Gt,zt,It,Xt,Ye,Xe);break;case 37:R=Ye+je.shift(),z=Xe+je.shift(),Y=R+je.shift(),K=z+je.shift(),At=Y+je.shift(),Tt=K+je.shift(),Gt=At+je.shift(),zt=Tt+je.shift(),It=Gt+je.shift(),Xt=zt+je.shift(),Math.abs(It-Ye)>Math.abs(Xt-Xe)?Ye=It+je.shift():Xe=Xt+je.shift(),Ge.curveTo(R,z,Y,K,At,Tt),Ge.curveTo(Gt,zt,It,Xt,Ye,Xe);break;default:console.log("Glyph "+E.index+": unknown operator 1200"+sr),je.length=0}break;case 14:0<je.length&&!Qe&&(Nt=je.shift()+We,Qe=!0),dt&&(Ge.closePath(),dt=!1);break;case 18:Ft();break;case 19:case 20:Ft(),kt+=vt+7>>3;break;case 21:2<je.length&&!Qe&&(Nt=je.shift()+We,Qe=!0),Xe+=je.pop(),Zt(Ye+=je.pop(),Xe);break;case 22:1<je.length&&!Qe&&(Nt=je.shift()+We,Qe=!0),Zt(Ye+=je.pop(),Xe);break;case 23:Ft();break;case 24:for(;2<je.length;)R=Ye+je.shift(),z=Xe+je.shift(),Y=R+je.shift(),K=z+je.shift(),Ye=Y+je.shift(),Xe=K+je.shift(),Ge.curveTo(R,z,Y,K,Ye,Xe);Ye+=je.shift(),Xe+=je.shift(),Ge.lineTo(Ye,Xe);break;case 25:for(;6<je.length;)Ye+=je.shift(),Xe+=je.shift(),Ge.lineTo(Ye,Xe);R=Ye+je.shift(),z=Xe+je.shift(),Y=R+je.shift(),K=z+je.shift(),Ye=Y+je.shift(),Xe=K+je.shift(),Ge.curveTo(R,z,Y,K,Ye,Xe);break;case 26:for(je.length%2&&(Ye+=je.shift());0<je.length;)R=Ye,z=Xe+je.shift(),Y=R+je.shift(),K=z+je.shift(),Ye=Y,Xe=K+je.shift(),Ge.curveTo(R,z,Y,K,Ye,Xe);break;case 27:for(je.length%2&&(Xe+=je.shift());0<je.length;)R=Ye+je.shift(),z=Xe,Y=R+je.shift(),K=z+je.shift(),Ye=Y+je.shift(),Xe=K,Ge.curveTo(R,z,Y,K,Ye,Xe);break;case 28:Ie=_e[kt],$e=_e[kt+1],je.push((Ie<<24|$e<<16)>>16),kt+=2;break;case 29:Lt=je.pop()+_.gsubrsBias,(Pt=_.gsubrs[Lt])&&Bt(Pt);break;case 30:for(;0<je.length&&(R=Ye,z=Xe+je.shift(),Y=R+je.shift(),K=z+je.shift(),Ye=Y+je.shift(),Xe=K+(je.length===1?je.shift():0),Ge.curveTo(R,z,Y,K,Ye,Xe),je.length!==0);)R=Ye+je.shift(),z=Xe,Y=R+je.shift(),K=z+je.shift(),Xe=K+je.shift(),Ye=Y+(je.length===1?je.shift():0),Ge.curveTo(R,z,Y,K,Ye,Xe);break;case 31:for(;0<je.length&&(R=Ye+je.shift(),z=Xe,Y=R+je.shift(),K=z+je.shift(),Xe=K+je.shift(),Ye=Y+(je.length===1?je.shift():0),Ge.curveTo(R,z,Y,K,Ye,Xe),je.length!==0);)R=Ye,z=Xe+je.shift(),Y=R+je.shift(),K=z+je.shift(),Ye=Y+je.shift(),Xe=K+(je.length===1?je.shift():0),Ge.curveTo(R,z,Y,K,Ye,Xe);break;default:sr<32?console.log("Glyph "+E.index+": unknown operator "+sr):sr<247?je.push(sr-139):sr<251?(Ie=_e[kt],kt+=1,je.push(256*(sr-247)+Ie+108)):sr<255?(Ie=_e[kt],kt+=1,je.push(256*-(sr-251)-Ie-108)):(Ie=_e[kt],$e=_e[kt+1],rt=_e[kt+2],pt=_e[kt+3],kt+=4,je.push((Ie<<24|$e<<16|rt<<8|pt)/65536))}}}(L),E.advanceWidth=Nt,Ge}function Pr(_,E){var L,R=te.indexOf(_);return 0<=R&&(L=R),0<=(R=E.indexOf(_))?L=R+te.length:(L=te.length+E.length,E.push(_)),L}function Te(_,E,L){for(var R={},z=0;z<_.length;z+=1){var Y=_[z],K=E[Y.name];K===void 0||function ue(be,ve){if(be===ve)return 1;if(Array.isArray(be)&&Array.isArray(ve)&&be.length===ve.length){for(var ke=0;ke<be.length;ke+=1)if(!ue(be[ke],ve[ke]))return;return 1}}(K,Y.value)||(Y.type==="SID"&&(K=Pr(K,L)),R[Y.op]={name:Y.name,type:Y.type,value:K})}return R}function nt(_,E){var L=new qe.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return L.dict=Te(er,_,E),L}function gt(_){var E=new qe.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return E.topDicts=[{name:"topDict_0",type:"TABLE",value:_}],E}function Je(_){for(var E=new qe.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),L=0;L<_.length;L+=1){var R=_.get(L),z=function(Y){for(var K=[],ue=Y.path,be=(K.push({name:"width",type:"NUMBER",value:Y.advanceWidth}),0),ve=0,ke=0;ke<ue.commands.length;ke+=1){var We,Ge,je,vt,Qe=void 0,dt=void 0,Ye=ue.commands[ke];(Ye=Ye.type==="Q"?{type:"C",x:Ye.x,y:Ye.y,x1:1/3*be+2/3*Ye.x1,y1:1/3*ve+2/3*Ye.y1,x2:1/3*Ye.x+2/3*Ye.x1,y2:1/3*Ye.y+2/3*Ye.y1}:Ye).type==="M"?(Qe=Math.round(Ye.x-be),dt=Math.round(Ye.y-ve),K.push({name:"dx",type:"NUMBER",value:Qe}),K.push({name:"dy",type:"NUMBER",value:dt}),K.push({name:"rmoveto",type:"OP",value:21}),be=Math.round(Ye.x),ve=Math.round(Ye.y)):Ye.type==="L"?(Qe=Math.round(Ye.x-be),dt=Math.round(Ye.y-ve),K.push({name:"dx",type:"NUMBER",value:Qe}),K.push({name:"dy",type:"NUMBER",value:dt}),K.push({name:"rlineto",type:"OP",value:5}),be=Math.round(Ye.x),ve=Math.round(Ye.y)):Ye.type==="C"&&(We=Math.round(Ye.x1-be),Ge=Math.round(Ye.y1-ve),je=Math.round(Ye.x2-Ye.x1),vt=Math.round(Ye.y2-Ye.y1),Qe=Math.round(Ye.x-Ye.x2),dt=Math.round(Ye.y-Ye.y2),K.push({name:"dx1",type:"NUMBER",value:We}),K.push({name:"dy1",type:"NUMBER",value:Ge}),K.push({name:"dx2",type:"NUMBER",value:je}),K.push({name:"dy2",type:"NUMBER",value:vt}),K.push({name:"dx",type:"NUMBER",value:Qe}),K.push({name:"dy",type:"NUMBER",value:dt}),K.push({name:"rrcurveto",type:"OP",value:8}),be=Math.round(Ye.x),ve=Math.round(Ye.y))}return K.push({name:"endchar",type:"OP",value:14}),K}(R);E.charStrings.push({name:R.name,type:"CHARSTRING",value:z})}return E}var yt={parse:function(_,E,L){L.tables.cff={},ue=_,R=E,(z={}).formatMajor=Re.getCard8(ue,R),z.formatMinor=Re.getCard8(ue,R+1),z.size=Re.getCard8(ue,R+2),z.offsetSize=Re.getCard8(ue,R+3),z.startOffset=R,z.endOffset=R+4;var ue=jt(_,z.endOffset,Re.bytesToString),R=jt(_,ue.endOffset),z=jt(_,R.endOffset,Re.bytesToString),ue=jt(_,z.endOffset);if(L.gsubrs=ue.objects,L.gsubrsBias=_t(L.gsubrs),(ue=Ar(_,E,R.objects,z.objects)).length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+ue.length);if(R=ue[0],(L.tables.cff.topDict=R)._privateDict&&(L.defaultWidthX=R._privateDict.defaultWidthX,L.nominalWidthX=R._privateDict.nominalWidthX),R.ros[0]!==void 0&&R.ros[1]!==void 0&&(L.isCIDFont=!0),L.isCIDFont){var ue=R.fdArray,Y=R.fdSelect;if(ue===0||Y===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");ue=Ar(_,E,jt(_,ue+=E).objects,z.objects),R._fdArray=ue,R._fdSelect=function(Ge,je,vt,Qe){var dt,Ye=[],Xe=new Re.Parser(Ge,je);if((Ge=Xe.parseCard8())===0)for(var Nt=0;Nt<vt;Nt++){if(Qe<=(dt=Xe.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+dt+" (FD count "+Qe+")");Ye.push(dt)}else{if(Ge!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+Ge);var Zt,Ft=Xe.parseCard16(),Bt=Xe.parseCard16();if(Bt!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+Bt);for(var _e=0;_e<Ft;_e++){if(dt=Xe.parseCard8(),Zt=Xe.parseCard16(),Qe<=dt)throw new Error("CFF table CID Font FDSelect has bad FD index value "+dt+" (FD count "+Qe+")");if(vt<Zt)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+Zt);for(;Bt<Zt;Bt++)Ye.push(dt);Bt=Zt}if(Zt!==vt)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+Zt)}return Ye}(_,Y+=E,L.numGlyphs,ue.length)}var Y=E+R.private[1],ue=_r(_,Y,R.private[0],z.objects),K=(L.defaultWidthX=ue.defaultWidthX,L.nominalWidthX=ue.nominalWidthX,ue.subrs!==0?(Y=jt(_,Y+ue.subrs),L.subrs=Y.objects,L.subrsBias=_t(L.subrs)):(L.subrs=[],L.subrsBias=0),jt(_,E+R.charStrings)),ue=(L.nGlyphs=K.objects.length,function(ke,We,Ge,je){var vt=new Re.Parser(ke,We),Qe=(--Ge,[".notdef"]);if((ke=vt.parseCard8())===0)for(var dt=0;dt<Ge;dt+=1)Ye=vt.parseSID(),Qe.push(fr(je,Ye));else if(ke===1)for(;Qe.length<=Ge;)for(var Ye=vt.parseSID(),Xe=vt.parseCard8(),Nt=0;Nt<=Xe;Nt+=1)Qe.push(fr(je,Ye)),Ye+=1;else{if(ke!==2)throw new Error("Unknown charset format "+ke);for(;Qe.length<=Ge;){Ye=vt.parseSID(),Xe=vt.parseCard16();for(var Zt=0;Zt<=Xe;Zt+=1)Qe.push(fr(je,Ye)),Ye+=1}}return Qe}(_,E+R.charset,L.nGlyphs,z.objects));R.encoding===0?L.cffEncoding=new at(ee,ue):R.encoding===1?L.cffEncoding=new at(ae,ue):L.cffEncoding=function(ke,We,Ge){var je={},vt=new Re.Parser(ke,We);if((ke=vt.parseCard8())===0)for(var Qe=vt.parseCard8(),dt=0;dt<Qe;dt+=1)je[Xe=vt.parseCard8()]=dt;else{if(ke!==1)throw new Error("Unknown encoding format "+ke);for(var Ye=vt.parseCard8(),Xe=1,Nt=0;Nt<Ye;Nt+=1)for(var Zt=vt.parseCard8(),Ft=vt.parseCard8(),Bt=Zt;Bt<=Zt+Ft;Bt+=1)je[Bt]=Xe,Xe+=1}return new at(je,Ge)}(_,E+R.encoding,ue),L.encoding=L.encoding||L.cffEncoding,L.glyphs=new ut.GlyphSet(L);for(var be=0;be<L.nGlyphs;be+=1){var ve=K.objects[be];L.glyphs.push(be,ut.cffGlyphLoader(L,be,hr,ve))}},make:function(_,ke){for(var L,R=new qe.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),z=1/ke.unitsPerEm,z={version:ke.version,fullName:ke.fullName,familyName:ke.familyName,weight:ke.weightName,fontBBox:ke.fontBBox||[0,0,0,0],fontMatrix:[z,0,0,z,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},Y=[],K=1;K<_.length;K+=1)L=_.get(K),Y.push(L.name);var ue,be,ve=[],ke=(R.header=new qe.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),R.nameIndex=function(Ge){var je=new qe.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);je.names=[];for(var vt=0;vt<Ge.length;vt+=1)je.names.push({name:"name_"+vt,type:"NAME",value:Ge[vt]});return je}([ke.postScriptName]),nt(z,ve)),We=(R.topDictIndex=gt(ke),R.globalSubrIndex=new qe.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),R.charsets=function(Ge,je){for(var vt=new qe.Record("Charsets",[{name:"format",type:"Card8",value:0}]),Qe=0;Qe<Ge.length;Qe+=1){var dt=Pr(Ge[Qe],je);vt.fields.push({name:"glyph_"+Qe,type:"SID",value:dt})}return vt}(Y,ve),R.charStringsIndex=Je(_),R.privateDict=(We={},ue=ve,(be=new qe.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=Te(Yt,We,ue),be),R.stringIndex=function(Ge){var je=new qe.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);je.strings=[];for(var vt=0;vt<Ge.length;vt+=1)je.strings.push({name:"string_"+vt,type:"STRING",value:Ge[vt]});return je}(ve),R.header.sizeOf()+R.nameIndex.sizeOf()+R.topDictIndex.sizeOf()+R.stringIndex.sizeOf()+R.globalSubrIndex.sizeOf());return z.charset=We,z.encoding=0,z.charStrings=z.charset+R.charsets.sizeOf(),z.private[1]=z.charStrings+R.charStringsIndex.sizeOf(),ke=nt(z,ve),R.topDictIndex=gt(ke),R}},Vt={parse:function(R,E){var L={},R=new Re.Parser(R,E);return L.version=R.parseVersion(),L.fontRevision=Math.round(1e3*R.parseFixed())/1e3,L.checkSumAdjustment=R.parseULong(),L.magicNumber=R.parseULong(),O.argument(L.magicNumber===1594834165,"Font header has wrong magic number."),L.flags=R.parseUShort(),L.unitsPerEm=R.parseUShort(),L.created=R.parseLongDateTime(),L.modified=R.parseLongDateTime(),L.xMin=R.parseShort(),L.yMin=R.parseShort(),L.xMax=R.parseShort(),L.yMax=R.parseShort(),L.macStyle=R.parseUShort(),L.lowestRecPPEM=R.parseUShort(),L.fontDirectionHint=R.parseShort(),L.indexToLocFormat=R.parseShort(),L.glyphDataFormat=R.parseShort(),L},make:function(_){var E=Math.round(new Date().getTime()/1e3)+2082844800,L=E;return _.createdTimestamp&&(L=_.createdTimestamp+2082844800),new qe.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:L},{name:"modified",type:"LONGDATETIME",value:E},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],_)}},xe={parse:function(R,E){var L={},R=new Re.Parser(R,E);return L.version=R.parseVersion(),L.ascender=R.parseShort(),L.descender=R.parseShort(),L.lineGap=R.parseShort(),L.advanceWidthMax=R.parseUShort(),L.minLeftSideBearing=R.parseShort(),L.minRightSideBearing=R.parseShort(),L.xMaxExtent=R.parseShort(),L.caretSlopeRise=R.parseShort(),L.caretSlopeRun=R.parseShort(),L.caretOffset=R.parseShort(),R.relativeOffset+=8,L.metricDataFormat=R.parseShort(),L.numberOfHMetrics=R.parseUShort(),L},make:function(_){return new qe.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],_)}},lt={parse:function(_,E,L,R,z){for(var Y,K,ue=new Re.Parser(_,E),be=0;be<R;be+=1){be<L&&(Y=ue.parseUShort(),K=ue.parseShort());var ve=z.get(be);ve.advanceWidth=Y,ve.leftSideBearing=K}},make:function(_){for(var E=new qe.Table("hmtx",[]),L=0;L<_.length;L+=1){var z=_.get(L),R=z.advanceWidth||0,z=z.leftSideBearing||0;E.fields.push({name:"advanceWidth_"+L,type:"USHORT",value:R}),E.fields.push({name:"leftSideBearing_"+L,type:"SHORT",value:z})}return E}},xt={make:function(_){for(var E=new qe.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:_.length}]),L="",R=12+4*_.length,z=0;z<_.length;++z){var Y=L.indexOf(_[z]);Y<0&&(Y=L.length,L+=_[z]),E.fields.push({name:"offset "+z,type:"USHORT",value:R+Y}),E.fields.push({name:"length "+z,type:"USHORT",value:_[z].length})}return E.fields.push({name:"stringPool",type:"CHARARRAY",value:L}),E},parse:function(_,E){for(var L=new Re.Parser(_,E),R=L.parseULong(),z=(O.argument(R===1,"Unsupported ltag table version."),L.skip("uLong",1),L.parseULong()),Y=[],K=0;K<z;K++){for(var ue="",be=E+L.parseUShort(),ve=L.parseUShort(),ke=be;ke<be+ve;++ke)ue+=String.fromCharCode(_.getInt8(ke));Y.push(ue)}return Y}},ct={parse:function(R,E){var L={},R=new Re.Parser(R,E);return L.version=R.parseVersion(),L.numGlyphs=R.parseUShort(),L.version===1&&(L.maxPoints=R.parseUShort(),L.maxContours=R.parseUShort(),L.maxCompositePoints=R.parseUShort(),L.maxCompositeContours=R.parseUShort(),L.maxZones=R.parseUShort(),L.maxTwilightPoints=R.parseUShort(),L.maxStorage=R.parseUShort(),L.maxFunctionDefs=R.parseUShort(),L.maxInstructionDefs=R.parseUShort(),L.maxStackElements=R.parseUShort(),L.maxSizeOfInstructions=R.parseUShort(),L.maxComponentElements=R.parseUShort(),L.maxComponentDepth=R.parseUShort()),L},make:function(_){return new qe.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:_}])}},Dt=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],et={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Ht={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},Mt={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},Kt="utf-16",Ct={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},Jt={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function Wt(_,E,L){switch(_){case 0:return Kt;case 1:return Jt[L]||Ct[E];case 3:if(E===1||E===10)return Kt}}function gr(_){var E,L={};for(E in _)L[_[E]]=parseInt(E);return L}function tr(_,E,L,R,z,Y){return new qe.Record("NameRecord",[{name:"platformID",type:"USHORT",value:_},{name:"encodingID",type:"USHORT",value:E},{name:"languageID",type:"USHORT",value:L},{name:"nameID",type:"USHORT",value:R},{name:"length",type:"USHORT",value:z},{name:"offset",type:"USHORT",value:Y}])}function Rr(_,E){if((L=function(Y,K){var ue=Y.length,be=K.length-ue+1;e:for(var ve=0;ve<be;ve++)for(;ve<be;ve++){for(var ke=0;ke<ue;ke++)if(K[ve+ke]!==Y[ke])continue e;return ve}return-1}(_,E))<0)for(var L=E.length,R=0,z=_.length;R<z;++R)E.push(_[R]);return L}var Or={parse:function(_,E,L){for(var R={},z=new Re.Parser(_,E),E=z.parseUShort(),Y=z.parseUShort(),K=z.offset+z.parseUShort(),ue=0;ue<Y;ue++){var vt=z.parseUShort(),be=z.parseUShort(),ve=z.parseUShort(),ke=z.parseUShort(),ke=Dt[ke]||ke,We=z.parseUShort(),Ge=z.parseUShort(),je=function(dt,Ye,Xe){switch(dt){case 0:if(Ye===65535)return"und";if(Xe)return Xe[Ye];break;case 1:return et[Ye];case 3:return Mt[Ye]}}(vt,ve,L),vt=Wt(vt,be,ve);vt!==void 0&&je!==void 0&&(be=void 0,(be=vt===Kt?V.UTF16(_,K+Ge,We):V.MACSTRING(_,K+Ge,We,vt))&&((ve=(ve=R[ke])===void 0?R[ke]={}:ve)[je]=be))}return E===1&&z.parseUShort(),R},make:function(_,E){var L,R=[],z={},Y=gr(Dt);for(L in _){var K=Y[L];if(K===void 0&&(K=L),Ge=parseInt(K),isNaN(Ge))throw new Error('Name table entry "'+L+'" does not exist, see nameTableNames for complete list.');z[Ge]=_[L],R.push(Ge)}for(var ue=gr(et),be=gr(Mt),ve=[],ke=[],We=0;We<R.length;We++){var Ge,je,vt=z[Ge=R[We]];for(je in vt){var Qe=vt[je],Zt=1,dt=ue[je],Ye=Ht[dt],Xe=Wt(Zt,Ye,dt),Xe=Z.MACSTRING(Qe,Xe),Nt=(Xe===void 0&&(Zt=0,(dt=E.indexOf(je))<0&&(dt=E.length,E.push(je)),Ye=4,Xe=Z.UTF16(Qe)),Rr(Xe,ke)),Zt=(ve.push(tr(Zt,Ye,dt,Ge,Xe.length,Nt)),be[je]);Zt!==void 0&&(dt=Rr(Ye=Z.UTF16(Qe),ke),ve.push(tr(3,1,Zt,Ge,Ye.length,dt)))}}ve.sort(function(_e,Ie){return _e.platformID-Ie.platformID||_e.encodingID-Ie.encodingID||_e.languageID-Ie.languageID||_e.nameID-Ie.nameID});for(var Ft=new qe.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:ve.length},{name:"stringOffset",type:"USHORT",value:6+12*ve.length}]),Bt=0;Bt<ve.length;Bt++)Ft.fields.push({name:"record_"+Bt,type:"RECORD",value:ve[Bt]});return Ft.fields.push({name:"strings",type:"LITERAL",value:ke}),Ft}},Fr=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],cr={parse:function(_,E){var L={},R=new Re.Parser(_,E);L.version=R.parseUShort(),L.xAvgCharWidth=R.parseShort(),L.usWeightClass=R.parseUShort(),L.usWidthClass=R.parseUShort(),L.fsType=R.parseUShort(),L.ySubscriptXSize=R.parseShort(),L.ySubscriptYSize=R.parseShort(),L.ySubscriptXOffset=R.parseShort(),L.ySubscriptYOffset=R.parseShort(),L.ySuperscriptXSize=R.parseShort(),L.ySuperscriptYSize=R.parseShort(),L.ySuperscriptXOffset=R.parseShort(),L.ySuperscriptYOffset=R.parseShort(),L.yStrikeoutSize=R.parseShort(),L.yStrikeoutPosition=R.parseShort(),L.sFamilyClass=R.parseShort(),L.panose=[];for(var z=0;z<10;z++)L.panose[z]=R.parseByte();return L.ulUnicodeRange1=R.parseULong(),L.ulUnicodeRange2=R.parseULong(),L.ulUnicodeRange3=R.parseULong(),L.ulUnicodeRange4=R.parseULong(),L.achVendID=String.fromCharCode(R.parseByte(),R.parseByte(),R.parseByte(),R.parseByte()),L.fsSelection=R.parseUShort(),L.usFirstCharIndex=R.parseUShort(),L.usLastCharIndex=R.parseUShort(),L.sTypoAscender=R.parseShort(),L.sTypoDescender=R.parseShort(),L.sTypoLineGap=R.parseShort(),L.usWinAscent=R.parseUShort(),L.usWinDescent=R.parseUShort(),1<=L.version&&(L.ulCodePageRange1=R.parseULong(),L.ulCodePageRange2=R.parseULong()),2<=L.version&&(L.sxHeight=R.parseShort(),L.sCapHeight=R.parseShort(),L.usDefaultChar=R.parseUShort(),L.usBreakChar=R.parseUShort(),L.usMaxContent=R.parseUShort()),L},make:function(_){return new qe.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],_)},unicodeRanges:Fr,getUnicodeRange:function(_){for(var E=0;E<Fr.length;E+=1){var L=Fr[E];if(_>=L.begin&&_<L.end)return E}return-1}},xr={parse:function(_,E){var L={},R=new Re.Parser(_,E);switch(L.version=R.parseVersion(),L.italicAngle=R.parseFixed(),L.underlinePosition=R.parseShort(),L.underlineThickness=R.parseShort(),L.isFixedPitch=R.parseULong(),L.minMemType42=R.parseULong(),L.maxMemType42=R.parseULong(),L.minMemType1=R.parseULong(),L.maxMemType1=R.parseULong(),L.version){case 1:L.names=Se.slice();break;case 2:L.numberOfGlyphs=R.parseUShort(),L.glyphNameIndex=new Array(L.numberOfGlyphs);for(var z=0;z<L.numberOfGlyphs;z++)L.glyphNameIndex[z]=R.parseUShort();L.names=[];for(var Y,K=0;K<L.numberOfGlyphs;K++)L.glyphNameIndex[K]>=Se.length&&(Y=R.parseChar(),L.names.push(R.parseString(Y)));break;case 2.5:L.numberOfGlyphs=R.parseUShort(),L.offset=new Array(L.numberOfGlyphs);for(var ue=0;ue<L.numberOfGlyphs;ue++)L.offset[ue]=R.parseChar()}return L},make:function(){return new qe.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},Mr=new Array(9),Vr=(Mr[1]=function(){var _=this.offset+this.relativeOffset,E=this.parseUShort();return E===1?{substFormat:1,coverage:this.parsePointer(Me.coverage),deltaGlyphId:this.parseUShort()}:E===2?{substFormat:2,coverage:this.parsePointer(Me.coverage),substitute:this.parseOffset16List()}:void O.assert(!1,"0x"+_.toString(16)+": lookup type 1 format must be 1 or 2.")},Mr[2]=function(){var _=this.parseUShort();return O.argument(_===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:_,coverage:this.parsePointer(Me.coverage),sequences:this.parseListOfLists()}},Mr[3]=function(){var _=this.parseUShort();return O.argument(_===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:_,coverage:this.parsePointer(Me.coverage),alternateSets:this.parseListOfLists()}},Mr[4]=function(){var _=this.parseUShort();return O.argument(_===1,"GSUB ligature table identifier-format must be 1"),{substFormat:_,coverage:this.parsePointer(Me.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},{sequenceIndex:Me.uShort,lookupListIndex:Me.uShort});Mr[5]=function(){var _,E,L=this.offset+this.relativeOffset,R=this.parseUShort();return R===1?{substFormat:R,coverage:this.parsePointer(Me.coverage),ruleSets:this.parseListOfLists(function(){var z=this.parseUShort(),Y=this.parseUShort();return{input:this.parseUShortList(z-1),lookupRecords:this.parseRecordList(Y,Vr)}})}:R===2?{substFormat:R,coverage:this.parsePointer(Me.coverage),classDef:this.parsePointer(Me.classDef),classSets:this.parseListOfLists(function(){var z=this.parseUShort(),Y=this.parseUShort();return{classes:this.parseUShortList(z-1),lookupRecords:this.parseRecordList(Y,Vr)}})}:R===3?(_=this.parseUShort(),E=this.parseUShort(),{substFormat:R,coverages:this.parseList(_,Me.pointer(Me.coverage)),lookupRecords:this.parseRecordList(E,Vr)}):void O.assert(!1,"0x"+L.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},Mr[6]=function(){var _=this.offset+this.relativeOffset,E=this.parseUShort();return E===1?{substFormat:1,coverage:this.parsePointer(Me.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Vr)}})}:E===2?{substFormat:2,coverage:this.parsePointer(Me.coverage),backtrackClassDef:this.parsePointer(Me.classDef),inputClassDef:this.parsePointer(Me.classDef),lookaheadClassDef:this.parsePointer(Me.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Vr)}})}:E===3?{substFormat:3,backtrackCoverage:this.parseList(Me.pointer(Me.coverage)),inputCoverage:this.parseList(Me.pointer(Me.coverage)),lookaheadCoverage:this.parseList(Me.pointer(Me.coverage)),lookupRecords:this.parseRecordList(Vr)}:void O.assert(!1,"0x"+_.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},Mr[7]=function(){var _=this.parseUShort(),_=(O.argument(_===1,"GSUB Extension Substitution subtable identifier-format must be 1"),this.parseUShort()),E=new Me(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:_,extension:Mr[_].call(E)}},Mr[8]=function(){var _=this.parseUShort();return O.argument(_===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:_,coverage:this.parsePointer(Me.coverage),backtrackCoverage:this.parseList(Me.pointer(Me.coverage)),lookaheadCoverage:this.parseList(Me.pointer(Me.coverage)),substitutes:this.parseUShortList()}};var Dr=new Array(9);Dr[1]=function(_){return _.substFormat===1?new qe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new qe.Coverage(_.coverage)},{name:"deltaGlyphID",type:"USHORT",value:_.deltaGlyphId}]):new qe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new qe.Coverage(_.coverage)}].concat(qe.ushortList("substitute",_.substitute)))},Dr[3]=function(_){return O.assert(_.substFormat===1,"Lookup type 3 substFormat must be 1."),new qe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new qe.Coverage(_.coverage)}].concat(qe.tableList("altSet",_.alternateSets,function(E){return new qe.Table("alternateSetTable",qe.ushortList("alternate",E))})))},Dr[4]=function(_){return O.assert(_.substFormat===1,"Lookup type 4 substFormat must be 1."),new qe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new qe.Coverage(_.coverage)}].concat(qe.tableList("ligSet",_.ligatureSets,function(E){return new qe.Table("ligatureSetTable",qe.tableList("ligature",E,function(L){return new qe.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:L.ligGlyph}].concat(qe.ushortList("component",L.components,L.components.length+1)))}))})))};var ai={parse:function(_,E){return E=(_=new Me(_,E=E||0)).parseVersion(1),O.argument(E===1||E===1.1,"Unsupported GSUB table version."),E===1?{version:E,scripts:_.parseScriptList(),features:_.parseFeatureList(),lookups:_.parseLookupList(Mr)}:{version:E,scripts:_.parseScriptList(),features:_.parseFeatureList(),lookups:_.parseLookupList(Mr),variations:_.parseFeatureVariationsList()}},make:function(_){return new qe.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new qe.ScriptList(_.scripts)},{name:"features",type:"TABLE",value:new qe.FeatureList(_.features)},{name:"lookups",type:"TABLE",value:new qe.LookupList(_.lookups,Dr)}])}},Zi={parse:function(_,E){for(var L=new Re.Parser(_,E),R=L.parseULong(),z=(O.argument(R===1,"Unsupported META table version."),L.parseULong(),L.parseULong(),L.parseULong()),Y={},K=0;K<z;K++){var ue=L.parseTag(),ve=L.parseULong(),be=L.parseULong(),ve=V.UTF8(_,E+ve,be);Y[ue]=ve}return Y},make:function(_){var E,L=Object.keys(_).length,R="",z=16+12*L,Y=new qe.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:z},{name:"numTags",type:"ULONG",value:L}]);for(E in _){var K=R.length;R+=_[E],Y.fields.push({name:"tag "+E,type:"TAG",value:E}),Y.fields.push({name:"offset "+E,type:"ULONG",value:z+K}),Y.fields.push({name:"length "+E,type:"ULONG",value:_[E].length})}return Y.fields.push({name:"stringPool",type:"CHARARRAY",value:R}),Y}};function qn(_){return Math.log(_)/Math.log(2)|0}function Ki(_){for(;_.length%4!=0;)_.push(0);for(var E=0,L=0;L<_.length;L+=4)E+=(_[L]<<24)+(_[L+1]<<16)+(_[L+2]<<8)+_[L+3];return E%=Math.pow(2,32)}function Mi(_,E,L,R){return new qe.Record("Table Record",[{name:"tag",type:"TAG",value:_!==void 0?_:""},{name:"checkSum",type:"ULONG",value:E!==void 0?E:0},{name:"offset",type:"ULONG",value:L!==void 0?L:0},{name:"length",type:"ULONG",value:R!==void 0?R:0}])}function Gs(_){for(var E=new qe.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),L=(E.tables=_,E.numTables=_.length,Math.pow(2,qn(E.numTables))),R=(E.searchRange=16*L,E.entrySelector=qn(L),E.rangeShift=16*E.numTables-E.searchRange,[]),z=[],Y=E.sizeOf()+Mi().sizeOf()*E.numTables;Y%4!=0;)Y+=1,z.push({name:"padding",type:"BYTE",value:0});for(var K=0;K<_.length;K+=1){var ue=_[K],be=(O.argument(ue.tableName.length===4,"Table name"+ue.tableName+" is invalid."),ue.sizeOf()),ve=Mi(ue.tableName,Ki(ue.encode()),Y,be);for(R.push({name:ve.tag+" Table Record",type:"RECORD",value:ve}),z.push({name:ue.tableName+" table",type:"RECORD",value:ue}),Y+=be,O.argument(!isNaN(Y),"Something went wrong calculating the offset.");Y%4!=0;)Y+=1,z.push({name:"padding",type:"BYTE",value:0})}return R.sort(function(ke,We){return ke.value.tag>We.value.tag?1:-1}),E.fields=E.fields.concat(R),E.fields=E.fields.concat(z),E}function sn(_,E,L){for(var R=0;R<E.length;R+=1){var z=_.charToGlyphIndex(E[R]);if(0<z)return _.glyphs.get(z).getMetrics()}return L}var xo={make:Gs,fontToTable:function(_){for(var E,L=[],R=[],z=[],Y=[],K=[],ue=[],be=[],ve=0,ke=0,We=0,Ge=0,je=0,vt=0;vt<_.glyphs.length;vt+=1){var Qe=_.glyphs.get(vt),dt=0|Qe.unicode;if(isNaN(Qe.advanceWidth))throw new Error("Glyph "+Qe.name+" ("+vt+"): advanceWidth is not a number.");(dt<E||E===void 0)&&0<dt&&(E=dt),ve<dt&&(ve=dt);var dt=cr.getUnicodeRange(dt);if(dt<32)ke|=1<<dt;else if(dt<64)We|=1<<dt-32;else if(dt<96)Ge|=1<<dt-64;else{if(!(dt<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");je|=1<<dt-96}Qe.name!==".notdef"&&(dt=Qe.getMetrics(),L.push(dt.xMin),R.push(dt.yMin),z.push(dt.xMax),Y.push(dt.yMax),ue.push(dt.leftSideBearing),be.push(dt.rightSideBearing),K.push(Qe.advanceWidth))}var Ye,Xe={xMin:Math.min.apply(null,L),yMin:Math.min.apply(null,R),xMax:Math.max.apply(null,z),yMax:Math.max.apply(null,Y),advanceWidthMax:Math.max.apply(null,K),advanceWidthAvg:function(sr){for(var Lr=0,wr=0;wr<sr.length;wr+=1)Lr+=sr[wr];return Lr/sr.length}(K),minLeftSideBearing:Math.min.apply(null,ue),maxLeftSideBearing:Math.max.apply(null,ue),minRightSideBearing:Math.min.apply(null,be)},Nt=(Xe.ascender=_.ascender,Xe.descender=_.descender,Vt.make({flags:3,unitsPerEm:_.unitsPerEm,xMin:Xe.xMin,yMin:Xe.yMin,xMax:Xe.xMax,yMax:Xe.yMax,lowestRecPPEM:3,createdTimestamp:_.createdTimestamp})),Zt=xe.make({ascender:Xe.ascender,descender:Xe.descender,advanceWidthMax:Xe.advanceWidthMax,minLeftSideBearing:Xe.minLeftSideBearing,minRightSideBearing:Xe.minRightSideBearing,xMaxExtent:Xe.maxLeftSideBearing+(Xe.xMax-Xe.xMin),numberOfHMetrics:_.glyphs.length}),Ft=ct.make(_.glyphs.length),Bt=cr.make({xAvgCharWidth:Math.round(Xe.advanceWidthAvg),usWeightClass:_.tables.os2.usWeightClass,usWidthClass:_.tables.os2.usWidthClass,usFirstCharIndex:E,usLastCharIndex:ve,ulUnicodeRange1:ke,ulUnicodeRange2:We,ulUnicodeRange3:Ge,ulUnicodeRange4:je,fsSelection:_.tables.os2.fsSelection,sTypoAscender:Xe.ascender,sTypoDescender:Xe.descender,sTypoLineGap:0,usWinAscent:Xe.yMax,usWinDescent:Math.abs(Xe.yMin),ulCodePageRange1:1,sxHeight:sn(_,"xyvw",{yMax:Math.round(Xe.ascender/2)}).yMax,sCapHeight:sn(_,"HIKLEFJMNTZBDPRAGOQSUVWXY",Xe).yMax,usDefaultChar:_.hasChar(" ")?32:0,usBreakChar:_.hasChar(" ")?32:0}),_e=lt.make(_.glyphs),Ie=q.make(_.glyphs),Tt=_.getEnglishName("fontFamily"),Gt=_.getEnglishName("fontSubfamily"),At=Tt+" "+Gt,$e=($e=_.getEnglishName("postScriptName"))||Tt.replace(/\s/g,"")+"-"+Gt,rt={};for(Ye in _.names)rt[Ye]=_.names[Ye];rt.uniqueID||(rt.uniqueID={en:_.getEnglishName("manufacturer")+":"+At}),rt.postScriptName||(rt.postScriptName={en:$e}),rt.preferredFamily||(rt.preferredFamily=_.names.fontFamily),rt.preferredSubfamily||(rt.preferredSubfamily=_.names.fontSubfamily);var Lt=[],pt=Or.make(rt,Lt),Lt=0<Lt.length?xt.make(Lt):void 0,Pt=xr.make(),At=yt.make(_.glyphs,{version:_.getEnglishName("version"),fullName:At,familyName:Tt,weightName:Gt,postScriptName:$e,unitsPerEm:_.unitsPerEm,fontBBox:[0,Xe.yMin,Xe.ascender,Xe.advanceWidthMax]}),Tt=_.metas&&0<Object.keys(_.metas).length?Zi.make(_.metas):void 0,Gt=[Nt,Zt,Ft,Bt,pt,Ie,Pt,At,_e];Lt&&Gt.push(Lt),_.tables.gsub&&Gt.push(ai.make(_.tables.gsub)),Tt&&Gt.push(Tt);for(var zt=Ki(($e=Gs(Gt)).encode()),It=$e.fields,Xt=!1,kt=0;kt<It.length;kt+=1)if(It[kt].name==="head table"){It[kt].value.checkSumAdjustment=2981146554-zt,Xt=!0;break}if(Xt)return $e;throw new Error("Could not find head table with checkSum to adjust.")},computeCheckSum:Ki};function Xn(_,E){for(var L=0,R=_.length-1;L<=R;){var z=L+R>>>1,Y=_[z].tag;if(Y===E)return z;Y<E?L=1+z:R=z-1}return-L-1}function wo(_,E){for(var L=0,R=_.length-1;L<=R;){var z=L+R>>>1,Y=_[z];if(Y===E)return z;Y<E?L=1+z:R=z-1}return-L-1}function So(_,E){for(var L=0,R=_.length-1;L<=R;){var z,Y=L+R>>>1,K=(z=_[Y]).start;if(K===E)return z;K<E?L=1+Y:R=Y-1}if(0<L)return E>(z=_[L-1]).end?0:z}function gn(_,E){this.font=_,this.tableName=E}function yn(_){gn.call(this,_,"gpos")}function on(_){gn.call(this,_,"gsub")}function Mo(_,E,L){for(var R=_.subtables,z=0;z<R.length;z++){var Y=R[z];if(Y.substFormat===E)return Y}if(L)return R.push(L),L}function li(_){for(var E=new ArrayBuffer(_.length),L=new Uint8Array(E),R=0;R<_.length;++R)L[R]=_[R];return E}function Yn(_,E){if(!_)throw E}function $i(_,E,L,R,z){var Y=0<(E&R)?(Y=_.parseByte(),L+(Y=E&z?Y:-Y)):0<(E&z)?L:L+_.parseShort();return Y}function To(_,E,L){var R,z=new Re.Parser(E,L);if(_.numberOfContours=z.parseShort(),_._xMin=z.parseShort(),_._yMin=z.parseShort(),_._xMax=z.parseShort(),_._yMax=z.parseShort(),0<_.numberOfContours){for(var Y=_.endPointIndices=[],K=0;K<_.numberOfContours;K+=1)Y.push(z.parseUShort());_.instructionLength=z.parseUShort(),_.instructions=[];for(var ue=0;ue<_.instructionLength;ue+=1)_.instructions.push(z.parseByte());for(var be=Y[Y.length-1]+1,ve=[],ke=0;ke<be;ke+=1)if(R=z.parseByte(),ve.push(R),0<(8&R))for(var We=z.parseByte(),Ge=0;Ge<We;Ge+=1)ve.push(R),ke+=1;if(O.argument(ve.length===be,"Bad flags."),0<Y.length){var je,vt=[];if(0<be){for(var Qe=0;Qe<be;Qe+=1)R=ve[Qe],(je={}).onCurve=!!(1&R),je.lastPointOfContour=0<=Y.indexOf(Qe),vt.push(je);for(var dt=0,Ye=0;Ye<be;Ye+=1)R=ve[Ye],(je=vt[Ye]).x=$i(z,R,dt,2,16),dt=je.x;for(var Xe=0,Nt=0;Nt<be;Nt+=1)R=ve[Nt],(je=vt[Nt]).y=$i(z,R,Xe,4,32),Xe=je.y}_.points=vt}else _.points=[]}else if(_.numberOfContours===0)_.points=[];else{_.isComposite=!0,_.points=[],_.components=[];for(var Zt=!0;Zt;){ve=z.parseUShort();var Ft={glyphIndex:z.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&ve)?0<(2&ve)?(Ft.dx=z.parseShort(),Ft.dy=z.parseShort()):Ft.matchedPoints=[z.parseUShort(),z.parseUShort()]:0<(2&ve)?(Ft.dx=z.parseChar(),Ft.dy=z.parseChar()):Ft.matchedPoints=[z.parseByte(),z.parseByte()],0<(8&ve)?Ft.xScale=Ft.yScale=z.parseF2Dot14():0<(64&ve)?(Ft.xScale=z.parseF2Dot14(),Ft.yScale=z.parseF2Dot14()):0<(128&ve)&&(Ft.xScale=z.parseF2Dot14(),Ft.scale01=z.parseF2Dot14(),Ft.scale10=z.parseF2Dot14(),Ft.yScale=z.parseF2Dot14()),_.components.push(Ft),Zt=!!(32&ve)}if(256&ve){_.instructionLength=z.parseUShort(),_.instructions=[];for(var Bt=0;Bt<_.instructionLength;Bt+=1)_.instructions.push(z.parseByte())}}}function Ji(_,E){for(var L=[],R=0;R<_.length;R+=1){var z=_[R],z={x:E.xScale*z.x+E.scale01*z.y+E.dx,y:E.scale10*z.x+E.yScale*z.y+E.dy,onCurve:z.onCurve,lastPointOfContour:z.lastPointOfContour};L.push(z)}return L}function Eo(_){var E=new ne;if(_)for(var L=function(We){for(var Ge=[],je=[],vt=0;vt<We.length;vt+=1){var Qe=We[vt];je.push(Qe),Qe.lastPointOfContour&&(Ge.push(je),je=[])}return O.argument(je.length===0,"There are still points left in the current contour."),Ge}(_),R=0;R<L.length;++R){var z,Y=L[R],K=Y[Y.length-1],ue=Y[0];K.onCurve?E.moveTo(K.x,K.y):ue.onCurve?E.moveTo(ue.x,ue.y):(z={x:.5*(K.x+ue.x),y:.5*(K.y+ue.y)},E.moveTo(z.x,z.y));for(var be=0;be<Y.length;++be){var ve,ke=K,K=ue,ue=Y[(be+1)%Y.length];K.onCurve?E.lineTo(K.x,K.y):(ve=ue,ke.onCurve||(K.x,ke.x,K.y,ke.y),ue.onCurve||(ve={x:.5*(K.x+ue.x),y:.5*(K.y+ue.y)}),E.quadraticCurveTo(K.x,K.y,ve.x,ve.y))}E.closePath()}return E}function jo(_,E){if(E.isComposite)for(var L=0;L<E.components.length;L+=1){var R=E.components[L],z=_.get(R.glyphIndex);if(z.getPath(),z.points){var Y=void 0;if(R.matchedPoints===void 0)Y=Ji(z.points,R);else{if(R.matchedPoints[0]>E.points.length-1||R.matchedPoints[1]>z.points.length-1)throw Error("Matched points out of range in "+E.name);var K=E.points[R.matchedPoints[0]],ue=z.points[R.matchedPoints[1]],R={xScale:R.xScale,scale01:R.scale01,scale10:R.scale10,yScale:R.yScale,dx:0,dy:0},ue=Ji([ue],R)[0];R.dx=K.x-ue.x,R.dy=K.y-ue.y,Y=Ji(z.points,R)}E.points=E.points.concat(Y)}}return Eo(E.points)}(yn.prototype=gn.prototype={searchTag:Xn,binSearch:wo,getTable:function(_){var E=this.font.tables[this.tableName];return E=!E&&_?this.font.tables[this.tableName]=this.createDefaultTable():E},getScriptNames:function(){var _=this.getTable();return _?_.scripts.map(function(E){return E.tag}):[]},getDefaultScriptName:function(){var _=this.getTable();if(_){for(var E=!1,L=0;L<_.scripts.length;L++){var R=_.scripts[L].tag;if(R==="DFLT")return R;R==="latn"&&(E=!0)}return E?"latn":void 0}},getScriptTable:function(_,E){var L,R=this.getTable(E);if(R)return L=R.scripts,0<=(R=Xn(R.scripts,_=_||"DFLT"))?L[R].script:E?(L.splice(-1-R,0,E={tag:_,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),E.script):void 0},getLangSysTable:function(z,E,L){var R,z=this.getScriptTable(z,L);if(z)return E&&E!=="dflt"&&E!=="DFLT"?0<=(R=Xn(z.langSysRecords,E))?z.langSysRecords[R].langSys:L?(z.langSysRecords.splice(-1-R,0,L={tag:E,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),L.langSys):void 0:z.defaultLangSys},getFeatureTable:function(_,E,L,R){if(_=this.getLangSysTable(_,E,R),_){for(var z,Y=_.featureIndexes,K=this.font.tables[this.tableName].features,ue=0;ue<Y.length;ue++)if((z=K[Y[ue]]).tag===L)return z.feature;if(R)return E=K.length,O.assert(E===0||L>=K[E-1].tag,"Features must be added in alphabetical order."),K.push(z={tag:L,feature:{params:0,lookupListIndexes:[]}}),Y.push(E),z.feature}},getLookupTables:function(Y,E,L,R,z){var Y=this.getFeatureTable(Y,E,L,z),K=[];if(Y){for(var ue,be=Y.lookupListIndexes,ve=this.font.tables[this.tableName].lookups,ke=0;ke<be.length;ke++)(ue=ve[be[ke]]).lookupType===R&&K.push(ue);if(K.length===0&&z)return E=ve.length,ve.push(ue={lookupType:R,lookupFlag:0,subtables:[],markFilteringSet:void 0}),be.push(E),[ue]}return K},getGlyphClass:function(_,E){switch(_.format){case 1:return _.startGlyph<=E&&E<_.startGlyph+_.classes.length?_.classes[E-_.startGlyph]:0;case 2:var L=So(_.ranges,E);return L?L.classId:0}},getCoverageIndex:function(_,E){switch(_.format){case 1:var L=wo(_.glyphs,E);return 0<=L?L:-1;case 2:return L=So(_.ranges,E),L?L.index+E-L.start:-1}},expandCoverage:function(_){if(_.format===1)return _.glyphs;for(var E=[],L=_.ranges,R=0;R<L.length;R++)for(var z=L[R],Y=z.start,K=z.end,ue=Y;ue<=K;ue++)E.push(ue);return E}}).init=function(){var _=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(_)},yn.prototype.getKerningValue=function(_,E,L){for(var R=0;R<_.length;R++)for(var z=_[R].subtables,Y=0;Y<z.length;Y++){var K=z[Y],ue=this.getCoverageIndex(K.coverage,E);if(!(ue<0))switch(K.posFormat){case 1:for(var be=K.pairSets[ue],ve=0;ve<be.length;ve++){var ke=be[ve];if(ke.secondGlyph===L)return ke.value1&&ke.value1.xAdvance||0}break;case 2:var Ge=this.getGlyphClass(K.classDef1,E),We=this.getGlyphClass(K.classDef2,L),Ge=K.classRecords[Ge][We];return Ge.value1&&Ge.value1.xAdvance||0}}return 0},yn.prototype.getKerningTables=function(_,E){if(this.font.tables.gpos)return this.getLookupTables(_,E,"kern",2)},(on.prototype=gn.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},on.prototype.getSingle=function(_,E,L){for(var R=[],z=this.getLookupTables(E,L,_,1),Y=0;Y<z.length;Y++)for(var K=z[Y].subtables,ue=0;ue<K.length;ue++){var be=K[ue],ve=this.expandCoverage(be.coverage),ke=void 0;if(be.substFormat===1)for(var We=be.deltaGlyphId,ke=0;ke<ve.length;ke++){var Ge=ve[ke];R.push({sub:Ge,by:Ge+We})}else{var je=be.substitute;for(ke=0;ke<ve.length;ke++)R.push({sub:ve[ke],by:je[ke]})}}return R},on.prototype.getAlternates=function(_,E,L){for(var R=[],z=this.getLookupTables(E,L,_,3),Y=0;Y<z.length;Y++)for(var K=z[Y].subtables,ue=0;ue<K.length;ue++)for(var be=K[ue],ve=this.expandCoverage(be.coverage),ke=be.alternateSets,We=0;We<ve.length;We++)R.push({sub:ve[We],by:ke[We]});return R},on.prototype.getLigatures=function(_,E,L){for(var R=[],z=this.getLookupTables(E,L,_,4),Y=0;Y<z.length;Y++)for(var K=z[Y].subtables,ue=0;ue<K.length;ue++)for(var be=K[ue],ve=this.expandCoverage(be.coverage),ke=be.ligatureSets,We=0;We<ve.length;We++)for(var Ge=ve[We],je=ke[We],vt=0;vt<je.length;vt++){var Qe=je[vt];R.push({sub:[Ge].concat(Qe.components),by:Qe.ligGlyph})}return R},on.prototype.addSingle=function(_,E,L,R){L=Mo(this.getLookupTables(L,R,_,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),O.assert(L.coverage.format===1,"Ligature: unable to modify coverage table format "+L.coverage.format),R=E.sub,_=this.binSearch(L.coverage.glyphs,R),_<0&&(L.coverage.glyphs.splice(_=-1-_,0,R),L.substitute.splice(_,0,0)),L.substitute[_]=E.by},on.prototype.addAlternate=function(_,E,L,R){L=Mo(this.getLookupTables(L,R,_,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),O.assert(L.coverage.format===1,"Ligature: unable to modify coverage table format "+L.coverage.format),R=E.sub,_=this.binSearch(L.coverage.glyphs,R),_<0&&(L.coverage.glyphs.splice(_=-1-_,0,R),L.alternateSets.splice(_,0,0)),L.alternateSets[_]=E.by},on.prototype.addLigature=function(Y,be,ue,z){var ue=this.getLookupTables(ue,z,Y,4,!0)[0],z=ue.subtables[0],Y=(z||(ue.subtables[0]=z={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),O.assert(z.coverage.format===1,"Ligature: unable to modify coverage table format "+z.coverage.format),be.sub[0]),K=be.sub.slice(1),ue={ligGlyph:be.by,components:K},be=this.binSearch(z.coverage.glyphs,Y);if(0<=be){for(var ve=z.ligatureSets[be],ke=0;ke<ve.length;ke++)if(function(We,Ge){var je=We.length;if(je===Ge.length){for(var vt=0;vt<je;vt++)if(We[vt]!==Ge[vt])return;return 1}}(ve[ke].components,K))return;ve.push(ue)}else z.coverage.glyphs.splice(be=-1-be,0,Y),z.ligatureSets.splice(be,0,[ue])},on.prototype.getFeature=function(_,E,L){if(/ss\d\d/.test(_))return this.getSingle(_,E,L);switch(_){case"aalt":case"salt":return this.getSingle(_,E,L).concat(this.getAlternates(_,E,L));case"dlig":case"liga":case"rlig":return this.getLigatures(_,E,L)}},on.prototype.add=function(_,E,L,R){if(/ss\d\d/.test(_))return this.addSingle(_,E,L,R);switch(_){case"aalt":case"salt":return typeof E.by=="number"?this.addSingle(_,E,L,R):this.addAlternate(_,E,L,R);case"dlig":case"liga":case"rlig":return this.addLigature(_,E,L,R)}};var Co={getPath:Eo,parse:function(_,E,L,R){for(var z=new ut.GlyphSet(R),Y=0;Y<L.length-1;Y+=1){var K=L[Y];K!==L[Y+1]?z.push(Y,ut.ttfGlyphLoader(R,Y,To,_,E+K,jo)):z.push(Y,ut.glyphLoader(R,Y))}return z}};function Ao(_){this.font=_,this.getCommands=function(E){return Co.getPath(E).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function zs(_){return _}function Lo(_){return Math.sign(_)*Math.round(Math.abs(_))}function Sa(_){return Math.sign(_)*Math.round(Math.abs(2*_))/2}function Ma(_){return Math.sign(_)*(Math.round(Math.abs(_)+.5)-.5)}function Ta(_){return Math.sign(_)*Math.ceil(Math.abs(_))}function Ea(_){return Math.sign(_)*Math.floor(Math.abs(_))}function Po(_){var E=this.srPeriod,L=this.srPhase,R=1;return _<0&&(_=-_,R=-1),_+=this.srThreshold-L,_=Math.trunc(_/E)*E,(_+=L)<0?L*R:_*R}var un={x:1,y:0,axis:"x",distance:function(_,E,L,R){return(L?_.xo:_.x)-(R?E.xo:E.x)},interpolate:function(_,E,L,R){var z,Y,K,ue,be,ve,ke;if(!R||R===this)return z=_.xo-E.xo,Y=_.xo-L.xo,be=E.x-E.xo,ve=L.x-L.xo,(ke=(K=Math.abs(z))+(ue=Math.abs(Y)))===0?void(_.x=_.xo+(be+ve)/2):void(_.x=_.xo+(be*ue+ve*K)/ke);z=R.distance(_,E,!0,!0),Y=R.distance(_,L,!0,!0),be=R.distance(E,E,!1,!0),ve=R.distance(L,L,!1,!0),(ke=(K=Math.abs(z))+(ue=Math.abs(Y)))===0?un.setRelative(_,_,(be+ve)/2,R,!0):un.setRelative(_,_,(be*ue+ve*K)/ke,R,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(_,E,L,R,z){var Y,K;R&&R!==this?(Y=z?E.xo:E.x,K=z?E.yo:E.y,Y+=L*R.x,K+=L*R.y,_.x=Y+(_.y-K)/R.normalSlope):_.x=(z?E.xo:E.x)+L},slope:0,touch:function(_){_.xTouched=!0},touched:function(_){return _.xTouched},untouch:function(_){_.xTouched=!1}},cn={x:0,y:1,axis:"y",distance:function(_,E,L,R){return(L?_.yo:_.y)-(R?E.yo:E.y)},interpolate:function(_,E,L,R){var z,Y,K,ue,be,ve,ke;if(!R||R===this)return z=_.yo-E.yo,Y=_.yo-L.yo,be=E.y-E.yo,ve=L.y-L.yo,(ke=(K=Math.abs(z))+(ue=Math.abs(Y)))===0?void(_.y=_.yo+(be+ve)/2):void(_.y=_.yo+(be*ue+ve*K)/ke);z=R.distance(_,E,!0,!0),Y=R.distance(_,L,!0,!0),be=R.distance(E,E,!1,!0),ve=R.distance(L,L,!1,!0),(ke=(K=Math.abs(z))+(ue=Math.abs(Y)))===0?cn.setRelative(_,_,(be+ve)/2,R,!0):cn.setRelative(_,_,(be*ue+ve*K)/ke,R,!0)},normalSlope:0,setRelative:function(_,E,L,R,z){var Y,K;R&&R!==this?(Y=z?E.xo:E.x,K=z?E.yo:E.y,Y+=L*R.x,K+=L*R.y,_.y=K+R.normalSlope*(_.x-Y)):_.y=(z?E.yo:E.y)+L},slope:Number.POSITIVE_INFINITY,touch:function(_){_.yTouched=!0},touched:function(_){return _.yTouched},untouch:function(_){_.yTouched=!1}};function ui(_,E){this.x=_,this.y=E,this.axis=void 0,this.slope=E/_,this.normalSlope=-_/E,Object.freeze(this)}function Zn(_,E){var L=Math.sqrt(_*_+E*E);return E/=L,(_/=L)===1&&E===0?un:_===0&&E===1?cn:new ui(_,E)}function vn(_,E,L,R){this.x=this.xo=Math.round(64*_)/64,this.y=this.yo=Math.round(64*E)/64,this.lastPointOfContour=L,this.onCurve=R,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(un),Object.freeze(cn),ui.prototype.distance=function(_,E,L,R){return this.x*un.distance(_,E,L,R)+this.y*cn.distance(_,E,L,R)},ui.prototype.interpolate=function(_,z,Y,R){var K=R.distance(_,z,!0,!0),ue=R.distance(_,Y,!0,!0),z=R.distance(z,z,!1,!0),Y=R.distance(Y,Y,!1,!0),K=Math.abs(K),ue=Math.abs(ue),be=K+ue;be===0?this.setRelative(_,_,(z+Y)/2,R,!0):this.setRelative(_,_,(z*ue+Y*K)/be,R,!0)},ui.prototype.setRelative=function(_,Y,be,ve,ue){var K=ue?Y.xo:Y.x,ue=ue?Y.yo:Y.y,Y=K+be*(ve=ve||this).x,K=ue+be*ve.y,ue=ve.normalSlope,be=this.slope,ve=_.x,ke=_.y;_.x=(be*ve-ue*Y+K-ke)/(be-ue),_.y=be*(_.x-ve)+ke},ui.prototype.touch=function(_){_.xTouched=!0,_.yTouched=!0},vn.prototype.nextTouched=function(_){for(var E=this.nextPointOnContour;!_.touched(E)&&E!==this;)E=E.nextPointOnContour;return E},vn.prototype.prevTouched=function(_){for(var E=this.prevPointOnContour;!_.touched(E)&&E!==this;)E=E.prevPointOnContour;return E};var ci=Object.freeze(new vn(0,0)),Vs={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function In(_,E){switch(this.env=_,this.stack=[],this.prog=E,_){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=un,this.round=Lo}}function Nn(_){for(var E=_.tZone=new Array(_.gZone.length),L=0;L<E.length;L++)E[L]=new vn(0,0)}function Hs(_,E){var L,R=_.prog,z=_.ip,Y=1;do if((L=R[++z])===88)Y++;else if(L===89)Y--;else if(L===64)z+=R[z+1]+1;else if(L===65)z+=2*R[z+1]+1;else if(176<=L&&L<=183)z+=L-176+1;else if(184<=L&&L<=191)z+=2*(L-184+1);else if(E&&Y===1&&L===27)break;while(0<Y);_.ip=z}function Ws(_,E){a.DEBUG&&console.log(E.step,"SVTCA["+_.axis+"]"),E.fv=E.pv=E.dpv=_}function Qi(_,E){a.DEBUG&&console.log(E.step,"SPVTCA["+_.axis+"]"),E.pv=E.dpv=_}function Ro(_,E){a.DEBUG&&console.log(E.step,"SFVTCA["+_.axis+"]"),E.fv=_}function Do(_,E){var L,z=E.stack,R=z.pop(),z=z.pop(),Y=E.z2[R],K=E.z1[z];a.DEBUG&&console.log("SPVTL["+_+"]",R,z),R=_?(L=Y.y-K.y,K.x-Y.x):(L=K.x-Y.x,K.y-Y.y),E.pv=E.dpv=Zn(L,R)}function ko(_,E){var L,z=E.stack,R=z.pop(),z=z.pop(),Y=E.z2[R],K=E.z1[z];a.DEBUG&&console.log("SFVTL["+_+"]",R,z),R=_?(L=Y.y-K.y,K.x-Y.x):(L=K.x-Y.x,K.y-Y.y),E.fv=Zn(L,R)}function j(_){a.DEBUG&&console.log(_.step,"POP[]"),_.stack.pop()}function N(_,E){var L=E.stack.pop(),R=E.z0[L],z=E.fv,Y=E.pv,K=(a.DEBUG&&console.log(E.step,"MDAP["+_+"]",L),Y.distance(R,ci));_&&(K=E.round(K)),z.setRelative(R,ci,K,Y),z.touch(R),E.rp0=E.rp1=L}function X(_,E){var L,R,z,Y=E.z2,K=Y.length-2;a.DEBUG&&console.log(E.step,"IUP["+_.axis+"]");for(var ue=0;ue<K;ue++)L=Y[ue],_.touched(L)||(R=L.prevTouched(_))!==L&&(R===(z=L.nextTouched(_))&&_.setRelative(L,L,_.distance(R,R,!1,!0),_,!0),_.interpolate(L,R,z,_))}function J(_,E){for(var L=E.stack,R=_?E.rp1:E.rp2,z=(_?E.z0:E.z1)[R],Y=E.fv,K=E.pv,ue=E.loop,be=E.z2;ue--;){var ve=L.pop(),ke=be[ve],We=K.distance(z,z,!1,!0);Y.setRelative(ke,ke,We,K),Y.touch(ke),a.DEBUG&&console.log(E.step,(1<E.loop?"loop "+(E.loop-ue)+": ":"")+"SHP["+(_?"rp1":"rp2")+"]",ve)}E.loop=1}function se(_,E){for(var L=E.stack,K=_?E.rp1:E.rp2,R=(_?E.z0:E.z1)[K],z=E.fv,Y=E.pv,K=L.pop(),ue=E.z2[E.contours[K]],be=ue,ve=(a.DEBUG&&console.log(E.step,"SHC["+_+"]",K),Y.distance(R,R,!1,!0));be!==R&&z.setRelative(be,be,ve,Y),(be=be.nextPointOnContour)!==ue;);}function ce(_,E){var L,R,ue=E.stack,z=_?E.rp1:E.rp2,z=(_?E.z0:E.z1)[z],Y=E.fv,K=E.pv,ue=ue.pop();switch(a.DEBUG&&console.log(E.step,"SHZ["+_+"]",ue),ue){case 0:L=E.tZone;break;case 1:L=E.gZone;break;default:throw new Error("Invalid zone")}for(var be=K.distance(z,z,!1,!0),ve=L.length-2,ke=0;ke<ve;ke++)R=L[ke],Y.setRelative(R,R,be,K)}function me(_,E){var R=E.stack,L=R.pop()/64,R=R.pop(),z=E.z1[R],Y=E.z0[E.rp0],K=E.fv,ue=E.pv;K.setRelative(z,Y,L,ue),K.touch(z),a.DEBUG&&console.log(E.step,"MSIRP["+_+"]",L,R),E.rp1=E.rp0,E.rp2=R,_&&(E.rp0=R)}function Oe(_,E){var L=E.stack,ue=L.pop(),L=L.pop(),R=E.z0[L],z=E.fv,Y=E.pv,K=E.cvt[ue],ue=(a.DEBUG&&console.log(E.step,"MIAP["+_+"]",ue,"(",K,")",L),Y.distance(R,ci));_&&(Math.abs(ue-K)<E.cvCutIn&&(ue=K),ue=E.round(ue)),z.setRelative(R,ci,ue,Y),E.zp0===0&&(R.xo=R.x,R.yo=R.y),z.touch(R),E.rp0=E.rp1=L}function Pe(_,E){var L=E.stack,R=L.pop(),z=E.z2[R];a.DEBUG&&console.log(E.step,"GC["+_+"]",R),L.push(64*E.dpv.distance(z,ci,_,!1))}function He(_,E){var R=E.stack,L=R.pop(),R=R.pop(),z=E.z1[L],Y=E.z0[R],Y=E.dpv.distance(Y,z,_,_);a.DEBUG&&console.log(E.step,"MD["+_+"]",L,R,"->",Y),E.stack.push(Math.round(64*Y))}function it(_,E){var L=E.stack,R=L.pop(),z=E.fv,Y=E.pv,K=E.ppem,ue=E.deltaBase+16*(_-1),be=E.deltaShift,ve=E.z0;a.DEBUG&&console.log(E.step,"DELTAP["+_+"]",R,L);for(var ke=0;ke<R;ke++){var We=L.pop(),Ge=L.pop();ue+((240&Ge)>>4)===K&&(0<=(Ge=(15&Ge)-8)&&Ge++,a.DEBUG&&console.log(E.step,"DELTAPFIX",We,"by",Ge*be),We=ve[We],z.setRelative(We,We,Ge*be,Y))}}function mt(_,E){var L=E.stack,R=L.pop();a.DEBUG&&console.log(E.step,"ROUND[]"),L.push(64*E.round(R/64))}function tt(_,E){var L=E.stack,R=L.pop(),z=E.ppem,Y=E.deltaBase+16*(_-1),K=E.deltaShift;a.DEBUG&&console.log(E.step,"DELTAC["+_+"]",R,L);for(var ue=0;ue<R;ue++){var be=L.pop(),ve=L.pop();Y+((240&ve)>>4)===z&&(0<=(ve=(15&ve)-8)&&ve++,ve=ve*K,a.DEBUG&&console.log(E.step,"DELTACFIX",be,"by",ve),E.cvt[be]+=ve)}}function wt(_,E){var L,z=E.stack,R=z.pop(),z=z.pop(),Y=E.z2[R],K=E.z1[z];a.DEBUG&&console.log(E.step,"SDPVTL["+_+"]",R,z),R=_?(L=Y.y-K.y,K.x-Y.x):(L=K.x-Y.x,K.y-Y.y),E.dpv=Zn(L,R)}function Ot(_,E){var L=E.stack,R=E.prog,z=E.ip;a.DEBUG&&console.log(E.step,"PUSHB["+_+"]");for(var Y=0;Y<_;Y++)L.push(R[++z]);E.ip=z}function qt(_,E){var L=E.ip,R=E.prog,z=E.stack;a.DEBUG&&console.log(E.ip,"PUSHW["+_+"]");for(var Y=0;Y<_;Y++){var K=R[++L]<<8|R[++L];32768&K&&(K=-(1+(65535^K))),z.push(K)}E.ip=L}function St(_,E,L,R,z,Y){var K,ue,ve=Y.stack,be=_&&ve.pop(),ve=ve.pop(),ke=Y.rp0,ke=Y.z0[ke],We=Y.z1[ve],Ge=Y.minDis,je=Y.fv,vt=Y.dpv,Qe=K=vt.distance(We,ke,!0,!0),dt=0<=Qe?1:-1;Qe=Math.abs(Qe),_&&(ue=Y.cvt[be],R&&Math.abs(Qe-ue)<Y.cvCutIn&&(Qe=ue)),L&&Qe<Ge&&(Qe=Ge),R&&(Qe=Y.round(Qe)),je.setRelative(We,ke,dt*Qe,vt),je.touch(We),a.DEBUG&&console.log(Y.step,(_?"MIRP[":"MDRP[")+(E?"M":"m")+(L?">":"_")+(R?"R":"_")+(z===0?"Gr":z===1?"Bl":z===2?"Wh":"")+"]",_?be+"("+Y.cvt[be]+","+ue+")":"",ve,"(d =",K,"->",dt*Qe,")"),Y.rp1=Y.rp0,Y.rp2=ve,E&&(Y.rp0=ve)}Ao.prototype.exec=function(_,E){if(typeof E!="number")throw new Error("Point size is not a number!");if(!(2<this._errorState)){var L=this.font,R=this._prepState;if(!R||R.ppem!==E){var z=this._fpgmState;if(!z){In.prototype=Vs,(z=this._fpgmState=new In("fpgm",L.tables.fpgm)).funcs=[],z.font=L,a.DEBUG&&(console.log("---EXEC FPGM---"),z.step=-1);try{Hr(z)}catch(ve){return console.log("Hinting error in FPGM:"+ve),void(this._errorState=3)}}In.prototype=z,(R=this._prepState=new In("prep",L.tables.prep)).ppem=E;var Y=L.tables.cvt;if(Y)for(var K=R.cvt=new Array(Y.length),ue=E/L.unitsPerEm,be=0;be<Y.length;be++)K[be]=Y[be]*ue;else R.cvt=[];a.DEBUG&&(console.log("---EXEC PREP---"),R.step=-1);try{Hr(R)}catch(ve){this._errorState<2&&console.log("Hinting error in PREP:"+ve),this._errorState=2}}if(!(1<this._errorState))try{return jr(_,R)}catch(ve){this._errorState<1&&(console.log("Hinting error:"+ve),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var jr=function(_,E){var L=E.ppem/E.font.unitsPerEm,R=L,z=_.components;if(In.prototype=E,z){for(var Y=E.font,K=[],ue=[],be=0;be<z.length;be++){var ve=z[be],ke=Y.glyphs.get(ve.glyphIndex),We=new In("glyf",ke.instructions);a.DEBUG&&(console.log("---EXEC COMP "+be+"---"),We.step=-1),kr(ke,We,L,R);for(var Ge=Math.round(ve.dx*L),je=Math.round(ve.dy*R),vt=We.gZone,Qe=We.contours,dt=0;dt<vt.length;dt++){var Ye=vt[dt];Ye.xTouched=Ye.yTouched=!1,Ye.xo=Ye.x=Ye.x+Ge,Ye.yo=Ye.y=Ye.y+je}var Xe=K.length;K.push.apply(K,vt);for(var Nt=0;Nt<Qe.length;Nt++)ue.push(Qe[Nt]+Xe)}_.instructions&&!We.inhibitGridFit&&((We=new In("glyf",_.instructions)).gZone=We.z0=We.z1=We.z2=K,We.contours=ue,K.push(new vn(0,0),new vn(Math.round(_.advanceWidth*L),0)),a.DEBUG&&(console.log("---EXEC COMPOSITE---"),We.step=-1),Hr(We),K.length-=2)}else We=new In("glyf",_.instructions),a.DEBUG&&(console.log("---EXEC GLYPH---"),We.step=-1),kr(_,We,L,R),K=We.gZone;return K},kr=function(_,E,L,R){for(var z,Y,K,ue=_.points||[],be=ue.length,ve=E.gZone=E.z0=E.z1=E.z2=[],ke=E.contours=[],We=0;We<be;We++)z=ue[We],ve[We]=new vn(z.x*L,z.y*R,z.lastPointOfContour,z.onCurve);for(var Ge=0;Ge<be;Ge++)z=ve[Ge],Y||(Y=z,ke.push(Ge)),z.lastPointOfContour?((z.nextPointOnContour=Y).prevPointOnContour=z,Y=void 0):(K=ve[Ge+1],(z.nextPointOnContour=K).prevPointOnContour=z);if(!E.inhibitGridFit){if(a.DEBUG){console.log("PROCESSING GLYPH",E.stack);for(var je=0;je<be;je++)console.log(je,ve[je].x,ve[je].y)}if(ve.push(new vn(0,0),new vn(Math.round(_.advanceWidth*L),0)),Hr(E),ve.length-=2,a.DEBUG){console.log("FINISHED GLYPH",E.stack);for(var vt=0;vt<be;vt++)console.log(vt,ve[vt].x,ve[vt].y)}}},Hr=function(_){var E=_.prog;if(E){var L,R=E.length;for(_.ip=0;_.ip<R;_.ip++){if(a.DEBUG&&_.step++,!(L=bn[E[_.ip]]))throw new Error("unknown instruction: 0x"+Number(E[_.ip]).toString(16));L(_)}}},bn=[Ws.bind(void 0,cn),Ws.bind(void 0,un),Qi.bind(void 0,cn),Qi.bind(void 0,un),Ro.bind(void 0,cn),Ro.bind(void 0,un),Do.bind(void 0,0),Do.bind(void 0,1),ko.bind(void 0,0),ko.bind(void 0,1),function(_){var E=(L=_.stack).pop(),L=L.pop();a.DEBUG&&console.log(_.step,"SPVFS[]",E,L),_.pv=_.dpv=Zn(L,E)},function(_){var E=(L=_.stack).pop(),L=L.pop();a.DEBUG&&console.log(_.step,"SPVFS[]",E,L),_.fv=Zn(L,E)},function(_){var E=_.stack,L=_.pv;a.DEBUG&&console.log(_.step,"GPV[]"),E.push(16384*L.x),E.push(16384*L.y)},function(_){var E=_.stack,L=_.fv;a.DEBUG&&console.log(_.step,"GFV[]"),E.push(16384*L.x),E.push(16384*L.y)},function(_){_.fv=_.pv,a.DEBUG&&console.log(_.step,"SFVTPV[]")},function(E){var L=(K=E.stack).pop(),R=K.pop(),z=K.pop(),Y=K.pop(),K=K.pop(),be=E.z0,ke=E.z1,ue=be[L],be=be[R],ve=ke[z],ke=ke[Y],E=E.z2[K],L=(a.DEBUG&&console.log("ISECT[], ",L,R,z,Y,K),ue.x),R=ue.y,z=be.x,Y=be.y,K=ve.x,ue=ve.y,be=ke.x,ve=ke.y,ke=(L-z)*(ue-ve)-(R-Y)*(K-be),We=L*Y-R*z,Ge=K*ve-ue*be;E.x=(We*(K-be)-Ge*(L-z))/ke,E.y=(We*(ue-ve)-Ge*(R-Y))/ke},function(_){_.rp0=_.stack.pop(),a.DEBUG&&console.log(_.step,"SRP0[]",_.rp0)},function(_){_.rp1=_.stack.pop(),a.DEBUG&&console.log(_.step,"SRP1[]",_.rp1)},function(_){_.rp2=_.stack.pop(),a.DEBUG&&console.log(_.step,"SRP2[]",_.rp2)},function(_){var E=_.stack.pop();switch(a.DEBUG&&console.log(_.step,"SZP0[]",E),_.zp0=E){case 0:_.tZone||Nn(_),_.z0=_.tZone;break;case 1:_.z0=_.gZone;break;default:throw new Error("Invalid zone pointer")}},function(_){var E=_.stack.pop();switch(a.DEBUG&&console.log(_.step,"SZP1[]",E),_.zp1=E){case 0:_.tZone||Nn(_),_.z1=_.tZone;break;case 1:_.z1=_.gZone;break;default:throw new Error("Invalid zone pointer")}},function(_){var E=_.stack.pop();switch(a.DEBUG&&console.log(_.step,"SZP2[]",E),_.zp2=E){case 0:_.tZone||Nn(_),_.z2=_.tZone;break;case 1:_.z2=_.gZone;break;default:throw new Error("Invalid zone pointer")}},function(_){var E=_.stack.pop();switch(a.DEBUG&&console.log(_.step,"SZPS[]",E),_.zp0=_.zp1=_.zp2=E){case 0:_.tZone||Nn(_),_.z0=_.z1=_.z2=_.tZone;break;case 1:_.z0=_.z1=_.z2=_.gZone;break;default:throw new Error("Invalid zone pointer")}},function(_){_.loop=_.stack.pop(),a.DEBUG&&console.log(_.step,"SLOOP[]",_.loop)},function(_){a.DEBUG&&console.log(_.step,"RTG[]"),_.round=Lo},function(_){a.DEBUG&&console.log(_.step,"RTHG[]"),_.round=Ma},function(_){var E=_.stack.pop();a.DEBUG&&console.log(_.step,"SMD[]",E),_.minDis=E/64},function(_){a.DEBUG&&console.log(_.step,"ELSE[]"),Hs(_,!1)},function(_){var E=_.stack.pop();a.DEBUG&&console.log(_.step,"JMPR[]",E),_.ip+=E-1},function(_){var E=_.stack.pop();a.DEBUG&&console.log(_.step,"SCVTCI[]",E),_.cvCutIn=E/64},void 0,void 0,function(_){var E=_.stack;a.DEBUG&&console.log(_.step,"DUP[]"),E.push(E[E.length-1])},j,function(_){a.DEBUG&&console.log(_.step,"CLEAR[]"),_.stack.length=0},function(_){var E=_.stack,L=E.pop(),R=E.pop();a.DEBUG&&console.log(_.step,"SWAP[]"),E.push(L),E.push(R)},function(_){var E=_.stack;a.DEBUG&&console.log(_.step,"DEPTH[]"),E.push(E.length)},function(_){var E=_.stack,L=E.pop();a.DEBUG&&console.log(_.step,"CINDEX[]",L),E.push(E[E.length-L])},function(_){var E=_.stack,L=E.pop();a.DEBUG&&console.log(_.step,"MINDEX[]",L),E.push(E.splice(E.length-L,1)[0])},void 0,void 0,void 0,function(_){var E=(R=_.stack).pop(),L=R.pop(),R=(a.DEBUG&&console.log(_.step,"LOOPCALL[]",E,L),_.ip),z=_.prog;_.prog=_.funcs[E];for(var Y=0;Y<L;Y++)Hr(_),a.DEBUG&&console.log(++_.step,Y+1<L?"next loopcall":"done loopcall",Y);_.ip=R,_.prog=z},function(_){var E=_.stack.pop(),L=(a.DEBUG&&console.log(_.step,"CALL[]",E),_.ip),R=_.prog;_.prog=_.funcs[E],Hr(_),_.ip=L,_.prog=R,a.DEBUG&&console.log(++_.step,"returning from",E)},function(_){if(_.env!=="fpgm")throw new Error("FDEF not allowed here");var R=_.stack,E=_.prog,L=_.ip,R=R.pop(),z=L;for(a.DEBUG&&console.log(_.step,"FDEF[]",R);E[++L]!==45;);_.ip=L,_.funcs[R]=E.slice(z+1,L)},void 0,N.bind(void 0,0),N.bind(void 0,1),X.bind(void 0,cn),X.bind(void 0,un),J.bind(void 0,0),J.bind(void 0,1),se.bind(void 0,0),se.bind(void 0,1),ce.bind(void 0,0),ce.bind(void 0,1),function(_){for(var E=_.stack,L=_.loop,R=_.fv,z=E.pop()/64,Y=_.z2;L--;){var K=E.pop(),ue=Y[K];a.DEBUG&&console.log(_.step,(1<_.loop?"loop "+(_.loop-L)+": ":"")+"SHPIX[]",K,z),R.setRelative(ue,ue,z),R.touch(ue)}_.loop=1},function(_){for(var E=_.stack,L=_.rp1,R=_.rp2,z=_.loop,Y=_.z0[L],K=_.z1[R],ue=_.fv,be=_.dpv,ve=_.z2;z--;){var ke=E.pop(),We=ve[ke];a.DEBUG&&console.log(_.step,(1<_.loop?"loop "+(_.loop-z)+": ":"")+"IP[]",ke,L,"<->",R),ue.interpolate(We,Y,K,be),ue.touch(We)}_.loop=1},me.bind(void 0,0),me.bind(void 0,1),function(_){for(var E=_.stack,L=_.rp0,R=_.z0[L],z=_.loop,Y=_.fv,K=_.pv,ue=_.z1;z--;){var be=E.pop(),ve=ue[be];a.DEBUG&&console.log(_.step,(1<_.loop?"loop "+(_.loop-z)+": ":"")+"ALIGNRP[]",be),Y.setRelative(ve,R,0,K),Y.touch(ve)}_.loop=1},function(_){a.DEBUG&&console.log(_.step,"RTDG[]"),_.round=Sa},Oe.bind(void 0,0),Oe.bind(void 0,1),function(_){var E=_.prog,L=_.ip,R=_.stack,z=E[++L];a.DEBUG&&console.log(_.step,"NPUSHB[]",z);for(var Y=0;Y<z;Y++)R.push(E[++L]);_.ip=L},function(_){var E=_.ip,L=_.prog,R=_.stack,z=L[++E];a.DEBUG&&console.log(_.step,"NPUSHW[]",z);for(var Y=0;Y<z;Y++){var K=L[++E]<<8|L[++E];32768&K&&(K=-(1+(65535^K))),R.push(K)}_.ip=E},function(_){var R=_.stack,E=(E=_.store)||(_.store=[]),L=R.pop(),R=R.pop();a.DEBUG&&console.log(_.step,"WS",L,R),E[R]=L},function(z){var E=z.stack,L=z.store,R=E.pop(),z=(a.DEBUG&&console.log(z.step,"RS",R),L&&L[R]||0);E.push(z)},function(_){var E=(L=_.stack).pop(),L=L.pop();a.DEBUG&&console.log(_.step,"WCVTP",E,L),_.cvt[L]=E/64},function(_){var E=_.stack,L=E.pop();a.DEBUG&&console.log(_.step,"RCVT",L),E.push(64*_.cvt[L])},Pe.bind(void 0,0),Pe.bind(void 0,1),void 0,He.bind(void 0,0),He.bind(void 0,1),function(_){a.DEBUG&&console.log(_.step,"MPPEM[]"),_.stack.push(_.ppem)},void 0,function(_){a.DEBUG&&console.log(_.step,"FLIPON[]"),_.autoFlip=!0},void 0,void 0,function(_){var E=_.stack,L=E.pop(),R=E.pop();a.DEBUG&&console.log(_.step,"LT[]",L,R),E.push(R<L?1:0)},function(_){var E=_.stack,L=E.pop(),R=E.pop();a.DEBUG&&console.log(_.step,"LTEQ[]",L,R),E.push(R<=L?1:0)},function(_){var E=_.stack,L=E.pop(),R=E.pop();a.DEBUG&&console.log(_.step,"GT[]",L,R),E.push(L<R?1:0)},function(_){var E=_.stack,L=E.pop(),R=E.pop();a.DEBUG&&console.log(_.step,"GTEQ[]",L,R),E.push(L<=R?1:0)},function(_){var E=_.stack,L=E.pop(),R=E.pop();a.DEBUG&&console.log(_.step,"EQ[]",L,R),E.push(L===R?1:0)},function(_){var E=_.stack,L=E.pop(),R=E.pop();a.DEBUG&&console.log(_.step,"NEQ[]",L,R),E.push(L!==R?1:0)},function(_){var E=_.stack,L=E.pop();a.DEBUG&&console.log(_.step,"ODD[]",L),E.push(Math.trunc(L)%2?1:0)},function(_){var E=_.stack,L=E.pop();a.DEBUG&&console.log(_.step,"EVEN[]",L),E.push(Math.trunc(L)%2?0:1)},function(_){var E=_.stack.pop();a.DEBUG&&console.log(_.step,"IF[]",E),E||(Hs(_,!0),a.DEBUG&&console.log(_.step,"EIF[]"))},function(_){a.DEBUG&&console.log(_.step,"EIF[]")},function(_){var E=_.stack,L=E.pop(),R=E.pop();a.DEBUG&&console.log(_.step,"AND[]",L,R),E.push(L&&R?1:0)},function(_){var E=_.stack,L=E.pop(),R=E.pop();a.DEBUG&&console.log(_.step,"OR[]",L,R),E.push(L||R?1:0)},function(_){var E=_.stack,L=E.pop();a.DEBUG&&console.log(_.step,"NOT[]",L),E.push(L?0:1)},it.bind(void 0,1),function(_){var E=_.stack.pop();a.DEBUG&&console.log(_.step,"SDB[]",E),_.deltaBase=E},function(_){var E=_.stack.pop();a.DEBUG&&console.log(_.step,"SDS[]",E),_.deltaShift=Math.pow(.5,E)},function(_){var E=_.stack,L=E.pop(),R=E.pop();a.DEBUG&&console.log(_.step,"ADD[]",L,R),E.push(R+L)},function(_){var E=_.stack,L=E.pop(),R=E.pop();a.DEBUG&&console.log(_.step,"SUB[]",L,R),E.push(R-L)},function(_){var E=_.stack,L=E.pop(),R=E.pop();a.DEBUG&&console.log(_.step,"DIV[]",L,R),E.push(64*R/L)},function(_){var E=_.stack,L=E.pop(),R=E.pop();a.DEBUG&&console.log(_.step,"MUL[]",L,R),E.push(R*L/64)},function(_){var E=_.stack,L=E.pop();a.DEBUG&&console.log(_.step,"ABS[]",L),E.push(Math.abs(L))},function(_){var E=_.stack,L=E.pop();a.DEBUG&&console.log(_.step,"NEG[]",L),E.push(-L)},function(_){var E=_.stack,L=E.pop();a.DEBUG&&console.log(_.step,"FLOOR[]",L),E.push(64*Math.floor(L/64))},function(_){var E=_.stack,L=E.pop();a.DEBUG&&console.log(_.step,"CEILING[]",L),E.push(64*Math.ceil(L/64))},mt.bind(void 0,0),mt.bind(void 0,1),mt.bind(void 0,2),mt.bind(void 0,3),void 0,void 0,void 0,void 0,function(_){var E=(L=_.stack).pop(),L=L.pop();a.DEBUG&&console.log(_.step,"WCVTF[]",E,L),_.cvt[L]=E*_.ppem/_.font.unitsPerEm},it.bind(void 0,2),it.bind(void 0,3),tt.bind(void 0,1),tt.bind(void 0,2),tt.bind(void 0,3),function(_){var E,L=_.stack.pop();switch(a.DEBUG&&console.log(_.step,"SROUND[]",L),_.round=Po,192&L){case 0:E=.5;break;case 64:E=1;break;case 128:E=2;break;default:throw new Error("invalid SROUND value")}switch(_.srPeriod=E,48&L){case 0:_.srPhase=0;break;case 16:_.srPhase=.25*E;break;case 32:_.srPhase=.5*E;break;case 48:_.srPhase=.75*E;break;default:throw new Error("invalid SROUND value")}_.srThreshold=(L&=15)===0?0:(L/8-.5)*E},function(_){var E,L=_.stack.pop();switch(a.DEBUG&&console.log(_.step,"S45ROUND[]",L),_.round=Po,192&L){case 0:E=Math.sqrt(2)/2;break;case 64:E=Math.sqrt(2);break;case 128:E=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(_.srPeriod=E,48&L){case 0:_.srPhase=0;break;case 16:_.srPhase=.25*E;break;case 32:_.srPhase=.5*E;break;case 48:_.srPhase=.75*E;break;default:throw new Error("invalid S45ROUND value")}_.srThreshold=(L&=15)===0?0:(L/8-.5)*E},void 0,void 0,function(_){a.DEBUG&&console.log(_.step,"ROFF[]"),_.round=zs},void 0,function(_){a.DEBUG&&console.log(_.step,"RUTG[]"),_.round=Ta},function(_){a.DEBUG&&console.log(_.step,"RDTG[]"),_.round=Ea},j,j,void 0,void 0,void 0,void 0,void 0,function(_){var E=_.stack.pop();a.DEBUG&&console.log(_.step,"SCANCTRL[]",E)},wt.bind(void 0,0),wt.bind(void 0,1),function(_){var E=_.stack,L=E.pop(),R=0;a.DEBUG&&console.log(_.step,"GETINFO[]",L),1&L&&(R=35),32&L&&(R|=4096),E.push(R)},void 0,function(_){var E=_.stack,L=E.pop(),R=E.pop(),z=E.pop();a.DEBUG&&console.log(_.step,"ROLL[]"),E.push(R),E.push(L),E.push(z)},function(_){var E=_.stack,L=E.pop(),R=E.pop();a.DEBUG&&console.log(_.step,"MAX[]",L,R),E.push(Math.max(R,L))},function(_){var E=_.stack,L=E.pop(),R=E.pop();a.DEBUG&&console.log(_.step,"MIN[]",L,R),E.push(Math.min(R,L))},function(_){var E=_.stack.pop();a.DEBUG&&console.log(_.step,"SCANTYPE[]",E)},function(_){var E=_.stack.pop(),L=_.stack.pop();switch(a.DEBUG&&console.log(_.step,"INSTCTRL[]",E,L),E){case 1:return void(_.inhibitGridFit=!!L);case 2:return void(_.ignoreCvt=!!L);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,Ot.bind(void 0,1),Ot.bind(void 0,2),Ot.bind(void 0,3),Ot.bind(void 0,4),Ot.bind(void 0,5),Ot.bind(void 0,6),Ot.bind(void 0,7),Ot.bind(void 0,8),qt.bind(void 0,1),qt.bind(void 0,2),qt.bind(void 0,3),qt.bind(void 0,4),qt.bind(void 0,5),qt.bind(void 0,6),qt.bind(void 0,7),qt.bind(void 0,8),St.bind(void 0,0,0,0,0,0),St.bind(void 0,0,0,0,0,1),St.bind(void 0,0,0,0,0,2),St.bind(void 0,0,0,0,0,3),St.bind(void 0,0,0,0,1,0),St.bind(void 0,0,0,0,1,1),St.bind(void 0,0,0,0,1,2),St.bind(void 0,0,0,0,1,3),St.bind(void 0,0,0,1,0,0),St.bind(void 0,0,0,1,0,1),St.bind(void 0,0,0,1,0,2),St.bind(void 0,0,0,1,0,3),St.bind(void 0,0,0,1,1,0),St.bind(void 0,0,0,1,1,1),St.bind(void 0,0,0,1,1,2),St.bind(void 0,0,0,1,1,3),St.bind(void 0,0,1,0,0,0),St.bind(void 0,0,1,0,0,1),St.bind(void 0,0,1,0,0,2),St.bind(void 0,0,1,0,0,3),St.bind(void 0,0,1,0,1,0),St.bind(void 0,0,1,0,1,1),St.bind(void 0,0,1,0,1,2),St.bind(void 0,0,1,0,1,3),St.bind(void 0,0,1,1,0,0),St.bind(void 0,0,1,1,0,1),St.bind(void 0,0,1,1,0,2),St.bind(void 0,0,1,1,0,3),St.bind(void 0,0,1,1,1,0),St.bind(void 0,0,1,1,1,1),St.bind(void 0,0,1,1,1,2),St.bind(void 0,0,1,1,1,3),St.bind(void 0,1,0,0,0,0),St.bind(void 0,1,0,0,0,1),St.bind(void 0,1,0,0,0,2),St.bind(void 0,1,0,0,0,3),St.bind(void 0,1,0,0,1,0),St.bind(void 0,1,0,0,1,1),St.bind(void 0,1,0,0,1,2),St.bind(void 0,1,0,0,1,3),St.bind(void 0,1,0,1,0,0),St.bind(void 0,1,0,1,0,1),St.bind(void 0,1,0,1,0,2),St.bind(void 0,1,0,1,0,3),St.bind(void 0,1,0,1,1,0),St.bind(void 0,1,0,1,1,1),St.bind(void 0,1,0,1,1,2),St.bind(void 0,1,0,1,1,3),St.bind(void 0,1,1,0,0,0),St.bind(void 0,1,1,0,0,1),St.bind(void 0,1,1,0,0,2),St.bind(void 0,1,1,0,0,3),St.bind(void 0,1,1,0,1,0),St.bind(void 0,1,1,0,1,1),St.bind(void 0,1,1,0,1,2),St.bind(void 0,1,1,0,1,3),St.bind(void 0,1,1,1,0,0),St.bind(void 0,1,1,1,0,1),St.bind(void 0,1,1,1,0,2),St.bind(void 0,1,1,1,0,3),St.bind(void 0,1,1,1,1,0),St.bind(void 0,1,1,1,1,1),St.bind(void 0,1,1,1,1,2),St.bind(void 0,1,1,1,1,3)],ir=Array.from||function(_){return _.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function ur(_){(_=_||{}).empty||(Yn(_.familyName,"When creating a new Font object, familyName is required."),Yn(_.styleName,"When creating a new Font object, styleName is required."),Yn(_.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),Yn(_.ascender,"When creating a new Font object, ascender is required."),Yn(_.descender,"When creating a new Font object, descender is required."),Yn(_.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:_.familyName||" "},fontSubfamily:{en:_.styleName||" "},fullName:{en:_.fullName||_.familyName+" "+_.styleName},postScriptName:{en:_.postScriptName||(_.familyName+_.styleName).replace(/\s/g,"")},designer:{en:_.designer||" "},designerURL:{en:_.designerURL||" "},manufacturer:{en:_.manufacturer||" "},manufacturerURL:{en:_.manufacturerURL||" "},license:{en:_.license||" "},licenseURL:{en:_.licenseURL||" "},version:{en:_.version||"Version 0.1"},description:{en:_.description||" "},copyright:{en:_.copyright||" "},trademark:{en:_.trademark||" "}},this.unitsPerEm=_.unitsPerEm||1e3,this.ascender=_.ascender,this.descender=_.descender,this.createdTimestamp=_.createdTimestamp,this.tables={os2:{usWeightClass:_.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:_.widthClass||this.usWidthClasses.MEDIUM,fsSelection:_.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new ut.GlyphSet(this,_.glyphs||[]),this.encoding=new Le(this),this.position=new yn(this),this.substitution=new on(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||(this.outlinesFormat==="truetype"?this._hinting=new Ao(this):void 0)}})}function lr(_,E){var L,R=JSON.stringify(_),z=256;for(L in E){var Y=parseInt(L);if(Y&&!(Y<256)){if(JSON.stringify(E[L])===R)return Y;z<=Y&&(z=Y+1)}}return E[z]=_,z}ur.prototype.hasChar=function(_){return this.encoding.charToGlyphIndex(_)!==null},ur.prototype.charToGlyphIndex=function(_){return this.encoding.charToGlyphIndex(_)},ur.prototype.charToGlyph=function(_){return _=this.charToGlyphIndex(_),this.glyphs.get(_)||this.glyphs.get(0)},ur.prototype.stringToGlyphs=function(_,E){E=E||this.defaultRenderOptions;for(var L=ir(_),R=[],z=0;z<L.length;z+=1){var Y=L[z];R.push(this.charToGlyphIndex(Y))}var K=R.length;if(E.features){var _=E.script||this.substitution.getDefaultScriptName(),ue=[];E.features.liga&&(ue=ue.concat(this.substitution.getFeature("liga",_,E.language))),E.features.rlig&&(ue=ue.concat(this.substitution.getFeature("rlig",_,E.language)));for(var be=0;be<K;be+=1)for(var ve=0;ve<ue.length;ve++){for(var ke=ue[ve],We=ke.sub,Ge=We.length,je=0;je<Ge&&We[je]===R[be+je];)je++;je===Ge&&(R.splice(be,Ge,ke.by),K=K-Ge+1)}}for(var vt=new Array(K),Qe=this.glyphs.get(0),dt=0;dt<K;dt+=1)vt[dt]=this.glyphs.get(R[dt])||Qe;return vt},ur.prototype.nameToGlyphIndex=function(_){return this.glyphNames.nameToGlyphIndex(_)},ur.prototype.nameToGlyph=function(_){return _=this.nameToGlyphIndex(_),this.glyphs.get(_)||this.glyphs.get(0)},ur.prototype.glyphIndexToName=function(_){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(_):""},ur.prototype.getKerningValue=function(_,E){_=_.index||_,E=E.index||E;var L=this.position.defaultKerningTables;return L?this.position.getKerningValue(L,_,E):this.kerningPairs[_+","+E]||0},ur.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},ur.prototype.forEachGlyph=function(_,E,L,R,z,Y){E=E!==void 0?E:0,L=L!==void 0?L:0,z=z||this.defaultRenderOptions;var K,ue=1/this.unitsPerEm*(R=R!==void 0?R:72),be=this.stringToGlyphs(_,z);z.kerning&&(_=z.script||this.position.getDefaultScriptName(),K=this.position.getKerningTables(_,z.language));for(var ve=0;ve<be.length;ve+=1){var ke=be[ve];Y.call(this,ke,E,L,R,z),ke.advanceWidth&&(E+=ke.advanceWidth*ue),z.kerning&&ve<be.length-1&&(E+=(K?this.position.getKerningValue(K,ke.index,be[ve+1].index):this.getKerningValue(ke,be[ve+1]))*ue),z.letterSpacing?E+=z.letterSpacing*R:z.tracking&&(E+=z.tracking/1e3*R)}return E},ur.prototype.getPath=function(_,E,L,R,z){var Y=new ne;return this.forEachGlyph(_,E,L,R,z,function(K,ue,be,ve){K=K.getPath(ue,be,ve,z,this),Y.extend(K)}),Y},ur.prototype.getPaths=function(_,E,L,R,z){var Y=[];return this.forEachGlyph(_,E,L,R,z,function(K,ue,be,ve){K=K.getPath(ue,be,ve,z,this),Y.push(K)}),Y},ur.prototype.getAdvanceWidth=function(_,E,L){return this.forEachGlyph(_,0,0,E,L,function(){})},ur.prototype.draw=function(_,E,L,R,z,Y){this.getPath(E,L,R,z,Y).draw(_)},ur.prototype.drawPoints=function(_,E,L,R,z,Y){this.forEachGlyph(E,L,R,z,Y,function(K,ue,be,ve){K.drawPoints(_,ue,be,ve)})},ur.prototype.drawMetrics=function(_,E,L,R,z,Y){this.forEachGlyph(E,L,R,z,Y,function(K,ue,be,ve){K.drawMetrics(_,ue,be,ve)})},ur.prototype.getEnglishName=function(_){if(_=this.names[_],_)return _.en},ur.prototype.validate=function(){var _=this;function E(L){L=_.getEnglishName(L),L&&L.trim().length}E("fontFamily"),E("weightName"),E("manufacturer"),E("copyright"),E("version"),this.unitsPerEm},ur.prototype.toTables=function(){return xo.fontToTable(this)},ur.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},ur.prototype.toArrayBuffer=function(){for(var _=this.toTables().encode(),E=new ArrayBuffer(_.length),L=new Uint8Array(E),R=0;R<_.length;R++)L[R]=_[R];return E},ur.prototype.download=function(_){var E=this.getEnglishName("fontFamily"),L=this.getEnglishName("fontSubfamily"),R=(_=_||E.replace(/\s/g,"")+"-"+L+".otf",this.toArrayBuffer());typeof window<"u"?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,R.byteLength,function(z){z.root.getFile(_,{create:!0},function(Y){Y.createWriter(function(K){var ue=new DataView(R),ue=new Blob([ue],{type:"font/opentype"});K.write(ue),K.addEventListener("writeend",function(){location.href=Y.toURL()},!1)})})},function(z){throw new Error(z.name+": "+z.message)})):(E=t("fs"),L=function(z){for(var Y=new n(z.byteLength),K=new Uint8Array(z),ue=0;ue<Y.length;++ue)Y[ue]=K[ue];return Y}(R),E.writeFileSync(_,L))},ur.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},ur.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},ur.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var Tr={make:function(_,E){var L=new qe.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:_.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:_.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*_.axes.length}]);L.offsetToData=L.sizeOf();for(var R,z,Y,K=0;K<_.axes.length;K++)L.fields=L.fields.concat((R=K,z=_.axes[K],Y=E,Y=lr(z.name,E),[{name:"tag_"+R,type:"TAG",value:z.tag},{name:"minValue_"+R,type:"FIXED",value:z.minValue<<16},{name:"defaultValue_"+R,type:"FIXED",value:z.defaultValue<<16},{name:"maxValue_"+R,type:"FIXED",value:z.maxValue<<16},{name:"flags_"+R,type:"USHORT",value:0},{name:"nameID_"+R,type:"USHORT",value:Y}]));for(var ue=0;ue<_.instances.length;ue++)L.fields=L.fields.concat(function(be,ve,ke,We){for(var Ge=[{name:"nameID_"+be,type:"USHORT",value:lr(ve.name,We)},{name:"flags_"+be,type:"USHORT",value:0}],je=0;je<ke.length;++je){var vt=ke[je].tag;Ge.push({name:"axis_"+be+" "+vt,type:"FIXED",value:ve.coordinates[vt]<<16})}return Ge}(ue,_.instances[ue],_.axes,E));return L},parse:function(_,E,L){for(var R,z,Y,K,ue=new Re.Parser(_,E),be=ue.parseULong(),ve=(O.argument(be===65536,"Unsupported fvar table version."),ue.parseOffset16()),ke=(ue.skip("uShort",1),ue.parseUShort()),We=ue.parseUShort(),Ge=ue.parseUShort(),je=ue.parseUShort(),vt=[],Qe=0;Qe<ke;Qe++)vt.push((R=_,z=E+ve+Qe*We,Y=L,K={},R=new Re.Parser(R,z),K.tag=R.parseTag(),K.minValue=R.parseFixed(),K.defaultValue=R.parseFixed(),K.maxValue=R.parseFixed(),R.skip("uShort",1),K.name=Y[R.parseUShort()]||{},K));for(var dt=[],Ye=E+ve+ke*We,Xe=0;Xe<Ge;Xe++)dt.push(function(Nt,Zt,Ft,Bt){var _e={},Ie=new Re.Parser(Nt,Zt);_e.name=Bt[Ie.parseUShort()]||{},Ie.skip("uShort",1),_e.coordinates={};for(var $e=0;$e<Ft.length;++$e)_e.coordinates[Ft[$e].tag]=Ie.parseFixed();return _e}(_,Ye+Xe*je,vt,L));return{axes:vt,instances:dt}}},Wr=new Array(10);Wr[1]=function(){var _=this.offset+this.relativeOffset,E=this.parseUShort();return E===1?{posFormat:1,coverage:this.parsePointer(Me.coverage),value:this.parseValueRecord()}:E===2?{posFormat:2,coverage:this.parsePointer(Me.coverage),values:this.parseValueRecordList()}:void O.assert(!1,"0x"+_.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},Wr[2]=function(){var _,E,L,R,Y=this.offset+this.relativeOffset,z=this.parseUShort(),Y=(O.assert(z===1||z===2,"0x"+Y.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),this.parsePointer(Me.coverage)),K=this.parseUShort(),ue=this.parseUShort();return z===1?{posFormat:z,coverage:Y,valueFormat1:K,valueFormat2:ue,pairSets:this.parseList(Me.pointer(Me.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(K),value2:this.parseValueRecord(ue)}})))}:z===2?(_=this.parsePointer(Me.classDef),E=this.parsePointer(Me.classDef),L=this.parseUShort(),R=this.parseUShort(),{posFormat:z,coverage:Y,valueFormat1:K,valueFormat2:ue,classDef1:_,classDef2:E,class1Count:L,class2Count:R,classRecords:this.parseList(L,Me.list(R,function(){return{value1:this.parseValueRecord(K),value2:this.parseValueRecord(ue)}}))}):void 0},Wr[3]=function(){return{error:"GPOS Lookup 3 not supported"}},Wr[4]=function(){return{error:"GPOS Lookup 4 not supported"}},Wr[5]=function(){return{error:"GPOS Lookup 5 not supported"}},Wr[6]=function(){return{error:"GPOS Lookup 6 not supported"}},Wr[7]=function(){return{error:"GPOS Lookup 7 not supported"}},Wr[8]=function(){return{error:"GPOS Lookup 8 not supported"}},Wr[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var qs=new Array(10),_n={parse:function(_,E){return E=(_=new Me(_,E=E||0)).parseVersion(1),O.argument(E===1||E===1.1,"Unsupported GPOS table version "+E),E===1?{version:E,scripts:_.parseScriptList(),features:_.parseFeatureList(),lookups:_.parseLookupList(Wr)}:{version:E,scripts:_.parseScriptList(),features:_.parseFeatureList(),lookups:_.parseLookupList(Wr),variations:_.parseFeatureVariationsList()}},make:function(_){return new qe.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new qe.ScriptList(_.scripts)},{name:"features",type:"TABLE",value:new qe.FeatureList(_.features)},{name:"lookups",type:"TABLE",value:new qe.LookupList(_.lookups,qs)}])}},Ti={parse:function(_,E){if(_=new Re.Parser(_,E),(E=_.parseUShort())===0){var L=_,R={},We=(L.skip("uShort"),L.parseUShort()),z=(O.argument(We===0,"Unsupported kern sub-table version."),L.skip("uShort",2),L.parseUShort());L.skip("uShort",3);for(var Y=0;Y<z;Y+=1){var K=L.parseUShort(),ue=L.parseUShort(),be=L.parseShort();R[K+","+ue]=be}return R}if(E!==1)throw new Error("Unsupported kern table version ("+E+").");var ve=_,ke={},We=(ve.skip("uShort"),1<ve.parseULong()&&console.warn("Only the first kern subtable is supported."),ve.skip("uLong"),255&ve.parseUShort());if(ve.skip("uShort"),We==0){var Ge=ve.parseUShort();ve.skip("uShort",3);for(var je=0;je<Ge;je+=1){var vt=ve.parseUShort(),Qe=ve.parseUShort(),dt=ve.parseShort();ke[vt+","+Qe]=dt}}return ke}},jn={parse:function(_,E,L,R){for(var z=new Re.Parser(_,E),Y=R?z.parseUShort:z.parseULong,K=[],ue=0;ue<L+1;ue+=1){var be=Y.call(z);R&&(be*=2),K.push(be)}return K}};function Fn(_,E){t("fs").readFile(_,function(L,R){if(L)return E(L.message);E(null,li(R))})}function di(_,E){var L=new XMLHttpRequest;L.open("get",_,!0),L.responseType="arraybuffer",L.onload=function(){return L.response?E(null,L.response):E("Font could not be loaded: "+L.statusText)},L.onerror=function(){E("Font could not be loaded")},L.send()}function $r(_,E){for(var L=[],R=12,z=0;z<E;z+=1){var Y=Re.getTag(_,R),K=Re.getULong(_,R+4),ue=Re.getULong(_,R+8),be=Re.getULong(_,R+12);L.push({tag:Y,checksum:K,offset:ue,length:be,compression:!1}),R+=16}return L}function rr(L,E){if(E.compression!=="WOFF")return{data:L,offset:E.offset};var L=new Uint8Array(L.buffer,E.offset+2,E.compressedLength-2),R=new Uint8Array(E.length);if(G(L,R),R.byteLength!==E.length)throw new Error("Decompression error: "+E.tag+" decompressed length doesn't match recorded length");return{data:new DataView(R.buffer,0),offset:0}}function Er(Xe){var E,L,R,z,Y,K,ue,be,ve,ke,We,Ge,je,vt,Qe=new ur({empty:!0}),dt=new DataView(Xe,0),Ye=[],Xe=Re.getTag(dt,0);if(Xe===String.fromCharCode(0,1,0,0)||Xe==="true"||Xe==="typ1")Qe.outlinesFormat="truetype",Ye=$r(dt,R=Re.getUShort(dt,4));else if(Xe==="OTTO")Qe.outlinesFormat="cff",Ye=$r(dt,R=Re.getUShort(dt,4));else{if(Xe!=="wOFF")throw new Error("Unsupported OpenType signature "+Xe);var Nt=Re.getTag(dt,4);if(Nt===String.fromCharCode(0,1,0,0))Qe.outlinesFormat="truetype";else{if(Nt!=="OTTO")throw new Error("Unsupported OpenType flavor "+Xe);Qe.outlinesFormat="cff"}Ye=function(Tt,Gt){for(var zt=[],It=44,Xt=0;Xt<Gt;Xt+=1){var kt=Re.getTag(Tt,It),sr=Re.getULong(Tt,It+4),Lr=Re.getULong(Tt,It+8),wr=Re.getULong(Tt,It+12),qr=void 0,qr=Lr<wr&&"WOFF";zt.push({tag:kt,offset:sr,compression:qr,compressedLength:Lr,length:wr}),It+=20}return zt}(dt,R=Re.getUShort(dt,12))}for(var Zt=0;Zt<R;Zt+=1){var Ft=Ye[Zt],Bt=void 0;switch(Ft.tag){case"cmap":Bt=rr(dt,Ft),Qe.tables.cmap=q.parse(Bt.data,Bt.offset),Qe.encoding=new Ne(Qe.tables.cmap);break;case"cvt ":Bt=rr(dt,Ft),vt=new Re.Parser(Bt.data,Bt.offset),Qe.tables.cvt=vt.parseShortList(Ft.length/2);break;case"fvar":Y=Ft;break;case"fpgm":Bt=rr(dt,Ft),vt=new Re.Parser(Bt.data,Bt.offset),Qe.tables.fpgm=vt.parseByteList(Ft.length);break;case"head":Bt=rr(dt,Ft),Qe.tables.head=Vt.parse(Bt.data,Bt.offset),Qe.unitsPerEm=Qe.tables.head.unitsPerEm,E=Qe.tables.head.indexToLocFormat;break;case"hhea":Bt=rr(dt,Ft),Qe.tables.hhea=xe.parse(Bt.data,Bt.offset),Qe.ascender=Qe.tables.hhea.ascender,Qe.descender=Qe.tables.hhea.descender,Qe.numberOfHMetrics=Qe.tables.hhea.numberOfHMetrics;break;case"hmtx":ve=Ft;break;case"ltag":Bt=rr(dt,Ft),L=xt.parse(Bt.data,Bt.offset);break;case"maxp":Bt=rr(dt,Ft),Qe.tables.maxp=ct.parse(Bt.data,Bt.offset),Qe.numGlyphs=Qe.tables.maxp.numGlyphs;break;case"name":Ge=Ft;break;case"OS/2":Bt=rr(dt,Ft),Qe.tables.os2=cr.parse(Bt.data,Bt.offset);break;case"post":Bt=rr(dt,Ft),Qe.tables.post=xr.parse(Bt.data,Bt.offset),Qe.glyphNames=new ft(Qe.tables.post);break;case"prep":Bt=rr(dt,Ft),vt=new Re.Parser(Bt.data,Bt.offset),Qe.tables.prep=vt.parseByteList(Ft.length);break;case"glyf":K=Ft;break;case"loca":We=Ft;break;case"CFF ":z=Ft;break;case"kern":ke=Ft;break;case"GPOS":ue=Ft;break;case"GSUB":be=Ft;break;case"meta":je=Ft}}if(Nt=rr(dt,Ge),Qe.tables.name=Or.parse(Nt.data,Nt.offset,L),Qe.names=Qe.tables.name,K&&We)Xe=E===0,Nt=rr(dt,We),Nt=jn.parse(Nt.data,Nt.offset,Qe.numGlyphs,Xe),Xe=rr(dt,K),Qe.glyphs=Co.parse(Xe.data,Xe.offset,Nt,Qe);else{if(!z)throw new Error("Font doesn't contain TrueType or CFF outlines.");Xe=rr(dt,z),yt.parse(Xe.data,Xe.offset,Qe)}for(var Nt=rr(dt,ve),_e=(lt.parse(Nt.data,Nt.offset,Qe.numberOfHMetrics,Qe.numGlyphs,Qe.glyphs),Qe),Ie=_e.tables.cmap.glyphIndexMap,$e=Object.keys(Ie),rt=0;rt<$e.length;rt+=1){var pt,Lt=$e[rt],Pt=Ie[Lt];(pt=_e.glyphs.get(Pt)).addUnicode(parseInt(Lt))}for(var At=0;At<_e.glyphs.length;At+=1)pt=_e.glyphs.get(At),_e.cffEncoding?_e.isCIDFont?pt.name="gid"+At:pt.name=_e.cffEncoding.charset[At]:_e.glyphNames.names&&(pt.name=_e.glyphNames.glyphIndexToName(At));return ke?(Xe=rr(dt,ke),Qe.kerningPairs=Ti.parse(Xe.data,Xe.offset)):Qe.kerningPairs={},ue&&(Nt=rr(dt,ue),Qe.tables.gpos=_n.parse(Nt.data,Nt.offset),Qe.position.init()),be&&(Xe=rr(dt,be),Qe.tables.gsub=ai.parse(Xe.data,Xe.offset)),Y&&(Nt=rr(dt,Y),Qe.tables.fvar=Tr.parse(Nt.data,Nt.offset,Qe.names)),je&&(Xe=rr(dt,je),Qe.tables.meta=Zi.parse(Xe.data,Xe.offset),Qe.metas=Qe.tables.meta),Qe}a.Font=ur,a.Glyph=Ee,a.Path=ne,a.BoundingBox=Q,a._parse=Re,a.parse=Er,a.load=function(_,E){(typeof window>"u"?Fn:di)(_,function(L,R){if(L)return E(L);var z;try{z=Er(R)}catch(Y){return E(Y,null)}return E(null,z)})},a.loadSync=function(_){return Er(li(t("fs").readFileSync(_)))},Object.defineProperty(a,"__esModule",{value:!0})},s(typeof i=="object"&&r!==void 0?i:o.opentype={})}).call(this,t("buffer").Buffer)},{buffer:4,fs:2}],250:[function(t,r,i){(function(n){function o(f,h){for(var l=0,u=f.length-1;0<=u;u--){var c=f[u];c==="."?f.splice(u,1):c===".."?(f.splice(u,1),l++):l&&(f.splice(u,1),l--)}if(h)for(;l--;)f.unshift("..");return f}function s(f,h){if(f.filter)return f.filter(h);for(var l=[],u=0;u<f.length;u++)h(f[u],u,f)&&l.push(f[u]);return l}i.resolve=function(){for(var f="",h=!1,l=arguments.length-1;-1<=l&&!h;l--){var u=0<=l?arguments[l]:n.cwd();if(typeof u!="string")throw new TypeError("Arguments to path.resolve must be strings");u&&(f=u+"/"+f,h=u.charAt(0)==="/")}return(h?"/":"")+(f=o(s(f.split("/"),function(c){return!!c}),!h).join("/"))||"."},i.normalize=function(f){var h=i.isAbsolute(f),l=a(f,-1)==="/";return(f=(f=o(s(f.split("/"),function(u){return!!u}),!h).join("/"))||h?f:".")&&l&&(f+="/"),(h?"/":"")+f},i.isAbsolute=function(f){return f.charAt(0)==="/"},i.join=function(){var f=Array.prototype.slice.call(arguments,0);return i.normalize(s(f,function(h,l){if(typeof h!="string")throw new TypeError("Arguments to path.join must be strings");return h}).join("/"))},i.relative=function(f,h){function l(g){for(var v=0;v<g.length&&g[v]==="";v++);for(var x=g.length-1;0<=x&&g[x]==="";x--);return x<v?[]:g.slice(v,x-v+1)}f=i.resolve(f).substr(1),h=i.resolve(h).substr(1);for(var u=l(f.split("/")),c=l(h.split("/")),d=Math.min(u.length,c.length),y=d,p=0;p<d;p++)if(u[p]!==c[p]){y=p;break}for(var m=[],p=y;p<u.length;p++)m.push("..");return(m=m.concat(c.slice(y))).join("/")},i.sep="/",i.delimiter=":",i.dirname=function(f){if(typeof f!="string"&&(f+=""),f.length===0)return".";for(var h=f.charCodeAt(0)===47,l=-1,u=!0,c=f.length-1;1<=c;--c)if(f.charCodeAt(c)===47){if(!u){l=c;break}}else u=!1;return l===-1?h?"/":".":h&&l===1?"/":f.slice(0,l)},i.basename=function(f,h){return f=function(l){typeof l!="string"&&(l+="");for(var u=0,c=-1,d=!0,y=l.length-1;0<=y;--y)if(l.charCodeAt(y)===47){if(!d){u=y+1;break}}else c===-1&&(d=!1,c=y+1);return c===-1?"":l.slice(u,c)}(f),f=h&&f.substr(-1*h.length)===h?f.substr(0,f.length-h.length):f},i.extname=function(f){typeof f!="string"&&(f+="");for(var h=-1,l=0,u=-1,c=!0,d=0,y=f.length-1;0<=y;--y){var p=f.charCodeAt(y);if(p===47){if(c)continue;l=y+1;break}u===-1&&(c=!1,u=y+1),p===46?h===-1?h=y:d!==1&&(d=1):h!==-1&&(d=-1)}return h===-1||u===-1||d===0||d===1&&h===u-1&&h===l+1?"":f.slice(h,u)};var a="ab".substr(-1)==="b"?function(f,h,l){return f.substr(h,l)}:function(f,h,l){return h<0&&(h=f.length+h),f.substr(h,l)}}).call(this,t("_process"))},{_process:251}],251:[function(t,s,i){var n,o,s=s.exports={};function a(){throw new Error("setTimeout has not been defined")}function f(){throw new Error("clearTimeout has not been defined")}try{n=typeof setTimeout=="function"?setTimeout:a}catch{n=a}try{o=typeof clearTimeout=="function"?clearTimeout:f}catch{o=f}function h(v){if(n===setTimeout)return setTimeout(v,0);if((n===a||!n)&&setTimeout)return(n=setTimeout)(v,0);try{return n(v,0)}catch{try{return n.call(null,v,0)}catch{return n.call(this,v,0)}}}var l,u=[],c=!1,d=-1;function y(){c&&l&&(c=!1,l.length?u=l.concat(u):d=-1,u.length&&p())}function p(){if(!c){for(var v=h(y),x=(c=!0,u.length);x;){for(l=u,u=[];++d<x;)l&&l[d].run();d=-1,x=u.length}l=null,c=!1,function(T){if(o===clearTimeout)return clearTimeout(T);if((o===f||!o)&&clearTimeout)return(o=clearTimeout)(T);try{o(T)}catch{try{return o.call(null,T)}catch{return o.call(this,T)}}}(v)}}function m(v,x){this.fun=v,this.array=x}function g(){}s.nextTick=function(v){var x=new Array(arguments.length-1);if(1<arguments.length)for(var T=1;T<arguments.length;T++)x[T-1]=arguments[T];u.push(new m(v,x)),u.length!==1||c||h(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=g,s.addListener=g,s.once=g,s.off=g,s.removeListener=g,s.removeAllListeners=g,s.emit=g,s.prependListener=g,s.prependOnceListener=g,s.listeners=function(v){return[]},s.binding=function(v){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(v){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],252:[function(t,r,i){r=function(n){var o,s=Object.prototype,a=s.hasOwnProperty,w=typeof Symbol=="function"?Symbol:{},f=w.iterator||"@@iterator",h=w.asyncIterator||"@@asyncIterator",l=w.toStringTag||"@@toStringTag";function u(H,V,W,Z){var ne,U,D,O,V=V&&V.prototype instanceof v?V:v,V=Object.create(V.prototype),Z=new F(Z||[]);return V._invoke=(ne=H,U=W,D=Z,O=d,function(ie,re){if(O===p)throw new Error("Generator is already running");if(O===m){if(ie==="throw")throw re;return B()}for(D.method=ie,D.arg=re;;){var ge=D.delegate;if(ge&&(ge=function ye(he,pe){var we=he.iterator[pe.method];if(we===o){if(pe.delegate=null,pe.method==="throw"){if(he.iterator.return&&(pe.method="return",pe.arg=o,ye(he,pe),pe.method==="throw"))return g;pe.method="throw",pe.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}if(we=c(we,he.iterator,pe.arg),we.type==="throw")return pe.method="throw",pe.arg=we.arg,pe.delegate=null,g;if(we=we.arg,!we)return pe.method="throw",pe.arg=new TypeError("iterator result is not an object"),pe.delegate=null,g;{if(!we.done)return we;pe[he.resultName]=we.value,pe.next=he.nextLoc,pe.method!=="return"&&(pe.method="next",pe.arg=o)}return pe.delegate=null,g}(ge,D),ge)){if(ge===g)continue;return ge}if(D.method==="next")D.sent=D._sent=D.arg;else if(D.method==="throw"){if(O===d)throw O=m,D.arg;D.dispatchException(D.arg)}else D.method==="return"&&D.abrupt("return",D.arg);if(O=p,ge=c(ne,U,D),ge.type==="normal"){if(O=D.done?m:y,ge.arg!==g)return{value:ge.arg,done:D.done}}else ge.type==="throw"&&(O=m,D.method="throw",D.arg=ge.arg)}}),V}function c(H,G,W){try{return{type:"normal",arg:H.call(G,W)}}catch(Q){return{type:"throw",arg:Q}}}n.wrap=u;var d="suspendedStart",y="suspendedYield",p="executing",m="completed",g={};function v(){}function x(){}function T(){}var w={},b=(w[f]=function(){return this},Object.getPrototypeOf),b=b&&b(b(I([]))),C=(b&&b!==s&&a.call(b,f)&&(w=b),T.prototype=v.prototype=Object.create(w));function A(H){["next","throw","return"].forEach(function(G){H[G]=function(W){return this._invoke(G,W)}})}function M(H){var G;this._invoke=function(W,Q){function ne(){return new Promise(function(U,D){(function O(ye,Z,ie,re){var ge,ye=c(H[ye],H,Z);if(ye.type!=="throw")return(Z=(ge=ye.arg).value)&&typeof Z=="object"&&a.call(Z,"__await")?Promise.resolve(Z.__await).then(function(he){O("next",he,ie,re)},function(he){O("throw",he,ie,re)}):Promise.resolve(Z).then(function(he){ge.value=he,ie(ge)},function(he){return O("throw",he,ie,re)});re(ye.arg)})(W,Q,U,D)})}return G=G?G.then(ne,ne):ne()}}function k(H){var G={tryLoc:H[0]};1 in H&&(G.catchLoc=H[1]),2 in H&&(G.finallyLoc=H[2],G.afterLoc=H[3]),this.tryEntries.push(G)}function P(H){var G=H.completion||{};G.type="normal",delete G.arg,H.completion=G}function F(H){this.tryEntries=[{tryLoc:"root"}],H.forEach(k,this),this.reset(!0)}function I(H){if(H){var G,W=H[f];if(W)return W.call(H);if(typeof H.next=="function")return H;if(!isNaN(H.length))return G=-1,(W=function Q(){for(;++G<H.length;)if(a.call(H,G))return Q.value=H[G],Q.done=!1,Q;return Q.value=o,Q.done=!0,Q}).next=W}return{next:B}}function B(){return{value:o,done:!0}}return(x.prototype=C.constructor=T).constructor=x,T[l]=x.displayName="GeneratorFunction",n.isGeneratorFunction=function(H){return H=typeof H=="function"&&H.constructor,!!H&&(H===x||(H.displayName||H.name)==="GeneratorFunction")},n.mark=function(H){return Object.setPrototypeOf?Object.setPrototypeOf(H,T):(H.__proto__=T,l in H||(H[l]="GeneratorFunction")),H.prototype=Object.create(C),H},n.awrap=function(H){return{__await:H}},A(M.prototype),M.prototype[h]=function(){return this},n.AsyncIterator=M,n.async=function(H,G,W,Q){var ne=new M(u(H,G,W,Q));return n.isGeneratorFunction(G)?ne:ne.next().then(function(U){return U.done?U.value:ne.next()})},A(C),C[l]="Generator",C[f]=function(){return this},C.toString=function(){return"[object Generator]"},n.keys=function(H){var G,W=[];for(G in H)W.push(G);return W.reverse(),function Q(){for(;W.length;){var ne=W.pop();if(ne in H)return Q.value=ne,Q.done=!1,Q}return Q.done=!0,Q}},n.values=I,F.prototype={constructor:F,reset:function(H){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(P),!H)for(var G in this)G.charAt(0)==="t"&&a.call(this,G)&&!isNaN(+G.slice(1))&&(this[G]=o)},stop:function(){this.done=!0;var H=this.tryEntries[0].completion;if(H.type==="throw")throw H.arg;return this.rval},dispatchException:function(H){if(this.done)throw H;var G=this;function W(V,Z){return U.type="throw",U.arg=H,G.next=V,Z&&(G.method="next",G.arg=o),!!Z}for(var Q=this.tryEntries.length-1;0<=Q;--Q){var ne=this.tryEntries[Q],U=ne.completion;if(ne.tryLoc==="root")return W("end");if(ne.tryLoc<=this.prev){var D=a.call(ne,"catchLoc"),O=a.call(ne,"finallyLoc");if(D&&O){if(this.prev<ne.catchLoc)return W(ne.catchLoc,!0);if(this.prev<ne.finallyLoc)return W(ne.finallyLoc)}else if(D){if(this.prev<ne.catchLoc)return W(ne.catchLoc,!0)}else{if(!O)throw new Error("try statement without catch or finally");if(this.prev<ne.finallyLoc)return W(ne.finallyLoc)}}}},abrupt:function(H,G){for(var W=this.tryEntries.length-1;0<=W;--W){var Q=this.tryEntries[W];if(Q.tryLoc<=this.prev&&a.call(Q,"finallyLoc")&&this.prev<Q.finallyLoc){var ne=Q;break}}var U=(ne=ne&&(H==="break"||H==="continue")&&ne.tryLoc<=G&&G<=ne.finallyLoc?null:ne)?ne.completion:{};return U.type=H,U.arg=G,ne?(this.method="next",this.next=ne.finallyLoc,g):this.complete(U)},complete:function(H,G){if(H.type==="throw")throw H.arg;return H.type==="break"||H.type==="continue"?this.next=H.arg:H.type==="return"?(this.rval=this.arg=H.arg,this.method="return",this.next="end"):H.type==="normal"&&G&&(this.next=G),g},finish:function(H){for(var G=this.tryEntries.length-1;0<=G;--G){var W=this.tryEntries[G];if(W.finallyLoc===H)return this.complete(W.completion,W.afterLoc),P(W),g}},catch:function(H){for(var G=this.tryEntries.length-1;0<=G;--G){var W,Q,ne=this.tryEntries[G];if(ne.tryLoc===H)return(W=ne.completion).type==="throw"&&(Q=W.arg,P(ne)),Q}throw new Error("illegal catch attempt")},delegateYield:function(H,G,W){return this.delegate={iterator:I(H),resultName:G,nextLoc:W},this.method==="next"&&(this.arg=o),g}},n}(typeof r=="object"?r.exports:{});try{regeneratorRuntime=r}catch{Function("r","regeneratorRuntime = r")(r)}},{}],253:[function(t,r,i){(function(n){var o,s,a,f,h,l,u,c,d,y;function p(P){if(typeof P!="string"&&(P=String(P)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(P))throw new TypeError("Invalid character in header field name");return P.toLowerCase()}function m(P){return P=typeof P!="string"?String(P):P}function g(P){var F={next:function(){var I=P.shift();return{done:I===void 0,value:I}}};return s&&(F[Symbol.iterator]=function(){return F}),F}function v(P){this.map={},P instanceof v?P.forEach(function(F,I){this.append(I,F)},this):Array.isArray(P)?P.forEach(function(F){this.append(F[0],F[1])},this):P&&Object.getOwnPropertyNames(P).forEach(function(F){this.append(F,P[F])},this)}function x(P){if(P.bodyUsed)return Promise.reject(new TypeError("Already read"));P.bodyUsed=!0}function T(P){return new Promise(function(F,I){P.onload=function(){F(P.result)},P.onerror=function(){I(P.error)}})}function w(P){var F=new FileReader,I=T(F);return F.readAsArrayBuffer(P),I}function b(P){var F;return P.slice?P.slice(0):((F=new Uint8Array(P.byteLength)).set(new Uint8Array(P)),F.buffer)}function C(){return this.bodyUsed=!1,this._initBody=function(P){if(this._bodyInit=P)if(typeof P=="string")this._bodyText=P;else if(a&&Blob.prototype.isPrototypeOf(P))this._bodyBlob=P;else if(f&&FormData.prototype.isPrototypeOf(P))this._bodyFormData=P;else if(o&&URLSearchParams.prototype.isPrototypeOf(P))this._bodyText=P.toString();else if(h&&a&&u(P))this._bodyArrayBuffer=b(P.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!h||!ArrayBuffer.prototype.isPrototypeOf(P)&&!c(P))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=b(P)}else this._bodyText="";this.headers.get("content-type")||(typeof P=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o&&URLSearchParams.prototype.isPrototypeOf(P)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a&&(this.blob=function(){var P=x(this);if(P)return P;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?x(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(w)}),this.text=function(){var P,F,I=x(this);if(I)return I;if(this._bodyBlob)return I=this._bodyBlob,P=new FileReader,F=T(P),P.readAsText(I),F;if(this._bodyArrayBuffer)return Promise.resolve(function(B){for(var H=new Uint8Array(B),G=new Array(H.length),W=0;W<H.length;W++)G[W]=String.fromCharCode(H[W]);return G.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},f&&(this.formData=function(){return this.text().then(M)}),this.json=function(){return this.text().then(JSON.parse)},this}function A(P,F){var I,B=(F=F||{}).body;if(P instanceof A){if(P.bodyUsed)throw new TypeError("Already read");this.url=P.url,this.credentials=P.credentials,F.headers||(this.headers=new v(P.headers)),this.method=P.method,this.mode=P.mode,B||P._bodyInit==null||(B=P._bodyInit,P.bodyUsed=!0)}else this.url=String(P);if(this.credentials=F.credentials||this.credentials||"omit",!F.headers&&this.headers||(this.headers=new v(F.headers)),this.method=(P=F.method||this.method||"GET",I=P.toUpperCase(),-1<d.indexOf(I)?I:P),this.mode=F.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&B)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(B)}function M(P){var F=new FormData;return P.trim().split("&").forEach(function(I){var B;I&&(B=(I=I.split("=")).shift().replace(/\+/g," "),I=I.join("=").replace(/\+/g," "),F.append(decodeURIComponent(B),decodeURIComponent(I)))}),F}function k(P,F){F=F||{},this.type="default",this.status=F.status===void 0?200:F.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in F?F.statusText:"OK",this.headers=new v(F.headers),this.url=F.url||"",this._initBody(P)}n.fetch||(o="URLSearchParams"in n,s="Symbol"in n&&"iterator"in Symbol,a="FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch{return!1}}(),f="FormData"in n,(h="ArrayBuffer"in n)&&(l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=function(P){return P&&DataView.prototype.isPrototypeOf(P)},c=ArrayBuffer.isView||function(P){return P&&-1<l.indexOf(Object.prototype.toString.call(P))}),v.prototype.append=function(P,F){P=p(P),F=m(F);var I=this.map[P];this.map[P]=I?I+","+F:F},v.prototype.delete=function(P){delete this.map[p(P)]},v.prototype.get=function(P){return P=p(P),this.has(P)?this.map[P]:null},v.prototype.has=function(P){return this.map.hasOwnProperty(p(P))},v.prototype.set=function(P,F){this.map[p(P)]=m(F)},v.prototype.forEach=function(P,F){for(var I in this.map)this.map.hasOwnProperty(I)&&P.call(F,this.map[I],I,this)},v.prototype.keys=function(){var P=[];return this.forEach(function(F,I){P.push(I)}),g(P)},v.prototype.values=function(){var P=[];return this.forEach(function(F){P.push(F)}),g(P)},v.prototype.entries=function(){var P=[];return this.forEach(function(F,I){P.push([I,F])}),g(P)},s&&(v.prototype[Symbol.iterator]=v.prototype.entries),d=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],A.prototype.clone=function(){return new A(this,{body:this._bodyInit})},C.call(A.prototype),C.call(k.prototype),k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new v(this.headers),url:this.url})},k.error=function(){var P=new k(null,{status:0,statusText:""});return P.type="error",P},y=[301,302,303,307,308],k.redirect=function(P,F){if(y.indexOf(F)===-1)throw new RangeError("Invalid status code");return new k(null,{status:F,headers:{location:P}})},n.Headers=v,n.Request=A,n.Response=k,n.fetch=function(P,F){return new Promise(function(I,B){var H=new A(P,F),G=new XMLHttpRequest;G.onload=function(){var W,Q={status:G.status,statusText:G.statusText,headers:(Q=G.getAllResponseHeaders()||"",W=new v,Q.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(D){var D=D.split(":"),O=D.shift().trim();O&&(D=D.join(":").trim(),W.append(O,D))}),W)},ne=(Q.url="responseURL"in G?G.responseURL:Q.headers.get("X-Request-URL"),"response"in G?G.response:G.responseText);I(new k(ne,Q))},G.onerror=function(){B(new TypeError("Network request failed"))},G.ontimeout=function(){B(new TypeError("Network request failed"))},G.open(H.method,H.url,!0),H.credentials==="include"?G.withCredentials=!0:H.credentials==="omit"&&(G.withCredentials=!1),"responseType"in G&&a&&(G.responseType="blob"),H.headers.forEach(function(W,Q){G.setRequestHeader(Q,W)}),G.send(H._bodyInit===void 0?null:H._bodyInit)})},n.fetch.polyfill=!0)})(typeof self<"u"?self:this)},{}],254:[function(t,r,i){t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n,o=a(t("../core/main")),s=a(t("../color/color_conversion"));function a(l){return l&&l.__esModule?l:{default:l}}var f=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],h=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];o.default.prototype._rgbColorName=function(d){var u,c,d=s.default._rgbaToHSBA(d),y=[(n=d)[0],d[1],d[2]];y[0]!==0&&(y[0]=Math.round(100*y[0]),(d=y[0].toString().split(""))[c=d.length-1]=parseInt(d[c]),d[c]<2.5?d[c]=0:2.5<=d[c]&&d[c]<7.5&&(d[c]=5),d.length===2?(d[0]=parseInt(d[0]),7.5<=d[c]&&(d[c]=0,d[0]=d[0]+1),y[0]=10*d[0]+d[1]):7.5<=d[c]?y[0]=10:y[0]=d[c]),y[2]=y[2]/255;for(var p=y.length-1;1<=p;p--)y[p]<=.25?y[p]=0:.25<y[p]&&y[p]<.75?y[p]=.5:y[p]=1;if(y[0]===0&&y[1]===0&&y[2]===1){for(var m=2;0<=m;m--)n[m]=Math.round(1e4*n[m])/1e4;for(var g=0;g<f.length;g++){if(f[g].h===n[0]&&f[g].s===n[1]&&f[g].b===n[2]){u=f[g].name;break}u="white"}}else for(var v=0;v<h.length;v++)if(h[v].h===y[0]&&h[v].s===y[1]&&h[v].b===y[2]){u=h[v].name;break}return u},t=o.default,i.default=t},{"../color/color_conversion":260,"../core/main":275,"core-js/modules/es.function.name":168,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.split":198}],255:[function(t,r,i){t("core-js/modules/es.array.concat"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.replace"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=(t=t("../core/main"))&&t.__esModule?t:{default:t},o="_Description",s="_fallbackDesc",a="_fallbackTable",f="_Label",h="_labelDesc",l="_labelTable";function u(c){if(c==="label"||c==="fallback")throw new Error("description should not be LABEL or FALLBACK");return c.endsWith(".")||c.endsWith(";")||c.endsWith(",")||c.endsWith("?")||c.endsWith("!")||(c+="."),c}n.default.prototype.describe=function(c,d){var y;n.default._validateParameters("describe",arguments),typeof c=="string"&&(y=this.canvas.id,c=u(c),this.dummyDOM||(this.dummyDOM=document.getElementById(y).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==c&&(this.descriptions.fallback.innerHTML=c):this._describeHTML("fallback",c),d===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==c&&(this.descriptions.label.innerHTML=c):this._describeHTML("label",c)))},n.default.prototype.describeElement=function(c,d,y){var p,m;n.default._validateParameters("describeElement",arguments),typeof d=="string"&&typeof c=="string"&&(p=this.canvas.id,d=u(d),m=function(g){if(g==="label"||g==="fallback")throw new Error("element name should not be LABEL or FALLBACK");return g.endsWith(".")||g.endsWith(";")||g.endsWith(",")?g=g.replace(/.$/,":"):g.endsWith(":")||(g+=":"),g}(c),c=c.replace(/[^a-zA-Z0-9]/g,""),m='<th scope="row">'.concat(m,"</th><td>").concat(d,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(p).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[c]?this.descriptions.fallbackElements[c].innerHTML!==m&&(this.descriptions.fallbackElements[c].innerHTML=m):this._describeElementHTML("fallback",c,m),y===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[c]?this.descriptions.labelElements[c].innerHTML!==m&&(this.descriptions.labelElements[c].innerHTML=m):this._describeElementHTML("label",c,m)))},n.default.prototype._describeHTML=function(c,d){var y,p=this.canvas.id;c==="fallback"?(this.dummyDOM.querySelector("#".concat(p+o))?this.dummyDOM.querySelector("#"+p+a).insertAdjacentHTML("beforebegin",'<p id="'.concat(p+s,'"></p>')):(y='<div id="'.concat(p).concat(o,'" role="region" aria-label="Canvas Description"><p id="').concat(p).concat(s,'"></p></div>'),this.dummyDOM.querySelector("#".concat(p,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(p,"accessibleOutput")).insertAdjacentHTML("beforebegin",y):this.dummyDOM.querySelector("#".concat(p)).innerHTML=y),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(p).concat(s)),this.descriptions.fallback.innerHTML=d):c==="label"&&(this.dummyDOM.querySelector("#".concat(p+f))?this.dummyDOM.querySelector("#".concat(p+l))&&this.dummyDOM.querySelector("#".concat(p+l)).insertAdjacentHTML("beforebegin",'<p id="'.concat(p).concat(h,'"></p>')):(y='<div id="'.concat(p).concat(f,'" class="p5Label"><p id="').concat(p).concat(h,'"></p></div>'),this.dummyDOM.querySelector("#".concat(p,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(p,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",y):this.dummyDOM.querySelector("#"+p).insertAdjacentHTML("afterend",y)),this.descriptions.label=this.dummyDOM.querySelector("#"+p+h),this.descriptions.label.innerHTML=d)},n.default.prototype._describeElementHTML=function(c,d,y){var p,m=this.canvas.id;c==="fallback"?(this.dummyDOM.querySelector("#".concat(m+o))?this.dummyDOM.querySelector("#"+m+a)||this.dummyDOM.querySelector("#"+m+s).insertAdjacentHTML("afterend",'<table id="'.concat(m).concat(a,'"><caption>Canvas elements and their descriptions</caption></table>')):(p='<div id="'.concat(m).concat(o,'" role="region" aria-label="Canvas Description"><table id="').concat(m).concat(a,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(m,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(m,"accessibleOutput")).insertAdjacentHTML("beforebegin",p):this.dummyDOM.querySelector("#"+m).innerHTML=p),(p=document.createElement("tr")).id=m+"_fte_"+d,this.dummyDOM.querySelector("#"+m+a).appendChild(p),this.descriptions.fallbackElements[d]=this.dummyDOM.querySelector("#".concat(m).concat("_fte_").concat(d)),this.descriptions.fallbackElements[d].innerHTML=y):c==="label"&&(this.dummyDOM.querySelector("#".concat(m+f))?this.dummyDOM.querySelector("#".concat(m+l))||this.dummyDOM.querySelector("#"+m+h).insertAdjacentHTML("afterend",'<table id="'.concat(m+l,'"></table>')):(p='<div id="'.concat(m).concat(f,'" class="p5Label"><table id="').concat(m).concat(l,'"></table></div>'),this.dummyDOM.querySelector("#".concat(m,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(m,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",p):this.dummyDOM.querySelector("#"+m).insertAdjacentHTML("afterend",p)),(c=document.createElement("tr")).id=m+"_lte_"+d,this.dummyDOM.querySelector("#"+m+l).appendChild(c),this.descriptions.labelElements[d]=this.dummyDOM.querySelector("#".concat(m).concat("_lte_").concat(d)),this.descriptions.labelElements[d].innerHTML=y)},t=n.default,i.default=t},{"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.ends-with":190,"core-js/modules/es.string.replace":196}],256:[function(t,r,i){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.map"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.map"),t("core-js/modules/es.string.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype._updateGridOutput=function(n){var o,s,a,f;this.dummyDOM.querySelector("#".concat(n,"_summary"))&&(o=this._accessibleOutputs[n],a=function(h,l,u,c){return l="".concat(l," canvas, ").concat(u," by ").concat(c," pixels, contains ").concat(h[0]),l=(h[0]===1?"".concat(l," shape: "):"".concat(l," shapes: ")).concat(h[1]),l}((s=function(h,l){var u,c="",d="",y=0;for(u in l){var p,m=0;for(p in l[u]){var g='<li id="'.concat(h,"shape").concat(y,'">').concat(l[u][p].color," ").concat(u,",");u==="line"?g+=" location = ".concat(l[u][p].pos,", length = ").concat(l[u][p].length," pixels"):(g+=" location = ".concat(l[u][p].pos),u!=="point"&&(g+=", area = ".concat(l[u][p].area," %")),g+="</li>"),c+=g,m++,y++}d=1<m?"".concat(d," ").concat(m," ").concat(u,"s"):"".concat(d," ").concat(m," ").concat(u)}return{numShapes:[y,d],details:c}}(n,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),f=function(h,l){var u,c,d=0,y="",p=Array.from(Array(10),function(){return Array(10)});for(u in l)for(var m in l[u]){var g=void 0;g=u!=="line"?'<a href="#'.concat(h,"shape").concat(d,'">').concat(l[u][m].color," ").concat(u,"</a>"):'<a href="#'.concat(h,"shape").concat(d,'">').concat(l[u][m].color," ").concat(u," midpoint</a>"),p[l[u][m].loc.locY][l[u][m].loc.locX]?p[l[u][m].loc.locY][l[u][m].loc.locX]=p[l[u][m].loc.locY][l[u][m].loc.locX]+"  "+g:p[l[u][m].loc.locY][l[u][m].loc.locX]=g,d++}for(c in p){var v,x="<tr>";for(v in p[c])x+="<td>",p[c][v]!==void 0&&(x+=p[c][v]),x+="</td>";y=y+x+"</tr>"}return y}(n,this.ingredients.shapes),a!==o.summary.innerHTML&&(o.summary.innerHTML=a),f!==o.map.innerHTML&&(o.map.innerHTML=f),s.details!==o.shapeDetails.innerHTML&&(o.shapeDetails.innerHTML=s.details),this._accessibleOutputs[n]=o)},t=t.default,i.default=t},{"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.from":158,"core-js/modules/es.array.map":164,"core-js/modules/es.string.iterator":192}],257:[function(t,r,i){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.to-fixed"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=(t=t("../core/main"))&&t.__esModule?t:{default:t};function o(a){return function(f){if(Array.isArray(f)){for(var h=0,l=new Array(f.length);h<f.length;h++)l[h]=f[h];return l}}(a)||function(f){if(Symbol.iterator in Object(f)||Object.prototype.toString.call(f)==="[object Arguments]")return Array.from(f)}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(a,f,h){return f=Math.floor(a[0]/f*10),a=Math.floor(a[1]/h*10),f===10&&(f-=1),a===10&&(a-=1),{locX:f,locY:a}}n.default.prototype.textOutput=function(a){n.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),a===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},n.default.prototype.gridOutput=function(a){n.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),a===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},n.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},n.default.prototype._createOutput=function(a,f){var h,l,u,c=this.canvas.id,d=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(c).parentNode),"");f==="Fallback"?(h=c+a,this.dummyDOM.querySelector("#".concat(l=c+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(c,"_Description"))?this.dummyDOM.querySelector("#".concat(c,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(l,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(c)).innerHTML='<div id="'.concat(l,'" role="region" aria-label="Canvas Outputs"></div>'))):f==="Label"&&(h=c+a+(d=f),this.dummyDOM.querySelector("#".concat(l=c+"accessibleOutput"+f))||(this.dummyDOM.querySelector("#".concat(c,"_Label"))?this.dummyDOM.querySelector("#".concat(c,"_Label")):this.dummyDOM.querySelector("#".concat(c))).insertAdjacentHTML("afterend",'<div id="'.concat(l,'"></div>'))),this._accessibleOutputs[h]={},a==="textOutput"?(d="#".concat(c,"gridOutput").concat(d),u='<div id="'.concat(h,'">Text Output<div id="').concat(h,'Summary" aria-label="text output summary"><p id="').concat(h,'_summary"></p><ul id="').concat(h,'_list"></ul></div><table id="').concat(h,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(d)?this.dummyDOM.querySelector(d).insertAdjacentHTML("beforebegin",u):this.dummyDOM.querySelector("#".concat(l)).innerHTML=u,this._accessibleOutputs[h].list=this.dummyDOM.querySelector("#".concat(h,"_list"))):a==="gridOutput"&&(d="#".concat(c,"textOutput").concat(d),u='<div id="'.concat(h,'">Grid Output<p id="').concat(h,'_summary" aria-label="grid output summary"><table id="').concat(h,'_map" summary="grid output content"></table><ul id="').concat(h,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(d)?this.dummyDOM.querySelector(d).insertAdjacentHTML("afterend",u):this.dummyDOM.querySelector("#".concat(l)).innerHTML=u,this._accessibleOutputs[h].map=this.dummyDOM.querySelector("#".concat(h,"_map"))),this._accessibleOutputs[h].shapeDetails=this.dummyDOM.querySelector("#".concat(h,"_shapeDetails")),this._accessibleOutputs[h].summary=this.dummyDOM.querySelector("#".concat(h,"_summary"))},n.default.prototype._updateAccsOutput=function(){var a=this.canvas.id;JSON.stringify(this.ingredients.shapes)!==this.ingredients.pShapes&&(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(a+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(a+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(a+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(a+"gridOutputLabel"))},n.default.prototype._accsBackground=function(a){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==a&&(this.ingredients.colors.backgroundRGBA=a,this.ingredients.colors.background=this._rgbColorName(a))},n.default.prototype._accsCanvasColors=function(a,f){a==="fill"?this.ingredients.colors.fillRGBA!==f&&(this.ingredients.colors.fillRGBA=f,this.ingredients.colors.fill=this._rgbColorName(f)):a==="stroke"&&this.ingredients.colors.strokeRGBA!==f&&(this.ingredients.colors.strokeRGBA=f,this.ingredients.colors.stroke=this._rgbColorName(f))},n.default.prototype._accsOutput=function(a,f){a==="ellipse"&&f[2]===f[3]?a="circle":a==="rectangle"&&f[2]===f[3]&&(a="square");var h,l,u={},c=!0,d=function(p,m){var g;return p=p==="rectangle"||p==="ellipse"||p==="arc"||p==="circle"||p==="square"?(g=Math.round(m[0]+m[2]/2),Math.round(m[1]+m[3]/2)):p==="triangle"?(g=(m[0]+m[2]+m[4])/3,(m[1]+m[3]+m[5])/3):p==="quadrilateral"?(g=(m[0]+m[2]+m[4]+m[6])/4,(m[1]+m[3]+m[5]+m[7])/4):p==="line"?(g=(m[0]+m[2])/2,(m[1]+m[3])/2):(g=m[0],m[1]),[g,p]}(a,f);if(a==="line"?(u.color=this.ingredients.colors.stroke,u.length=Math.round(this.dist(f[0],f[1],f[2],f[3])),h=this._getPos(f[0],[1]),l=this._getPos(f[2],[3]),u.loc=s(d,this.width,this.height),u.pos=h===l?"at ".concat(h):"from ".concat(h," to ").concat(l)):(a==="point"?u.color=this.ingredients.colors.stroke:(u.color=this.ingredients.colors.fill,u.area=this._getArea(a,f)),u.pos=this._getPos.apply(this,o(d)),u.loc=s(d,this.width,this.height)),this.ingredients.shapes[a]){if(this.ingredients.shapes[a]!==[u]){for(var y in this.ingredients.shapes[a])JSON.stringify(this.ingredients.shapes[a][y])===JSON.stringify(u)&&(c=!1);c===!0&&this.ingredients.shapes[a].push(u)}}else this.ingredients.shapes[a]=[u]},n.default.prototype._getPos=function(l,h){var l=new DOMPointReadOnly(l,h),h=this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform(),l=l.matrixTransform(h),h=l.x,l=l.y,u=this.width,c=this.height;return h<.4*u?l<.4*c?"top left":.6*c<l?"bottom left":"mid left":.6*u<h?l<.4*c?"top right":.6*c<l?"bottom right":"mid right":l<.4*c?"top middle":.6*c<l?"bottom middle":"middle"},n.default.prototype._getArea=function(a,f){var h,l,u=0,c=(a==="arc"?(u=(h=((f[5]-f[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI))*f[2]*f[3]/8,f[6]!=="open"&&f[6]!=="chord"||(l=f[0],m=f[1],c=f[0]+f[2]/2*Math.cos(f[4]).toFixed(2),g=f[1]+f[3]/2*Math.sin(f[4]).toFixed(2),y=f[0]+f[2]/2*Math.cos(f[5]).toFixed(2),d=f[1]+f[3]/2*Math.sin(f[5]).toFixed(2),l=Math.abs(l*(g-d)+c*(d-m)+y*(m-g))/2,h>Math.PI?u+=l:u-=l)):a==="ellipse"||a==="circle"?u=3.14*f[2]/2*f[3]/2:a==="line"||a==="point"?u=0:a==="quadrilateral"?u=Math.abs((f[6]+f[0])*(f[7]-f[1])+(f[0]+f[2])*(f[1]-f[3])+(f[2]+f[4])*(f[3]-f[5])+(f[4]+f[6])*(f[5]-f[7]))/2:a==="rectangle"||a==="square"?u=f[2]*f[3]:a==="triangle"&&(u=Math.abs(f[0]*(f[3]-f[5])+f[2]*(f[5]-f[1])+f[4]*(f[1]-f[3]))/2),this.width*this._pixelDensity),d=this.height*this._pixelDensity,y=[new DOMPoint(0,0),new DOMPoint(c,0),new DOMPoint(c,d),new DOMPoint(0,d)],p=(this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform()).inverse(),m=y.map(function(v){return v.matrixTransform(p)}),g=Math.abs((m[3].x+m[0].x)*(m[3].y-m[0].y)+(m[0].x+m[1].x)*(m[0].y-m[1].y)+(m[1].x+m[2].x)*(m[1].y-m[2].y)+(m[2].x+m[3].x)*(m[2].y-m[3].y))/2;return Math.round(100*u/g)},t=n.default,i.default=t},{"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.map":164,"core-js/modules/es.number.to-fixed":175,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],258:[function(t,r,i){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.concat"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype._updateTextOutput=function(n){var o,s,a,f;this.dummyDOM.querySelector("#".concat(n,"_summary"))&&(o=this._accessibleOutputs[n],a=function(h,l,u,c){return u="Your output is a, ".concat(u," by ").concat(c," pixels, ").concat(l," canvas containing the following"),u=h===1?"".concat(u," shape:"):"".concat(u," ").concat(h," shapes:"),u}((s=function(h,l){var u,c="",d=0;for(u in l)for(var y in l[u]){var p='<li><a href="#'.concat(h,"shape").concat(d,'">').concat(l[u][y].color," ").concat(u,"</a>");u==="line"?p+=", ".concat(l[u][y].pos,", ").concat(l[u][y].length," pixels long.</li>"):(p+=", at ".concat(l[u][y].pos),u!=="point"&&(p+=", covering ".concat(l[u][y].area,"% of the canvas")),p+=".</li>"),c+=p,d++}return{numShapes:d,listShapes:c}}(n,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),f=function(h,l){var u,c="",d=0;for(u in l)for(var y in l[u]){var p='<tr id="'.concat(h,"shape").concat(d,'"><th>').concat(l[u][y].color," ").concat(u,"</th>");u==="line"?p+="<td>location = ".concat(l[u][y].pos,"</td><td>length = ").concat(l[u][y].length," pixels</td></tr>"):(p+="<td>location = ".concat(l[u][y].pos,"</td>"),u!=="point"&&(p+="<td> area = ".concat(l[u][y].area,"%</td>")),p+="</tr>"),c+=p,d++}return c}(n,this.ingredients.shapes),a!==o.summary.innerHTML&&(o.summary.innerHTML=a),s.listShapes!==o.list.innerHTML&&(o.list.innerHTML=s.listShapes),f!==o.shapeDetails.innerHTML&&(o.shapeDetails.innerHTML=f),this._accessibleOutputs[n]=o)},t=t.default,i.default=t},{"../core/main":275,"core-js/modules/es.array.concat":151}],259:[function(t,r,i){var n=(n=t("./core/main"))&&n.__esModule?n:{default:n};t("./core/constants"),t("./core/environment"),t("./core/friendly_errors/stacktrace"),t("./core/friendly_errors/validate_params"),t("./core/friendly_errors/file_errors"),t("./core/friendly_errors/fes_core"),t("./core/friendly_errors/sketch_reader"),t("./core/helpers"),t("./core/legacy"),t("./core/preload"),t("./core/p5.Element"),t("./core/p5.Graphics"),t("./core/p5.Renderer"),t("./core/p5.Renderer2D"),t("./core/rendering"),t("./core/shim"),t("./core/structure"),t("./core/transform"),t("./core/shape/2d_primitives"),t("./core/shape/attributes"),t("./core/shape/curves"),t("./core/shape/vertex"),t("./accessibility/outputs"),t("./accessibility/textOutput"),t("./accessibility/gridOutput"),t("./accessibility/color_namer"),t("./color/color_conversion"),t("./color/creating_reading"),t("./color/p5.Color"),t("./color/setting"),t("./data/p5.TypedDict"),t("./data/local_storage.js"),t("./dom/dom"),t("./accessibility/describe"),t("./events/acceleration"),t("./events/keyboard"),t("./events/mouse"),t("./events/touch"),t("./image/filters"),t("./image/image"),t("./image/loading_displaying"),t("./image/p5.Image"),t("./image/pixels"),t("./io/files"),t("./io/p5.Table"),t("./io/p5.TableRow"),t("./io/p5.XML"),t("./math/calculation"),t("./math/math"),t("./math/noise"),t("./math/p5.Vector"),t("./math/random"),t("./math/trigonometry"),t("./typography/attributes"),t("./typography/loading_displaying"),t("./typography/p5.Font"),t("./utilities/array_functions"),t("./utilities/conversion"),t("./utilities/string_functions"),t("./utilities/time_date"),t("./webgl/3d_primitives"),t("./webgl/interaction"),t("./webgl/light"),t("./webgl/loading"),t("./webgl/material"),t("./webgl/p5.Camera"),t("./webgl/p5.DataArray"),t("./webgl/p5.Geometry"),t("./webgl/p5.Matrix"),t("./webgl/p5.RendererGL.Immediate"),t("./webgl/p5.RendererGL"),t("./webgl/p5.RendererGL.Retained"),t("./webgl/p5.Framebuffer"),t("./webgl/p5.Shader"),t("./webgl/p5.RenderBuffer"),t("./webgl/p5.Texture"),t("./webgl/text"),t("./core/init"),r.exports=n.default},{"./accessibility/color_namer":254,"./accessibility/describe":255,"./accessibility/gridOutput":256,"./accessibility/outputs":257,"./accessibility/textOutput":258,"./color/color_conversion":260,"./color/creating_reading":261,"./color/p5.Color":262,"./color/setting":263,"./core/constants":264,"./core/environment":265,"./core/friendly_errors/fes_core":266,"./core/friendly_errors/file_errors":267,"./core/friendly_errors/sketch_reader":268,"./core/friendly_errors/stacktrace":269,"./core/friendly_errors/validate_params":270,"./core/helpers":271,"./core/init":272,"./core/legacy":274,"./core/main":275,"./core/p5.Element":276,"./core/p5.Graphics":277,"./core/p5.Renderer":278,"./core/p5.Renderer2D":279,"./core/preload":280,"./core/rendering":281,"./core/shape/2d_primitives":282,"./core/shape/attributes":283,"./core/shape/curves":284,"./core/shape/vertex":285,"./core/shim":286,"./core/structure":287,"./core/transform":288,"./data/local_storage.js":289,"./data/p5.TypedDict":290,"./dom/dom":291,"./events/acceleration":292,"./events/keyboard":293,"./events/mouse":294,"./events/touch":295,"./image/filters":296,"./image/image":297,"./image/loading_displaying":298,"./image/p5.Image":299,"./image/pixels":300,"./io/files":301,"./io/p5.Table":302,"./io/p5.TableRow":303,"./io/p5.XML":304,"./math/calculation":305,"./math/math":306,"./math/noise":307,"./math/p5.Vector":308,"./math/random":309,"./math/trigonometry":310,"./typography/attributes":311,"./typography/loading_displaying":312,"./typography/p5.Font":313,"./utilities/array_functions":314,"./utilities/conversion":315,"./utilities/string_functions":316,"./utilities/time_date":317,"./webgl/3d_primitives":318,"./webgl/interaction":320,"./webgl/light":321,"./webgl/loading":322,"./webgl/material":323,"./webgl/p5.Camera":324,"./webgl/p5.DataArray":325,"./webgl/p5.Framebuffer":326,"./webgl/p5.Geometry":327,"./webgl/p5.Matrix":328,"./webgl/p5.RenderBuffer":329,"./webgl/p5.RendererGL":332,"./webgl/p5.RendererGL.Immediate":330,"./webgl/p5.RendererGL.Retained":331,"./webgl/p5.Shader":333,"./webgl/p5.Texture":334,"./webgl/text":335}],260:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.ColorConversion={_hsbaToHSLA:function(n){var o=n[0],s=n[1],a=n[2],f=(2-s)*a/2;return f!=0&&(f==1?s=0:f<.5?s/=2-s:s=s*a/(2-2*f)),[o,s,f,n[3]]},_hsbaToRGBA:function(n){var o,s,a,f,h,l=6*n[0],u=n[1],c=n[2];return u===0?[c,c,c,n[3]]:(s=c*(1-u),a=c*(1-u*(l-(o=Math.floor(l)))),u=c*(1-u*(1+o-l)),l=o===1?(f=a,h=c,s):o===2?(f=s,h=c,u):o===3?(f=s,h=a,c):o===4?(f=u,h=s,c):o===5?(f=c,h=s,a):(f=c,h=u,s),[f,h,l,n[3]])},_hslaToHSBA:function(n){var o=n[0],s=n[1],a=n[2],f=a<.5?(1+s)*a:a+s-a*s;return[o,s=2*(f-a)/f,f,n[3]]},_hslaToRGBA:function(n){var o,s=6*n[0],a=n[1],f=n[2];return a===0?[f,f,f,n[3]]:[(o=function(h,l,u){return h<0?h+=6:6<=h&&(h-=6),h<1?l+(u-l)*h:h<3?u:h<4?l+(u-l)*(4-h):l})(2+s,a=2*f-(f=f<.5?(1+a)*f:f+a-f*a),f),o(s,a,f),o(s-2,a,f),n[3]]},_rgbaToHSBA:function(n){var o,s,a=n[0],f=n[1],h=n[2],l=Math.max(a,f,h),u=l-Math.min(a,f,h);return u==0?s=o=0:(s=u/l,a===l?o=(f-h)/u:f===l?o=2+(h-a)/u:h===l&&(o=4+(a-f)/u),o<0?o+=6:6<=o&&(o-=6)),[o/6,s,l,n[3]]},_rgbaToHSLA:function(n){var o,s,a=n[0],f=n[1],h=n[2],l=Math.max(a,f,h),c=Math.min(a,f,h),u=l+c,c=l-c;return c==0?s=o=0:(s=u<1?c/u:c/(2-u),a===l?o=(f-h)/c:f===l?o=2+(h-a)/c:h===l&&(o=4+(a-f)/c),o<0?o+=6:6<=o&&(o-=6)),[o/6,s,u/2,n[3]]}},t=t.default.ColorConversion,i.default=t},{"../core/main":275}],261:[function(t,r,i){function n(l){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(l)}function o(l){return(o=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(u){return n(u)}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":n(u)})(l)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.map"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(h=t("../core/main"))&&h.__esModule?h:{default:h},a=function(l){if(l&&l.__esModule)return l;if(l===null||o(l)!=="object"&&typeof l!="function")return{default:l};var u=f();if(u&&u.has(l))return u.get(l);var c,d={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in l){var p;Object.prototype.hasOwnProperty.call(l,c)&&((p=y?Object.getOwnPropertyDescriptor(l,c):null)&&(p.get||p.set)?Object.defineProperty(d,c,p):d[c]=l[c])}return d.default=l,u&&u.set(l,d),d}(t("../core/constants"));function f(){var l;return typeof WeakMap!="function"?null:(l=new WeakMap,f=function(){return l},l)}t("./p5.Color"),t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),s.default.prototype.alpha=function(l){return s.default._validateParameters("alpha",arguments),this.color(l)._getAlpha()},s.default.prototype.blue=function(l){return s.default._validateParameters("blue",arguments),this.color(l)._getBlue()},s.default.prototype.brightness=function(l){return s.default._validateParameters("brightness",arguments),this.color(l)._getBrightness()},s.default.prototype.color=function(){var l;return s.default._validateParameters("color",arguments),arguments[0]instanceof s.default.Color?arguments[0]:(l=arguments[0]instanceof Array?arguments[0]:arguments,new s.default.Color(this,l))},s.default.prototype.green=function(l){return s.default._validateParameters("green",arguments),this.color(l)._getGreen()},s.default.prototype.hue=function(l){return s.default._validateParameters("hue",arguments),this.color(l)._getHue()},s.default.prototype.lerpColor=function(l,u,c){s.default._validateParameters("lerpColor",arguments);var d,y,p,m=this._colorMode,g=this._colorMaxes;if(m===a.RGB)y=l.levels.map(function(v){return v/255}),p=u.levels.map(function(v){return v/255});else if(m===a.HSB)l._getBrightness(),u._getBrightness(),y=l.hsba,p=u.hsba;else{if(m!==a.HSL)throw new Error("".concat(m,"cannot be used for interpolation."));l._getLightness(),u._getLightness(),y=l.hsla,p=u.hsla}return c=Math.max(Math.min(c,1),0),this.lerp===void 0&&(this.lerp=function(v,x,T){return T*(x-v)+v}),l=this.lerp(y[0],p[0],c),u=this.lerp(y[1],p[1],c),d=this.lerp(y[2],p[2],c),y=this.lerp(y[3],p[3],c),l*=g[m][0],u*=g[m][1],d*=g[m][2],y*=g[m][3],this.color(l,u,d,y)},s.default.prototype.lightness=function(l){return s.default._validateParameters("lightness",arguments),this.color(l)._getLightness()},s.default.prototype.red=function(l){return s.default._validateParameters("red",arguments),this.color(l)._getRed()},s.default.prototype.saturation=function(l){return s.default._validateParameters("saturation",arguments),this.color(l)._getSaturation()};var h=s.default;i.default=h},{"../core/constants":264,"../core/friendly_errors/fes_core":266,"../core/friendly_errors/file_errors":267,"../core/friendly_errors/validate_params":270,"../core/main":275,"./p5.Color":262,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.map":164,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],262:[function(d,r,i){function n(v){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(v)}function o(v){return(o=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(x){return n(x)}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":n(x)})(v)}d("core-js/modules/es.symbol"),d("core-js/modules/es.symbol.description"),d("core-js/modules/es.symbol.iterator"),d("core-js/modules/es.array.includes"),d("core-js/modules/es.array.iterator"),d("core-js/modules/es.array.join"),d("core-js/modules/es.array.map"),d("core-js/modules/es.array.slice"),d("core-js/modules/es.object.get-own-property-descriptor"),d("core-js/modules/es.object.to-string"),d("core-js/modules/es.regexp.constructor"),d("core-js/modules/es.regexp.exec"),d("core-js/modules/es.regexp.to-string"),d("core-js/modules/es.string.includes"),d("core-js/modules/es.string.iterator"),d("core-js/modules/es.string.trim"),d("core-js/modules/es.weak-map"),d("core-js/modules/web.dom-collections.iterator"),d("core-js/modules/es.array.includes"),d("core-js/modules/es.array.join"),d("core-js/modules/es.array.map"),d("core-js/modules/es.array.slice"),d("core-js/modules/es.object.to-string"),d("core-js/modules/es.regexp.constructor"),d("core-js/modules/es.regexp.exec"),d("core-js/modules/es.regexp.to-string"),d("core-js/modules/es.string.includes"),d("core-js/modules/es.string.trim"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=l(d("../core/main")),a=function(v){if(v&&v.__esModule)return v;if(v===null||o(v)!=="object"&&typeof v!="function")return{default:v};var x=h();if(x&&x.has(v))return x.get(v);var T,w={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(T in v){var C;Object.prototype.hasOwnProperty.call(v,T)&&((C=b?Object.getOwnPropertyDescriptor(v,T):null)&&(C.get||C.set)?Object.defineProperty(w,T,C):w[T]=v[T])}return w.default=v,x&&x.set(v,w),w}(d("../core/constants")),f=l(d("./color_conversion"));function h(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,h=function(){return v},v)}function l(v){return v&&v.__esModule?v:{default:v}}function u(v,x){for(var T=0;T<x.length;T++){var w=x[T];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}var c={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},d=/\s*/,g=/(\d{1,3})/,y=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,p=new RegExp("".concat(y.source,"%")),m={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",g.source,",",g.source,",",g.source,"\\)$"].join(d.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",p.source,",",p.source,",",p.source,"\\)$"].join(d.source),"i"),RGBA:new RegExp(["^rgba\\(",g.source,",",g.source,",",g.source,",",y.source,"\\)$"].join(d.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",p.source,",",p.source,",",p.source,",",y.source,"\\)$"].join(d.source),"i"),HSL:new RegExp(["^hsl\\(",g.source,",",p.source,",",p.source,"\\)$"].join(d.source),"i"),HSLA:new RegExp(["^hsla\\(",g.source,",",p.source,",",p.source,",",y.source,"\\)$"].join(d.source),"i"),HSB:new RegExp(["^hsb\\(",g.source,",",p.source,",",p.source,"\\)$"].join(d.source),"i"),HSBA:new RegExp(["^hsba\\(",g.source,",",p.source,",",p.source,",",y.source,"\\)$"].join(d.source),"i")},g=(s.default.Color=function(){function v(b,C){if(!(this instanceof v))throw new TypeError("Cannot call a class as a function");if(this._storeModeAndMaxes(b._colorMode,b._colorMaxes),![a.RGB,a.HSL,a.HSB].includes(this.mode))throw new Error("".concat(this.mode," is an invalid colorMode."));this._array=v._parseInputs.apply(this,C),this._calculateLevels()}var x,T,w;return x=v,w=[{key:"_parseInputs",value:function(b,C,A,M){var k,P=arguments.length,F=this.mode,I=this.maxes[F],B=[];if(3<=P){for(B[0]=b/I[0],B[1]=C/I[1],B[2]=A/I[2],B[3]=typeof M=="number"?M/I[3]:1,k=B.length-1;0<=k;--k){var H=B[k];H<0?B[k]=0:1<H&&(B[k]=1)}return F===a.HSL?f.default._hslaToRGBA(B):F===a.HSB?f.default._hsbaToRGBA(B):B}if(P===1&&typeof b=="string"){if(A=b.trim().toLowerCase(),c[A])return v._parseInputs.call(this,c[A]);if(m.HEX3.test(A))return(B=m.HEX3.exec(A).slice(1).map(function(G){return parseInt(G+G,16)/255}))[3]=1,B;if(m.HEX6.test(A))return(B=m.HEX6.exec(A).slice(1).map(function(G){return parseInt(G,16)/255}))[3]=1,B;if(m.HEX4.test(A))return B=m.HEX4.exec(A).slice(1).map(function(G){return parseInt(G+G,16)/255});if(m.HEX8.test(A))return B=m.HEX8.exec(A).slice(1).map(function(G){return parseInt(G,16)/255});if(m.RGB.test(A))return(B=m.RGB.exec(A).slice(1).map(function(G){return G/255}))[3]=1,B;if(m.RGB_PERCENT.test(A))return(B=m.RGB_PERCENT.exec(A).slice(1).map(function(G){return parseFloat(G)/100}))[3]=1,B;if(m.RGBA.test(A))return B=m.RGBA.exec(A).slice(1).map(function(G,W){return W===3?parseFloat(G):G/255});if(m.RGBA_PERCENT.test(A))return B=m.RGBA_PERCENT.exec(A).slice(1).map(function(G,W){return W===3?parseFloat(G):parseFloat(G)/100});if(m.HSL.test(A)?(B=m.HSL.exec(A).slice(1).map(function(G,W){return W===0?parseInt(G,10)/360:parseInt(G,10)/100}))[3]=1:m.HSLA.test(A)&&(B=m.HSLA.exec(A).slice(1).map(function(G,W){return W===0?parseInt(G,10)/360:W===3?parseFloat(G):parseInt(G,10)/100})),(B=B.map(function(G){return Math.max(Math.min(G,1),0)})).length)return f.default._hslaToRGBA(B);if(m.HSB.test(A)?(B=m.HSB.exec(A).slice(1).map(function(G,W){return W===0?parseInt(G,10)/360:parseInt(G,10)/100}))[3]=1:m.HSBA.test(A)&&(B=m.HSBA.exec(A).slice(1).map(function(G,W){return W===0?parseInt(G,10)/360:W===3?parseFloat(G):parseInt(G,10)/100})),B.length){for(k=B.length-1;0<=k;--k)B[k]=Math.max(Math.min(B[k],1),0);return f.default._hsbaToRGBA(B)}B=[1,1,1,1]}else{if(P!==1&&P!==2||typeof b!="number")throw new Error("".concat(arguments,"is not a valid color representation."));B[0]=b/I[2],B[1]=b/I[2],B[2]=b/I[2],B[3]=typeof C=="number"?C/I[3]:1,B=B.map(function(G){return Math.max(Math.min(G,1),0)})}return B}}],(T=[{key:"toString",value:function(b){var C=this.levels,A=this._array,M=A[3];switch(b){case"#rrggbb":return"#".concat(C[0]<16?"0".concat(C[0].toString(16)):C[0].toString(16),C[1]<16?"0".concat(C[1].toString(16)):C[1].toString(16),C[2]<16?"0".concat(C[2].toString(16)):C[2].toString(16));case"#rrggbbaa":return"#".concat(C[0]<16?"0".concat(C[0].toString(16)):C[0].toString(16),C[1]<16?"0".concat(C[1].toString(16)):C[1].toString(16),C[2]<16?"0".concat(C[2].toString(16)):C[2].toString(16),C[3]<16?"0".concat(C[3].toString(16)):C[3].toString(16));case"#rgb":return"#".concat(Math.round(15*A[0]).toString(16),Math.round(15*A[1]).toString(16),Math.round(15*A[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*A[0]).toString(16),Math.round(15*A[1]).toString(16),Math.round(15*A[2]).toString(16),Math.round(15*A[3]).toString(16));case"rgb":return"rgb(".concat(C[0],", ",C[1],", ",C[2],")");case"rgb%":return"rgb(".concat((100*A[0]).toPrecision(3),"%, ",(100*A[1]).toPrecision(3),"%, ",(100*A[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*A[0]).toPrecision(3),"%, ",(100*A[1]).toPrecision(3),"%, ",(100*A[2]).toPrecision(3),"%, ",(100*A[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[a.HSB][0],", ",this.hsba[1]*this.maxes[a.HSB][1],", ",this.hsba[2]*this.maxes[a.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[a.HSB][0],", ",this.hsba[1]*this.maxes[a.HSB][1],", ",this.hsba[2]*this.maxes[a.HSB][2],", ",M,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*M).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[a.HSL][0],", ",this.hsla[1]*this.maxes[a.HSL][1],", ",this.hsla[2]*this.maxes[a.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[a.HSL][0],", ",this.hsla[1]*this.maxes[a.HSL][1],", ",this.hsla[2]*this.maxes[a.HSL][2],", ",M,")");case"hsla%":return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*M).toPrecision(3),"%)");default:return"rgba(".concat(C[0],",",C[1],",",C[2],",",M,")")}}},{key:"setRed",value:function(b){this._array[0]=b/this.maxes[a.RGB][0],this._calculateLevels()}},{key:"setGreen",value:function(b){this._array[1]=b/this.maxes[a.RGB][1],this._calculateLevels()}},{key:"setBlue",value:function(b){this._array[2]=b/this.maxes[a.RGB][2],this._calculateLevels()}},{key:"setAlpha",value:function(b){this._array[3]=b/this.maxes[this.mode][3],this._calculateLevels()}},{key:"_calculateLevels",value:function(){for(var b=this._array,C=this.levels=new Array(b.length),A=b.length-1;0<=A;--A)C[A]=Math.round(255*b[A]);this.hsla=null,this.hsba=null}},{key:"_getAlpha",value:function(){return this._array[3]*this.maxes[this.mode][3]}},{key:"_storeModeAndMaxes",value:function(b,C){this.mode=b,this.maxes=C}},{key:"_getMode",value:function(){return this.mode}},{key:"_getMaxes",value:function(){return this.maxes}},{key:"_getBlue",value:function(){return this._array[2]*this.maxes[a.RGB][2]}},{key:"_getBrightness",value:function(){return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[a.HSB][2]}},{key:"_getGreen",value:function(){return this._array[1]*this.maxes[a.RGB][1]}},{key:"_getHue",value:function(){return this.mode===a.HSB?(this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[a.HSB][0]):(this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[a.HSL][0])}},{key:"_getLightness",value:function(){return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[a.HSL][2]}},{key:"_getRed",value:function(){return this._array[0]*this.maxes[a.RGB][0]}},{key:"_getSaturation",value:function(){return this.mode===a.HSB?(this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[a.HSB][1]):(this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[a.HSL][1])}}])&&u(x.prototype,T),w&&u(x,w),v}(),s.default.Color);i.default=g},{"../core/constants":264,"../core/main":275,"./color_conversion":260,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.constructor":186,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.trim":201,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],263:[function(t,r,i){function n(l){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(l)}function o(l){return(o=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(u){return n(u)}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":n(u)})(l)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.fill"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(h=t("../core/main"))&&h.__esModule?h:{default:h},a=function(l){if(l&&l.__esModule)return l;if(l===null||o(l)!=="object"&&typeof l!="function")return{default:l};var u=f();if(u&&u.has(l))return u.get(l);var c,d={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in l){var p;Object.prototype.hasOwnProperty.call(l,c)&&((p=y?Object.getOwnPropertyDescriptor(l,c):null)&&(p.get||p.set)?Object.defineProperty(d,c,p):d[c]=l[c])}return d.default=l,u&&u.set(l,d),d}(t("../core/constants"));function f(){var l;return typeof WeakMap!="function"?null:(l=new WeakMap,f=function(){return l},l)}t("./p5.Color"),s.default.prototype.beginClip=function(){this._renderer.beginClip(0<arguments.length&&arguments[0]!==void 0?arguments[0]:{})},s.default.prototype.endClip=function(){this._renderer.endClip()},s.default.prototype.clip=function(l,u){this._renderer.beginClip(u),l(),this._renderer.endClip(u)},s.default.prototype.background=function(){var l;return(l=this._renderer).background.apply(l,arguments),this},s.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},s.default.prototype.colorMode=function(l,u,c,d,y){return s.default._validateParameters("colorMode",arguments),l!==a.RGB&&l!==a.HSB&&l!==a.HSL||(this._colorMode=l,l=this._colorMaxes[l],arguments.length===2?(l[0]=u,l[1]=u,l[2]=u,l[3]=u):arguments.length===4?(l[0]=u,l[1]=c,l[2]=d):arguments.length===5&&(l[0]=u,l[1]=c,l[2]=d,l[3]=y)),this},s.default.prototype.fill=function(){var l;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(l=this._renderer).fill.apply(l,arguments),this},s.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},s.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},s.default.prototype.stroke=function(){var l;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(l=this._renderer).stroke.apply(l,arguments),this},s.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,1<arguments.length&&arguments[1]!==void 0?arguments[1]:255),this},s.default.prototype.noErase=function(){return this._renderer.noErase(),this};var h=s.default;i.default=h},{"../core/constants":264,"../core/main":275,"./p5.Color":262,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],264:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.QUADRATIC=i.LINEAR=i._CTX_MIDDLE=i._DEFAULT_LEADMULT=i._DEFAULT_TEXT_FILL=i.WORD=i.CHAR=i.BOLDITALIC=i.BOLD=i.ITALIC=i.NORMAL=i.BLUR=i.ERODE=i.DILATE=i.POSTERIZE=i.INVERT=i.OPAQUE=i.GRAY=i.THRESHOLD=i.BURN=i.DODGE=i.SOFT_LIGHT=i.HARD_LIGHT=i.OVERLAY=i.REPLACE=i.SCREEN=i.MULTIPLY=i.EXCLUSION=i.SUBTRACT=i.DIFFERENCE=i.LIGHTEST=i.DARKEST=i.ADD=i.REMOVE=i.BLEND=i.UP_ARROW=i.TAB=i.SHIFT=i.RIGHT_ARROW=i.RETURN=i.OPTION=i.LEFT_ARROW=i.ESCAPE=i.ENTER=i.DOWN_ARROW=i.DELETE=i.CONTROL=i.BACKSPACE=i.ALT=i.AUTO=i.HSL=i.HSB=i.RGB=i.MITER=i.BEVEL=i.ROUND=i.SQUARE=i.PROJECT=i.PIE=i.CHORD=i.OPEN=i.CLOSE=i.TESS=i.QUAD_STRIP=i.QUADS=i.TRIANGLE_STRIP=i.TRIANGLE_FAN=i.TRIANGLES=i.LINE_LOOP=i.LINE_STRIP=i.LINES=i.POINTS=i.BASELINE=i.BOTTOM=i.TOP=i.CENTER=i.LEFT=i.RIGHT=i.RADIUS=i.CORNERS=i.CORNER=i.RAD_TO_DEG=i.DEG_TO_RAD=i.RADIANS=i.DEGREES=i.TWO_PI=i.TAU=i.QUARTER_PI=i.PI=i.HALF_PI=i.WAIT=i.TEXT=i.MOVE=i.HAND=i.CROSS=i.ARROW=i.WEBGL2=i.WEBGL=i.P2D=i.VERSION=void 0,i.RGBA=i.HALF_FLOAT=i.FLOAT=i.UNSIGNED_INT=i.UNSIGNED_BYTE=i.COVER=i.CONTAIN=i.FALLBACK=i.LABEL=i.AXES=i.GRID=i._DEFAULT_FILL=i._DEFAULT_STROKE=i.PORTRAIT=i.LANDSCAPE=i.SMOOTH=i.FLAT=i.MIRROR=i.CLAMP=i.REPEAT=i.NEAREST=i.IMAGE=i.IMMEDIATE=i.TEXTURE=i.FILL=i.STROKE=i.CURVE=i.BEZIER=void 0;var n=Math.PI,o=(i.VERSION="1.9.0",i.P2D="p2d",i.WEBGL="webgl",i.WEBGL2="webgl2",i.ARROW="default",i.CROSS="crosshair",i.HAND="pointer",i.MOVE="move",i.TEXT="text",i.WAIT="wait",n/2),o=(i.HALF_PI=o,n),o=(i.PI=o,n/4),o=(i.QUARTER_PI=o,2*n),o=(i.TAU=o,2*n),o=(i.TWO_PI=o,i.DEGREES="degrees",i.RADIANS="radians",n/180),o=(i.DEG_TO_RAD=o,180/n);i.RAD_TO_DEG=o,i.CORNER="corner",i.CORNERS="corners",i.RADIUS="radius",i.RIGHT="right",i.LEFT="left",i.CENTER="center",i.TOP="top",i.BOTTOM="bottom",i.BASELINE="alphabetic",i.POINTS=0,i.LINES=1,i.LINE_STRIP=3,i.LINE_LOOP=2,i.TRIANGLES=4,i.TRIANGLE_FAN=6,i.TRIANGLE_STRIP=5,i.QUADS="quads",i.QUAD_STRIP="quad_strip",i.TESS="tess",i.CLOSE="close",i.OPEN="open",i.CHORD="chord",i.PIE="pie",i.PROJECT="square",i.SQUARE="butt",i.ROUND="round",i.BEVEL="bevel",i.MITER="miter",i.RGB="rgb",i.HSB="hsb",i.HSL="hsl",i.AUTO="auto",i.ALT=18,i.BACKSPACE=8,i.CONTROL=17,i.DELETE=46,i.DOWN_ARROW=40,i.ENTER=13,i.ESCAPE=27,i.LEFT_ARROW=37,i.OPTION=18,i.RETURN=13,i.RIGHT_ARROW=39,i.SHIFT=16,i.TAB=9,i.UP_ARROW=38,i.BLEND="source-over",i.REMOVE="destination-out",i.ADD="lighter",i.DARKEST="darken",i.LIGHTEST="lighten",i.DIFFERENCE="difference",i.SUBTRACT="subtract",i.EXCLUSION="exclusion",i.MULTIPLY="multiply",i.SCREEN="screen",i.REPLACE="copy",i.OVERLAY="overlay",i.HARD_LIGHT="hard-light",i.SOFT_LIGHT="soft-light",i.DODGE="color-dodge",i.BURN="color-burn",i.THRESHOLD="threshold",i.GRAY="gray",i.OPAQUE="opaque",i.INVERT="invert",i.POSTERIZE="posterize",i.DILATE="dilate",i.ERODE="erode",i.BLUR="blur",i.NORMAL="normal",i.ITALIC="italic",i.BOLD="bold",i.BOLDITALIC="bold italic",i.CHAR="CHAR",i.WORD="WORD",i._DEFAULT_TEXT_FILL="#000000",i._DEFAULT_LEADMULT=1.25,i._CTX_MIDDLE="middle",i.LINEAR="linear",i.QUADRATIC="quadratic",i.BEZIER="bezier",i.CURVE="curve",i.STROKE="stroke",i.FILL="fill",i.TEXTURE="texture",i.IMMEDIATE="immediate",i.IMAGE="image",i.NEAREST="nearest",i.REPEAT="repeat",i.CLAMP="clamp",i.MIRROR="mirror",i.FLAT="flat",i.SMOOTH="smooth",i.LANDSCAPE="landscape",i.PORTRAIT="portrait",i._DEFAULT_STROKE="#000000",i._DEFAULT_FILL="#FFFFFF",i.GRID="grid",i.AXES="axes",i.LABEL="label",i.FALLBACK="fallback",i.CONTAIN="contain",i.COVER="cover",i.UNSIGNED_BYTE="unsigned-byte",i.UNSIGNED_INT="unsigned-int",i.FLOAT="float",i.HALF_FLOAT="half-float",i.RGBA="rgba"},{}],265:[function(t,r,i){function n(y){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(y)}function o(y){return(o=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(p){return n(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":n(p)})(y)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.search"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.search"),t("core-js/modules/es.string.split"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(a=t("./main"))&&a.__esModule?a:{default:a},a=function(y){if(y&&y.__esModule)return y;if(y===null||o(y)!=="object"&&typeof y!="function")return{default:y};var p=f();if(p&&p.has(y))return p.get(y);var m,g={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in y){var x;Object.prototype.hasOwnProperty.call(y,m)&&((x=v?Object.getOwnPropertyDescriptor(y,m):null)&&(x.get||x.set)?Object.defineProperty(g,m,x):g[m]=y[m])}return g.default=y,p&&p.set(y,g),g}(t("./constants"));function f(){var y;return typeof WeakMap!="function"?null:(y=new WeakMap,f=function(){return y},y)}var h=[a.ARROW,a.CROSS,a.HAND,a.MOVE,a.TEXT,a.WAIT],l=(s.default.prototype._frameRate=0,s.default.prototype._lastFrameTime=window.performance.now(),s.default.prototype._targetFrameRate=60,window.print),u=!1;function c(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function d(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}s.default.prototype.print=function(){var y;arguments.length?(y=console).log.apply(y,arguments):u||(l(),window.confirm("You just tried to print the webpage. Do you want to prevent this from running again?")&&(u=!0))},s.default.prototype.frameCount=0,s.default.prototype.deltaTime=0,s.default.prototype.focused=document.hasFocus(),s.default.prototype.cursor=function(y,p,m){var g,v="auto",x=this._curElement.elt;h.includes(y)?v=y:typeof y=="string"&&(g="",p&&m&&typeof p=="number"&&typeof m=="number"&&(g="".concat(p," ").concat(m)),v=y.substring(0,7)==="http://"||y.substring(0,8)==="https://"||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(y)?"url(".concat(y,") ").concat(g,", auto"):y),x.style.cursor=v},s.default.prototype.frameRate=function(y){return s.default._validateParameters("frameRate",arguments),typeof y!="number"||y<0?this._frameRate:(this._setProperty("_targetFrameRate",y),y===0&&this._setProperty("_frameRate",y),this)},s.default.prototype.getFrameRate=function(){return this.frameRate()},s.default.prototype.setFrameRate=function(y){return this.frameRate(y)},s.default.prototype.getTargetFrameRate=function(){return this._targetFrameRate},s.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},s.default.prototype.webglVersion=a.P2D,s.default.prototype.displayWidth=screen.width,s.default.prototype.displayHeight=screen.height,s.default.prototype.windowWidth=c(),s.default.prototype.windowHeight=d(),s.default.prototype._onresize=function(y){this._setProperty("windowWidth",c()),this._setProperty("windowHeight",d());var p=this._isGlobal?window:this;typeof p.windowResized!="function"||(p=p.windowResized(y))===void 0||p||y.preventDefault()},s.default.prototype.width=0,s.default.prototype.height=0,s.default.prototype.fullscreen=function(y){if(s.default._validateParameters("fullscreen",arguments),y===void 0)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(y){if(y=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");y.requestFullscreen?y.requestFullscreen():y.mozRequestFullScreen?y.mozRequestFullScreen():y.webkitRequestFullscreen?y.webkitRequestFullscreen():y.msRequestFullscreen&&y.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},s.default.prototype.pixelDensity=function(y){var p;return s.default._validateParameters("pixelDensity",arguments),typeof y=="number"?(y!==this._pixelDensity&&(this._pixelDensity=y),(p=this).resizeCanvas(this.width,this.height,!0)):p=this._pixelDensity,p},s.default.prototype.displayDensity=function(){return window.devicePixelRatio},s.default.prototype.getURL=function(){return location.href},s.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(y){return y!==""})},s.default.prototype.getURLParams=function(){for(var y,p=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,m={};(y=p.exec(location.search))!=null;)y.index===p.lastIndex&&p.lastIndex++,m[y[1]]=y[2];return m},t=s.default,i.default=t},{"./constants":264,"./main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.search":197,"core-js/modules/es.string.split":198,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],266:[function(t,r,i){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.starts-with"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.starts-with"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=(h=t("../main"))&&h.__esModule?h:{default:h};t("../internationalization");function o(l,u){u=u||console.log.bind(console),s||f(),s.some(function(c){var d;if(l.message&&l.message.match("\\W?".concat(c.name,"\\W"))!==null)return d=c.type==="function"?"".concat(c.name,"()"):c.name,u("Did you just try to use p5.js's ".concat(d," ").concat(c.type,`? If so, you may want to move it into your sketch's setup() function.

For more details, see: `).concat(a)),!0})}var s=null,f=null,a=(n.default._friendlyError=n.default._checkForUserDefinedFunctions=n.default._fesErrorMonitor=function(){},s=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),f=function(){function l(c){return Object.getOwnPropertyNames(c).filter(function(d){return d[0]!=="_"&&!(d in u)&&(u[d]=!0)}).map(function(d){var y=typeof c[d]=="function"?"function":d===d.toUpperCase()?"constant":"variable";return{name:d,type:y}})}var u={};(s=[].concat(l(n.default.prototype),l(t("../constants")))).sort(function(c,d){return d.name.length-c.name.length})},h=(n.default.prototype._helpForMisusedAtTopLevelCode=o,document.readyState!=="complete"&&(window.addEventListener("error",o,!1),window.addEventListener("load",function(){window.removeEventListener("error",o,!1)})),n.default);i.default=h},{"../constants":264,"../internationalization":273,"../main":275,"./browser_errors":void 0,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.some":166,"core-js/modules/es.function.name":168,"core-js/modules/es.object.assign":176,"core-js/modules/es.object.get-own-property-names":179,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.constructor":186,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.match":193,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198,"core-js/modules/es.string.starts-with":199,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238}],267:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=(n=t("../main"))&&n.__esModule?n:{default:n};t("../internationalization"),n.default._friendlyFileLoadError=function(){},t=n.default,i.default=t},{"../internationalization":273,"../main":275}],268:[function(t,r,i){function n(u){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(u)}function o(u){return(o=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(c){return n(c)}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":n(c)})(u)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=h(t("../main"));t("../internationalization"),f(t("../constants"));function a(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,a=function(){return u},u)}function f(u){if(u&&u.__esModule)return u;if(u===null||o(u)!=="object"&&typeof u!="function")return{default:u};var c=a();if(c&&c.has(u))return c.get(u);var d,y,p={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in u)Object.prototype.hasOwnProperty.call(u,d)&&((y=m?Object.getOwnPropertyDescriptor(u,d):null)&&(y.get||y.set)?Object.defineProperty(p,d,y):p[d]=u[d]);return p.default=u,c&&c.set(u,p),p}function h(u){return u&&u.__esModule?u:{default:u}}s.default._fesCodeReader=function(){};var l=s.default;i.default=l},{"../constants":264,"../internationalization":273,"../main":275,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.from":158,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.constructor":186,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.match":193,"core-js/modules/es.string.split":198,"core-js/modules/es.string.trim":201,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238}],269:[function(t,r,i){t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,t=(t=t("../main"))&&t.__esModule?t:{default:t};function n(){var o=/(^|@)\S+:\d+/,s=/^\s*at .*(\S+:\d+|\(native\))/m,a=/^(eval@)?(\[native code])?$/;return{parse:function(f){return f.stacktrace!==void 0||f["opera#sourceloc"]!==void 0?this.parseOpera(f):f.stack&&f.stack.match(s)?this.parseV8OrIE(f):f.stack?this.parseFFOrSafari(f):void 0},extractLocation:function(f){return f.indexOf(":")===-1?[f]:[(f=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(f.replace(/[()]/g,"")))[1],f[2]||void 0,f[3]||void 0]},parseV8OrIE:function(f){return f.stack.split(`
`).filter(function(h){return!!h.match(s)},this).map(function(h){var l=(h=-1<h.indexOf("(eval ")?h.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):h).replace(/^\s+/,"").replace(/\(eval code/g,"("),u=l.match(/ (\((.+):(\d+):(\d+)\)$)/),l=(l=u?l.replace(u[0],""):l).split(/\s+/).slice(1),u=this.extractLocation(u?u[1]:l.pop());return{functionName:l.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(u[0])?void 0:u[0],lineNumber:u[1],columnNumber:u[2],source:h}},this)},parseFFOrSafari:function(f){return f.stack.split(`
`).filter(function(h){return!h.match(a)},this).map(function(h){var l,u;return(h=-1<h.indexOf(" > eval")?h.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):h).indexOf("@")===-1&&h.indexOf(":")===-1?{functionName:h}:{functionName:(u=h.match(l=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&u[1]?u[1]:void 0,fileName:(u=this.extractLocation(h.replace(l,"")))[0],lineNumber:u[1],columnNumber:u[2],source:h}},this)},parseOpera:function(f){return!f.stacktrace||-1<f.message.indexOf(`
`)&&f.message.split(`
`).length>f.stacktrace.split(`
`).length?this.parseOpera9(f):f.stack?this.parseOpera11(f):this.parseOpera10(f)},parseOpera9:function(f){for(var h=/Line (\d+).*script (?:in )?(\S+)/i,l=f.message.split(`
`),u=[],c=2,d=l.length;c<d;c+=2){var y=h.exec(l[c]);y&&u.push({fileName:y[2],lineNumber:y[1],source:l[c]})}return u},parseOpera10:function(f){for(var h=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,l=f.stacktrace.split(`
`),u=[],c=0,d=l.length;c<d;c+=2){var y=h.exec(l[c]);y&&u.push({functionName:y[3]||void 0,fileName:y[2],lineNumber:y[1],source:l[c]})}return u},parseOpera11:function(f){return f.stack.split(`
`).filter(function(h){return!!h.match(o)&&!h.match(/^Error created at/)},this).map(function(h){var l,c=h.split("@"),u=this.extractLocation(c.pop()),c=c.shift()||"";return{functionName:c.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:(l=c.match(/\(([^)]*)\)/)?c.replace(/^[^(]+\(([^)]*)\)$/,"$1"):l)===void 0||l==="[arguments not available]"?void 0:l.split(","),fileName:u[0],lineNumber:u[1],columnNumber:u[2],source:h}},this)}}}t.default._getErrorStackParser=function(){return new n},t=t.default,i.default=t},{"../main":275,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.join":162,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.match":193,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198}],270:[function(t,r,i){function n(f){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(f)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=(o=t("../main"))&&o.__esModule?o:{default:o};(function(f){if(!(f&&f.__esModule)&&!(f===null||a(f)!=="object"&&typeof f!="function")){var h=s();if(h&&h.has(f))return h.get(f);var l,u={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(l in f){var d;Object.prototype.hasOwnProperty.call(f,l)&&((d=c?Object.getOwnPropertyDescriptor(f,l):null)&&(d.get||d.set)?Object.defineProperty(u,l,d):u[l]=f[l])}u.default=f,h&&h.set(f,u)}})(t("../constants")),t("../internationalization");function s(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,s=function(){return f},f)}function a(f){return(a=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(h){return n(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":n(h)})(f)}o.default._validateParameters=o.default._clearValidateParamsCache=function(){},t=o.default,i.default=t},{"../../../docs/parameterData.json":void 0,"../constants":264,"../internationalization":273,"../main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.last-index-of":163,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.function.name":168,"core-js/modules/es.map":169,"core-js/modules/es.number.constructor":173,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.set":189,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.split":198,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238}],271:[function(t,r,i){function n(f){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(f)}function o(f){return(o=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(h){return n(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":n(h)})(f)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=function(f){if(f&&f.__esModule)return f;if(f===null||o(f)!=="object"&&typeof f!="function")return{default:f};var h=a();if(h&&h.has(f))return h.get(f);var l,u={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(l in f){var d;Object.prototype.hasOwnProperty.call(f,l)&&((d=c?Object.getOwnPropertyDescriptor(f,l):null)&&(d.get||d.set)?Object.defineProperty(u,l,d):u[l]=f[l])}return u.default=f,h&&h.set(f,u),u}(t("./constants"));function a(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,a=function(){return f},f)}i.default={modeAdjust:function(f,h,l,u,c){return c===s.CORNER?{x:f,y:h,w:l,h:u}:c===s.CORNERS?{x:f,y:h,w:l-f,h:u-h}:c===s.RADIUS?{x:f-l,y:h-u,w:2*l,h:2*u}:c===s.CENTER?{x:f-.5*l,y:h-.5*u,w:l,h:u}:void 0}}},{"./constants":264,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],272:[function(t,r,i){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var n=(o=t("../core/main"))&&o.__esModule?o:{default:o};t("./internationalization");var o=Promise.resolve();Promise.all([new Promise(function(s,a){document.readyState==="complete"?s():window.addEventListener("load",s,!1)}),o]).then(function(){window._setupDone!==void 0?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(window.setup&&typeof window.setup=="function"||window.draw&&typeof window.draw=="function")&&!n.default.instance&&new n.default})},{"../core/main":275,"./internationalization":273,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.to-string":182,"core-js/modules/es.promise":183,"core-js/modules/es.string.iterator":192,"core-js/modules/web.dom-collections.iterator":238}],273:[function(t,r,i){t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.setTranslatorLanguage=i.currentTranslatorLanguage=i.availableTranslatorLanguages=i.initialize=i.translator=void 0;var n,o,s=f(t("i18next")),a=f(t("i18next-browser-languagedetector"));function f(u){return u&&u.__esModule?u:{default:u}}function h(u,c){for(var d=0;d<c.length;d++){var y=c[d];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(u,y.key,y)}}var l=function(){function u(y,p){if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");this.init(y,p)}var c,d;return c=u,(d=[{key:"fetchWithTimeout",value:function(y,p){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2e3;return Promise.race([fetch(y,p),new Promise(function(g,v){return setTimeout(function(){return v(new Error("timeout"))},m)})])}},{key:"init",value:function(y){var p=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this.services=y,this.options=p}},{key:"read",value:function(y,p,m){var g=this.options.loadPath;y===this.options.fallback?m(null,n[y][p]):o.includes(y)?(g=this.services.interpolator.interpolate(g,{lng:y,ns:p}),this.loadUrl(g,m)):m("Not found",!1)}},{key:"loadUrl",value:function(y,p){this.fetchWithTimeout(y).then(function(m){if(m.ok)return m.json();throw new Error("failed loading ".concat(y))},function(){throw new Error("failed loading ".concat(y))}).then(function(m){return p(null,m)}).catch(p)}}])&&h(c.prototype,d),u}();l.type="backend",i.translator=function(u,c){console.debug("p5.js translator called before translations were loaded"),s.default.t(u,c)},i.initialize=function(){return s.default.use(a.default).use(l).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:n}).then(function(u){i.translator=u},function(u){return console.debug("Translations failed to load (".concat(u,")"))})},i.availableTranslatorLanguages=function(){return s.default.languages},i.currentTranslatorLanguage=function(u){return s.default.language},i.setTranslatorLanguage=function(u){return s.default.changeLanguage(u||void 0,function(c){return console.debug("Translations failed to load (".concat(c,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.promise":183,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.split":198,"core-js/modules/web.dom-collections.iterator":238,i18next:3,"i18next-browser-languagedetector":3}],274:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,t=(t=t("./main"))&&t.__esModule?t:{default:t},t.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},t.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},t.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},t.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},t=t.default,i.default=t},{"./main":275}],275:[function(t,r,i){function n(u){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(u)}function o(u){return(o=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(c){return n(c)}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":n(c)})(u)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,t("./shim");var s=function(u){if(u&&u.__esModule)return u;if(u===null||o(u)!=="object"&&typeof u!="function")return{default:u};var c=a();if(c&&c.has(u))return c.get(u);var d,y={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in u){var m;Object.prototype.hasOwnProperty.call(u,d)&&((m=p?Object.getOwnPropertyDescriptor(u,d):null)&&(m.get||m.set)?Object.defineProperty(y,d,m):y[d]=u[d])}return y.default=u,c&&c.set(u,y),y}(t("./constants"));function a(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,a=function(){return u},u)}function f(u,c){for(var d=0;d<c.length;d++){var y=c[d];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(u,y.key,y)}}var h,l=function(){function u(y,g){var m=this;if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._userNode=g,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._startListener=null,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._recording=!1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var g=Object.getOwnPropertyNames(u.prototype._registeredMethods),v=!0,x=!1,T=void 0;try{for(var w,b=g[Symbol.iterator]();!(v=(w=b.next()).done);v=!0){var C=w.value;this._registeredMethods[C]=u.prototype._registeredMethods[C].slice()}}catch(G){x=!0,T=G}finally{try{v||b.return==null||b.return()}finally{if(x)throw T}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),u.prototype.callRegisteredHooksFor=function(G){var W=this||u.prototype,Q=this._isGlobal?window:this;if(W._registeredMethods.hasOwnProperty(G)){var W=W._registeredMethods[G],ne=!0,G=!1,U=void 0;try{for(var D,O=W[Symbol.iterator]();!(ne=(D=O.next()).done);ne=!0){var V=D.value;typeof V=="function"&&V.call(Q)}}catch(re){G=!0,U=re}finally{try{ne||O.return==null||O.return()}finally{if(G)throw U}}}},this._start=function(){m._userNode&&typeof m._userNode=="string"&&(m._userNode=document.getElementById(m._userNode));var G=m._isGlobal?window:m;if(G.preload){m.callRegisteredHooksFor("beforePreload");var W,Q=document.getElementById(m._loadingScreenId),ne=(Q||((Q=document.createElement("div")).innerHTML="Loading...",Q.style.position="absolute",Q.id=m._loadingScreenId,(m._userNode||document.body).appendChild(Q)),m._preloadMethods);for(W in ne){ne[W]=ne[W]||u;var U=ne[W];U!==u.prototype&&U!==u||(m._isGlobal&&(window[W]=m._wrapPreload(m,W)),U=m),m._registeredPreloadMethods[W]=U[W],U[W]=m._wrapPreload(U,W)}G.preload(),m._runIfPreloadsAreDone()}else m._setup(),m._recording||m._draw()},this._runIfPreloadsAreDone=function(){var G,W=this._isGlobal?window:this;W._preloadCount===0&&((G=document.getElementById(W._loadingScreenId))&&G.parentNode.removeChild(G),this.callRegisteredHooksFor("afterPreload"),this._setupDone||(this._lastTargetFrameTime=window.performance.now(),this._lastRealFrameTime=window.performance.now(),W._setup(),this._recording||W._draw()))},this._decrementPreload=function(){var G=this._isGlobal?window:this;G._preloadDone||typeof G.preload!="function"||(G._setProperty("_preloadCount",G._preloadCount-1),G._runIfPreloadsAreDone())},this._wrapPreload=function(G,W){var Q=this;return function(){Q._incrementPreload();for(var ne=arguments.length,U=new Array(ne),D=0;D<ne;D++)U[D]=arguments[D];return Q._registeredPreloadMethods[W].apply(G,U)}},this._incrementPreload=function(){var G=this._isGlobal?window:this;G._preloadDone||G._setProperty("_preloadCount",G._preloadCount+1)},this._setup=function(){m.callRegisteredHooksFor("beforeSetup"),m.createCanvas(m._defaultCanvasSize.width,m._defaultCanvasSize.height,"p2d");var G=m._isGlobal?window:m;if(typeof G.preload=="function")for(var W in m._preloadMethods)G[W]=m._preloadMethods[W][W],G[W]&&m&&(G[W]=G[W].bind(m));m._millisStart=window.performance.now(),G._preloadDone=!0,typeof G.setup=="function"&&G.setup();var Q=document.getElementsByTagName("canvas"),ne=!0,U=!1,D=void 0;try{for(var O,V=Q[Symbol.iterator]();!(ne=(O=V.next()).done);ne=!0){var Z=O.value;Z.dataset.hidden==="true"&&(Z.style.visibility="",delete Z.dataset.hidden)}}catch(ie){U=!0,D=ie}finally{try{ne||V.return==null||V.return()}finally{if(U)throw D}}m._lastTargetFrameTime=window.performance.now(),m._lastRealFrameTime=window.performance.now(),m._setupDone=!0,(m._accessibleOutputs.grid||m._accessibleOutputs.text)&&m._updateAccsOutput(),m.callRegisteredHooksFor("afterSetup")},this._draw=function(){var G=window.performance.now(),W=G-m._lastTargetFrameTime,Q=1e3/m._targetFrameRate;(!m._loop||Q-5<=W)&&(m.deltaTime=G-m._lastRealFrameTime,m._setProperty("deltaTime",m.deltaTime),m._frameRate=1e3/m.deltaTime,m.redraw(),m._lastTargetFrameTime=Math.max(m._lastTargetFrameTime+Q,G),m._lastRealFrameTime=G,m._updateMouseCoords!==void 0&&(m._updateMouseCoords(),m._setProperty("movedX",0),m._setProperty("movedY",0))),m._loop&&(m._requestAnimId=window.requestAnimationFrame(m._draw))},this._setProperty=function(G,W){m[G]=W,m._isGlobal&&(window[G]=W)},this.remove=function(){m._startListener&&window.removeEventListener("load",m._startListener,!1);var G=document.getElementById(m._loadingScreenId);if(G&&(G.parentNode.removeChild(G),m._incrementPreload()),m._curElement){for(var W in m._loop=!1,m._requestAnimId&&window.cancelAnimationFrame(m._requestAnimId),m._events)window.removeEventListener(W,m._events[W]);var Q=!0,G=!1,ne=void 0;try{for(var U,D=m._elements[Symbol.iterator]();!(Q=(U=D.next()).done);Q=!0){var O,V=U.value;for(O in V.elt&&V.elt.parentNode&&V.elt.parentNode.removeChild(V.elt),V._events)V.elt.removeEventListener(O,V._events[O])}}catch(ye){G=!0,ne=ye}finally{try{Q||D.return==null||D.return()}finally{if(G)throw ne}}var Z=m;m._registeredMethods.remove.forEach(function(ye){ye!==void 0&&ye.call(Z)})}if(m._isGlobal){for(var ie in u.prototype)try{delete window[ie]}catch{window[ie]=void 0}for(var re in m)if(m.hasOwnProperty(re))try{delete window[re]}catch{window[re]=void 0}u.instance=null}},this._registeredMethods.init.forEach(function(G){G!==void 0&&G.call(this)},this),this._setupPromisePreloads();var A,M,k=this._createFriendlyGlobalFunctionBinder();if(y)y(this),u._checkForUserDefinedFunctions(this);else{for(var P in this._isGlobal=!0,u.instance=this,u.prototype)typeof u.prototype[P]=="function"?(A=P.substring(2),this._events.hasOwnProperty(A)||(Math.hasOwnProperty(P)&&Math[P]===u.prototype[P]?k(P,u.prototype[P]):k(P,u.prototype[P].bind(this)))):k(P,u.prototype[P]);for(var F in this)this.hasOwnProperty(F)&&k(F,this[F])}for(M in this._events){var I=this["_on".concat(M)];I&&(I=I.bind(this),window.addEventListener(M,I,{passive:!1}),this._events[M]=I)}function B(){m._setProperty("focused",!0)}function H(){m._setProperty("focused",!1)}window.addEventListener("focus",B),window.addEventListener("blur",H),this.registerMethod("remove",function(){window.removeEventListener("focus",B),window.removeEventListener("blur",H)}),document.readyState==="complete"?this._start():(this._startListener=this._start.bind(this),window.addEventListener("load",this._startListener,!1))}var c,d;return c=u,(d=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=s.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(y,p){u.prototype._preloadMethods.hasOwnProperty(y)||(u.prototype._preloadMethods[y]=p)}},{key:"registerMethod",value:function(y,p){var m=this||u.prototype;m._registeredMethods.hasOwnProperty(y)||(m._registeredMethods[y]=[]),m._registeredMethods[y].push(p)}},{key:"unregisterMethod",value:function(y,p){var m=this||u.prototype;if(m._registeredMethods.hasOwnProperty(y)){for(var g=m._registeredMethods[y],v=[],x=0;x<g.length;x++)g[x]===p&&v.push(x);for(var T=v.length-1;0<=T;T--)g.splice(v[T],1)}}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var y=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},p=y.globalObject||window;return y.log||console.log.bind(console),function(m,g){u.disableFriendlyErrors,p[m]=g}}}])&&f(c.prototype,d),u}();for(h in l.instance=null,l.disableFriendlyErrors=!1,s)l.prototype[h]=s[h];l.VERSION=s.VERSION,l.prototype._preloadMethods={loadJSON:l.prototype,loadImage:l.prototype,loadStrings:l.prototype,loadXML:l.prototype,loadBytes:l.prototype,loadTable:l.prototype,loadFont:l.prototype,loadModel:l.prototype,loadShader:l.prototype},l.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},l.prototype._registeredPreloadMethods={},i.default=l},{"./constants":264,"./shim":286,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.splice":167,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-own-property-names":179,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238}],276:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=(t=t("./main"))&&t.__esModule?t:{default:t};function o(s,a){for(var f=0;f<a.length;f++){var h=a[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(s,h.key,h)}}n.default.Element=function(){function s(l,u){if(!(this instanceof s))throw new TypeError("Cannot call a class as a function");this.elt=l,this._pInst=this._pixelsState=u,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight}var a,f,h;return a=s,h=[{key:"_adjustListener",value:function(l,u,c){return u===!1?n.default.Element._detachListener(l,c):n.default.Element._attachListener(l,u,c),this}},{key:"_attachListener",value:function(l,u,c){c._events[l]&&n.default.Element._detachListener(l,c),u=u.bind(c),c.elt.addEventListener(l,u,!1),c._events[l]=u}},{key:"_detachListener",value:function(l,u){var c=u._events[l];u.elt.removeEventListener(l,c,!1),u._events[l]=null}}],(f=[{key:"parent",value:function(l){return l===void 0?this.elt.parentNode:(typeof l=="string"?(l[0]==="#"&&(l=l.substring(1)),l=document.getElementById(l)):l instanceof n.default.Element&&(l=l.elt),l.appendChild(this.elt),this)}},{key:"id",value:function(l){return l===void 0?this.elt.id:(this.elt.id=l,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)}},{key:"class",value:function(l){return l===void 0?this.elt.className:(this.elt.className=l,this)}},{key:"mousePressed",value:function(l){return n.default.Element._adjustListener("mousedown",function(u){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(u),l.call(this,u)},this),this}},{key:"doubleClicked",value:function(l){return n.default.Element._adjustListener("dblclick",l,this),this}},{key:"mouseWheel",value:function(l){return n.default.Element._adjustListener("wheel",l,this),this}},{key:"mouseReleased",value:function(l){return n.default.Element._adjustListener("mouseup",l,this),this}},{key:"mouseClicked",value:function(l){return n.default.Element._adjustListener("click",l,this),this}},{key:"mouseMoved",value:function(l){return n.default.Element._adjustListener("mousemove",l,this),this}},{key:"mouseOver",value:function(l){return n.default.Element._adjustListener("mouseover",l,this),this}},{key:"mouseOut",value:function(l){return n.default.Element._adjustListener("mouseout",l,this),this}},{key:"touchStarted",value:function(l){return n.default.Element._adjustListener("touchstart",l,this),this}},{key:"touchMoved",value:function(l){return n.default.Element._adjustListener("touchmove",l,this),this}},{key:"touchEnded",value:function(l){return n.default.Element._adjustListener("touchend",l,this),this}},{key:"dragOver",value:function(l){return n.default.Element._adjustListener("dragover",l,this),this}},{key:"dragLeave",value:function(l){return n.default.Element._adjustListener("dragleave",l,this),this}},{key:"_setProperty",value:function(l,u){this[l]=u}}])&&o(a.prototype,f),h&&o(a,h),s}(),t=n.default.Element,i.default=t},{"./main":275}],277:[function(t,r,i){function n(m){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}function o(m){return(o=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(g){return n(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":n(g)})(m)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-prototype-of"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(p=t("./main"))&&p.__esModule?p:{default:p},a=function(m){if(m&&m.__esModule)return m;if(m===null||o(m)!=="object"&&typeof m!="function")return{default:m};var g=f();if(g&&g.has(m))return g.get(m);var v,x={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in m){var w;Object.prototype.hasOwnProperty.call(m,v)&&((w=T?Object.getOwnPropertyDescriptor(m,v):null)&&(w.get||w.set)?Object.defineProperty(x,v,w):x[v]=m[v])}return x.default=m,g&&g.set(m,x),x}(t("./constants"));function f(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,f=function(){return m},m)}function h(m,g){for(var v=0;v<g.length;v++){var x=g[v];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(m,x.key,x)}}function l(m,g){return(l=Object.setPrototypeOf||function(v,x){return v.__proto__=x,v})(m,g)}function u(m){return function(){var g,v=y(m);return c(this,function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(g=y(this).constructor,Reflect.construct(v,arguments,g)):v.apply(this,arguments))}}function c(m,g){return!g||o(g)!=="object"&&typeof g!="function"?d(m):g}function d(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function y(m){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)})(m)}s.default.Graphics=function(m){var g=x;if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(m&&m.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),m&&l(g,m);var v=u(x);function x(T,w,F,C,A){var M;if(!(this instanceof x))throw new TypeError("Cannot call a class as a function");P=A||document.createElement("canvas"),(M=v.call(this,P,C)).canvas=P;var k,P=F||a.P2D,F=C._userNode||document.body;for(k in A||F.appendChild(M.canvas),s.default.prototype)M[k]||(typeof s.default.prototype[k]=="function"?M[k]=s.default.prototype[k].bind(d(M)):M[k]=s.default.prototype[k]);return s.default.prototype._initializeInstanceVariables.apply(d(M)),M.width=T,M.height=w,M._pixelDensity=C._pixelDensity,P===a.WEBGL?M._renderer=new s.default.RendererGL(M.canvas,d(M),!1):M._renderer=new s.default.Renderer2D(M.canvas,d(M),!1),C._elements.push(d(M)),Object.defineProperty(d(M),"deltaTime",{get:function(){return this._pInst.deltaTime}}),M._renderer.resize(T,w),M._renderer._applyDefaults(),c(M,d(M))}return g=x,(m=[{key:"reset",value:function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()}},{key:"remove",value:function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var T,w=this._pInst._elements.indexOf(this);for(T in w!==-1&&this._pInst._elements.splice(w,1),this._events)this.elt.removeEventListener(T,this._events[T])}},{key:"createFramebuffer",value:function(T){return new s.default.Framebuffer(this,T)}}])&&h(g.prototype,m),x}(s.default.Element);var p=s.default.Graphics;i.default=p},{"./constants":264,"./main":275,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.splice":167,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],278:[function(t,r,i){function n(m){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=(y=t("./main"))&&y.__esModule?y:{default:y},s=function(m){if(m&&m.__esModule)return m;if(m===null||f(m)!=="object"&&typeof m!="function")return{default:m};var g=a();if(g&&g.has(m))return g.get(m);var v,x={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in m){var w;Object.prototype.hasOwnProperty.call(m,v)&&((w=T?Object.getOwnPropertyDescriptor(m,v):null)&&(w.get||w.set)?Object.defineProperty(x,v,w):x[v]=m[v])}return x.default=m,g&&g.set(m,x),x}(t("../core/constants"));function a(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,a=function(){return m},m)}function f(m){return(f=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(g){return n(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":n(g)})(m)}function h(m,g){for(var v=0;v<g.length;v++){var x=g[v];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(m,x.key,x)}}function l(m,g){return(l=Object.setPrototypeOf||function(v,x){return v.__proto__=x,v})(m,g)}function u(m){return function(){var g,v,x=d(m);return g=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(g=d(this).constructor,Reflect.construct(x,arguments,g)):x.apply(this,arguments),x=this,!(v=g)||f(v)!=="object"&&typeof v!="function"?c(x):v}}function c(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function d(m){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)})(m)}var y=function(m){var g=x;if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(m&&m.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),m&&l(g,m);var v=u(x);function x(T,w,b){var C;if(this instanceof x)return(C=v.call(this,T,w)).canvas=T,C._pixelsState=w,b?(C._isMainCanvas=!0,C._pInst._setProperty("_curElement",c(C)),C._pInst._setProperty("canvas",C.canvas),C._pInst._setProperty("width",C.width),C._pInst._setProperty("height",C.height)):(C.canvas.style.display="none",C._styles=[]),C._clipping=!1,C._clipInvert=!1,C._textSize=12,C._textLeading=15,C._textFont="sans-serif",C._textStyle=s.NORMAL,C._textAscent=null,C._textDescent=null,C._textAlign=s.LEFT,C._textBaseline=s.BASELINE,C._textWrap=s.WORD,C._rectMode=s.CORNER,C._ellipseMode=s.CENTER,C._curveTightness=0,C._imageMode=s.CORNER,C._tint=null,C._doStroke=!0,C._doFill=!0,C._strokeSet=!1,C._fillSet=!1,C._leadingSet=!1,C._pushPopDepth=0,C;throw new TypeError("Cannot call a class as a function")}return g=x,(m=[{key:"push",value:function(){return this._pushPopDepth++,{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}}},{key:"pop",value:function(T){this._pushPopDepth--,T.properties&&Object.assign(this,T.properties)}},{key:"beginClip",value:function(){var T=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};if(this._clipping)throw new Error("It looks like you're trying to clip while already in the middle of clipping. Did you forget to endClip()?");this._clipping=!0,this._clipInvert=T.invert}},{key:"endClip",value:function(){if(!this._clipping)throw new Error("It looks like you've called endClip() without beginClip(). Did you forget to call beginClip() first?");this._clipping=!1}},{key:"resize",value:function(T,w){this.width=T,this.height=w,this.elt.width=T*this._pInst._pixelDensity,this.elt.height=w*this._pInst._pixelDensity,this.elt.style.width="".concat(T,"px"),this.elt.style.height="".concat(w,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))}},{key:"get",value:function(T,w,b,C){var A=this._pixelsState,M=A._pixelDensity,k=this.canvas;if(T===void 0&&w===void 0)T=w=0,b=A.width,C=A.height;else if(T*=M,w*=M,b===void 0&&C===void 0)return T<0||w<0||T>=k.width||w>=k.height?[0,0,0,0]:this._getPixel(T,w);return A=new o.default.Image(b*M,C*M),A.pixelDensity(M),A.canvas.getContext("2d").drawImage(k,T,w,b*M,C*M,0,0,b*M,C*M),A}},{key:"textLeading",value:function(T){return typeof T=="number"?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",T),this._pInst):this._textLeading}},{key:"textStyle",value:function(T){return T?(T!==s.NORMAL&&T!==s.ITALIC&&T!==s.BOLD&&T!==s.BOLDITALIC||this._setProperty("_textStyle",T),this._applyTextProperties()):this._textStyle}},{key:"textAscent",value:function(){return this._textAscent===null&&this._updateTextMetrics(),this._textAscent}},{key:"textDescent",value:function(){return this._textDescent===null&&this._updateTextMetrics(),this._textDescent}},{key:"textAlign",value:function(T,w){return T!==void 0?(this._setProperty("_textAlign",T),w!==void 0&&this._setProperty("_textBaseline",w),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}}},{key:"textWrap",value:function(T){return this._setProperty("_textWrap",T),this._textWrap}},{key:"text",value:function(T,w,b,C,A){var M,k,P,F,I=this._pInst,B=this._textWrap,H=Number.MAX_VALUE,G=b;if((this._doFill||this._doStroke)&&T!==void 0){if(M=(T=(T=typeof T!="string"?T.toString():T).replace(/(\t)/g,"  ")).split(`
`),C!==void 0){switch(this._rectMode===s.CENTER&&(w-=C/2),this._textAlign){case s.CENTER:w+=C/2;break;case s.RIGHT:w+=C}if(A!==void 0){this._rectMode===s.CENTER&&(b-=A/2,G-=A/2);var T=b,W=I.textAscent();switch(this._textBaseline){case s.BOTTOM:F=b+A,b=Math.max(F,b),G+=W;break;case s.CENTER:F=b+A/2,b=Math.max(F,b),G+=W/2}H=b+A-W,this._textBaseline===s.CENTER&&(H=T+A-W/2)}else this._textBaseline!==s.BOTTOM&&this._textBaseline!==s.CENTER||(G=b-(T=I.textSize()*this._textLeading)/2,H=b+T/2);if(B===s.WORD){for(var Q=[],ne=0;ne<M.length;ne++){for(var U="",D=M[ne].split(" "),O=0;O<D.length;O++)k="".concat(U+D[O])+" ",U=C<(P=this.textWidth(k))&&0<U.length?(Q.push(U),"".concat(D[O])+" "):k;Q.push(U)}var V=0;this._textBaseline===s.CENTER?V=(Q.length-1)*I.textLeading()/2:this._textBaseline===s.BOTTOM&&(V=(Q.length-1)*I.textLeading());for(var Z=0;Z<M.length;Z++){U="",D=M[Z].split(" ");for(var ie=0;ie<D.length;ie++)k="".concat(U+D[ie])+" ",C<(P=this.textWidth(k))&&0<U.length?(this._renderText(I,U.trim(),w,b-V,H,G),U="".concat(D[ie])+" ",b+=I.textLeading()):U=k;this._renderText(I,U.trim(),w,b-V,H,G),b+=I.textLeading()}}else{for(var re=[],ge=0;ge<M.length;ge++)for(var ye=M[ge].split(U=""),he=0;he<ye.length;he++)k="".concat(U+ye[he]),(P=this.textWidth(k))<=C?U+=ye[he]:C<P&&0<U.length&&(re.push(U),U="".concat(ye[he]));re.push(U);var pe=0;this._textBaseline===s.CENTER?pe=(re.length-1)*I.textLeading()/2:this._textBaseline===s.BOTTOM&&(pe=(re.length-1)*I.textLeading());for(var we=0;we<M.length;we++){ye=M[we].split(U="");for(var oe=0;oe<ye.length;oe++)k="".concat(U+ye[oe]),(P=this.textWidth(k))<=C?U+=ye[oe]:C<P&&0<U.length&&(this._renderText(I,U.trim(),w,b-pe,H,G),b+=I.textLeading(),U="".concat(ye[oe]))}this._renderText(I,U.trim(),w,b-pe,H,G),b+=I.textLeading()}}else{var fe=0;this._textBaseline===s.CENTER?fe=(M.length-1)*I.textLeading()/2:this._textBaseline===s.BOTTOM&&(fe=(M.length-1)*I.textLeading());for(var Ce=0;Ce<M.length;Ce++)this._renderText(I,M[Ce],w,b-fe,H,G-fe),b+=I.textLeading()}return I}}},{key:"_applyDefaults",value:function(){return this}},{key:"_isOpenType",value:function(){var T=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this._textFont;return f(T)==="object"&&T.font&&T.font.supported}},{key:"_updateTextMetrics",value:function(){var T,w,b,C,A,M;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((T=document.createElement("span")).style.fontFamily=this._textFont,T.style.fontSize="".concat(this._textSize,"px"),T.innerHTML="ABCjgq|",(M=document.createElement("div")).style.display="inline-block",M.style.width="1px",M.style.height="0px",C=((w=document.createElement("div")).appendChild(T),w.appendChild(M),w.style.height="0px",w.style.overflow="hidden",document.body.appendChild(w),M.style.verticalAlign="baseline",p(M)),A=p(T),b=C[1]-A[1],C=(M.style.verticalAlign="bottom",p(M)),A=p(T),M=C[1]-A[1]-b,document.body.removeChild(w),this._setProperty("_textAscent",b),this._setProperty("_textDescent",M)),this}}])&&h(g.prototype,m),x}(o.default.Element);function p(m){var g=0,v=0;if(m.offsetParent)for(;g+=m.offsetLeft,v+=m.offsetTop,m=m.offsetParent;);else g+=m.offsetLeft,v+=m.offsetTop;return[g,v]}y.prototype.textSize=function(m){return typeof m=="number"?(this._setProperty("_textSize",m),this._leadingSet||this._setProperty("_textLeading",m*s._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},o.default.Renderer=y,t=o.default.Renderer,i.default=t},{"../core/constants":264,"./main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.number.constructor":173,"core-js/modules/es.object.assign":176,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198,"core-js/modules/es.string.trim":201,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],279:[function(m,r,i){function n(g){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(g)}function o(g){return(o=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(v){return n(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":n(v)})(g)}m("core-js/modules/es.symbol"),m("core-js/modules/es.symbol.description"),m("core-js/modules/es.symbol.iterator"),m("core-js/modules/es.array.concat"),m("core-js/modules/es.array.fill"),m("core-js/modules/es.array.for-each"),m("core-js/modules/es.array.iterator"),m("core-js/modules/es.array.join"),m("core-js/modules/es.array.slice"),m("core-js/modules/es.function.name"),m("core-js/modules/es.number.to-fixed"),m("core-js/modules/es.object.get-own-property-descriptor"),m("core-js/modules/es.object.get-prototype-of"),m("core-js/modules/es.object.to-string"),m("core-js/modules/es.reflect.construct"),m("core-js/modules/es.reflect.get"),m("core-js/modules/es.regexp.to-string"),m("core-js/modules/es.string.iterator"),m("core-js/modules/es.weak-map"),m("core-js/modules/web.dom-collections.iterator"),m("core-js/modules/es.array.concat"),m("core-js/modules/es.array.fill"),m("core-js/modules/es.array.for-each"),m("core-js/modules/es.array.join"),m("core-js/modules/es.array.slice"),m("core-js/modules/es.function.name"),m("core-js/modules/es.number.to-fixed"),m("core-js/modules/es.object.get-prototype-of"),m("core-js/modules/es.object.to-string"),m("core-js/modules/es.regexp.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(p=m("./main"))&&p.__esModule?p:{default:p},a=function(g){if(g&&g.__esModule)return g;if(g===null||o(g)!=="object"&&typeof g!="function")return{default:g};var v=f();if(v&&v.has(g))return v.get(g);var x,T={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(x in g){var b;Object.prototype.hasOwnProperty.call(g,x)&&((b=w?Object.getOwnPropertyDescriptor(g,x):null)&&(b.get||b.set)?Object.defineProperty(T,x,b):T[x]=g[x])}return T.default=g,v&&v.set(g,T),T}(m("./constants"));function f(){var g;return typeof WeakMap!="function"?null:(g=new WeakMap,f=function(){return g},g)}function h(g,v){for(var x=0;x<v.length;x++){var T=v[x];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(g,T.key,T)}}function l(g,v,x){return(l=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(C,w,b){var C=function(A,M){for(;!Object.prototype.hasOwnProperty.call(A,M)&&(A=d(A))!==null;);return A}(C,w);if(C)return(C=Object.getOwnPropertyDescriptor(C,w)).get?C.get.call(b):C.value})(g,v,x||g)}function u(g,v){return(u=Object.setPrototypeOf||function(x,T){return x.__proto__=T,x})(g,v)}function c(g){return function(){var v,x=d(g),x=(v=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(v=d(this).constructor,Reflect.construct(x,arguments,v)):x.apply(this,arguments),this);if(!v||o(v)!=="object"&&typeof v!="function"){if(x!==void 0)return x;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return v}}function d(g){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)})(g)}m("./p5.Renderer");var y="rgba(0,0,0,0)",p=function(g){var v=T;if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(g&&g.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),g&&u(v,g);var x=c(T);function T(w,b,C){if(this instanceof T)return(w=x.call(this,w,b,C)).drawingContext=w.canvas.getContext("2d"),w._pInst._setProperty("drawingContext",w.drawingContext),w;throw new TypeError("Cannot call a class as a function")}return v=T,(g=[{key:"getFilterGraphicsLayer",value:function(){var w;return this.filterGraphicsLayer||(w=(this._pInst instanceof s.default.Graphics?this._pInst:this)._pInst,this.filterGraphicsLayer=new s.default.Graphics(this.width,this.height,a.WEBGL,w)),this.filterGraphicsLayer.width===this.width&&this.filterGraphicsLayer.height===this.height||this.filterGraphicsLayer.resizeCanvas(this.width,this.height),this.filterGraphicsLayer.pixelDensity()!==this._pInst.pixelDensity()&&this.filterGraphicsLayer.pixelDensity(this._pInst.pixelDensity()),this.filterGraphicsLayer}},{key:"_applyDefaults",value:function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=a.BLEND,this._setFill(a._DEFAULT_FILL),this._setStroke(a._DEFAULT_STROKE),this.drawingContext.lineCap=a.ROUND,this.drawingContext.font="normal 12px sans-serif"}},{key:"resize",value:function(w,b){l(d(T.prototype),"resize",this).call(this,w,b),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)}},{key:"background",value:function(){var w,b;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof s.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(w=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(w,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(w=this._getFill(),b=(b=this._pInst).color.apply(b,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(b.levels),b=b.toString(),this._setFill(b),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(w),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()}},{key:"clear",value:function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()}},{key:"fill",value:function(){var w=(w=this._pInst).color.apply(w,arguments);this._setFill(w.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",w.levels)}},{key:"stroke",value:function(){var w=(w=this._pInst).color.apply(w,arguments);this._setStroke(w.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",w.levels)}},{key:"erase",value:function(w,b){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,w=this._pInst.color(255,w).toString(),this.drawingContext.fillStyle=w,this._cachedStrokeStyle=this.drawingContext.strokeStyle,w=this._pInst.color(255,b).toString(),this.drawingContext.strokeStyle=w,b=this._cachedBlendMode,this.blendMode(a.REMOVE),this._cachedBlendMode=b,this._isErasing=!0)}},{key:"noErase",value:function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)}},{key:"beginClip",value:function(){var w=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},w=(l(d(T.prototype),"beginClip",this).call(this,w),this._cachedFillStyle=this.drawingContext.fillStyle,this._pInst.color(255,0).toString()),w=(this.drawingContext.fillStyle=w,this._cachedStrokeStyle=this.drawingContext.strokeStyle,this._pInst.color(255,0).toString()),w=(this.drawingContext.strokeStyle=w,this._cachedBlendMode);this.blendMode(a.BLEND),this._cachedBlendMode=w,this.drawingContext.beginPath(),this._clipInvert&&(this.drawingContext.moveTo(-2*this.width,-2*this.height),this.drawingContext.lineTo(-2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,-2*this.height),this.drawingContext.closePath())}},{key:"endClip",value:function(){this._doFillStrokeClose(),this.drawingContext.clip(),l(d(T.prototype),"endClip",this).call(this),this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode)}},{key:"image",value:function(w,b,C,A,M,k,P,F,I){w.gifProperties&&w._animateGif(this._pInst);try{s.default.MediaElement&&w instanceof s.default.MediaElement&&w._ensureCanvas();var B=(B=this._tint&&w.canvas?this._getTintedImageCanvas(w):B)||w.canvas||w.elt,H=1;w.width&&0<w.width&&(H=B.width/w.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(B,H*b,H*C,H*A,H*M,k,P,F,I),this._isErasing&&this._pInst.erase()}catch(G){if(G.name!=="NS_ERROR_NOT_AVAILABLE")throw G}}},{key:"_getTintedImageCanvas",value:function(w){if(!w.canvas)return w;w.tintCanvas||(w.tintCanvas=document.createElement("canvas")),w.tintCanvas.width!==w.canvas.width&&(w.tintCanvas.width=w.canvas.width),w.tintCanvas.height!==w.canvas.height&&(w.tintCanvas.height=w.canvas.height);var b=w.tintCanvas.getContext("2d");return b.save(),b.clearRect(0,0,w.canvas.width,w.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(b.drawImage(w.canvas,0,0),b.globalCompositeOperation="luminosity",b.drawImage(w.canvas,0,0),b.globalCompositeOperation="color",b.drawImage(w.canvas,0,0),b.globalCompositeOperation="multiply",b.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),b.fillRect(0,0,w.canvas.width,w.canvas.height),b.globalCompositeOperation="destination-in"),b.globalAlpha=this._tint[3]/255,b.drawImage(w.canvas,0,0),b.restore(),w.tintCanvas}},{key:"blendMode",value:function(w){if(w===a.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(w!==a.BLEND&&w!==a.REMOVE&&w!==a.DARKEST&&w!==a.LIGHTEST&&w!==a.DIFFERENCE&&w!==a.MULTIPLY&&w!==a.EXCLUSION&&w!==a.SCREEN&&w!==a.REPLACE&&w!==a.OVERLAY&&w!==a.HARD_LIGHT&&w!==a.SOFT_LIGHT&&w!==a.DODGE&&w!==a.BURN&&w!==a.ADD)throw new Error("Mode ".concat(w," not recognized."));this._cachedBlendMode=w,this.drawingContext.globalCompositeOperation=w}}},{key:"blend",value:function(){for(var w=this.drawingContext.globalCompositeOperation,b=arguments.length,C=new Array(b),A=0;A<b;A++)C[A]=arguments[A];var M=C[C.length-1],k=Array.prototype.slice.call(C,0,C.length-1);this.drawingContext.globalCompositeOperation=M,s.default.prototype.copy.apply(this,k),this.drawingContext.globalCompositeOperation=w}},{key:"_getPixel",value:function(w,b){return w=this.drawingContext.getImageData(w,b,1,1).data,[w[0],w[1],w[2],w[3]]}},{key:"loadPixels",value:function(){var w=this._pixelsState,b=w._pixelDensity,C=this.width*b,b=this.height*b,C=this.drawingContext.getImageData(0,0,C,b);w._setProperty("imageData",C),w._setProperty("pixels",C.data)}},{key:"set",value:function(w,b,C){w=Math.floor(w),b=Math.floor(b);var A=this._pixelsState;if(C instanceof s.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(A._pixelDensity,A._pixelDensity),this.drawingContext.clearRect(w,b,C.width,C.height),this.drawingContext.drawImage(C.canvas,w,b),this.drawingContext.restore();else{var M=0,k=0,P=0,F=0,I=4*(b*A._pixelDensity*(this.width*A._pixelDensity)+w*A._pixelDensity);if(A.imageData||A.loadPixels.call(A),typeof C=="number")I<A.pixels.length&&(P=k=M=C,F=255);else if(C instanceof Array){if(C.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");I<A.pixels.length&&(M=C[0],k=C[1],P=C[2],F=C[3])}else C instanceof s.default.Color&&I<A.pixels.length&&(M=C.levels[0],k=C.levels[1],P=C.levels[2],F=C.levels[3]);for(var B=0;B<A._pixelDensity;B++)for(var H=0;H<A._pixelDensity;H++)I=4*((b*A._pixelDensity+H)*this.width*A._pixelDensity+(w*A._pixelDensity+B)),A.pixels[I]=M,A.pixels[I+1]=k,A.pixels[I+2]=P,A.pixels[I+3]=F}}},{key:"updatePixels",value:function(w,b,C,A){var M=this._pixelsState,k=M._pixelDensity;w===void 0&&b===void 0&&C===void 0&&A===void 0&&(b=w=0,C=this.width,A=this.height),w*=k,b*=k,C*=k,A*=k,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=M.imageData),this.drawingContext.putImageData(M.imageData,w,b,0,0,C,A)}},{key:"_acuteArcToBezier",value:function(w,b){var k=b/2,C=Math.cos(k),F=Math.sin(k),A=1/Math.tan(k),k=w+k,M=Math.cos(k),k=Math.sin(k),P=(4-C)/3,F=F+(C-P)*A;return{ax:Math.cos(w).toFixed(7),ay:Math.sin(w).toFixed(7),bx:(P*M+F*k).toFixed(7),by:(P*k-F*M).toFixed(7),cx:(P*M-F*k).toFixed(7),cy:(P*k+F*M).toFixed(7),dx:Math.cos(w+b).toFixed(7),dy:Math.sin(w+b).toFixed(7)}}},{key:"arc",value:function(w,b,C,A,M,k,P){var F,I=this.drawingContext,B=C/2,H=A/2,G=[];for(w+=B,b+=H;1e-5<=k-M;)F=Math.min(k-M,a.HALF_PI),G.push(this._acuteArcToBezier(M,F)),M+=F;return this._doFill&&(this._clipping||I.beginPath(),G.forEach(function(W,Q){Q===0&&I.moveTo(w+W.ax*B,b+W.ay*H),I.bezierCurveTo(w+W.bx*B,b+W.by*H,w+W.cx*B,b+W.cy*H,w+W.dx*B,b+W.dy*H)}),P!==a.PIE&&P!=null||I.lineTo(w,b),I.closePath(),this._clipping||I.fill()),this._doStroke&&(this._clipping||I.beginPath(),G.forEach(function(W,Q){Q===0&&I.moveTo(w+W.ax*B,b+W.ay*H),I.bezierCurveTo(w+W.bx*B,b+W.by*H,w+W.cx*B,b+W.cy*H,w+W.dx*B,b+W.dy*H)}),P===a.PIE?(I.lineTo(w,b),I.closePath()):P===a.CHORD&&I.closePath(),this._clipping||I.stroke()),this}},{key:"ellipse",value:function(G){var b=this.drawingContext,C=this._doFill,A=this._doStroke,M=parseFloat(G[0]),k=parseFloat(G[1]),H=parseFloat(G[2]),G=parseFloat(G[3]);if(C&&!A){if(this._getFill()===y)return this}else if(!C&&A&&this._getStroke()===y)return this;var P=H/2*.5522847498,F=G/2*.5522847498,I=M+H,B=k+G,H=M+H/2,G=k+G/2;this._clipping||b.beginPath(),b.moveTo(M,G),b.bezierCurveTo(M,G-F,H-P,k,H,k),b.bezierCurveTo(H+P,k,I,G-F,I,G),b.bezierCurveTo(I,G+F,H+P,B,H,B),b.bezierCurveTo(H-P,B,M,G+F,M,G),!this._clipping&&C&&b.fill(),!this._clipping&&A&&b.stroke()}},{key:"line",value:function(w,b,C,A){var M=this.drawingContext;return this._doStroke&&this._getStroke()!==y&&(this._clipping||M.beginPath(),M.moveTo(w,b),M.lineTo(C,A),M.stroke()),this}},{key:"point",value:function(w,b){var C,A,M=this.drawingContext;return!this._doStroke||this._getStroke()===y?this:(C=this._getStroke(),A=this._getFill(),this._clipping||this._setFill(C),this._clipping||M.beginPath(),M.arc(w,b,M.lineWidth/2,0,a.TWO_PI,!1),void(this._clipping||(M.fill(),this._setFill(A))))}},{key:"quad",value:function(w,b,C,A,M,k,P,F){var I=this.drawingContext,B=this._doFill,H=this._doStroke;if(B&&!H){if(this._getFill()===y)return this}else if(!B&&H&&this._getStroke()===y)return this;return this._clipping||I.beginPath(),I.moveTo(w,b),I.lineTo(C,A),I.lineTo(M,k),I.lineTo(P,F),I.closePath(),!this._clipping&&B&&I.fill(),!this._clipping&&H&&I.stroke(),this}},{key:"rect",value:function(H){var b,C,A=H[0],M=H[1],k=H[2],P=H[3],F=H[4],I=H[5],B=H[6],H=H[7],G=this.drawingContext,W=this._doFill,Q=this._doStroke;if(W&&!Q){if(this._getFill()===y)return this}else if(!W&&Q&&this._getStroke()===y)return this;return this._clipping||G.beginPath(),F===void 0?G.rect(A,M,k,P):(I===void 0&&(I=F),B===void 0&&(B=I),H===void 0&&(H=B),Q=(W=Math.abs(k))/2,C=(b=Math.abs(P))/2,b<2*(F=W<2*F?Q:F)&&(F=C),b<2*(I=W<2*I?Q:I)&&(I=C),b<2*(B=W<2*B?Q:B)&&(B=C),b<2*(H=W<2*H?Q:H)&&(H=C),this._clipping||G.beginPath(),G.moveTo(A+F,M),G.arcTo(A+k,M,A+k,M+P,I),G.arcTo(A+k,M+P,A,M+P,B),G.arcTo(A,M+P,A,M,H),G.arcTo(A,M,A+k,M,F),G.closePath()),!this._clipping&&this._doFill&&G.fill(),!this._clipping&&this._doStroke&&G.stroke(),this}},{key:"triangle",value:function(B){var b=this.drawingContext,C=this._doFill,A=this._doStroke,M=B[0],k=B[1],P=B[2],F=B[3],I=B[4],B=B[5];if(C&&!A){if(this._getFill()===y)return this}else if(!C&&A&&this._getStroke()===y)return this;this._clipping||b.beginPath(),b.moveTo(M,k),b.lineTo(P,F),b.lineTo(I,B),b.closePath(),!this._clipping&&C&&b.fill(),!this._clipping&&A&&b.stroke()}},{key:"endShape",value:function(w,b,C,A,M,k,P){if(b.length!==0&&(this._doStroke||this._doFill)){var F,I,B,H=w===a.CLOSE,G=(H&&!k&&b.push(b[0]),b.length);if(C&&P===null){if(3<G){var W=[],Q=1-this._curveTightness;for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(b[1][0],b[1][1]),I=1;I+2<G;I++)F=b[I],W[0]=[F[0],F[1]],W[1]=[F[0]+(Q*b[I+1][0]-Q*b[I-1][0])/6,F[1]+(Q*b[I+1][1]-Q*b[I-1][1])/6],W[2]=[b[I+1][0]+(Q*b[I][0]-Q*b[I+2][0])/6,b[I+1][1]+(Q*b[I][1]-Q*b[I+2][1])/6],W[3]=[b[I+1][0],b[I+1][1]],this.drawingContext.bezierCurveTo(W[1][0],W[1][1],W[2][0],W[2][1],W[3][0],W[3][1]);H&&this.drawingContext.lineTo(b[I+1][0],b[I+1][1]),this._doFillStrokeClose(H)}}else if(A&&P===null){for(this._clipping||this.drawingContext.beginPath(),I=0;I<G;I++)b[I].isVert?b[I].moveTo?this.drawingContext.moveTo(b[I][0],b[I][1]):this.drawingContext.lineTo(b[I][0],b[I][1]):this.drawingContext.bezierCurveTo(b[I][0],b[I][1],b[I][2],b[I][3],b[I][4],b[I][5]);this._doFillStrokeClose(H)}else if(M&&P===null){for(this._clipping||this.drawingContext.beginPath(),I=0;I<G;I++)b[I].isVert?b[I].moveTo?this.drawingContext.moveTo(b[I][0],b[I][1]):this.drawingContext.lineTo(b[I][0],b[I][1]):this.drawingContext.quadraticCurveTo(b[I][0],b[I][1],b[I][2],b[I][3]);this._doFillStrokeClose(H)}else if(P===a.POINTS)for(I=0;I<G;I++)F=b[I],this._doStroke&&this._pInst.stroke(F[6]),this._pInst.point(F[0],F[1]);else if(P===a.LINES)for(I=0;I+1<G;I+=2)F=b[I],this._doStroke&&this._pInst.stroke(b[I+1][6]),this._pInst.line(F[0],F[1],b[I+1][0],b[I+1][1]);else if(P===a.TRIANGLES)for(I=0;I+2<G;I+=3)F=b[I],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(F[0],F[1]),this.drawingContext.lineTo(b[I+1][0],b[I+1][1]),this.drawingContext.lineTo(b[I+2][0],b[I+2][1]),this.drawingContext.closePath(),!this._clipping&&this._doFill&&(this._pInst.fill(b[I+2][5]),this.drawingContext.fill()),!this._clipping&&this._doStroke&&(this._pInst.stroke(b[I+2][6]),this.drawingContext.stroke());else if(P===a.TRIANGLE_STRIP)for(I=0;I+1<G;I++)F=b[I],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(b[I+1][0],b[I+1][1]),this.drawingContext.lineTo(F[0],F[1]),!this._clipping&&this._doStroke&&this._pInst.stroke(b[I+1][6]),!this._clipping&&this._doFill&&this._pInst.fill(b[I+1][5]),I+2<G&&(this.drawingContext.lineTo(b[I+2][0],b[I+2][1]),!this._clipping&&this._doStroke&&this._pInst.stroke(b[I+2][6]),!this._clipping&&this._doFill&&this._pInst.fill(b[I+2][5])),this._doFillStrokeClose(H);else if(P===a.TRIANGLE_FAN){if(2<G){for(this._clipping||this.drawingContext.beginPath(),I=2;I<G;I++)F=b[I],this.drawingContext.moveTo(b[0][0],b[0][1]),this.drawingContext.lineTo(b[I-1][0],b[I-1][1]),this.drawingContext.lineTo(F[0],F[1]),this.drawingContext.lineTo(b[0][0],b[0][1]),I<G-1&&(this._doFill&&F[5]!==b[I+1][5]||this._doStroke&&F[6]!==b[I+1][6])&&(!this._clipping&&this._doFill&&(this._pInst.fill(F[5]),this.drawingContext.fill(),this._pInst.fill(b[I+1][5])),!this._clipping&&this._doStroke&&(this._pInst.stroke(F[6]),this.drawingContext.stroke(),this._pInst.stroke(b[I+1][6])),this.drawingContext.closePath(),this._clipping||this.drawingContext.beginPath());this._doFillStrokeClose(H)}}else if(P===a.QUADS)for(I=0;I+3<G;I+=4){for(F=b[I],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(F[0],F[1]),B=1;B<4;B++)this.drawingContext.lineTo(b[I+B][0],b[I+B][1]);this.drawingContext.lineTo(F[0],F[1]),!this._clipping&&this._doFill&&this._pInst.fill(b[I+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(b[I+3][6]),this._doFillStrokeClose(H)}else if(P===a.QUAD_STRIP){if(3<G)for(I=0;I+1<G;I+=2)F=b[I],this._clipping||this.drawingContext.beginPath(),I+3<G?(this.drawingContext.moveTo(b[I+2][0],b[I+2][1]),this.drawingContext.lineTo(F[0],F[1]),this.drawingContext.lineTo(b[I+1][0],b[I+1][1]),this.drawingContext.lineTo(b[I+3][0],b[I+3][1]),!this._clipping&&this._doFill&&this._pInst.fill(b[I+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(b[I+3][6])):(this.drawingContext.moveTo(F[0],F[1]),this.drawingContext.lineTo(b[I+1][0],b[I+1][1])),this._doFillStrokeClose(H)}else{for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(b[0][0],b[0][1]),I=1;I<G;I++)(F=b[I]).isVert&&(F.moveTo?(H&&this.drawingContext.closePath(),this.drawingContext.moveTo(F[0],F[1])):this.drawingContext.lineTo(F[0],F[1]));this._doFillStrokeClose(H)}k=M=A=C=!1,H&&b.pop()}return this}},{key:"strokeCap",value:function(w){return w!==a.ROUND&&w!==a.SQUARE&&w!==a.PROJECT||(this.drawingContext.lineCap=w),this}},{key:"strokeJoin",value:function(w){return w!==a.ROUND&&w!==a.BEVEL&&w!==a.MITER||(this.drawingContext.lineJoin=w),this}},{key:"strokeWeight",value:function(w){return this.drawingContext.lineWidth=w===void 0||w===0?1e-4:w,this}},{key:"_getFill",value:function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle}},{key:"_setFill",value:function(w){w!==this._cachedFillStyle&&(this.drawingContext.fillStyle=w,this._cachedFillStyle=w)}},{key:"_getStroke",value:function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle}},{key:"_setStroke",value:function(w){w!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=w,this._cachedStrokeStyle=w)}},{key:"bezier",value:function(w,b,C,A,M,k,P,F){return this._pInst.beginShape(),this._pInst.vertex(w,b),this._pInst.bezierVertex(C,A,M,k,P,F),this._pInst.endShape(),this}},{key:"curve",value:function(w,b,C,A,M,k,P,F){return this._pInst.beginShape(),this._pInst.curveVertex(w,b),this._pInst.curveVertex(C,A),this._pInst.curveVertex(M,k),this._pInst.curveVertex(P,F),this._pInst.endShape(),this}},{key:"_doFillStrokeClose",value:function(w){w&&this.drawingContext.closePath(),!this._clipping&&this._doFill&&this.drawingContext.fill(),!this._clipping&&this._doStroke&&this.drawingContext.stroke()}},{key:"applyMatrix",value:function(w,b,C,A,M,k){this.drawingContext.transform(w,b,C,A,M,k)}},{key:"resetMatrix",value:function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this}},{key:"rotate",value:function(w){this.drawingContext.rotate(w)}},{key:"scale",value:function(w,b){return this.drawingContext.scale(w,b),this}},{key:"translate",value:function(w,b){return w instanceof s.default.Vector&&(b=w.y,w=w.x),this.drawingContext.translate(w,b),this}},{key:"_renderText",value:function(w,b,C,A,M,k){if(!(A<k||M<=A))return w.push(),this._isOpenType()?this._textFont._renderPath(b,C,A,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(b,C,A),!this._clipping&&this._doFill&&(this._fillSet||this._setFill(a._DEFAULT_TEXT_FILL),this.drawingContext.fillText(b,C,A))),w.pop(),w}},{key:"textWidth",value:function(w){return this._isOpenType()?this._textFont._textWidth(w,this._textSize):this.drawingContext.measureText(w).width}},{key:"_applyTextProperties",value:function(){var w,b=this._pInst;return this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),w=this._textFont,this._isOpenType()&&(w=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(w||"sans-serif"),this.drawingContext.textAlign=this._textAlign,this._textBaseline===a.CENTER?this.drawingContext.textBaseline=a._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,b}},{key:"push",value:function(){return this.drawingContext.save(),l(d(T.prototype),"push",this).call(this)}},{key:"pop",value:function(w){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,l(d(T.prototype),"pop",this).call(this,w)}}])&&h(v.prototype,g),T}(s.default.Renderer),m=(p.prototype.text=function(g,v,x,C,w){C!==void 0&&this.drawingContext.textBaseline===a.BASELINE&&(b=!0,this.drawingContext.textBaseline=a.TOP);var b,C=s.default.Renderer.prototype.text.apply(this,arguments);return b&&(this.drawingContext.textBaseline=a.BASELINE),C},s.default.Renderer2D=p,s.default.Renderer2D);i.default=m},{"./constants":264,"./main":275,"./p5.Renderer":278,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.slice":165,"core-js/modules/es.function.name":168,"core-js/modules/es.number.to-fixed":175,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.reflect.get":185,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],280:[function(t,r,i){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var n=(t=t("./main"))&&t.__esModule?t:{default:t};n.default.prototype._promisePreloads=[];function o(){return{}}var s=!(n.default.prototype.registerPromisePreload=function(a){n.default.prototype._promisePreloads.push(a)});n.default.prototype._setupPromisePreloads=function(){var a=!0,f=!1,h=void 0;try{for(var l,u=this._promisePreloads[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value,d=this,y=c.method,p=c.addCallbacks,m=c.legacyPreloadSetup,g=c.target||this,v=g[y].bind(g);if(g===n.default.prototype){if(s)continue;d=null,v=g[y]}g[y]=this._wrapPromisePreload(d,v,p),m&&(g[m.method]=this._legacyPreloadGenerator(d,m,g[y]))}}catch(x){f=!0,h=x}finally{try{a||u.return==null||u.return()}finally{if(f)throw h}}s=!0},n.default.prototype._wrapPromisePreload=function(a,f,h){var l=function(){for(var u=this,c=(this._incrementPreload(),null),d=null,y=arguments.length,p=new Array(y),m=0;m<y;m++)p[m]=arguments[m];if(h)for(var g=p.length-1;0<=g&&!d&&typeof p[g]=="function";g--)d=c,c=p.pop();var v=Promise.resolve(f.apply(this,p));return c&&v.then(c),d&&v.catch(d),v.then(function(){return u._decrementPreload()}),v};return l=a?l.bind(a):l},n.default.prototype._legacyPreloadGenerator=function(a,u,h){var l=u.createBaseObject||o,u=function(){var c=this;this._incrementPreload();for(var d=arguments.length,y=new Array(d),p=0;p<d;p++)y[p]=arguments[p];var m=l.apply(this,y);return h.apply(this,y).then(function(g){Object.assign(m,g),c._decrementPreload()}),m};return u=a?u.bind(a):u}},{"./main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.assign":176,"core-js/modules/es.object.to-string":182,"core-js/modules/es.promise":183,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],281:[function(t,r,i){function n(u){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(u)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=(l=t("./main"))&&l.__esModule?l:{default:l},s=function(u){if(u&&u.__esModule)return u;if(u===null||f(u)!=="object"&&typeof u!="function")return{default:u};var c=a();if(c&&c.has(u))return c.get(u);var d,y={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in u){var m;Object.prototype.hasOwnProperty.call(u,d)&&((m=p?Object.getOwnPropertyDescriptor(u,d):null)&&(m.get||m.set)?Object.defineProperty(y,d,m):y[d]=u[d])}return y.default=u,c&&c.set(u,y),y}(t("./constants"));function a(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,a=function(){return u},u)}function f(u){return(f=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(c){return n(c)}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":n(c)})(u)}t("./p5.Graphics"),t("./p5.Renderer2D"),t("../webgl/p5.RendererGL");var h="defaultCanvas0",l=(o.default.prototype.createCanvas=function(u,c,d,y){var p,m,g;if(o.default._validateParameters("createCanvas",arguments),arguments[2]instanceof HTMLCanvasElement?(d=s.P2D,y=arguments[2]):p=d||s.P2D,y)(g=document.getElementById(h))&&g.parentNode.removeChild(g),g=y,this._defaultGraphicsCreated=!1;else{if(p===s.WEBGL)(g=document.getElementById(h))&&(g.parentNode.removeChild(g),m=this._renderer,this._elements=this._elements.filter(function(x){return x!==m})),(g=document.createElement("canvas")).id=h,g.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)g=this.canvas;else{g=y||document.createElement("canvas");for(var v=0;document.getElementById("defaultCanvas".concat(v));)v++;h="defaultCanvas".concat(v),g.id=h,g.classList.add("p5Canvas")}this._setupDone||(g.dataset.hidden=!0,g.style.visibility="hidden"),(this._userNode||(document.getElementsByTagName("main").length===0&&(d=document.createElement("main"),document.body.appendChild(d)),document.getElementsByTagName("main")[0])).appendChild(g)}return p===s.WEBGL?(this._setProperty("_renderer",new o.default.RendererGL(g,this,!0)),this._elements.push(this._renderer)):this._defaultGraphicsCreated||(this._setProperty("_renderer",new o.default.Renderer2D(g,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(u,c),this._renderer._applyDefaults(),this._renderer},o.default.prototype.resizeCanvas=function(u,c,d){if(o.default._validateParameters("resizeCanvas",arguments),this._renderer){var y,p,m={};for(y in this.drawingContext){var g=this.drawingContext[y];f(g)!=="object"&&typeof g!="function"&&(m[y]=g)}for(p in this.width=u,this.height=c,this._renderer.resize(u,c),m)try{this.drawingContext[p]=m[p]}catch{}d||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},o.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},o.default.prototype.createGraphics=function(u,c){for(var d=arguments.length,y=new Array(2<d?d-2:0),p=2;p<d;p++)y[p-2]=arguments[p];return y[0]instanceof HTMLCanvasElement&&(y[1]=y[0],y[0]=s.P2D),o.default._validateParameters("createGraphics",arguments),new o.default.Graphics(u,c,y[0],this,y[1])},o.default.prototype.createFramebuffer=function(u){return new o.default.Framebuffer(this,u)},o.default.prototype.blendMode=function(u){o.default._validateParameters("blendMode",arguments),u===s.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),u=s.BLEND),this._renderer.blendMode(u)},o.default);i.default=l},{"../webgl/p5.RendererGL":332,"./constants":264,"./main":275,"./p5.Graphics":277,"./p5.Renderer2D":279,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],282:[function(t,r,i){function n(c){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(c)}function o(c){return(o=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(d){return n(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":n(d)})(c)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.slice"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=l(t("../main")),a=function(c){if(c&&c.__esModule)return c;if(c===null||o(c)!=="object"&&typeof c!="function")return{default:c};var d=h();if(d&&d.has(c))return d.get(c);var y,p={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in c){var g;Object.prototype.hasOwnProperty.call(c,y)&&((g=m?Object.getOwnPropertyDescriptor(c,y):null)&&(g.get||g.set)?Object.defineProperty(p,y,g):p[y]=c[y])}return p.default=c,d&&d.set(c,p),p}(t("../constants")),f=l(t("../helpers"));function h(){var c;return typeof WeakMap!="function"?null:(c=new WeakMap,h=function(){return c},c)}function l(c){return c&&c.__esModule?c:{default:c}}function u(c){return function(d){if(Array.isArray(d)){for(var y=0,p=new Array(d.length);y<d.length;y++)p[y]=d[y];return p}}(c)||function(d){if(Symbol.iterator in Object(d)||Object.prototype.toString.call(d)==="[object Arguments]")return Array.from(d)}(c)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t("../friendly_errors/fes_core"),t("../friendly_errors/file_errors"),t("../friendly_errors/validate_params"),s.default.prototype._normalizeArcAngles=function(c,d,y,p,m){var g;return c-=a.TWO_PI*Math.floor(c/a.TWO_PI),d-=a.TWO_PI*Math.floor(d/a.TWO_PI),g=Math.min(Math.abs(c-d),a.TWO_PI-Math.abs(c-d)),m&&(c=c<=a.HALF_PI?Math.atan(y/p*Math.tan(c)):c>a.HALF_PI&&c<=3*a.HALF_PI?Math.atan(y/p*Math.tan(c))+a.PI:Math.atan(y/p*Math.tan(c))+a.TWO_PI,d=d<=a.HALF_PI?Math.atan(y/p*Math.tan(d)):d>a.HALF_PI&&d<=3*a.HALF_PI?Math.atan(y/p*Math.tan(d))+a.PI:Math.atan(y/p*Math.tan(d))+a.TWO_PI),d<c&&(d+=a.TWO_PI),{start:c,stop:d,correspondToSamePoint:g<1e-5}},s.default.prototype.arc=function(c,d,y,p,m,g,v,x){return s.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&m!==g&&(m=this._toRadians(m),g=this._toRadians(g),y=Math.abs(y),p=Math.abs(p),c=f.default.modeAdjust(c,d,y,p,this._renderer._ellipseMode),(d=this._normalizeArcAngles(m,g,c.w,c.h,!0)).correspondToSamePoint?this._renderer.ellipse([c.x,c.y,c.w,c.h,x]):(this._renderer.arc(c.x,c.y,c.w,c.h,d.start,d.stop,v,x),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[c.x,c.y,c.w,c.h,d.start,d.stop,v]))),this},s.default.prototype.ellipse=function(c,d,y,p,m){return s.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},s.default.prototype.circle=function(){s.default._validateParameters("circle",arguments);var c=Array.prototype.slice.call(arguments,0,2);return c.push(arguments[2]),c.push(arguments[2]),this._renderEllipse.apply(this,u(c))},s.default.prototype._renderEllipse=function(c,d,y,p,m){return(this._renderer._doStroke||this._renderer._doFill)&&(y<0&&(y=Math.abs(y)),p===void 0?p=y:p<0&&(p=Math.abs(p)),c=f.default.modeAdjust(c,d,y,p,this._renderer._ellipseMode),this._renderer.ellipse([c.x,c.y,c.w,c.h,m]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[c.x,c.y,c.w,c.h])),this},s.default.prototype.line=function(){for(var c,d=arguments.length,y=new Array(d),p=0;p<d;p++)y[p]=arguments[p];return s.default._validateParameters("line",y),this._renderer._doStroke&&(c=this._renderer).line.apply(c,y),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",y),this},s.default.prototype.point=function(){for(var c,d=arguments.length,y=new Array(d),p=0;p<d;p++)y[p]=arguments[p];return s.default._validateParameters("point",y),this._renderer._doStroke&&(y.length===1&&y[0]instanceof s.default.Vector?this._renderer.point.call(this._renderer,y[0].x,y[0].y,y[0].z):((c=this._renderer).point.apply(c,y),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",y))),this},s.default.prototype.quad=function(){for(var c,d=arguments.length,y=new Array(d),p=0;p<d;p++)y[p]=arguments[p];return s.default._validateParameters("quad",y),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&y.length<12?this._renderer.quad.call(this._renderer,y[0],y[1],0,y[2],y[3],0,y[4],y[5],0,y[6],y[7],0,y[8],y[9]):((c=this._renderer).quad.apply(c,y),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",y))),this},s.default.prototype.rect=function(){for(var c=arguments.length,d=new Array(c),y=0;y<c;y++)d[y]=arguments[y];return s.default._validateParameters("rect",d),this._renderRect.apply(this,d)},s.default.prototype.square=function(c,d,y,p,m,g,v){return s.default._validateParameters("square",arguments),this._renderRect.call(this,c,d,y,y,p,m,g,v)},s.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){arguments.length===3&&(arguments[3]=arguments[2]);for(var c=f.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),d=[c.x,c.y,c.w,c.h],y=4;y<arguments.length;y++)d[y]=arguments[y];this._renderer.rect(d),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[c.x,c.y,c.w,c.h])}return this},s.default.prototype.triangle=function(){for(var c=arguments.length,d=new Array(c),y=0;y<c;y++)d[y]=arguments[y];return s.default._validateParameters("triangle",d),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(d),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",d),this},t=s.default,i.default=t},{"../constants":264,"../friendly_errors/fes_core":266,"../friendly_errors/file_errors":267,"../friendly_errors/validate_params":270,"../helpers":271,"../main":275,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],283:[function(t,r,i){function n(l){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(l)}function o(l){return(o=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(u){return n(u)}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":n(u)})(l)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(h=t("../main"))&&h.__esModule?h:{default:h},a=function(l){if(l&&l.__esModule)return l;if(l===null||o(l)!=="object"&&typeof l!="function")return{default:l};var u=f();if(u&&u.has(l))return u.get(l);var c,d={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in l){var p;Object.prototype.hasOwnProperty.call(l,c)&&((p=y?Object.getOwnPropertyDescriptor(l,c):null)&&(p.get||p.set)?Object.defineProperty(d,c,p):d[c]=l[c])}return d.default=l,u&&u.set(l,d),d}(t("../constants"));function f(){var l;return typeof WeakMap!="function"?null:(l=new WeakMap,f=function(){return l},l)}s.default.prototype.ellipseMode=function(l){return s.default._validateParameters("ellipseMode",arguments),l!==a.CORNER&&l!==a.CORNERS&&l!==a.RADIUS&&l!==a.CENTER||(this._renderer._ellipseMode=l),this},s.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},s.default.prototype.rectMode=function(l){return s.default._validateParameters("rectMode",arguments),l!==a.CORNER&&l!==a.CORNERS&&l!==a.RADIUS&&l!==a.CENTER||(this._renderer._rectMode=l),this},s.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},s.default.prototype.strokeCap=function(l){return s.default._validateParameters("strokeCap",arguments),l!==a.ROUND&&l!==a.SQUARE&&l!==a.PROJECT||this._renderer.strokeCap(l),this},s.default.prototype.strokeJoin=function(l){return s.default._validateParameters("strokeJoin",arguments),l!==a.ROUND&&l!==a.BEVEL&&l!==a.MITER||this._renderer.strokeJoin(l),this},s.default.prototype.strokeWeight=function(l){return s.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(l),this};var h=s.default;i.default=h},{"../constants":264,"../main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],284:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=(o=t("../main"))&&o.__esModule?o:{default:o};t("../friendly_errors/fes_core"),t("../friendly_errors/file_errors"),t("../friendly_errors/validate_params"),n.default.prototype.bezier=function(){for(var s,a=arguments.length,f=new Array(a),h=0;h<a;h++)f[h]=arguments[h];return n.default._validateParameters("bezier",f),(this._renderer._doStroke||this._renderer._doFill)&&(s=this._renderer).bezier.apply(s,f),this},n.default.prototype.bezierDetail=function(s){return n.default._validateParameters("bezierDetail",arguments),this._bezierDetail=s,this},n.default.prototype.bezierPoint=function(s,a,f,h,l){n.default._validateParameters("bezierPoint",arguments);var u=1-l;return Math.pow(u,3)*s+3*Math.pow(u,2)*l*a+3*u*Math.pow(l,2)*f+Math.pow(l,3)*h},n.default.prototype.bezierTangent=function(s,a,f,h,l){n.default._validateParameters("bezierTangent",arguments);var u=1-l;return 3*h*Math.pow(l,2)-3*f*Math.pow(l,2)+6*f*u*l-6*a*u*l+3*a*Math.pow(u,2)-3*s*Math.pow(u,2)},n.default.prototype.curve=function(){for(var s,a=arguments.length,f=new Array(a),h=0;h<a;h++)f[h]=arguments[h];return n.default._validateParameters("curve",f),this._renderer._doStroke&&(s=this._renderer).curve.apply(s,f),this},n.default.prototype.curveDetail=function(s){return n.default._validateParameters("curveDetail",arguments),this._curveDetail=s<3?3:s,this},n.default.prototype.curveTightness=function(s){return n.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=s,this},n.default.prototype.curvePoint=function(s,a,f,h,l){n.default._validateParameters("curvePoint",arguments);var u=this._renderer._curveTightness,c=l*l*l,d=l*l;return s*((u-1)/2*c+(1-u)*d+(u-1)/2*l)+a*((u+3)/2*c+(-5-u)/2*d+1)+f*((-3-u)/2*c+(u+2)*d+(1-u)/2*l)+h*((1-u)/2*c+(u-1)/2*d)},n.default.prototype.curveTangent=function(s,a,f,h,d){n.default._validateParameters("curveTangent",arguments);var u=this._renderer._curveTightness,c=d*d*3,d=2*d;return s*((u-1)/2*c+(1-u)*d+(u-1)/2)+a*((u+3)/2*c+(-5-u)/2*d)+f*((-3-u)/2*c+(u+2)*d+(1-u)/2)+h*((1-u)/2*c+(u-1)/2*d)};var o=n.default;i.default=o},{"../friendly_errors/fes_core":266,"../friendly_errors/file_errors":267,"../friendly_errors/validate_params":270,"../main":275}],285:[function(t,r,i){function n(v){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(v)}function o(v){return(o=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(x){return n(x)}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":n(x)})(v)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.slice"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(g=t("../main"))&&g.__esModule?g:{default:g},a=function(v){if(v&&v.__esModule)return v;if(v===null||o(v)!=="object"&&typeof v!="function")return{default:v};var x=f();if(x&&x.has(v))return x.get(v);var T,w={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(T in v){var C;Object.prototype.hasOwnProperty.call(v,T)&&((C=b?Object.getOwnPropertyDescriptor(v,T):null)&&(C.get||C.set)?Object.defineProperty(w,T,C):w[T]=v[T])}return w.default=v,x&&x.set(v,w),w}(t("../constants"));function f(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,f=function(){return v},v)}var h=null,l=[],u=[],c=!1,d=!1,y=!1,p=!1,m=!0,g=(s.default.prototype.beginContour=function(){return this._renderer.isP3D?this._renderer.beginContour():(u=[],p=!0),this},s.default.prototype.beginShape=function(v){var x;return s.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(x=this._renderer).beginShape.apply(x,arguments):(h=v===a.POINTS||v===a.LINES||v===a.TRIANGLES||v===a.TRIANGLE_FAN||v===a.TRIANGLE_STRIP||v===a.QUADS||v===a.QUAD_STRIP?v:null,l=[],u=[]),this},s.default.prototype.bezierVertex=function(){for(var v,x=arguments.length,T=new Array(x),w=0;w<x;w++)T[w]=arguments[w];if(s.default._validateParameters("bezierVertex",T),this._renderer.isP3D)(v=this._renderer).bezierVertex.apply(v,T);else if(l.length===0)s.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{c=!0;for(var b=[],C=0;C<T.length;C++)b[C]=T[C];b.isVert=!1,(p?u:l).push(b)}return this},s.default.prototype.curveVertex=function(){for(var v,x=arguments.length,T=new Array(x),w=0;w<x;w++)T[w]=arguments[w];return s.default._validateParameters("curveVertex",T),this._renderer.isP3D?(v=this._renderer).curveVertex.apply(v,T):(d=!0,this.vertex(T[0],T[1])),this},s.default.prototype.endContour=function(){if(!this._renderer.isP3D){var v=u[0].slice();v.isVert=u[0].isVert,v.moveTo=!1,u.push(v),m&&(l.push(l[0]),m=!1);for(var x=0;x<u.length;x++)l.push(u[x])}return this},s.default.prototype.endShape=function(v){var x=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(s.default._validateParameters("endShape",arguments),x<1&&(console.log("ð¸ p5.js says: You can not have less than one instance"),x=1),this._renderer.isP3D)this._renderer.endShape(v,d,c,y,p,h,x);else{if(x!==1&&console.log("ð¸ p5.js says: Instancing is only supported in WebGL2 mode"),l.length===0)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;x=v===a.CLOSE,x&&!p&&l.push(l[0]),this._renderer.endShape(v,l,d,c,y,p,h),m=!(p=y=c=d=!1),x&&l.pop()}return this},s.default.prototype.quadraticVertex=function(){for(var v,x=arguments.length,T=new Array(x),w=0;w<x;w++)T[w]=arguments[w];if(s.default._validateParameters("quadraticVertex",T),this._renderer.isP3D)(v=this._renderer).quadraticVertex.apply(v,T);else{if(this._contourInited)return(v={}).x=T[0],v.y=T[1],v.x3=T[2],v.y3=T[3],v.type=a.QUADRATIC,this._contourVertices.push(v),this;if(0<l.length){y=!0;for(var b=[],C=0;C<T.length;C++)b[C]=T[C];b.isVert=!1,(p?u:l).push(b)}else s.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},s.default.prototype.vertex=function(v,x,T,w,b){var C;return this._renderer.isP3D?(C=this._renderer).vertex.apply(C,arguments):((C=[]).isVert=!0,C[0]=v,C[1]=x,C[2]=0,C[3]=0,C[4]=0,C[5]=this._renderer._getFill(),C[6]=this._renderer._getStroke(),T&&(C.moveTo=T),(p?(u.length===0&&(C.moveTo=!0),u):l).push(C)),this},s.default.prototype.normal=function(v,x,T){var w;return this._assert3d("normal"),s.default._validateParameters("normal",arguments),(w=this._renderer).normal.apply(w,arguments),this},s.default);i.default=g},{"../constants":264,"../main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],286:[function(t,r,i){function n(l){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(l)}function o(l){return function(u){if(Array.isArray(u)){for(var c=0,d=new Array(u.length);c<u.length;c++)d[c]=u[c];return d}}(l)||function(u){if(Symbol.iterator in Object(u)||Object.prototype.toString.call(u)==="[object Arguments]")return Array.from(u)}(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(l){return(s=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(u){return n(u)}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":n(u)})(l)}var a,f,h;t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(l,u){window.setTimeout(l,1e3/60)},typeof Uint8ClampedArray>"u"||Uint8ClampedArray.prototype.slice||Object.defineProperty(Uint8ClampedArray.prototype,"slice",{value:Array.prototype.slice,writable:!0,configurable:!0,enumerable:!1}),Object.assign||(a=Object.keys,t=Object.defineProperty,f=typeof Symbol=="function"&&s(Symbol())==="symbol",h=Object.prototype.propertyIsEnumerable,t(Object,"assign",{value:function(l,u){if(l==null)throw new TypeError("target must be an object");for(var c,d=Object(l),y=1;y<arguments.length;++y){var p=Object(arguments[y]),m=a(p);for(f&&Object.getOwnPropertySymbols&&m.push.apply(m,o(Object.getOwnPropertySymbols(p).filter(function(g){return function(v){return h.call(g,v)}}(p)))),c=0;c<m.length;++c)d[m[c]]=p[m[c]]}return d},configurable:!0,enumerable:!1,writable:!0}))},{"core-js/modules/es.array.filter":155,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.assign":176,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint8-clamped-array":235,"core-js/modules/web.dom-collections.iterator":238}],287:[function(t,r,i){t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.assign"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,t=(t=t("./main"))&&t.__esModule?t:{default:t},t.default.prototype.noLoop=function(){this._loop=!1},t.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},t.default.prototype.isLooping=function(){return this._loop},t.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},t.default.prototype.pop=function(){var n=this._styles.pop();n?(this._renderer.pop(n.renderer),Object.assign(this,n.props)):console.warn("pop() was called without matching push()")},t.default.prototype.redraw=function(n){if(!this._inUserDraw&&this._setupDone){var o=parseInt(n),s=((isNaN(o)||o<1)&&(o=1),this._isGlobal?window:this);if(typeof s.draw=="function"){s.setup===void 0&&s.scale(s._pixelDensity,s._pixelDensity);for(var a=0;a<o;a++){s.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),s._renderer.isP3D&&s._renderer._update(),s._setProperty("frameCount",s.frameCount+1),this.callRegisteredHooksFor("pre"),this._inUserDraw=!0;try{s.draw()}finally{this._inUserDraw=!1}this.callRegisteredHooksFor("post")}}}},t=t.default,i.default=t},{"./main":275,"core-js/modules/es.object.assign":176}],288:[function(t,r,i){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=(t=t("./main"))&&t.__esModule?t:{default:t};function o(s){return function(a){if(Array.isArray(a)){for(var f=0,h=new Array(a.length);f<a.length;f++)h[f]=a[f];return h}}(s)||function(a){if(Symbol.iterator in Object(a)||Object.prototype.toString.call(a)==="[object Arguments]")return Array.from(a)}(s)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.default.prototype.applyMatrix=function(){var s=(arguments.length<=0?void 0:arguments[0])instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments.length<=0?void 0:arguments[0])||s?(s=this._renderer).applyMatrix.apply(s,o(arguments.length<=0?void 0:arguments[0])):(s=this._renderer).applyMatrix.apply(s,arguments),this},n.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},n.default.prototype.rotate=function(s,a){return n.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(s),a),this},n.default.prototype.rotateX=function(s){return this._assert3d("rotateX"),n.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(s)),this},n.default.prototype.rotateY=function(s){return this._assert3d("rotateY"),n.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(s)),this},n.default.prototype.rotateZ=function(s){return this._assert3d("rotateZ"),n.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(s)),this},n.default.prototype.scale=function(s,a,f){var h;return n.default._validateParameters("scale",arguments),s instanceof n.default.Vector?(s=(h=s).x,a=h.y,f=h.z):s instanceof Array&&(s=(h=s)[0],a=h[1],f=h[2]||1),isNaN(a)?a=f=s:isNaN(f)&&(f=1),this._renderer.scale.call(this._renderer,s,a,f),this},n.default.prototype.shearX=function(s){return n.default._validateParameters("shearX",arguments),s=this._toRadians(s),this._renderer.applyMatrix(1,0,Math.tan(s),1,0,0),this},n.default.prototype.shearY=function(s){return n.default._validateParameters("shearY",arguments),s=this._toRadians(s),this._renderer.applyMatrix(1,Math.tan(s),0,1,0,0),this},n.default.prototype.translate=function(s,a,f){return n.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(s,a,f):this._renderer.translate(s,a),this},t=n.default,i.default=t},{"./main":275,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint8-array":234,"core-js/modules/web.dom-collections.iterator":238}],289:[function(t,r,i){function n(f){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(f)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var o=(t=t("../core/main"))&&t.__esModule?t:{default:t};function s(f){return function(h){if(Array.isArray(h)){for(var l=0,u=new Array(h.length);l<h.length;l++)u[l]=h[l];return u}}(f)||function(h){if(Symbol.iterator in Object(h)||Object.prototype.toString.call(h)==="[object Arguments]")return Array.from(h)}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(f){return(a=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(h){return n(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":n(h)})(f)}o.default.prototype.storeItem=function(f,h){typeof f!="string"&&console.log("The argument that you passed to storeItem() - ".concat(f," is not a string.")),f.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(f," must not end with 'p5TypeID'.")),h===void 0&&console.log("You cannot store undefined variables using storeItem().");var l=a(h);switch(l){case"number":case"boolean":h=h.toString();break;case"object":h instanceof o.default.Color?l="p5.Color":h instanceof o.default.Vector&&(l="p5.Vector",h=[h.x,h.y,h.z]),h=JSON.stringify(h)}localStorage.setItem(f,h),f="".concat(f,"p5TypeID"),localStorage.setItem(f,l)},o.default.prototype.getItem=function(f){var h=localStorage.getItem(f),l=localStorage.getItem("".concat(f,"p5TypeID"));if(l===void 0)console.log("Unable to determine type of item stored under ".concat(f,"in local storage. Did you save the item with something other than setItem()?"));else if(h!==null)switch(l){case"number":h=parseFloat(h);break;case"boolean":h=h==="true";break;case"object":h=JSON.parse(h);break;case"p5.Color":h=JSON.parse(h),h=this.color.apply(this,s(h.levels));break;case"p5.Vector":h=JSON.parse(h),h=this.createVector.apply(this,s(h))}return h},o.default.prototype.clearStorage=function(){localStorage.clear()},o.default.prototype.removeItem=function(f){typeof f!="string"&&console.log("The argument that you passed to removeItem() - ".concat(f," is not a string.")),localStorage.removeItem(f),localStorage.removeItem("".concat(f,"p5TypeID"))}},{"../core/main":275,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.ends-with":190,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],290:[function(t,r,i){function n(y){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(y)}function o(y){return(o=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(p){return n(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":n(p)})(y)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.object.keys"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(t=t("../core/main"))&&t.__esModule?t:{default:t};function a(y,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(p&&p.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),p&&f(y,p)}function f(y,p){return(f=Object.setPrototypeOf||function(m,g){return m.__proto__=g,m})(y,p)}function h(y){return function(){var p,m=l(y),m=(p=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(p=l(this).constructor,Reflect.construct(m,arguments,p)):m.apply(this,arguments),this);if(!p||o(p)!=="object"&&typeof p!="function"){if(m!==void 0)return m;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return p}}function l(y){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(p){return p.__proto__||Object.getPrototypeOf(p)})(y)}function u(y,p){if(!(y instanceof p))throw new TypeError("Cannot call a class as a function")}function c(y,p){for(var m=0;m<p.length;m++){var g=p[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(y,g.key,g)}}function d(y,p,m){p&&c(y.prototype,p),m&&c(y,m)}s.default.prototype.createStringDict=function(y,p){return s.default._validateParameters("createStringDict",arguments),new s.default.StringDict(y,p)},s.default.prototype.createNumberDict=function(y,p){return s.default._validateParameters("createNumberDict",arguments),new s.default.NumberDict(y,p)},s.default.TypedDict=function(){function y(p,m){return u(this,y),p instanceof Object?this.data=p:(this.data={},this.data[p]=m),this}return d(y,[{key:"size",value:function(){return Object.keys(this.data).length}},{key:"hasKey",value:function(p){return this.data.hasOwnProperty(p)}},{key:"get",value:function(p){if(this.data.hasOwnProperty(p))return this.data[p];console.log("".concat(p," does not exist in this Dictionary"))}},{key:"set",value:function(p,m){this._validate(m)?this.data[p]=m:console.log("Those values dont work for this dictionary type.")}},{key:"_addObj",value:function(p){for(var m in p)this.set(m,p[m])}},{key:"create",value:function(p,m){p instanceof Object&&m===void 0?this._addObj(p):p!==void 0?this.set(p,m):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")}},{key:"clear",value:function(){this.data={}}},{key:"remove",value:function(p){if(!this.data.hasOwnProperty(p))throw new Error("".concat(p," does not exist in this Dictionary"));delete this.data[p]}},{key:"print",value:function(){for(var p in this.data)console.log("key:".concat(p," value:").concat(this.data[p]))}},{key:"saveTable",value:function(p){var m,g="";for(m in this.data)g+="".concat(m,",").concat(this.data[m],`
`);var v=new Blob([g],{type:"text/csv"});s.default.prototype.downloadFile(v,p||"mycsv","csv")}},{key:"saveJSON",value:function(p,m){s.default.prototype.saveJSON(this.data,p,m)}},{key:"_validate",value:function(p){return!0}}]),y}(),s.default.StringDict=function(){a(p,s.default.TypedDict);var y=h(p);function p(){u(this,p);for(var m=arguments.length,g=new Array(m),v=0;v<m;v++)g[v]=arguments[v];return y.call.apply(y,[this].concat(g))}return d(p,[{key:"_validate",value:function(m){return typeof m=="string"}}]),p}(),s.default.NumberDict=function(){a(p,s.default.TypedDict);var y=h(p);function p(){u(this,p);for(var m=arguments.length,g=new Array(m),v=0;v<m;v++)g[v]=arguments[v];return y.call.apply(y,[this].concat(g))}return d(p,[{key:"_validate",value:function(m){return typeof m=="number"}},{key:"add",value:function(m,g){this.data.hasOwnProperty(m)?this.data[m]+=g:console.log("The key - ".concat(m," does not exist in this dictionary."))}},{key:"sub",value:function(m,g){this.add(m,-g)}},{key:"mult",value:function(m,g){this.data.hasOwnProperty(m)?this.data[m]*=g:console.log("The key - ".concat(m," does not exist in this dictionary."))}},{key:"div",value:function(m,g){this.data.hasOwnProperty(m)?this.data[m]/=g:console.log("The key - ".concat(m," does not exist in this dictionary."))}},{key:"_valueTest",value:function(m){if(Object.keys(this.data).length===0)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(Object.keys(this.data).length===1)return this.data[Object.keys(this.data)[0]];var g,v=this.data[Object.keys(this.data)[0]];for(g in this.data)this.data[g]*m<v*m&&(v=this.data[g]);return v}},{key:"minValue",value:function(){return this._valueTest(1)}},{key:"maxValue",value:function(){return this._valueTest(-1)}},{key:"_keyTest",value:function(m){if(Object.keys(this.data).length===0)throw new Error("Unable to use minValue on an empty NumberDict");if(Object.keys(this.data).length===1)return Object.keys(this.data)[0];for(var g=Object.keys(this.data)[0],v=1;v<Object.keys(this.data).length;v++)Object.keys(this.data)[v]*m<g*m&&(g=Object.keys(this.data)[v]);return g}},{key:"minKey",value:function(){return this._keyTest(1)}},{key:"maxKey",value:function(){return this._keyTest(-1)}}]),p}(),t=s.default.TypedDict,i.default=t},{"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],291:[function(t,r,i){function n(g){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(g)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t};function s(g,v){for(var x=0;x<v.length;x++){var T=v[x];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(g,T.key,T)}}function a(g,v,x){v&&s(g.prototype,v),x&&s(g,x)}function f(g,v){return(f=Object.setPrototypeOf||function(x,T){return x.__proto__=T,x})(g,v)}function h(g){return function(){var v,x,T=u(g);return v=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(v=u(this).constructor,Reflect.construct(T,arguments,v)):T.apply(this,arguments),T=this,!(x=v)||d(x)!=="object"&&typeof x!="function"?l(T):x}}function l(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function u(g){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)})(g)}function c(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}function d(g){return(d=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(v){return n(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":n(v)})(g)}function y(g,v,x){return(v._userNode||document.body).appendChild(g),x=new(x?o.default.MediaElement:o.default.Element)(g,v),v._elements.push(x),x}function p(g,C,x,T){var w=document.createElement(C),b=(typeof(x=x||"")=="string"&&(x=[x]),!0),C=!1,A=void 0;try{for(var M,k=x[Symbol.iterator]();!(b=(M=k.next()).done);b=!0){var P=M.value,F=document.createElement("source");F.setAttribute("src",P),w.appendChild(F)}}catch(B){C=!0,A=B}finally{try{b||k.return==null||k.return()}finally{if(C)throw A}}typeof T=="function"&&w.addEventListener("canplaythrough",function B(){T(),w.removeEventListener("canplaythrough",B)});var I=y(w,g,!0);return I.loadedmetadata=!1,w.addEventListener("loadedmetadata",function(){I.width=w.videoWidth,I.height=w.videoHeight,I.elt.width===0&&(I.elt.width=w.videoWidth),I.elt.height===0&&(I.elt.height=w.videoHeight),I.presetPlaybackRate&&(I.elt.playbackRate=I.presetPlaybackRate,delete I.presetPlaybackRate),I.loadedmetadata=!0}),I}o.default.prototype.select=function(g,v){return o.default._validateParameters("select",arguments),v=this._getContainer(v).querySelector(g),v?this._wrapElement(v):null},o.default.prototype.selectAll=function(g,v){o.default._validateParameters("selectAll",arguments);var x=[],T=this._getContainer(v).querySelectorAll(g);if(T)for(var w=0;w<T.length;w++){var b=this._wrapElement(T[w]);x.push(b)}return x},o.default.prototype._getContainer=function(g){var v=document;return typeof g=="string"?v=document.querySelector(g)||document:g instanceof o.default.Element?v=g.elt:g instanceof HTMLElement&&(v=g),v},o.default.prototype._wrapElement=function(g){var v,x=Array.prototype.slice.call(g.children);return g.tagName==="INPUT"&&g.type==="checkbox"?((v=new o.default.Element(g,this)).checked=function(){return arguments.length===0?this.elt.checked:(this.elt.checked=!(arguments.length<=0||!arguments[0]),this)},v):g.tagName==="VIDEO"||g.tagName==="AUDIO"?new o.default.MediaElement(g,this):g.tagName==="SELECT"?this.createSelect(new o.default.Element(g,this)):0<x.length&&x.every(function(T){return T.tagName==="INPUT"||T.tagName==="LABEL"})?this.createRadio(new o.default.Element(g,this)):new o.default.Element(g,this)},o.default.prototype.removeElements=function(g){o.default._validateParameters("removeElements",arguments),this._elements.filter(function(v){return!(v.elt instanceof HTMLCanvasElement)}).map(function(v){return v.remove()})},o.default.Element.prototype.changed=function(g){return o.default.Element._adjustListener("change",g,this),this},o.default.Element.prototype.input=function(g){return o.default.Element._adjustListener("input",g,this),this},o.default.prototype.createDiv=function(){var g=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",v=document.createElement("div");return v.innerHTML=g,y(v,this)},o.default.prototype.createP=function(){var g=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",v=document.createElement("p");return v.innerHTML=g,y(v,this)},o.default.prototype.createSpan=function(){var g=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",v=document.createElement("span");return v.innerHTML=g,y(v,this)},o.default.prototype.createImg=function(){o.default._validateParameters("createImg",arguments);var g,v=document.createElement("img"),x=arguments;return 1<x.length&&typeof x[1]=="string"&&(v.alt=x[1]),2<x.length&&typeof x[2]=="string"&&(v.crossOrigin=x[2]),v.src=x[0],g=y(v,this),v.addEventListener("load",function(){g.width=v.offsetWidth||v.width,g.height=v.offsetHeight||v.height;var T=x[x.length-1];typeof T=="function"&&T(g)}),g},o.default.prototype.createA=function(g,v,x){o.default._validateParameters("createA",arguments);var T=document.createElement("a");return T.href=g,T.innerHTML=v,x&&(T.target=x),y(T,this)},o.default.prototype.createSlider=function(g,v,x,T){o.default._validateParameters("createSlider",arguments);var w=document.createElement("input");return w.type="range",w.min=g,w.max=v,T===0?w.step=1e-18:T&&(w.step=T),typeof x=="number"&&(w.value=x),y(w,this)},o.default.prototype.createButton=function(g,v){o.default._validateParameters("createButton",arguments);var x=document.createElement("button");return x.innerHTML=g,v&&(x.value=v),y(x,this)},o.default.prototype.createCheckbox=function(){for(var g=arguments.length,v=new Array(g),x=0;x<g;x++)v[x]=arguments[x];o.default._validateParameters("createCheckbox",v);var T=document.createElement("div"),w=document.createElement("input"),b=(w.type="checkbox",document.createElement("label")),C=(b.appendChild(w),T.appendChild(b),y(T,this));return C.checked=function(){var A=C.elt.firstElementChild.getElementsByTagName("input")[0];if(A){if(arguments.length===0)return A.checked;A.checked=!(arguments.length<=0||!arguments[0])}return C},this.value=function(A){return C.value=A,this},v[0]&&(C.value(v[0]),(T=document.createElement("span")).innerHTML=v[0],b.appendChild(T)),v[1]&&(w.checked=!0),C},o.default.prototype.createSelect=function(){for(var g,v=arguments.length,x=new Array(v),T=0;T<v;T++)x[T]=arguments[T];o.default._validateParameters("createSelect",x);var w,b=x[0];return b instanceof o.default.Element&&b.elt instanceof HTMLSelectElement?this.elt=(g=b).elt:b instanceof HTMLSelectElement?(g=y(b,this),this.elt=b):(w=document.createElement("select"),b&&typeof b=="boolean"&&w.setAttribute("multiple","true"),g=y(w,this),this.elt=w),g.option=function(C,A){var M;if(C!==void 0){for(var k,P=0;P<this.elt.length;P+=1)if(this.elt[P].textContent===C){M=P;break}M!==void 0?A===!1?this.elt.remove(M):this.elt[M].value=A:((k=document.createElement("option")).textContent=C,k.value=A===void 0?C:A,this.elt.appendChild(k),this._pInst._elements.push(k))}},g.selected=function(C){if(C!==void 0){for(var A=0;A<this.elt.length;A+=1)this.elt[A].value.toString()===C.toString()&&(this.elt.selectedIndex=A);return this}if(this.elt.getAttribute("multiple")){var M=[],k=!0,P=!1,F=void 0;try{for(var I,B=this.elt.selectedOptions[Symbol.iterator]();!(k=(I=B.next()).done);k=!0){var H=I.value;M.push(H.value)}}catch(G){P=!0,F=G}finally{try{k||B.return==null||B.return()}finally{if(P)throw F}}return M}return this.elt.value},g.disable=function(C){if(typeof C=="string")for(var A=0;A<this.elt.length;A++)this.elt[A].value.toString()===C&&(this.elt[A].disabled=!0,this.elt[A].selected=!1);else this.elt.disabled=!0;return this},g.enable=function(C){if(typeof C=="string")for(var A=0;A<this.elt.length;A++)this.elt[A].value.toString()===C&&(this.elt[A].disabled=!1,this.elt[A].selected=!1);else{this.elt.disabled=!1;for(var M=0;M<this.elt.length;M++)this.elt[M].disabled=!1,this.elt[M].selected=!1}return this},g},o.default.prototype.createRadio=function(){function g(C){return C instanceof HTMLInputElement&&C.type==="radio"}function v(C){return C instanceof HTMLLabelElement}var x,T,w,b=arguments.length<=0?void 0:arguments[0];return b instanceof o.default.Element&&(b.elt instanceof HTMLDivElement||b.elt instanceof HTMLSpanElement)?(x=b,this.elt=b.elt):b instanceof HTMLDivElement||b instanceof HTMLSpanElement?(x=y(b,this),T=this.elt=b,typeof(arguments.length<=1?void 0:arguments[1])=="string"&&(w=arguments.length<=1?void 0:arguments[1])):(typeof b=="string"&&(w=b),T=document.createElement("div"),x=y(T,this),this.elt=T),x._name=w||"radioOption",x._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(C){return g(C)||v(C)&&g(C.firstElementChild)}).map(function(C){return g(C)?C:C.firstElementChild})},x.option=function(C,A){var M,k,P,F=!0,I=!1,B=void 0;try{for(var H,G=x._getOptionsArray()[Symbol.iterator]();!(F=(H=G.next()).done);F=!0){var W=H.value;if(W.value===C){M=W;break}}}catch(Q){I=!0,B=Q}finally{try{F||G.return==null||G.return()}finally{if(I)throw B}}return M===void 0&&((M=document.createElement("input")).setAttribute("type","radio"),M.setAttribute("value",C)),M.setAttribute("name",x._name),v(M.parentElement)?k=M.parentElement:(k=document.createElement("label")).insertAdjacentElement("afterbegin",M),k.lastElementChild instanceof HTMLSpanElement?P=k.lastElementChild:(P=document.createElement("span"),M.insertAdjacentElement("afterend",P)),P.innerHTML=A===void 0?C:A,this.elt.appendChild(k),M},x.remove=function(C){var A=!0,M=!1,k=void 0;try{for(var P,F=x._getOptionsArray()[Symbol.iterator]();!(A=(P=F.next()).done);A=!0){var I=P.value;if(I.value===C)return void(v(I.parentElement)?I.parentElement:I).remove()}}catch(B){M=!0,k=B}finally{try{A||F.return==null||F.return()}finally{if(M)throw k}}},x.value=function(){var C="",A=!0,M=!1,k=void 0;try{for(var P,F=x._getOptionsArray()[Symbol.iterator]();!(A=(P=F.next()).done);A=!0){var I=P.value;if(I.checked){C=I.value;break}}}catch(B){M=!0,k=B}finally{try{A||F.return==null||F.return()}finally{if(M)throw k}}return C},x.selected=function(C){var A=null;if(C===void 0){var M=!0,k=!1,P=void 0;try{for(var F,I=x._getOptionsArray()[Symbol.iterator]();!(M=(F=I.next()).done);M=!0){var B=F.value;if(B.checked){A=B;break}}}catch(ne){k=!0,P=ne}finally{try{M||I.return==null||I.return()}finally{if(k)throw P}}}else{x._getOptionsArray().forEach(function(D){D.checked=!1,D.removeAttribute("checked")});var H=!0,k=!1,P=void 0;try{for(var G,W=x._getOptionsArray()[Symbol.iterator]();!(H=(G=W.next()).done);H=!0){var Q=G.value;Q.value===C&&(Q.setAttribute("checked",!0),Q.checked=!0,A=Q)}}catch(D){k=!0,P=D}finally{try{H||W.return==null||W.return()}finally{if(k)throw P}}}return A},x.disable=function(){var C=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],A=!0,M=!1,k=void 0;try{for(var P,F=x._getOptionsArray()[Symbol.iterator]();!(A=(P=F.next()).done);A=!0)P.value.setAttribute("disabled",C)}catch(I){M=!0,k=I}finally{try{A||F.return==null||F.return()}finally{if(M)throw k}}},x},o.default.prototype.createColorPicker=function(g){o.default._validateParameters("createColorPicker",arguments);var v=document.createElement("input");return v.type="color",g?g instanceof o.default.Color?v.value=g.toString("#rrggbb"):(o.default.prototype._colorMode="rgb",o.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},v.value=o.default.prototype.color(g).toString("#rrggbb")):v.value="#000000",(v=y(v,this)).color=function(){return g&&(g.mode&&(o.default.prototype._colorMode=g.mode),g.maxes&&(o.default.prototype._colorMaxes=g.maxes)),o.default.prototype.color(this.elt.value)},v},o.default.prototype.createInput=function(){var g=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",v=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text",x=(o.default._validateParameters("createInput",arguments),document.createElement("input"));return x.setAttribute("value",g),x.setAttribute("type",v),y(x,this)},o.default.prototype.createFileInput=function(g){var v,x=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(o.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(v=document.createElement("input")).setAttribute("type","file"),x&&v.setAttribute("multiple",!0),v.addEventListener("change",function(T){var w=!0,b=!1,C=void 0;try{for(var A,M=T.target.files[Symbol.iterator]();!(w=(A=M.next()).done);w=!0){var k=A.value;o.default.File._load(k,g)}}catch(P){b=!0,C=P}finally{try{w||M.return==null||M.return()}finally{if(b)throw C}}},!1),y(v,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},o.default.prototype.createVideo=function(g,v){return o.default._validateParameters("createVideo",arguments),p(this,"video",g,v)},o.default.prototype.createAudio=function(g,v){return o.default._validateParameters("createAudio",arguments),p(this,"audio",g,v)},o.default.prototype.VIDEO="video",o.default.prototype.AUDIO="audio",navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(g){var v=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return v?new Promise(function(x,T){v.call(navigator,g,x,T)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),o.default.prototype.createCapture=function(){for(var g=arguments.length,v=new Array(g),x=0;x<g;x++)v[x]=arguments[x];if(o.default._validateParameters("createCapture",v),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");for(var T,w=!0,b=!0,C=0,A=v;C<A.length;C++){var M=A[C];M===o.default.prototype.VIDEO?b=!1:M===o.default.prototype.AUDIO?w=!1:d(M)==="object"?k=M:typeof M=="function"&&(T=M)}var k=k||{video:w,audio:b},P=document.createElement("video"),F=(P.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(k).then(function(I){try{"srcObject"in P?P.srcObject=I:P.src=window.URL.createObjectURL(I)}catch{P.src=I}},console.log),y(P,this,!0));return F.loadedmetadata=!1,P.addEventListener("loadedmetadata",function(){P.play(),P.width?(F.width=P.width,F.height=P.height):(F.width=F.elt.width=P.videoWidth,F.height=F.elt.height=P.videoHeight),F.loadedmetadata=!0,T&&T(P.srcObject)}),F},o.default.prototype.createElement=function(g,v){return o.default._validateParameters("createElement",arguments),g=document.createElement(g),v!==void 0&&(g.innerHTML=v),y(g,this)},o.default.Element.prototype.addClass=function(g){return this.elt.className?this.hasClass(g)||(this.elt.className=this.elt.className+" "+g):this.elt.className=g,this},o.default.Element.prototype.removeClass=function(g){return this.elt.classList.remove(g),this},o.default.Element.prototype.hasClass=function(g){return this.elt.classList.contains(g)},o.default.Element.prototype.toggleClass=function(g){return this.elt.classList.contains(g)?this.elt.classList.remove(g):this.elt.classList.add(g),this},o.default.Element.prototype.child=function(g){return g===void 0?this.elt.childNodes:(typeof g=="string"?(g[0]==="#"&&(g=g.substring(1)),g=document.getElementById(g)):g instanceof o.default.Element&&(g=g.elt),g instanceof HTMLElement&&this.elt.appendChild(g),this)},o.default.Element.prototype.center=function(g){var v=this.elt.style.display,x=this.elt.style.display==="none",T=this.parent().style.display==="none",w={x:this.elt.offsetLeft,y:this.elt.offsetTop},b=(x&&this.show(),T&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),C=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return g==="both"||g===void 0?this.position(b/2+this.parent().offsetLeft,C/2+this.parent().offsetTop):g==="horizontal"?this.position(b/2+this.parent().offsetLeft,w.y):g==="vertical"&&this.position(w.x,C/2+this.parent().offsetTop),this.style("display",v),x&&this.hide(),T&&this.parent().hide(),this},o.default.Element.prototype.html=function(){return arguments.length===0?this.elt.innerHTML:(arguments.length<=1||!arguments[1]?this.elt.innerHTML=arguments.length<=0?void 0:arguments[0]:this.elt.insertAdjacentHTML("beforeend",arguments.length<=0?void 0:arguments[0]),this)},o.default.Element.prototype.position=function(){return arguments.length===0?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position=(arguments.length<=2?void 0:arguments[2])!=="static"&&(arguments.length<=2?void 0:arguments[2])!=="fixed"&&(arguments.length<=2?void 0:arguments[2])!=="relative"&&(arguments.length<=2?void 0:arguments[2])!=="sticky"&&(arguments.length<=2?void 0:arguments[2])!=="initial"&&(arguments.length<=2?void 0:arguments[2])!=="inherit"?"absolute":arguments.length<=2?void 0:arguments[2],this.elt.style.left=(arguments.length<=0?void 0:arguments[0])+"px",this.elt.style.top=(arguments.length<=1?void 0:arguments[1])+"px",this.x=arguments.length<=0?void 0:arguments[0],this.y=arguments.length<=1?void 0:arguments[1],this)},o.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var g="";return this.elt.style.transform&&(g=(g=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),arguments.length===2?this.elt.style.transform="translate("+(arguments.length<=0?void 0:arguments[0])+"px, "+(arguments.length<=1?void 0:arguments[1])+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+(arguments.length<=0?void 0:arguments[0])+"px,"+(arguments.length<=1?void 0:arguments[1])+"px,"+(arguments.length<=2?void 0:arguments[2])+"px)",this.elt.parentElement.style.perspective=arguments.length===3?"1000px":(arguments.length<=3?void 0:arguments[3])+"px"),this.elt.style.transform+=g,this},o.default.Element.prototype._rotate=function(){var g="";return this.elt.style.transform&&(g=(g=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),arguments.length===1?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg)":arguments.length===2?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg, "+(arguments.length<=1?void 0:arguments[1])+"deg)":arguments.length===3&&(this.elt.style.transform="rotateX("+(arguments.length<=0?void 0:arguments[0])+"deg)",this.elt.style.transform+="rotateY("+(arguments.length<=1?void 0:arguments[1])+"deg)",this.elt.style.transform+="rotateZ("+(arguments.length<=2?void 0:arguments[2])+"deg)"),this.elt.style.transform+=g,this},o.default.Element.prototype.style=function(g,v){if((v=v instanceof o.default.Color?"rgba("+v.levels[0]+","+v.levels[1]+","+v.levels[2]+","+v.levels[3]/255+")":v)===void 0){if(g.indexOf(":")===-1)return window.getComputedStyle(this.elt).getPropertyValue(g);for(var x=g.split(";"),T=0;T<x.length;T++){var w=x[T].split(":");w[0]&&w[1]&&(this.elt.style[w[0].trim()]=w[1].trim())}}else this.elt.style[g]=v,g!=="width"&&g!=="height"&&g!=="left"&&g!=="top"||(v=window.getComputedStyle(this.elt).getPropertyValue(g).replace(/[^\d.]/g,""),this[g]=Math.round(parseFloat(v,10)));return this},o.default.Element.prototype.attribute=function(g,v){if(this.elt.firstChild==null||this.elt.firstChild.type!=="checkbox"&&this.elt.firstChild.type!=="radio")return v===void 0?this.elt.getAttribute(g):(this.elt.setAttribute(g,v),this);if(v===void 0)return this.elt.firstChild.getAttribute(g);for(var x=0;x<this.elt.childNodes.length;x++)this.elt.childNodes[x].setAttribute(g,v)},o.default.Element.prototype.removeAttribute=function(g){if(this.elt.firstChild!=null&&(this.elt.firstChild.type==="checkbox"||this.elt.firstChild.type==="radio"))for(var v=0;v<this.elt.childNodes.length;v++)this.elt.childNodes[v].removeAttribute(g);return this.elt.removeAttribute(g),this},o.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments.length<=0?void 0:arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value},o.default.Element.prototype.show=function(){return this.elt.style.display="block",this},o.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},o.default.Element.prototype.size=function(g,v){if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var x=g,T=v,w=o.default.prototype.AUTO;if(x!==w||T!==w){if(x===w?x=v*this.width/this.height:T===w&&(T=g*this.height/this.width),this.elt instanceof HTMLCanvasElement){var b,C={},A=this.elt.getContext("2d");for(b in A)C[b]=A[b];for(b in this.elt.setAttribute("width",x*this._pInst._pixelDensity),this.elt.setAttribute("height",T*this._pInst._pixelDensity),this.elt.style.width=x+"px",this.elt.style.height=T+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),C)this.elt.getContext("2d")[b]=C[b]}else this.elt.style.width=x+"px",this.elt.style.height=T+"px",this.elt.width=x,this.elt.height=T;this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",this.elt.offsetWidth),this._pInst._setProperty("height",this.elt.offsetHeight))}return this},o.default.Element.prototype.remove=function(){this instanceof o.default.MediaElement&&(this.stop(),(v=this.elt.srcObject)!==null&&v.getTracks().forEach(function(x){x.stop()}));var g,v=this._pInst._elements.indexOf(this);for(g in v!==-1&&this._pInst._elements.splice(v,1),this._events)this.elt.removeEventListener(g,this._events[g]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},o.default.Element.prototype.drop=function(g,v){var x;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",x=function(T){T.preventDefault()}),this.elt.addEventListener("dragleave",x)),o.default.Element._attachListener("drop",function(w){w.preventDefault(),typeof v=="function"&&v.call(this,w);var w=w.dataTransfer.files,b=!0,C=!1,A=void 0;try{for(var M,k=w[Symbol.iterator]();!(b=(M=k.next()).done);b=!0){var P=M.value;o.default.File._load(P,g)}}catch(F){C=!0,A=F}finally{try{b||k.return==null||k.return()}finally{if(C)throw A}}},this)):console.log("The File APIs are not fully supported in this browser."),this},o.default.Element.prototype.draggable=function(g){var v,x="ontouchstart"in window,T=0,w=0,b=0,C=0,A=x?"touchend":"mouseup",M=x?"touchmove":"mousemove";function k(F){var I;F=F||window.event,C=x?(I=F.changedTouches,T=b-parseInt(I[0].clientX),w=C-parseInt(I[0].clientY),b=parseInt(I[0].clientX),parseInt(I[0].clientY)):(T=b-parseInt(F.clientX),w=C-parseInt(F.clientY),b=parseInt(F.clientX),parseInt(F.clientY)),g.style.left=g.offsetLeft-T+"px",g.style.top=g.offsetTop-w+"px"}function P(){document.removeEventListener(A,P,!1),document.removeEventListener(M,k,!1)}return g===void 0?v=g=this.elt:g!==this.elt&&g.elt!==this.elt&&(g=g.elt,v=this.elt),v.addEventListener(x?"touchstart":"mousedown",function(F){{var I;F=F||window.event,C=x?(I=F.changedTouches,b=parseInt(I[0].clientX),parseInt(I[0].clientY)):(b=parseInt(F.clientX),parseInt(F.clientY))}return document.addEventListener(A,P,!1),document.addEventListener(M,k,!1),!1},!1),v.style.cursor="move",this};function m(g,v,x,T){c(this,m),this.callback=g,this.time=v,this.id=x,this.val=T}t=function(g){var v=T;if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(g&&g.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),g&&f(v,g);var x=h(T);function T(w,b){c(this,T);var C=l(b=x.call(this,w,b));return b.elt.crossOrigin="anonymous",b._prevTime=0,b._cueIDCounter=0,b._cues=[],b.pixels=[],b._pixelsState=l(b),b._pixelDensity=1,b._modified=!1,b._frameOnCanvas=-1,Object.defineProperty(C,"src",{get:function(){var A=C.elt.children[0].src,M=C.elt.src===window.location.href?"":C.elt.src;return A===window.location.href?M:A},set:function(A){for(var M=0;M<C.elt.children.length;M++)C.elt.removeChild(C.elt.children[M]);var k=document.createElement("source");k.src=A,w.appendChild(k),C.elt.src=A,C.modified=!0}}),C._onended=function(){},C.elt.onended=function(){C._onended(C)},b}return a(T,[{key:"play",value:function(){var w;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(w=this.elt.play())&&w.catch&&w.catch(function(b){b.name==="NotAllowedError"?console.error(b):console.error("Media play method encountered an unexpected error",b)}),this}},{key:"stop",value:function(){return this.elt.pause(),this.elt.currentTime=0,this}},{key:"pause",value:function(){return this.elt.pause(),this}},{key:"loop",value:function(){return this.elt.setAttribute("loop",!0),this.play(),this}},{key:"noLoop",value:function(){return this.elt.removeAttribute("loop"),this}},{key:"_setupAutoplayFailDetection",value:function(){var w=setTimeout(function(){console.error(e)},500);this.elt.addEventListener("play",function(){return clearTimeout(w)},{passive:!0,once:!0})}},{key:"autoplay",value:function(w){var b=this,C=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",w),w&&!C&&(w=function(){return b._setupAutoplayFailDetection()},this.elt.readyState===4?w():this.elt.addEventListener("canplay",w,{passive:!0,once:!0})),this}},{key:"volume",value:function(w){if(w===void 0)return this.elt.volume;this.elt.volume=w}},{key:"speed",value:function(w){if(w===void 0)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=w:this.presetPlaybackRate=w}},{key:"time",value:function(w){return w===void 0?this.elt.currentTime:(this.elt.currentTime=w,this)}},{key:"duration",value:function(){return this.elt.duration}},{key:"_ensureCanvas",value:function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0));var w=this._frameOnCanvas!==this._pInst.frameCount;this.loadedmetadata&&w&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.setModified(!0),this._frameOnCanvas=this._pInst.frameCount)}},{key:"loadPixels",value:function(){this._ensureCanvas();for(var w=arguments.length,b=new Array(w),C=0;C<w;C++)b[C]=arguments[C];return o.default.Renderer2D.prototype.loadPixels.apply(this,b)}},{key:"updatePixels",value:function(w,b,C,A){return this.loadedmetadata&&(this._ensureCanvas(),o.default.Renderer2D.prototype.updatePixels.call(this,w,b,C,A)),this.setModified(!0),this}},{key:"get",value:function(){this._ensureCanvas();for(var w=arguments.length,b=new Array(w),C=0;C<w;C++)b[C]=arguments[C];return o.default.Renderer2D.prototype.get.apply(this,b)}},{key:"_getPixel",value:function(){this.loadPixels();for(var w=arguments.length,b=new Array(w),C=0;C<w;C++)b[C]=arguments[C];return o.default.Renderer2D.prototype._getPixel.apply(this,b)}},{key:"set",value:function(w,b,C){this.loadedmetadata&&(this._ensureCanvas(),o.default.Renderer2D.prototype.set.call(this,w,b,C),this.setModified(!0))}},{key:"copy",value:function(){this._ensureCanvas();for(var w=arguments.length,b=new Array(w),C=0;C<w;C++)b[C]=arguments[C];o.default.prototype.copy.apply(this,b)}},{key:"mask",value:function(){this.loadPixels(),this.setModified(!0);for(var w=arguments.length,b=new Array(w),C=0;C<w;C++)b[C]=arguments[C];o.default.Image.prototype.mask.apply(this,b)}},{key:"isModified",value:function(){return this._modified}},{key:"setModified",value:function(w){this._modified=w}},{key:"onended",value:function(w){return this._onended=w,this}},{key:"connect",value:function(w){var b,C;if(typeof o.default.prototype.getAudioContext=="function")b=o.default.prototype.getAudioContext(),C=o.default.soundOut.input;else try{C=(b=w.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=b.createMediaElementSource(this.elt),this.audioSourceNode.connect(C)),w?w.input?this.audioSourceNode.connect(w.input):this.audioSourceNode.connect(w):this.audioSourceNode.connect(C)}},{key:"disconnect",value:function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()}},{key:"showControls",value:function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0}},{key:"hideControls",value:function(){this.elt.controls=!1}},{key:"addCue",value:function(w,M,C){var A=this._cueIDCounter++,M=new m(M,w,A,C);return this._cues.push(M),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),A}},{key:"removeCue",value:function(w){for(var b=0;b<this._cues.length;b++)this._cues[b].id===w&&(console.log(w),this._cues.splice(b,1));this._cues.length===0&&(this.elt.ontimeupdate=null)}},{key:"clearCues",value:function(){this._cues=[],this.elt.ontimeupdate=null}},{key:"_onTimeUpdate",value:function(){for(var w=this.time(),b=0;b<this._cues.length;b++){var C=this._cues[b].time,A=this._cues[b].val;this._prevTime<C&&C<=w&&this._cues[b].callback(A)}this._prevTime=w}}]),T}(o.default.Element),o.default.MediaElement=t,t=function(){function g(v,x){c(this,g),this.file=v,this._pInst=x,x=v.type.split("/"),this.type=x[0],this.subtype=x[1],this.name=v.name,this.size=v.size,this.data=void 0}return a(g,null,[{key:"_createLoader",value:function(v,x){var T=new FileReader;return T.onload=function(w){var b,C=new o.default.File(v);C.file.type==="application/json"?C.data=JSON.parse(w.target.result):C.file.type==="text/xml"?(b=new DOMParser().parseFromString(w.target.result,"text/xml"),C.data=new o.default.XML(b.documentElement)):C.data=w.target.result,x(C)},T}},{key:"_load",value:function(v,x){var T;/^text\//.test(v.type)||v.type==="application/json"?o.default.File._createLoader(v,x).readAsText(v):/^(video|audio)\//.test(v.type)?((T=new o.default.File(v)).data=URL.createObjectURL(v),x(T)):o.default.File._createLoader(v,x).readAsDataURL(v)}}]),g}(),o.default.File=t,t=o.default,i.default=t},{"../core/main":275,"core-js/modules/es.array.every":153,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.from":158,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.splice":167,"core-js/modules/es.function.name":168,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.promise":183,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198,"core-js/modules/es.string.trim":201,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238,"core-js/modules/web.url":240}],292:[function(t,r,i){function n(v){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(v)}function o(v){return(o=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(x){return n(x)}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":n(x)})(v)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(g=t("../core/main"))&&g.__esModule?g:{default:g},a=function(v){if(v&&v.__esModule)return v;if(v===null||o(v)!=="object"&&typeof v!="function")return{default:v};var x=f();if(x&&x.has(v))return x.get(v);var T,w={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(T in v){var C;Object.prototype.hasOwnProperty.call(v,T)&&((C=b?Object.getOwnPropertyDescriptor(v,T):null)&&(C.get||C.set)?Object.defineProperty(w,T,C):w[T]=v[T])}return w.default=v,x&&x.set(v,w),w}(t("../core/constants"));function f(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,f=function(){return v},v)}s.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",s.default.prototype.accelerationX=0,s.default.prototype.accelerationY=0,s.default.prototype.accelerationZ=0,s.default.prototype.pAccelerationX=0,s.default.prototype.pAccelerationY=0,s.default.prototype.pAccelerationZ=0,s.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},s.default.prototype.rotationX=0,s.default.prototype.rotationY=0,s.default.prototype.rotationZ=0,s.default.prototype.pRotationX=0,s.default.prototype.pRotationY=0;var h=s.default.prototype.pRotationZ=0,l=0,u=0,c="clockwise",d="clockwise",y="clockwise",p=(s.default.prototype.pRotateDirectionX=void 0,s.default.prototype.pRotateDirectionY=void 0,s.default.prototype.pRotateDirectionZ=void 0,s.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},s.default.prototype.turnAxis=void 0,.5),m=30,g=(s.default.prototype.setMoveThreshold=function(v){s.default._validateParameters("setMoveThreshold",arguments),p=v},s.default.prototype.setShakeThreshold=function(v){s.default._validateParameters("setShakeThreshold",arguments),m=v},s.default.prototype._ondeviceorientation=function(v){this._updatePRotations(),this._angleMode===a.radians&&(v.beta=v.beta*(_PI/180),v.gamma=v.gamma*(_PI/180),v.alpha=v.alpha*(_PI/180)),this._setProperty("rotationX",v.beta),this._setProperty("rotationY",v.gamma),this._setProperty("rotationZ",v.alpha),this._handleMotion()},s.default.prototype._ondevicemotion=function(v){this._updatePAccelerations(),this._setProperty("accelerationX",2*v.acceleration.x),this._setProperty("accelerationY",2*v.acceleration.y),this._setProperty("accelerationZ",2*v.acceleration.z),this._handleMotion()},s.default.prototype._handleMotion=function(){window.orientation===90||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):window.orientation===0?this._setProperty("deviceOrientation","portrait"):window.orientation===void 0&&this._setProperty("deviceOrientation","undefined");var v,x,T,w,b,C=this._isGlobal?window:this;typeof C.deviceMoved=="function"&&(Math.abs(this.accelerationX-this.pAccelerationX)>p||Math.abs(this.accelerationY-this.pAccelerationY)>p||Math.abs(this.accelerationZ-this.pAccelerationZ)>p)&&C.deviceMoved(),typeof C.deviceTurned=="function"&&(x=this.rotationX+180,v=this.pRotationX+180,T=h+180,0<x-v&&x-v<270||x-v<-270?c="clockwise":(x-v<0||270<x-v)&&(c="counter-clockwise"),c!==this.pRotateDirectionX&&(T=x),90<Math.abs(x-T)&&Math.abs(x-T)<270&&(T=x,this._setProperty("turnAxis","X"),C.deviceTurned()),this.pRotateDirectionX=c,h=T-180,v=this.rotationY+180,x=this.pRotationY+180,T=l+180,0<v-x&&v-x<270||v-x<-270?d="clockwise":(v-x<0||270<v-this.pRotationY)&&(d="counter-clockwise"),d!==this.pRotateDirectionY&&(T=v),90<Math.abs(v-T)&&Math.abs(v-T)<270&&(T=v,this._setProperty("turnAxis","Y"),C.deviceTurned()),this.pRotateDirectionY=d,l=T-180,0<this.rotationZ-this.pRotationZ&&this.rotationZ-this.pRotationZ<270||this.rotationZ-this.pRotationZ<-270?y="clockwise":(this.rotationZ-this.pRotationZ<0||270<this.rotationZ-this.pRotationZ)&&(y="counter-clockwise"),y!==this.pRotateDirectionZ&&(u=this.rotationZ),90<Math.abs(this.rotationZ-u)&&Math.abs(this.rotationZ-u)<270&&(u=this.rotationZ,this._setProperty("turnAxis","Z"),C.deviceTurned()),this.pRotateDirectionZ=y,this._setProperty("turnAxis",void 0)),typeof C.deviceShaken=="function"&&(this.pAccelerationX!==null&&(w=Math.abs(this.accelerationX-this.pAccelerationX),b=Math.abs(this.accelerationY-this.pAccelerationY)),m<w+b&&C.deviceShaken())},s.default);i.default=g},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],293:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=(t=t("../core/main"))&&t.__esModule?t:{default:t};n.default.prototype.isKeyPressed=!1,n.default.prototype.keyIsPressed=!1,n.default.prototype.key="",n.default.prototype.keyCode=0,n.default.prototype._onkeydown=function(o){var s;this._downKeys[o.which]||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",o.which),this._downKeys[o.which]=!0,this._setProperty("key",o.key||String.fromCharCode(o.which)||o.which),typeof(s=this._isGlobal?window:this).keyPressed!="function"||o.charCode||s.keyPressed(o)===!1&&o.preventDefault())},n.default.prototype._onkeyup=function(o){this._downKeys[o.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",o.key||String.fromCharCode(o.which)||o.which),this._setProperty("keyCode",o.which);var s=this._isGlobal?window:this;typeof s.keyReleased=="function"&&s.keyReleased(o)===!1&&o.preventDefault()},n.default.prototype._onkeypress=function(o){var s;o.which!==this._lastKeyCodeTyped&&(this._setProperty("_lastKeyCodeTyped",o.which),this._setProperty("key",o.key||String.fromCharCode(o.which)||o.which),typeof(s=this._isGlobal?window:this).keyTyped=="function"&&s.keyTyped(o)===!1&&o.preventDefault())},n.default.prototype._onblur=function(o){this._downKeys={}},n.default.prototype.keyIsDown=function(o){return n.default._validateParameters("keyIsDown",arguments),this._downKeys[o]||!1},n.default.prototype._areDownKeys=function(){for(var o in this._downKeys)if(this._downKeys.hasOwnProperty(o)&&this._downKeys[o]===!0)return!0;return!1},t=n.default,i.default=t},{"../core/main":275}],294:[function(t,r,i){function n(h){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(h)}function o(h){return(o=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(l){return n(l)}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":n(l)})(h)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.string.includes"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(s=t("../core/main"))&&s.__esModule?s:{default:s},a=function(h){if(h&&h.__esModule)return h;if(h===null||o(h)!=="object"&&typeof h!="function")return{default:h};var l=f();if(l&&l.has(h))return l.get(h);var u,c={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(u in h){var y;Object.prototype.hasOwnProperty.call(h,u)&&((y=d?Object.getOwnPropertyDescriptor(h,u):null)&&(y.get||y.set)?Object.defineProperty(c,u,y):c[u]=h[u])}return c.default=h,l&&l.set(h,c),c}(t("../core/constants"));function f(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,f=function(){return h},h)}s.default.prototype.movedX=0,s.default.prototype.movedY=0,s.default.prototype._hasMouseInteracted=!1,s.default.prototype.mouseX=0,s.default.prototype.mouseY=0,s.default.prototype.pmouseX=0,s.default.prototype.pmouseY=0,s.default.prototype.winMouseX=0,s.default.prototype.winMouseY=0,s.default.prototype.pwinMouseX=0,s.default.prototype.pwinMouseY=0,s.default.prototype.mouseButton=0,s.default.prototype.mouseIsPressed=!1,s.default.prototype._updateNextMouseCoords=function(h){var l,u,c,d,y;this._curElement!==null&&(!h.touches||0<h.touches.length)&&(l=this._curElement.elt,u=this.width,c=this.height,(d=h)&&!d.clientX&&(d.touches?d=d.touches[0]:d.changedTouches&&(d=d.changedTouches[0])),y=l.getBoundingClientRect(),u=l.scrollWidth/u||1,l=l.scrollHeight/c||1,c={x:(d.clientX-y.left)/u,y:(d.clientY-y.top)/l,winX:d.clientX,winY:d.clientY,id:d.identifier},this._setProperty("movedX",h.movementX),this._setProperty("movedY",h.movementY),this._setProperty("mouseX",c.x),this._setProperty("mouseY",c.y),this._setProperty("winMouseX",c.winX),this._setProperty("winMouseY",c.winY)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},s.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},s.default.prototype._setMouseButton=function(h){h.button===1?this._setProperty("mouseButton",a.CENTER):h.button===2?this._setProperty("mouseButton",a.RIGHT):this._setProperty("mouseButton",a.LEFT)},s.default.prototype._onmousemove=function(h){var l=this._isGlobal?window:this;this._updateNextMouseCoords(h),this.mouseIsPressed?typeof l.mouseDragged=="function"?l.mouseDragged(h)===!1&&h.preventDefault():typeof l.touchMoved=="function"&&l.touchMoved(h)===!1&&h.preventDefault():typeof l.mouseMoved=="function"&&l.mouseMoved(h)===!1&&h.preventDefault()},s.default.prototype._onmousedown=function(h){var l=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(h),this._updateNextMouseCoords(h),typeof l.mousePressed=="function"?l.mousePressed(h)===!1&&h.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof l.touchStarted=="function"&&l.touchStarted(h)===!1&&h.preventDefault()},s.default.prototype._onmouseup=function(h){var l=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),typeof l.mouseReleased=="function"?l.mouseReleased(h)===!1&&h.preventDefault():typeof l.touchEnded=="function"&&l.touchEnded(h)===!1&&h.preventDefault()},s.default.prototype._ondragend=s.default.prototype._onmouseup,s.default.prototype._ondragover=s.default.prototype._onmousemove,s.default.prototype._onclick=function(h){var l=this._isGlobal?window:this;typeof l.mouseClicked=="function"&&l.mouseClicked(h)===!1&&h.preventDefault()},s.default.prototype._ondblclick=function(h){var l=this._isGlobal?window:this;typeof l.doubleClicked=="function"&&l.doubleClicked(h)===!1&&h.preventDefault()},s.default.prototype._mouseWheelDeltaY=0,s.default.prototype._pmouseWheelDeltaY=0,s.default.prototype._onwheel=function(h){var l=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",h.deltaY),typeof l.mouseWheel=="function"&&(h.delta=h.deltaY,l.mouseWheel(h)===!1&&h.preventDefault())},s.default.prototype.requestPointerLock=function(){var h=this._curElement.elt;return h.requestPointerLock=h.requestPointerLock||h.mozRequestPointerLock,h.requestPointerLock?(h.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},s.default.prototype.exitPointerLock=function(){document.exitPointerLock()},t=s.default,i.default=t},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],295:[function(t,r,i){t("core-js/modules/es.array.includes"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.string.includes"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype.touches=[],t.default.prototype._updateTouchCoords=function(n){if(this._curElement!==null){for(var o=[],s=0;s<n.touches.length;s++)o[s]=function(y,d,p,l){var u=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,c=y.getBoundingClientRect(),d=y.scrollWidth/d||1,y=y.scrollHeight/p||1,p=l.touches[u]||l.changedTouches[u];return{x:(p.clientX-c.left)/d,y:(p.clientY-c.top)/y,winX:p.clientX,winY:p.clientY,id:p.identifier}}(this._curElement.elt,this.width,this.height,n,s);this._setProperty("touches",o)}},t.default.prototype._ontouchstart=function(n){var o=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(n),this._updateNextMouseCoords(n),this._updateMouseCoords(),typeof o.touchStarted=="function"?o.touchStarted(n)===!1&&n.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof o.mousePressed=="function"&&o.mousePressed(n)===!1&&n.preventDefault()},t.default.prototype._ontouchmove=function(n){var o=this._isGlobal?window:this;this._updateTouchCoords(n),this._updateNextMouseCoords(n),typeof o.touchMoved=="function"?o.touchMoved(n)===!1&&n.preventDefault():typeof o.mouseDragged=="function"&&o.mouseDragged(n)===!1&&n.preventDefault()},t.default.prototype._ontouchend=function(n){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(n),this._updateNextMouseCoords(n);var o=this._isGlobal?window:this;typeof o.touchEnded=="function"?o.touchEnded(n)===!1&&n.preventDefault():typeof o.mouseReleased=="function"&&o.mouseReleased(n)===!1&&n.preventDefault()},t=t.default,i.default=t},{"../core/main":275,"core-js/modules/es.array.includes":159,"core-js/modules/es.string.includes":191}],296:[function(t,r,i){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.int32-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.int32-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n,o,s,a,f={_toPixels:function(h){var l,u;return h instanceof ImageData?h.data:h.getContext("2d")?h.getContext("2d").getImageData(0,0,h.width,h.height).data:h.getContext("webgl")?(u=(l=h.getContext("webgl")).drawingBufferWidth*l.drawingBufferHeight*4,u=new Uint8Array(u),l.readPixels(0,0,h.width,h.height,l.RGBA,l.UNSIGNED_BYTE,u),u):void 0},_getARGB:function(h,l){return l*=4,h[3+l]<<24&4278190080|h[l]<<16&16711680|h[1+l]<<8&65280|255&h[2+l]},_setPixels:function(h,l){for(var u,c=0,d=h.length;c<d;c++)h[0+(u=4*c)]=(16711680&l[c])>>>16,h[1+u]=(65280&l[c])>>>8,h[2+u]=255&l[c],h[3+u]=(4278190080&l[c])>>>24},_toImageData:function(h){return h instanceof ImageData?h:h.getContext("2d").getImageData(0,0,h.width,h.height)},_createImageData:function(h,l){return f._tmpCanvas=document.createElement("canvas"),f._tmpCtx=f._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(h,l)},apply:function(h,y,u){var c=h.getContext("2d"),d=c.getImageData(0,0,h.width,h.height),y=y(d,u);y instanceof ImageData?c.putImageData(y,0,0,0,0,h.width,h.height):c.putImageData(d,0,0,0,0,h.width,h.height)},threshold:function(h,l){for(var u=f._toPixels(h),c=(l===void 0&&(l=.5),Math.floor(255*l)),d=0;d<u.length;d+=4){var y=void 0,y=c<=.2126*u[d]+.7152*u[d+1]+.0722*u[d+2]?255:0;u[d]=u[d+1]=u[d+2]=y}},gray:function(h){for(var l=f._toPixels(h),u=0;u<l.length;u+=4){var c=l[u],d=l[u+1],y=l[u+2];l[u]=l[u+1]=l[u+2]=.2126*c+.7152*d+.0722*y}},opaque:function(h){for(var l=f._toPixels(h),u=0;u<l.length;u+=4)l[u+3]=255;return l},invert:function(h){for(var l=f._toPixels(h),u=0;u<l.length;u+=4)l[u]=255-l[u],l[u+1]=255-l[u+1],l[u+2]=255-l[u+2]},posterize:function(h,l){var u=f._toPixels(h);if((l=l===void 0?4:l)<2||255<l)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var c=l-1,d=0;d<u.length;d+=4){var y=u[d],p=u[d+1],m=u[d+2];u[d]=255*(y*l>>8)/c,u[d+1]=255*(p*l>>8)/c,u[d+2]=255*(m*l>>8)/c}},dilate:function(h){for(var l,u,c,d,y,p,m,g,v,x=f._toPixels(h),T=0,w=x.length?x.length/4:0,b=new Int32Array(w);T<w;)for(u=(l=T)+h.width;T<u;)d=c=f._getARGB(x,T),(v=T-1)<l&&(v=T),u<=(g=T+1)&&(g=T),(y=T-h.width)<0&&(y=0),w<=(p=T+h.width)&&(p=T),y=f._getARGB(x,y),v=f._getARGB(x,v),p=f._getARGB(x,p),(d=77*(d>>16&255)+151*(d>>8&255)+28*(255&d))<(m=77*(v>>16&255)+151*(v>>8&255)+28*(255&v))&&(c=v,d=m),d<(m=77*((v=f._getARGB(x,g))>>16&255)+151*(v>>8&255)+28*(255&v))&&(c=v,d=m),d<(g=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))&&(c=y,d=g),d<(v=77*(p>>16&255)+151*(p>>8&255)+28*(255&p))&&(c=p,d=v),b[T++]=c;f._setPixels(x,b)},erode:function(h){for(var l,u,c,d,y,p,m,g,v,x=f._toPixels(h),T=0,w=x.length?x.length/4:0,b=new Int32Array(w);T<w;)for(u=(l=T)+h.width;T<u;)d=c=f._getARGB(x,T),(v=T-1)<l&&(v=T),u<=(g=T+1)&&(g=T),(y=T-h.width)<0&&(y=0),w<=(p=T+h.width)&&(p=T),y=f._getARGB(x,y),v=f._getARGB(x,v),p=f._getARGB(x,p),(m=77*(v>>16&255)+151*(v>>8&255)+28*(255&v))<(d=77*(d>>16&255)+151*(d>>8&255)+28*(255&d))&&(c=v,d=m),(m=77*((v=f._getARGB(x,g))>>16&255)+151*(v>>8&255)+28*(255&v))<d&&(c=v,d=m),(g=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))<d&&(c=y,d=g),(v=77*(p>>16&255)+151*(p>>8&255)+28*(255&p))<d&&(c=p,d=v),b[T++]=c;f._setPixels(x,b)},blur:function(h,l){for(var u,c,d,y,p,m,g,v,x,T,w=f._toPixels(h),b=h.width,C=h.height,A=b*C,M=new Int32Array(A),k=0;k<A;k++)M[k]=f._getARGB(w,k);var P,F,I,B,H,G,W,Q,ne=new Int32Array(A),U=new Int32Array(A),D=new Int32Array(A),O=new Int32Array(A),V=0,Z=3.5*l|0;if(n!==(Z=Z<1?1:Z<248?Z:248)){o=1+(n=Z)<<1,s=new Int32Array(o),a=new Array(o);for(var ie=0;ie<o;ie++)a[ie]=new Int32Array(256);for(var re=1,ge=Z-1;re<Z;re++){s[Z+re]=s[ge]=G=ge*ge,W=a[Z+re],Q=a[ge--];for(var ye=0;ye<256;ye++)W[ye]=Q[ye]=G*ye}H=s[Z]=Z*Z,W=a[Z];for(var he=0;he<256;he++)W[he]=H*he}for(F=0;F<C;F++){for(P=0;P<b;P++){if(y=d=c=p=u=0,(m=P-n)<0)T=-m,m=0;else{if(b<=m)break;T=0}for(I=T;I<o&&!(b<=m);I++){var pe=M[m+V];B=a[I],p+=B[(-16777216&pe)>>>24],c+=B[(16711680&pe)>>16],d+=B[(65280&pe)>>8],y+=B[255&pe],u+=s[I],m++}ne[g=V+P]=p/u,U[g]=c/u,D[g]=d/u,O[g]=y/u}V+=b}for(x=(v=-n)*b,F=V=0;F<C;F++){for(P=0;P<b;P++){if(y=d=c=p=u=0,v<0)T=g=-v,m=P;else{if(C<=v)break;T=0,g=v,m=P+x}for(I=T;I<o&&!(C<=g);I++)B=a[I],p+=B[ne[m]],c+=B[U[m]],d+=B[D[m]],y+=B[O[m]],u+=s[I],g++,m+=b;M[P+V]=p/u<<24|c/u<<16|d/u<<8|y/u}V+=b,x+=b,v++}f._setPixels(w,M)}};i.default=f},{"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.to-string":182,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.int32-array":217,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint8-array":234}],297:[function(t,r,i){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=s(t("../core/main")),o=s(t("omggif"));function s(f){return f&&f.__esModule?f:{default:f}}function a(f){return function(h){if(Array.isArray(h)){for(var l=0,u=new Array(h.length);l<h.length;l++)u[l]=h[l];return u}}(f)||function(h){if(Symbol.iterator in Object(h)||Object.prototype.toString.call(h)==="[object Arguments]")return Array.from(h)}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.default.prototype.createImage=function(f,h){return n.default._validateParameters("createImage",arguments),new n.default.Image(f,h)},n.default.prototype.saveCanvas=function(){n.default._validateParameters("saveCanvas",arguments);var f,h,l,u,c,d,y=[].slice.call(arguments);switch(arguments[0]instanceof HTMLCanvasElement?(f=arguments[0],y.shift()):arguments[0]instanceof n.default.Element?(f=arguments[0].elt,y.shift()):arguments[0]instanceof n.default.Framebuffer?((c=this.createGraphics((u=arguments[0]).width,u.height)).pixelDensity(pixelDensity()),u.loadPixels(),c.loadPixels(),c.pixels.set(u.pixels),c.updatePixels(),f=c.elt,y.shift()):f=this._curElement&&this._curElement.elt,1<=y.length&&(h=y[0]),l=(l=2<=y.length?y[1]:l)||n.default.prototype._checkFileExtension(h,l)[1]||"png"){default:d="image/png";break;case"jpeg":case"jpg":d="image/jpeg"}f.toBlob(function(p){n.default.prototype.downloadFile(p,h,l),c&&c.remove()},d)},n.default.prototype.encodeAndDownloadGif=function(f,h){for(var l=f.gifProperties,u=l.loopLimit,c=(u===1?u=null:u===null&&(u=0),new Uint8Array(f.width*f.height*l.numFrames)),d=[],y={},p=0;p<l.numFrames;p++){for(var m=new Set,g=l.frames[p].image.data,v=g.length,x=new Uint32Array(f.width*f.height),T=0,w=0;T<v;T+=4,w++){var b=g[T+0]<<16|g[T+1]<<8|g[T+2]<<0;m.add(b),x[w]=b}var C=a(m).sort().toString();y[C]===void 0?y[C]={freq:1,frames:[p]}:(y[C].freq+=1,y[C].frames.push(p)),d.push(x)}for(var k=[],A=Object.keys(y).sort(function(D,O){return y[O].freq-y[D].freq}),M=A[0].split(",").map(function(D){return parseInt(D)}),k=k.concat(y[M].frames),P=new Set(M),F=1;F<A.length;F++){var I=A[F].split(",").map(function(D){return parseInt(D)}).filter(function(D){return!P.has(D)});if(M.length+I.length<=256){for(var B=0;B<I.length;B++)M.push(I[B]),P.add(I[B]);k=k.concat(y[A[F]].frames)}}k=new Set(k);for(var H={},G=0;G<M.length;G++)H[M[G]]||(H[M[G]]=G);for(var W=1;W<M.length;)W<<=1;M.length=W;for(var u={loop:u,palette:new Uint32Array(M)},Q=new o.default.GifWriter(c,f.width,f.height,u),ne={},U=0;U<l.numFrames;U++)(function(O){var V=!k.has(O),Z=V?[]:M,ie=new Uint8Array(f.width*f.height),re={},ge=new Set,ye=(d[O].forEach(function(fe,Ce){V?(re[fe]===void 0&&(re[fe]=Z.length,Z.push(fe)),ie[Ce]=re[fe]):ie[Ce]=H[fe],0<O&&d[O-1][Ce]!==fe&&ge.add(fe)}),{}),he=Z.filter(function(fe){return!ge.has(fe)});if(0<he.length){var he=he[0],pe=(V?re:H)[he];if(0<O){for(var we=0;we<d[O].length;we++)d[O-1][we]===d[O][we]&&(ie[we]=pe);ye.transparent=pe,ne.frameOpts.disposal=1}}if(ye.delay=l.frames[O].delay/10,V){for(var oe=1;oe<Z.length;)oe<<=1;Z.length=oe,ye.palette=new Uint32Array(Z)}0<O&&Q.addFrame(0,0,f.width,f.height,ne.pixelPaletteIndex,ne.frameOpts),ne={pixelPaletteIndex:ie,frameOpts:ye}})(U);ne.frameOpts.disposal=1,Q.addFrame(0,0,f.width,f.height,ne.pixelPaletteIndex,ne.frameOpts),u=new Blob([c.slice(0,Q.end())],{type:"image/gif"}),n.default.prototype.downloadFile(u,h,"gif")},n.default.prototype.saveFrames=function(f,h,l,d,c){n.default._validateParameters("saveFrames",arguments),l=n.default.prototype.constrain(l=l||3,0,15),l*=1e3;var d=n.default.prototype.constrain(d||15,0,22),y=0,p=n.default.prototype._makeFrame,m=this._curElement.elt,g=[],v=setInterval(function(){g.push(p(f+y,h,m)),y++},1e3/d);setTimeout(function(){if(clearInterval(v),c)c(g);else for(var x=0,T=g;x<T.length;x++){var w=T[x];n.default.prototype.downloadFile(w.imageData,w.filename,w.ext)}g=[]},.01+l)},n.default.prototype._makeFrame=function(f,h,c){var u,c=this?this._curElement.elt:c;if(h)switch(h.toLowerCase()){case"png":u="image/png";break;case"jpeg":case"jpg":u="image/jpeg";break;default:u="image/png"}else h="png",u="image/png";var c=(c=c.toDataURL(u)).replace(u,"image/octet-stream"),d={};return d.imageData=c,d.filename=f,d.ext=h,d},t=n.default,i.default=t},{"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.set":189,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint32-array":233,"core-js/modules/es.typed-array.uint8-array":234,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238,omggif:248}],298:[function(t,r,i){function n(m){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}function o(m){return(o=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(g){return n(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":n(g)})(m)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.copy-within"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.copy-within"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,t("regenerator-runtime/runtime");var s=c(t("../core/main")),a=c(t("../core/helpers")),f=function(m){if(m&&m.__esModule)return m;if(m===null||o(m)!=="object"&&typeof m!="function")return{default:m};var g=u();if(g&&g.has(m))return g.get(m);var v,x={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in m){var w;Object.prototype.hasOwnProperty.call(m,v)&&((w=T?Object.getOwnPropertyDescriptor(m,v):null)&&(w.get||w.set)?Object.defineProperty(x,v,w):x[v]=m[v])}return x.default=m,g&&g.set(m,x),x}(t("../core/constants")),h=c(t("omggif")),l=t("gifenc");function u(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,u=function(){return m},m)}function c(m){return m&&m.__esModule?m:{default:m}}function d(m,g,v,x,T,w,b){try{var C=m[w](b),A=C.value}catch(M){return void v(M)}C.done?g(A):Promise.resolve(A).then(x,T)}function y(m,g,v,x,T,w,b,C,A,M,k){var P,F,I,B,H,G,W,Q,ne;return m===f.COVER&&(P=g,I=v,W=w,Q=b,G=C,ne=A,F=M,B=k,H=Math.max(W/F,Q/B),W/=H,Q/=H,H=G,G=ne,P===f.CENTER?H+=(F-W)/2:P===f.RIGHT&&(H+=F-W),I===f.CENTER?G+=(B-Q)/2:I===f.BOTTOM&&(G+=B-Q),C=(ne={x:H,y:G,w:W,h:Q}).x,A=ne.y,M=ne.w,k=ne.h),m===f.CONTAIN&&(P=g,F=v,I=x,B=T,H=w,G=b,W=M,Q=k,ne=Math.max(W/H,Q/G),W/=ne,Q/=ne,ne=I,I=B,P===f.CENTER?ne+=(H-W)/2:P===f.RIGHT&&(ne+=H-W),F===f.CENTER?I+=(G-Q)/2:F===f.BOTTOM&&(I+=G-Q),x=(m={x:ne,y:I,w:W,h:Q}).x,T=m.y,w=m.w,b=m.h),{sx:C,sy:A,sw:M,sh:k,dx:x,dy:T,dw:w,dh:b}}function p(m,g){return 0<m&&m<g?m:g}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),s.default.prototype.loadImage=function(m,g,v){s.default._validateParameters("loadImage",arguments);var x=new s.default.Image(1,1,this),T=this,w=new Request(m,{method:"GET",mode:"cors"});return fetch(m,w).then(function(b){var C,A=b.headers.get("content-type");A===null&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),A&&A.includes("image/gif")?b.arrayBuffer().then(function(M){if(M){for(var M=new Uint8Array(M),k=x,P=g,F=v,I=function(V){T._decrementPreload()}.bind(T),B=new h.default.GifReader(M),H=(k.width=k.canvas.width=B.width,k.height=k.canvas.height=B.height,[]),G=B.numFrames(),W=new Uint8ClampedArray(k.width*k.height*4),Q=0;Q<G;Q++){var ne=B.frameInfo(Q),U=k.drawingContext.getImageData(0,0,k.width,k.height),D=(W=U.data.slice(),function(V,Z){try{Z.decodeAndBlitFrameRGBA(V,W)}catch(ie){s.default._friendlyFileLoadError(8,k.src),typeof F=="function"?F(ie):console.error(ie)}}(Q,B),new ImageData(W,k.width,k.height)),D=(k.drawingContext.putImageData(D,0,0),ne.delay);D===0&&(D=10),H.push({image:k.drawingContext.getImageData(0,0,k.width,k.height),delay:10*D}),ne.disposal===2?k.drawingContext.clearRect(ne.x,ne.y,ne.width,ne.height):ne.disposal===3&&k.drawingContext.putImageData(U,0,0,ne.x,ne.y,ne.width,ne.height)}(M=B.loopCount())===null?M=1:M===0&&(M=null),k.drawingContext.putImageData(H[0].image,0,0),1<H.length&&(k.gifProperties={displayIndex:0,loopLimit:M,loopCount:0,frames:H,numFrames:G,playing:!0,timeDisplayed:0,lastChangeTime:0}),typeof P=="function"&&P(k),I()}},function(M){typeof v=="function"?(v(M),T._decrementPreload()):console.error(M)}):((C=new Image).onload=function(){x.width=x.canvas.width=C.width,x.height=x.canvas.height=C.height,x.drawingContext.drawImage(C,0,0),x.modified=!0,typeof g=="function"&&g(x),T._decrementPreload()},C.onerror=function(M){s.default._friendlyFileLoadError(0,C.src),typeof v=="function"?(v(M),T._decrementPreload()):console.error(M)},m.indexOf("data:image/")!==0&&(C.crossOrigin="Anonymous"),C.src=m),x.modified=!0}).catch(function(b){s.default._friendlyFileLoadError(0,m),typeof v=="function"?(v(b),T._decrementPreload()):console.error(b)}),x},s.default.prototype.saveGif=function(){m=regeneratorRuntime.mark(function v(x,T){var w,b,C,A,M,k,P,F,I,B,H,G,W,Q,ne,U,D,O,V,Z,ie,re,ge,ye,he,pe,we=arguments;return regeneratorRuntime.wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(w=2<we.length&&we[2]!==void 0?we[2]:{delay:0,units:"seconds",silent:!1,notificationDuration:0,notificationID:"progressBar"},typeof x!="string")throw TypeError("fileName parameter must be a string");oe.next=3;break;case 3:if(typeof T!="number")throw TypeError("Duration parameter must be a number");oe.next=5;break;case 5:if(b=w&&w.delay||0,C=w&&w.units||"seconds",A=w&&w.silent||!1,M=w&&w.notificationDuration||0,k=w&&w.notificationID||"progressBar",typeof b!="number")throw TypeError("Delay parameter must be a number");oe.next=12;break;case 12:if(C!=="seconds"&&C!=="frames")throw TypeError('Units parameter must be either "frames" or "seconds"');oe.next=14;break;case 14:if(typeof A!="boolean")throw TypeError("Silent parameter must be a boolean");oe.next=16;break;case 16:if(typeof M!="number")throw TypeError("Notification duration parameter must be a number");oe.next=18;break;case 18:if(typeof k!="string")throw TypeError("Notification ID parameter must be a string");oe.next=20;break;case 20:return this._recording=!0,B=this._targetFrameRate,P=(P=1/(B=B!==1/0&&B!==void 0&&B!==0?B:60)*1e3)<20?20:P,I=(F=C==="seconds"?T*B:T)+(B=C==="seconds"?b*B:b),B=B,this.frameCount=B,H=this._pixelDensity,this.pixelDensity(1),G=[],document.getElementById(k)!==null&&document.getElementById(k).remove(),A||((W=this.createP("")).id(k),W.style("font-size","16px"),W.style("font-family","Montserrat"),W.style("background-color","#ffffffa0"),W.style("padding","8px"),W.style("border-radius","10px"),W.position(0,0)),this._renderer instanceof s.default.RendererGL&&(ne=this.drawingContext,Q=new Uint8Array(ne.drawingBufferWidth*ne.drawingBufferHeight*4)),this.noLoop(),oe.next=39,Promise.resolve();case 39:if(B<I)return this.redraw(),ye=void 0,ye=this._renderer instanceof s.default.RendererGL?(Q=new Uint8Array(ne.drawingBufferWidth*ne.drawingBufferHeight*4),ne.readPixels(0,0,ne.drawingBufferWidth,ne.drawingBufferHeight,ne.RGBA,ne.UNSIGNED_BYTE,Q),function(fe){for(var Ce=parseInt(height/2),Fe=4*width,Ae=new Uint8Array(4*width),De=0;De<Ce;++De){var Be=De*Fe,st=(height-De-1)*Fe;Ae.set(fe.subarray(Be,Be+Fe)),fe.copyWithin(Be,st,st+Fe),fe.set(Ae,st)}return fe}(Q)):this.drawingContext.getImageData(0,0,this.width,this.height).data,G.push(ye),B++,A||W.html("Saved frame <b>"+G.length.toString()+"</b> out of "+F.toString()),oe.next=48,new Promise(function(fe){return setTimeout(fe,0)});oe.next=50;break;case 48:oe.next=39;break;case 50:A||W.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(H),U=(0,l.GIFEncoder)(),D=function(fe){for(var Ce=new Uint8Array(fe.length*fe[0].length),Fe=0;Fe<fe.length;Fe++)Ce.set(fe[Fe],Fe*fe[0].length);var Ae=(0,l.quantize)(Ce,256,{format:"rgba4444",oneBitAlpha:!0});return Ae.length===256?Ae[Ae.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:Ae.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),Ae}(G),O={},V=function(fe){for(var Ce=fe.length/4,Fe=new Uint8Array(Ce),Ae=0;Ae<Ce;Ae++){var De=fe[4*Ae]<<24|fe[4*Ae+1]<<16|fe[4*Ae+2]<<8|fe[4*Ae+3];O[De]===void 0&&(O[De]=(0,l.nearestColorIndex)(D,fe.slice(4*Ae,4*(Ae+1)))),Fe[Ae]=O[De]}return Fe},Z=D.length-1,ie=[],re=0;case 60:if(!(re<G.length)){oe.next=71;break}if(ge=V(G[re]),ye=ge.slice(),re===0)U.writeFrame(ge,this.width,this.height,{palette:D,delay:P,dispose:1});else{for(he=0;he<ge.length;he++)ge[he]===ie[he]&&(ge[he]=Z);U.writeFrame(ge,this.width,this.height,{delay:P,transparent:!0,transparentIndex:Z,dispose:1})}return ie=ye,A||W.html("Rendered frame <b>"+re.toString()+"</b> out of "+F.toString()),oe.next=68,new Promise(function(fe){return setTimeout(fe,0)});case 68:re++,oe.next=60;break;case 71:U.finish(),pe=U.bytesView(),pe=new Blob([pe],{type:"image/gif"}),G=[],this._recording=!1,this.loop(),A||(W.html("Done. Downloading your gif!ð¸"),0<M&&setTimeout(function(){return W.remove()},1e3*M)),s.default.prototype.downloadFile(pe,x,"gif");case 80:case"end":return oe.stop()}},v,this)});var m,g=function(){var v=this,x=arguments;return new Promise(function(T,w){var b=m.apply(v,x);function C(M){d(b,T,w,C,A,"next",M)}function A(M){d(b,T,w,C,A,"throw",M)}C(void 0)})};return function(v,x){return g.apply(this,arguments)}}(),s.default.prototype.image=function(m,g,v,x,B,H,G,W,ne,M,k,P){s.default._validateParameters("image",arguments);var Q=m.width,F=m.height,I=(P=P||f.CENTER,k=k||f.CENTER,m.elt&&(Q=Q!==void 0?Q:m.elt.width,F=F!==void 0?F:m.elt.height),m.elt&&m.elt.videoWidth&&!m.canvas&&(Q=Q!==void 0?Q:m.elt.videoWidth,F=F!==void 0?F:m.elt.videoHeight),x||Q),B=B||F,H=H||0,G=G||0,W=p(W!==void 0?W:Q,Q),Q=p(ne!==void 0?ne:F,F),ne=1;m.elt&&!m.canvas&&m.elt.style.width&&(ne=m.elt.videoWidth&&!x?m.elt.videoWidth:m.elt.width,ne/=parseInt(m.elt.style.width,10)),H*=ne,G*=ne,Q*=ne,W*=ne,F=y(M,k,P,(F=a.default.modeAdjust(g,v,I,B,this._renderer._imageMode)).x,F.y,F.w,F.h,H,G,W,Q),this._renderer.image(m,F.sx,F.sy,F.sw,F.sh,F.dx,F.dy,F.dw,F.dh)},s.default.prototype.tint=function(){for(var m=arguments.length,g=new Array(m),v=0;v<m;v++)g[v]=arguments[v];s.default._validateParameters("tint",g);var x=this.color.apply(this,g);this._renderer._tint=x.levels},s.default.prototype.noTint=function(){this._renderer._tint=null},s.default.prototype._getTintedImageCanvas=s.default.Renderer2D.prototype._getTintedImageCanvas,s.default.prototype.imageMode=function(m){s.default._validateParameters("imageMode",arguments),m!==f.CORNER&&m!==f.CORNERS&&m!==f.CENTER||(this._renderer._imageMode=m)},t=s.default,i.default=t},{"../core/constants":264,"../core/friendly_errors/fes_core":266,"../core/friendly_errors/file_errors":267,"../core/friendly_errors/validate_params":270,"../core/helpers":271,"../core/main":275,"core-js/modules/es.array.copy-within":152,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.promise":183,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint8-array":234,"core-js/modules/es.typed-array.uint8-clamped-array":235,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238,gifenc:245,omggif:248,"regenerator-runtime/runtime":252}],299:[function(t,r,i){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=s(t("../core/main")),o=s(t("./filters"));function s(f){return f&&f.__esModule?f:{default:f}}function a(f,h){for(var l=0;l<h.length;l++){var u=h[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(f,u.key,u)}}n.default.Image=function(){function f(u,c){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this.width=u,this.height=c,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]}var h,l;return h=f,(l=[{key:"pixelDensity",value:function(u){return u!==void 0?(u<=0&&(n.default._friendlyParamError({type:"INVALID_VALUE",format:{types:["Number"]},position:1},"pixelDensity"),u=1),this._pixelDensity=u,this.width/=u,this.height/=u,this):this._pixelDensity}},{key:"_animateGif",value:function(y){var c,d=this.gifProperties,y=y._lastRealFrameTime;d.lastChangeTime===0&&(d.lastChangeTime=y),d.playing&&(d.timeDisplayed=y-d.lastChangeTime,c=d.frames[d.displayIndex].delay,d.timeDisplayed>=c&&(c=Math.floor(d.timeDisplayed/c),d.timeDisplayed=0,d.lastChangeTime=y,d.displayIndex+=c,d.loopCount=Math.floor(d.displayIndex/d.numFrames),d.loopLimit!==null&&d.loopCount>=d.loopLimit?d.playing=!1:(y=d.displayIndex%d.numFrames,this.drawingContext.putImageData(d.frames[y].image,0,0),d.displayIndex=y,this.setModified(!0))))}},{key:"_setProperty",value:function(u,c){this[u]=c,this.setModified(!0)}},{key:"loadPixels",value:function(){n.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)}},{key:"updatePixels",value:function(u,c,d,y){n.default.Renderer2D.prototype.updatePixels.call(this,u,c,d,y),this.setModified(!0)}},{key:"get",value:function(u,c,d,y){return n.default._validateParameters("p5.Image.get",arguments),n.default.Renderer2D.prototype.get.apply(this,arguments)}},{key:"_getPixel",value:function(){for(var u=arguments.length,c=new Array(u),d=0;d<u;d++)c[d]=arguments[d];return n.default.Renderer2D.prototype._getPixel.apply(this,c)}},{key:"set",value:function(u,c,d){n.default.Renderer2D.prototype.set.call(this,u,c,d),this.setModified(!0)}},{key:"resize",value:function(u,c){u===0&&c===0?(u=this.canvas.width,c=this.canvas.height):u===0?u=this.canvas.width*c/this.canvas.height:c===0&&(c=this.canvas.height*u/this.canvas.width),u=Math.floor(u),c=Math.floor(c);var d=document.createElement("canvas");if(d.width=u,d.height=c,this.gifProperties)for(var y=this.gifProperties,p=0;p<y.numFrames;p++){for(var m=this.drawingContext.createImageData(u,c),g=(b=b=w=T=x=void 0,y.frames[p].image),v=m,x=0,T=0;T<v.height;T++)for(var w=0;w<v.width;w++){var b=Math.floor(w*g.width/v.width),b=4*(Math.floor(T*g.height/v.height)*g.width+b);v.data[x++]=g.data[b++],v.data[x++]=g.data[b++],v.data[x++]=g.data[b++],v.data[x++]=g.data[+b]}y.frames[p].image=m}d.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,d.width,d.height),this.canvas.width=this.width=u,this.canvas.height=this.height=c,this.drawingContext.drawImage(d,0,0,u,c,0,0,u,c),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)}},{key:"copy",value:function(){for(var u=arguments.length,c=new Array(u),d=0;d<u;d++)c[d]=arguments[d];n.default.prototype.copy.apply(this,c)}},{key:"mask",value:function(u){var c=this.drawingContext.globalCompositeOperation,d=1,y=[u=u===void 0?this:u,0,0,(d=u instanceof n.default.Renderer?u._pInst._pixelDensity:d)*u.width,d*u.height,0,0,this.width,this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var p=0;p<this.gifProperties.frames.length;p++)this.drawingContext.putImageData(this.gifProperties.frames[p].image,0,0),this.copy.apply(this,y),this.gifProperties.frames[p].image=this.drawingContext.getImageData(0,0,this.width,this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else this.copy.apply(this,y);this.drawingContext.globalCompositeOperation=c,this.setModified(!0)}},{key:"filter",value:function(u,c){o.default.apply(this.canvas,o.default[u],c),this.setModified(!0)}},{key:"blend",value:function(){for(var u=arguments.length,c=new Array(u),d=0;d<u;d++)c[d]=arguments[d];n.default._validateParameters("p5.Image.blend",arguments),n.default.prototype.blend.apply(this,c),this.setModified(!0)}},{key:"setModified",value:function(u){this._modified=u}},{key:"isModified",value:function(){return this._modified}},{key:"save",value:function(u,c){this.gifProperties?n.default.prototype.encodeAndDownloadGif(this,u):n.default.prototype.saveCanvas(this.canvas,u,c)}},{key:"reset",value:function(){var u;this.gifProperties&&((u=this.gifProperties).playing=!0,u.timeSinceStart=0,u.timeDisplayed=0,u.lastChangeTime=0,u.loopCount=0,u.displayIndex=0,this.drawingContext.putImageData(u.frames[0].image,0,0))}},{key:"getCurrentFrame",value:function(){var u;if(this.gifProperties)return(u=this.gifProperties).displayIndex%u.numFrames}},{key:"setFrame",value:function(u){var c;this.gifProperties&&(u<(c=this.gifProperties).numFrames&&0<=u?(c.timeDisplayed=0,c.lastChangeTime=0,c.displayIndex=u,this.drawingContext.putImageData(c.frames[u].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))}},{key:"numFrames",value:function(){if(this.gifProperties)return this.gifProperties.numFrames}},{key:"play",value:function(){this.gifProperties&&(this.gifProperties.playing=!0)}},{key:"pause",value:function(){this.gifProperties&&(this.gifProperties.playing=!1)}},{key:"delay",value:function(u,c){if(this.gifProperties){var d=this.gifProperties;if(c<d.numFrames&&0<=c)d.frames[c].delay=u;else{var y=!0,c=!1,p=void 0;try{for(var m,g=d.frames[Symbol.iterator]();!(y=(m=g.next()).done);y=!0)m.value.delay=u}catch(x){c=!0,p=x}finally{try{y||g.return==null||g.return()}finally{if(c)throw p}}}}}}])&&a(h.prototype,l),f}(),t=n.default.Image,i.default=t},{"../core/main":275,"./filters":296,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],300:[function(t,r,i){t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.filter"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=s(t("../core/main")),o=s(t("./filters"));function s(a){return a&&a.__esModule?a:{default:a}}t("../color/p5.Color"),n.default.prototype.pixels=[],n.default.prototype.blend=function(){for(var a,f=arguments.length,h=new Array(f),l=0;l<f;l++)h[l]=arguments[l];n.default._validateParameters("blend",h),this._renderer?(a=this._renderer).blend.apply(a,h):n.default.Renderer2D.prototype.blend.apply(this,h)},n.default.prototype.copy=function(){for(var a,f,h,l,u,c,d,y,p,m=arguments.length,g=new Array(m),v=0;v<m;v++)g[v]=arguments[v];if(n.default._validateParameters("copy",g),g.length===9)a=g[0],f=g[1],h=g[2],l=g[3],u=g[4],c=g[5],d=g[6],y=g[7],p=g[8];else{if(g.length!==8)throw new Error("Signature not supported");a=this,f=g[0],h=g[1],l=g[2],u=g[3],c=g[4],d=g[5],y=g[6],p=g[7]}n.default.prototype._copyHelper(this,a,f,h,l,u,c,d,y,p)},n.default.prototype._copyHelper=function(a,f,h,l,u,c,d,y,p,m){var g=f.canvas.width/f.width,v=0,x=0;f._renderer&&f._renderer.isP3D&&(v=f.width/2,x=f.height/2),a._renderer&&a._renderer.isP3D?n.default.RendererGL.prototype.image.call(a._renderer,f,h+v,l+x,u,c,d,y,p,m):a.drawingContext.drawImage(f.canvas,g*(h+v),g*(l+x),g*u,g*c,d,y,p,m)},n.default.prototype.getFilterGraphicsLayer=function(){return this._renderer.getFilterGraphicsLayer()},n.default.prototype.filter=function(){for(var a=arguments.length,f=new Array(a),h=0;h<a;h++)f[h]=arguments[h];n.default._validateParameters("filter",arguments);var d=function(){var y,p={shader:void 0,operation:void 0,value:void 0,useWebGL:!0};return(arguments.length<=0?void 0:arguments[0])instanceof n.default.Shader?p.shader=arguments.length<=0?void 0:arguments[0]:(p.operation=arguments.length<=0?void 0:arguments[0],1<arguments.length&&typeof(arguments.length<=1?void 0:arguments[1])=="number"&&(p.value=arguments.length<=1?void 0:arguments[1]),((y=arguments.length-1)<0||arguments.length<=y?void 0:arguments[y])===!1&&(p.useWebGL=!1)),p}.apply(void 0,f),l=d.shader,u=d.operation,c=d.value,d=d.useWebGL;this._renderer.isP3D&&l?n.default.RendererGL.prototype.filter.call(this._renderer,l):d||this._renderer.isP3D?(!d&&this._renderer.isP3D&&console.warn("filter() with useWebGL=false is not supported in WEBGL"),this._renderer.isP3D?n.default.RendererGL.prototype.filter.call(this._renderer,u,c):((l=this.getFilterGraphicsLayer()).copy(this._renderer,0,0,this.width,this.height,-this.width/2,-this.height/2,this.width,this.height),this._renderer.clear(),this._renderer.resetMatrix(),l.filter.apply(l,f),this._renderer._pInst.image(l,0,0),l.clear())):this.canvas!==void 0?o.default.apply(this.canvas,o.default[u],c):o.default.apply(this.elt,o.default[u],c)},n.default.prototype.get=function(a,f,h,l){var u;return n.default._validateParameters("get",arguments),(u=this._renderer).get.apply(u,arguments)},n.default.prototype.loadPixels=function(){for(var a=arguments.length,f=new Array(a),h=0;h<a;h++)f[h]=arguments[h];n.default._validateParameters("loadPixels",f),this._renderer.loadPixels()},n.default.prototype.set=function(a,f,h){this._renderer.set(a,f,h)},n.default.prototype.updatePixels=function(a,f,h,l){n.default._validateParameters("updatePixels",arguments),this.pixels.length!==0&&this._renderer.updatePixels(a,f,h,l)},t=n.default,i.default=t},{"../color/p5.Color":262,"../core/main":275,"./filters":296,"core-js/modules/es.array.filter":155}],301:[function(t,r,i){function n(c){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(c)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=f(t("../core/main")),s=(t("whatwg-fetch"),t("es6-promise/auto"),f(t("fetch-jsonp"))),a=f(t("file-saver"));function f(c){return c&&c.__esModule?c:{default:c}}function h(c){return(h=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(d){return n(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":n(d)})(c)}function l(c){return c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function u(c,d){d&&d!==!0&&d!=="true"||(d="");var y="";return(c=c||"untitled")&&c.includes(".")&&(y=c.split(".").pop()),d&&y!==d&&(y=d,c="".concat(c,".").concat(y)),[c,y]}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),o.default.prototype.loadJSON=function(){for(var c=arguments.length,d=new Array(c),y=0;y<c;y++)d[y]=arguments[y];o.default._validateParameters("loadJSON",d);for(var p,m,g,v=d[0],x={},T="json",w=1;w<d.length;w++){var b=d[w];typeof b=="string"?b!=="jsonp"&&b!=="json"||(T=b):typeof b=="function"?p?m=b:p=b:h(b)==="object"&&(b.hasOwnProperty("jsonpCallback")||b.hasOwnProperty("jsonpCallbackFunction"))&&(T="jsonp",g=b)}var C=this;return this.httpDo(v,"GET",g,T,function(A){for(var M in A)x[M]=A[M];p!==void 0&&p(A),C._decrementPreload()},function(A){if(o.default._friendlyFileLoadError(5,v),!m)throw A;m(A)}),x},o.default.prototype.loadStrings=function(){for(var c=arguments.length,d=new Array(c),y=0;y<c;y++)d[y]=arguments[y];o.default._validateParameters("loadStrings",d);for(var p,m,g=[],v=1;v<d.length;v++){var x=d[v];typeof x=="function"&&(p===void 0?p=x:m===void 0&&(m=x))}var T=this;return o.default.prototype.httpDo.call(this,d[0],"GET","text",function(w){for(var b=w.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),C=0,A=b.length;C<A;C+=32768)Array.prototype.push.apply(g,b.slice(C,Math.min(C+32768,A)));p!==void 0&&p(g),T._decrementPreload()},function(w){if(o.default._friendlyFileLoadError(3,w),!m)throw w;m(w)}),g},o.default.prototype.loadTable=function(c){var d,y,p,m=!1,g=c.substring(c.lastIndexOf(".")+1,c.length);g==="csv"?p=",":g==="ssv"?p=";":g==="tsv"&&(p="	");for(var v=1;v<arguments.length;v++)typeof arguments[v]=="function"?d===void 0?d=arguments[v]:y===void 0&&(y=arguments[v]):typeof arguments[v]=="string"&&(arguments[v]==="header"&&(m=!0),arguments[v]==="csv"?p=",":arguments[v]==="ssv"?p=";":arguments[v]==="tsv"&&(p="	"));var x=new o.default.Table,T=this;return this.httpDo(c,"GET","table",function(w){for(var b,C,A={},M=0,k=[],P=0,F=null,I=function(){A.currentState=M,A.token=""},B=function(){F.push(A.token),I()},H=function(){A.currentState=4,k.push(F),F=null};;){if((b=w[P++])==null){if(A.escaped)throw new Error("Unclosed quote in file.");if(F){B(),H();break}}if(F===null&&(A.escaped=!1,F=[],I()),A.currentState===M){if(b==='"'){A.escaped=!0,A.currentState=1;continue}A.currentState=1}if(A.currentState===1&&A.escaped)if(b==='"')w[P]==='"'?(A.token+='"',P++):(A.escaped=!1,A.currentState=2);else{if(b==="\r")continue;A.token+=b}else b==="\r"?(w[P]===`
`&&P++,B(),H()):b===`
`?(B(),H()):b===p?B():A.currentState===1&&(A.token+=b)}if(m)x.columns=k.shift();else for(var G=0;G<k[0].length;G++)x.columns[G]="null";for(var W=0;W<k.length;W++)(k[W].length!==1||k[W][0]!=="undefined"&&k[W][0]!=="")&&((C=new o.default.TableRow).arr=k[W],C.obj=function(Q,ne){if((ne=ne||[])===void 0)for(var U=0;U<Q.length;U++)ne[U.toString()]=U;return Object.fromEntries(ne.map(function(D,O){return[D,Q[O]]}))}(k[W],x.columns),x.addRow(C));typeof d=="function"&&d(x),T._decrementPreload()},function(w){o.default._friendlyFileLoadError(2,c),y?y(w):console.error(w)}),x},o.default.prototype.loadXML=function(){for(var c=arguments.length,d=new Array(c),y=0;y<c;y++)d[y]=arguments[y];for(var p,m,g=new o.default.XML,v=1;v<d.length;v++){var x=d[v];typeof x=="function"&&(p===void 0?p=x:m===void 0&&(m=x))}var T=this;return this.httpDo(d[0],"GET","xml",function(w){for(var b in w)g[b]=w[b];p!==void 0&&p(g),T._decrementPreload()},function(w){if(o.default._friendlyFileLoadError(1,w),!m)throw w;m(w)}),g},o.default.prototype.loadBytes=function(c,d,y){var p={},m=this;return this.httpDo(c,"GET","arrayBuffer",function(g){p.bytes=new Uint8Array(g),typeof d=="function"&&d(p),m._decrementPreload()},function(g){if(o.default._friendlyFileLoadError(6,c),!y)throw g;y(g)}),p},o.default.prototype.httpGet=function(){o.default._validateParameters("httpGet",arguments);var c=Array.prototype.slice.call(arguments);return c.splice(1,0,"GET"),o.default.prototype.httpDo.apply(this,c)},o.default.prototype.httpPost=function(){o.default._validateParameters("httpPost",arguments);var c=Array.prototype.slice.call(arguments);return c.splice(1,0,"POST"),o.default.prototype.httpDo.apply(this,c)},o.default.prototype.httpDo=function(){for(var c,d,y,p={},m=0,g="text/plain",v=arguments.length-1;0<v&&typeof(v<0||arguments.length<=v?void 0:arguments[v])=="function";v--)m++;var x=arguments.length-m,T=arguments.length<=0?void 0:arguments[0];if(x==2&&typeof T=="string"&&h(arguments.length<=1?void 0:arguments[1])==="object")k=new Request(T,arguments.length<=1?void 0:arguments[1]),d=arguments.length<=2?void 0:arguments[2],y=arguments.length<=3?void 0:arguments[3];else{for(var w,b="GET",C=1;C<arguments.length;C++){var A=C<0||arguments.length<=C?void 0:arguments[C];if(typeof A=="string")A==="GET"||A==="POST"||A==="PUT"||A==="DELETE"?b=A:A==="json"||A==="jsonp"||A==="binary"||A==="arrayBuffer"||A==="xml"||A==="text"||A==="table"?c=A:w=A;else if(typeof A=="number")w=A.toString();else if(h(A)==="object")if(A.hasOwnProperty("jsonpCallback")||A.hasOwnProperty("jsonpCallbackFunction"))for(var M in A)p[M]=A[M];else g=A instanceof o.default.XML?(w=A.serialize(),"application/xml"):(w=JSON.stringify(A),"application/json");else typeof A=="function"&&(d?y=A:d=A)}var x=b==="GET"?new Headers:new Headers({"Content-Type":g}),k=new Request(T,{method:b,mode:"cors",body:w,headers:x})}return(x=(x=(c=c||(T.includes("json")?"json":T.includes("xml")?"xml":"text"))==="jsonp"?(0,s.default)(T,p):fetch(k)).then(function(P){if(!P.ok)throw(F=new Error(P.body)).status=P.status,F.ok=!1,F;var F=0;switch((F=c!=="jsonp"?P.headers.get("content-length"):F)&&64e6<F&&o.default._friendlyFileLoadError(7,T),c){case"json":case"jsonp":return P.json();case"binary":return P.blob();case"arrayBuffer":return P.arrayBuffer();case"xml":return P.text().then(function(I){return I=new DOMParser().parseFromString(I,"text/xml"),new o.default.XML(I.documentElement)});default:return P.text()}})).then(d||function(){}),x.catch(y||console.error),x},window.URL=window.URL||window.webkitURL,o.default.prototype._pWriters=[],o.default.prototype.createWriter=function(c,d){var y,p;for(p in o.default.prototype._pWriters)if(o.default.prototype._pWriters[p].name===c)return y=new o.default.PrintWriter(c+this.millis(),d),o.default.prototype._pWriters.push(y),y;return y=new o.default.PrintWriter(c,d),o.default.prototype._pWriters.push(y),y},o.default.PrintWriter=function(c,d){var y=this;this.name=c,this.content="",this.write=function(p){this.content+=p},this.print=function(p){this.content+="".concat(p,`
`)},this.clear=function(){this.content=""},this.close=function(){var p,m=[];for(p in m.push(this.content),o.default.prototype.writeFile(m,c,d),o.default.prototype._pWriters)o.default.prototype._pWriters[p].name===this.name&&o.default.prototype._pWriters.splice(p,1);y.clear(),y={}}},o.default.prototype.save=function(c,d,y){var p=arguments,m=(this._curElement||this).elt;if(p.length===0)o.default.prototype.saveCanvas(m);else if(p[0]instanceof o.default.Renderer||p[0]instanceof o.default.Graphics)o.default.prototype.saveCanvas(p[0].elt,p[1],p[2]);else if(p.length===1&&typeof p[0]=="string")o.default.prototype.saveCanvas(m,p[0]);else switch(u(p[1],p[2])[1]){case"json":return void o.default.prototype.saveJSON(p[0],p[1],p[2]);case"txt":return void o.default.prototype.saveStrings(p[0],p[1],p[2]);default:p[0]instanceof Array?o.default.prototype.saveStrings(p[0],p[1],p[2]):p[0]instanceof o.default.Table?o.default.prototype.saveTable(p[0],p[1],p[2]):p[0]instanceof o.default.Image?o.default.prototype.saveCanvas(p[0].canvas,p[1]):p[0]instanceof o.default.SoundFile&&o.default.prototype.saveSound(p[0],p[1],p[2],p[3])}},o.default.prototype.saveJSON=function(c,d,y){o.default._validateParameters("saveJSON",arguments),y=y?JSON.stringify(c):JSON.stringify(c,void 0,2),this.saveStrings(y.split(`
`),d,"json")},o.default.prototype.saveJSONObject=o.default.prototype.saveJSON,o.default.prototype.saveJSONArray=o.default.prototype.saveJSON,o.default.prototype.saveStrings=function(c,d,y,p){o.default._validateParameters("saveStrings",arguments);for(var m=this.createWriter(d,y||"txt"),g=0;g<c.length;g++)p?m.write(c[g]+`\r
`):m.write(c[g]+`
`);m.close(),m.clear()},o.default.prototype.saveTable=function(c,d,y){o.default._validateParameters("saveTable",arguments),p=y===void 0?d.substring(d.lastIndexOf(".")+1,d.length):y;var p,m=this.createWriter(d,p),g=c.columns,v=p==="tsv"?"	":",";if(p!=="html"){if(g[0]!=="0"){for(var x=0;x<g.length;x++)x<g.length-1?m.write(g[x]+v):m.write(g[x]);m.write(`
`)}for(var T=0;T<c.rows.length;T++){for(var w=void 0,w=0;w<c.rows[T].arr.length;w++)w<c.rows[T].arr.length-1?p==="csv"&&String(c.rows[T].arr[w]).includes(",")?m.write('"'+c.rows[T].arr[w]+'"'+v):m.write(c.rows[T].arr[w]+v):p==="csv"&&String(c.rows[T].arr[w]).includes(",")?m.write('"'+c.rows[T].arr[w]+'"'):m.write(c.rows[T].arr[w]);m.write(`
`)}}else{if(m.print("<html>"),m.print("<head>"),m.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),m.print("</head>"),m.print("<body>"),m.print("  <table>"),g[0]!=="0"){m.print("    <tr>");for(var b=0;b<g.length;b++){var C=l(g[b]);m.print("      <td>".concat(C)),m.print("      </td>")}m.print("    </tr>")}for(var A=0;A<c.rows.length;A++){m.print("    <tr>");for(var M=0;M<c.columns.length;M++){var k=l(c.rows[A].getString(M));m.print("      <td>".concat(k)),m.print("      </td>")}m.print("    </tr>")}m.print("  </table>"),m.print("</body>"),m.print("</html>")}m.close(),m.clear()},o.default.prototype.writeFile=function(m,d,y){var p="application/octet-stream",m=(o.default.prototype._isSafari()&&(p="text/plain"),new Blob(m,{type:p}));o.default.prototype.downloadFile(m,d,y)},o.default.prototype.downloadFile=function(c,m,g){var p,m=u(m,g),g=m[0];c instanceof Blob?a.default.saveAs(c,g):((p=document.createElement("a")).href=c,p.download=g,p.onclick=function(v){document.body.removeChild(v.target),v.stopPropagation()},p.style.display="none",document.body.appendChild(p),o.default.prototype._isSafari()&&(c=(c=`Hello, Safari user! To download this file...
1. Go to File --> Save As.
2. Choose "Page Source" as the Format.
`)+'3. Name it with this extension: ."'.concat(m[1],'"'),alert(c)),p.click())},o.default.prototype._checkFileExtension=u,o.default.prototype._isSafari=function(){return 0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")},t=o.default,i.default=t},{"../core/friendly_errors/fes_core":266,"../core/friendly_errors/file_errors":267,"../core/friendly_errors/validate_params":270,"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.last-index-of":163,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.splice":167,"core-js/modules/es.function.name":168,"core-js/modules/es.object.from-entries":177,"core-js/modules/es.object.to-string":182,"core-js/modules/es.promise":183,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint8-array":234,"core-js/modules/web.dom-collections.iterator":238,"core-js/modules/web.url":240,"es6-promise/auto":241,"fetch-jsonp":243,"file-saver":244,"whatwg-fetch":253}],302:[function(t,r,i){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=(t=t("../core/main"))&&t.__esModule?t:{default:t};function o(s,a){for(var f=0;f<a.length;f++){var h=a[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(s,h.key,h)}}n.default.Table=function(){function s(h){if(!(this instanceof s))throw new TypeError("Cannot call a class as a function");this.columns=[],this.rows=[]}var a,f;return a=s,(f=[{key:"addRow",value:function(h){if(h=h||new n.default.TableRow,h.arr===void 0||h.obj===void 0)throw new Error("invalid TableRow: ".concat(h));return(h.table=this).rows.push(h),h}},{key:"removeRow",value:function(h){this.rows[h].table=null,h=this.rows.splice(h+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(h)}},{key:"getRow",value:function(h){return this.rows[h]}},{key:"getRows",value:function(){return this.rows}},{key:"findRow",value:function(h,l){if(typeof l=="string"){for(var u=0;u<this.rows.length;u++)if(this.rows[u].obj[l]===h)return this.rows[u]}else for(var c=0;c<this.rows.length;c++)if(this.rows[c].arr[l]===h)return this.rows[c];return null}},{key:"findRows",value:function(h,l){var u=[];if(typeof l=="string")for(var c=0;c<this.rows.length;c++)this.rows[c].obj[l]===h&&u.push(this.rows[c]);else for(var d=0;d<this.rows.length;d++)this.rows[d].arr[l]===h&&u.push(this.rows[d]);return u}},{key:"matchRow",value:function(h,l){if(typeof l=="number"){for(var u=0;u<this.rows.length;u++)if(this.rows[u].arr[l].match(h))return this.rows[u]}else for(var c=0;c<this.rows.length;c++)if(this.rows[c].obj[l].match(h))return this.rows[c];return null}},{key:"matchRows",value:function(h,l){var u=[];if(typeof l=="number")for(var c=0;c<this.rows.length;c++)this.rows[c].arr[l].match(h)&&u.push(this.rows[c]);else for(var d=0;d<this.rows.length;d++)this.rows[d].obj[l].match(h)&&u.push(this.rows[d]);return u}},{key:"getColumn",value:function(h){var l=[];if(typeof h=="string")for(var u=0;u<this.rows.length;u++)l.push(this.rows[u].obj[h]);else for(var c=0;c<this.rows.length;c++)l.push(this.rows[c].arr[h]);return l}},{key:"clearRows",value:function(){delete this.rows,this.rows=[]}},{key:"addColumn",value:function(h){this.columns.push(h||null)}},{key:"getColumnCount",value:function(){return this.columns.length}},{key:"getRowCount",value:function(){return this.rows.length}},{key:"removeTokens",value:function(h,l){for(var u=[],c=0;c<h.length;c++)u.push(h.charAt(c).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var d=new RegExp(u.join("|"),"g");if(l===void 0)for(var y=0;y<this.columns.length;y++)for(var p=0;p<this.rows.length;p++){var m=(m=this.rows[p].arr[y]).replace(d,"");this.rows[p].arr[y]=m,this.rows[p].obj[this.columns[y]]=m}else if(typeof l=="string")for(var g=0;g<this.rows.length;g++){var v=(v=this.rows[g].obj[l]).replace(d,""),x=(this.rows[g].obj[l]=v,this.columns.indexOf(l));this.rows[g].arr[x]=v}else for(var T=0;T<this.rows.length;T++){var w=(w=this.rows[T].arr[l]).replace(d,"");this.rows[T].arr[l]=w,this.rows[T].obj[this.columns[l]]=w}}},{key:"trim",value:function(h){var l=new RegExp(" ","g");if(h===void 0)for(var u=0;u<this.columns.length;u++)for(var c=0;c<this.rows.length;c++){var d=(d=this.rows[c].arr[u]).replace(l,"");this.rows[c].arr[u]=d,this.rows[c].obj[this.columns[u]]=d}else if(typeof h=="string")for(var y=0;y<this.rows.length;y++){var p=(p=this.rows[y].obj[h]).replace(l,""),m=(this.rows[y].obj[h]=p,this.columns.indexOf(h));this.rows[y].arr[m]=p}else for(var g=0;g<this.rows.length;g++){var v=(v=this.rows[g].arr[h]).replace(l,"");this.rows[g].arr[h]=v,this.rows[g].obj[this.columns[h]]=v}}},{key:"removeColumn",value:function(c){typeof c=="string"?u=this.columns.indexOf(l=c):l=this.columns[u=c];var l,u,c=this.columns.splice(u+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(c);for(var d=0;d<this.rows.length;d++){var y=this.rows[d].arr,p=y.splice(u+1,y.length);y.pop(),this.rows[d].arr=y.concat(p),delete this.rows[d].obj[l]}}},{key:"set",value:function(h,l,u){this.rows[h].set(l,u)}},{key:"setNum",value:function(h,l,u){this.rows[h].setNum(l,u)}},{key:"setString",value:function(h,l,u){this.rows[h].setString(l,u)}},{key:"get",value:function(h,l){return this.rows[h].get(l)}},{key:"getNum",value:function(h,l){return this.rows[h].getNum(l)}},{key:"getString",value:function(h,l){return this.rows[h].getString(l)}},{key:"getObject",value:function(h){for(var l,u={},c=0;c<this.rows.length;c++)if(l=this.rows[c].obj,typeof h=="string"){if(!(0<=this.columns.indexOf(h)))throw new Error('This table has no column named "'.concat(h,'"'));u[l[h]]=l}else u[c]=this.rows[c].obj;return u}},{key:"getArray",value:function(){for(var h=[],l=0;l<this.rows.length;l++)h.push(this.rows[l].arr);return h}}])&&o(a.prototype,f),s}(),t=n.default,i.default=t},{"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.join":162,"core-js/modules/es.array.splice":167,"core-js/modules/es.regexp.constructor":186,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.match":193,"core-js/modules/es.string.replace":196}],303:[function(t,r,i){t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t};function n(o,s){for(var a=0;a<s.length;a++){var f=s[a];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(o,f.key,f)}}t.default.TableRow=function(){function o(f,h){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");var l=[];f&&(l=f.split(h=h||",")),this.arr=l,this.obj=Object.fromEntries(l.entries()),this.table=null}var s,a;return s=o,(a=[{key:"set",value:function(f,h){if(typeof f=="string"){var l=this.table.columns.indexOf(f);if(!(0<=l))throw new Error('This table has no column named "'.concat(f,'"'));this.obj[f]=h,this.arr[l]=h}else{if(!(f<this.table.columns.length))throw new Error("Column #".concat(f," is out of the range of this table"));this.arr[f]=h,l=this.table.columns[f],this.obj[l]=h}}},{key:"setNum",value:function(f,h){h=parseFloat(h),this.set(f,h)}},{key:"setString",value:function(f,h){h=h.toString(),this.set(f,h)}},{key:"get",value:function(f){return(typeof f=="string"?this.obj:this.arr)[f]}},{key:"getNum",value:function(f){var h=parseFloat(typeof f=="string"?this.obj[f]:this.arr[f]);if(h.toString()==="NaN")throw"Error: ".concat(this.obj[f]," is NaN (Not a Number)");return h}},{key:"getString",value:function(f){return(typeof f=="string"?this.obj:this.arr)[f].toString()}}])&&n(s.prototype,a),o}(),t=t.default,i.default=t},{"../core/main":275,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.from-entries":177,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.split":198,"core-js/modules/web.dom-collections.iterator":238}],304:[function(t,r,i){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=(t=t("../core/main"))&&t.__esModule?t:{default:t};function o(a,f){for(var h=0;h<f.length;h++){var l=f[h];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(a,l.key,l)}}function s(a){for(var f=[],h=0;h<a.length;h++)f.push(new n.default.XML(a[h]));return f}n.default.XML=function(){function a(l){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");l?this.DOM=l:(l=document.implementation.createDocument(null,"doc"),this.DOM=l.createElement("root"))}var f,h;return f=a,(h=[{key:"getParent",value:function(){return new n.default.XML(this.DOM.parentElement)}},{key:"getName",value:function(){return this.DOM.tagName}},{key:"setName",value:function(l){var u=this.DOM.innerHTML,c=this.DOM.attributes,d=document.implementation.createDocument(null,"default").createElement(l);d.innerHTML=u;for(var y=0;y<c.length;y++)d.setAttribute(c[y].nodeName,c.nodeValue);this.DOM=d}},{key:"hasChildren",value:function(){return 0<this.DOM.children.length}},{key:"listChildren",value:function(){for(var l=[],u=0;u<this.DOM.childNodes.length;u++)l.push(this.DOM.childNodes[u].nodeName);return l}},{key:"getChildren",value:function(l){return s(l?this.DOM.getElementsByTagName(l):this.DOM.children)}},{key:"getChild",value:function(l){if(typeof l!="string")return new n.default.XML(this.DOM.children[l]);var u=!0,c=!1,d=void 0;try{for(var y,p=this.DOM.children[Symbol.iterator]();!(u=(y=p.next()).done);u=!0){var m=y.value;if(m.tagName===l)return new n.default.XML(m)}}catch(g){c=!0,d=g}finally{try{u||p.return==null||p.return()}finally{if(c)throw d}}}},{key:"addChild",value:function(l){l instanceof n.default.XML&&this.DOM.appendChild(l.DOM)}},{key:"removeChild",value:function(l){var u=-1;if(typeof l=="string"){for(var c=0;c<this.DOM.children.length;c++)if(this.DOM.children[c].tagName===l){u=c;break}}else u=l;u!==-1&&this.DOM.removeChild(this.DOM.children[u])}},{key:"getAttributeCount",value:function(){return this.DOM.attributes.length}},{key:"listAttributes",value:function(){var l=[],u=!0,c=!1,d=void 0;try{for(var y,p=this.DOM.attributes[Symbol.iterator]();!(u=(y=p.next()).done);u=!0){var m=y.value;l.push(m.nodeName)}}catch(g){c=!0,d=g}finally{try{u||p.return==null||p.return()}finally{if(c)throw d}}return l}},{key:"hasAttribute",value:function(l){var u={},c=!0,d=!1,y=void 0;try{for(var p,m=this.DOM.attributes[Symbol.iterator]();!(c=(p=m.next()).done);c=!0){var g=p.value;u[g.nodeName]=g.nodeValue}}catch(v){d=!0,y=v}finally{try{c||m.return==null||m.return()}finally{if(d)throw y}}return!!u[l]}},{key:"getNum",value:function(l,u){var c={},d=!0,y=!1,p=void 0;try{for(var m,g=this.DOM.attributes[Symbol.iterator]();!(d=(m=g.next()).done);d=!0){var v=m.value;c[v.nodeName]=v.nodeValue}}catch(x){y=!0,p=x}finally{try{d||g.return==null||g.return()}finally{if(y)throw p}}return Number(c[l])||u||0}},{key:"getString",value:function(l,u){var c={},d=!0,y=!1,p=void 0;try{for(var m,g=this.DOM.attributes[Symbol.iterator]();!(d=(m=g.next()).done);d=!0){var v=m.value;c[v.nodeName]=v.nodeValue}}catch(x){y=!0,p=x}finally{try{d||g.return==null||g.return()}finally{if(y)throw p}}return c[l]?String(c[l]):u||null}},{key:"setAttribute",value:function(l,u){this.DOM.setAttribute(l,u)}},{key:"getContent",value:function(l){var u=this.DOM.textContent;return(u=u.replace(/\s\s+/g,","))||l||null}},{key:"setContent",value:function(l){this.DOM.children.length||(this.DOM.textContent=l)}},{key:"serialize",value:function(){return new XMLSerializer().serializeToString(this.DOM)}}])&&o(f.prototype,h),a}(),t=n.default,i.default=t},{"../core/main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.number.constructor":173,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.replace":196,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],305:[function(t,r,i){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=(t=t("../core/main"))&&t.__esModule?t:{default:t};n.default.prototype.abs=Math.abs,n.default.prototype.ceil=Math.ceil,n.default.prototype.constrain=function(o,s,a){return n.default._validateParameters("constrain",arguments),Math.max(Math.min(o,a),s)},n.default.prototype.dist=function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return n.default._validateParameters("dist",s),s.length===4?Math.hypot(s[2]-s[0],s[3]-s[1]):s.length===6?Math.hypot(s[3]-s[0],s[4]-s[1],s[5]-s[2]):void 0},n.default.prototype.exp=Math.exp,n.default.prototype.floor=Math.floor,n.default.prototype.lerp=function(o,s,a){return n.default._validateParameters("lerp",arguments),a*(s-o)+o},n.default.prototype.log=Math.log,n.default.prototype.mag=function(o,s){return n.default._validateParameters("mag",arguments),Math.hypot(o,s)},n.default.prototype.map=function(o,s,a,f,h,l){return n.default._validateParameters("map",arguments),o=(o-s)/(a-s)*(h-f)+f,l?f<h?this.constrain(o,f,h):this.constrain(o,h,f):o},n.default.prototype.max=function(){for(var o=function(h){var l=-1/0,u=!0,c=!1,d=void 0;try{for(var y,p=h[Symbol.iterator]();!(u=(y=p.next()).done);u=!0)var m=y.value,l=l<m?m:l}catch(g){c=!0,d=g}finally{try{u||p.return==null||p.return()}finally{if(c)throw d}}return l},s=arguments.length,a=new Array(s),f=0;f<s;f++)a[f]=arguments[f];return a[0]instanceof Array?o(a[0]):o(a)},n.default.prototype.min=function(){for(var o=function(h){var l=1/0,u=!0,c=!1,d=void 0;try{for(var y,p=h[Symbol.iterator]();!(u=(y=p.next()).done);u=!0)var m=y.value,l=m<l?m:l}catch(g){c=!0,d=g}finally{try{u||p.return==null||p.return()}finally{if(c)throw d}}return l},s=arguments.length,a=new Array(s),f=0;f<s;f++)a[f]=arguments[f];return a[0]instanceof Array?o(a[0]):o(a)},n.default.prototype.norm=function(o,s,a){return n.default._validateParameters("norm",arguments),this.map(o,s,a,0,1)},n.default.prototype.pow=Math.pow,n.default.prototype.round=function(o,s){return s?(s=Math.pow(10,s),Math.round(o*s)/s):Math.round(o)},n.default.prototype.sq=function(o){return o*o},n.default.prototype.sqrt=Math.sqrt,n.default.prototype.fract=function(f){n.default._validateParameters("fract",arguments);var s,a=0,f=Number(f);return isNaN(f)||Math.abs(f)===1/0?f:(f<0&&(f=-f,a=1),String(f).includes(".")&&!String(f).includes("e")?(s=String(f),s=Number("0"+s.slice(s.indexOf("."))),Math.abs(a-s)):f<1?Math.abs(a-f):0)},t=n.default,i.default=t},{"../core/main":275,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.math.hypot":170,"core-js/modules/es.number.constructor":173,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],306:[function(t,r,i){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=(t=t("../core/main"))&&t.__esModule?t:{default:t};function o(a,f,h){return(o=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?Reflect.construct:function(l,u,c){var d=[null];return d.push.apply(d,u),u=new(Function.bind.apply(l,d)),c&&s(u,c.prototype),u}).apply(null,arguments)}function s(a,f){return(s=Object.setPrototypeOf||function(h,l){return h.__proto__=l,h})(a,f)}n.default.prototype.createVector=function(a,f,h){return this instanceof n.default?o(n.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new n.default.Vector(a,f,h)},t=n.default,i.default=t},{"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.regexp.to-string":188}],307:[function(h,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,h=(h=h("../core/main"))&&h.__esModule?h:{default:h};function n(l){return .5*(1-Math.cos(l*Math.PI))}var o,s=4095,a=4,f=.5,h=(h.default.prototype.noise=function(l){var u=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(o==null){o=new Array(4096);for(var d=0;d<4096;d++)o[d]=Math.random()}l<0&&(l=-l),u<0&&(u=-u),c<0&&(c=-c);for(var y,p,m=Math.floor(l),g=Math.floor(u),v=Math.floor(c),x=l-m,T=u-g,w=c-v,b=0,C=.5,A=0;A<a;A++){var M=m+(g<<4)+(v<<8),k=n(x),P=n(T),F=o[M&s];F+=k*(o[M+1&s]-F),y=o[M+16&s],F+=P*((y+=k*(o[M+16+1&s]-y))-F),y=o[(M+=256)&s],y+=k*(o[M+1&s]-y),p=o[M+16&s],y+=P*((p+=k*(o[M+16+1&s]-p))-y),b+=(F+=n(w)*(y-F))*C,C*=f,m<<=1,g<<=1,v<<=1,1<=(x*=2)&&(m++,x--),1<=(T*=2)&&(g++,T--),1<=(w*=2)&&(v++,w--)}return b},h.default.prototype.noiseDetail=function(l,u){0<l&&(a=l),0<u&&(f=u)},h.default.prototype.noiseSeed=function(l){d=4294967296;var u,c,d,y={setSeed:function(m){c=u=(m??Math.random()*d)>>>0},getSeed:function(){return u},rand:function(){return(c=(1664525*c+1013904223)%d)/d}};y.setSeed(l),o=new Array(4096);for(var p=0;p<4096;p++)o[p]=y.rand()},h.default);i.default=h},{"../core/main":275}],308:[function(t,r,i){function n(d){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(d)}function o(d){return(o=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(y){return n(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":n(y)})(d)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.number.is-finite"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.number.is-finite"),t("core-js/modules/es.string.sub"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(c=t("../core/main"))&&c.__esModule?c:{default:c},a=function(d){if(d&&d.__esModule)return d;if(d===null||o(d)!=="object"&&typeof d!="function")return{default:d};var y=f();if(y&&y.has(d))return y.get(d);var p,m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in d){var v;Object.prototype.hasOwnProperty.call(d,p)&&((v=g?Object.getOwnPropertyDescriptor(d,p):null)&&(v.get||v.set)?Object.defineProperty(m,p,v):m[p]=d[p])}return m.default=d,y&&y.set(d,m),m}(t("../core/constants"));function f(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,f=function(){return d},d)}function h(d,y){for(var p=0;p<y.length;p++){var m=y[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(d,m.key,m)}}function l(d,y){return d!==0&&(this.x=this.x%d),y!==0&&(this.y=this.y%y),this}function u(d,y,p){return d!==0&&(this.x=this.x%d),y!==0&&(this.y=this.y%y),p!==0&&(this.z=this.z%p),this}s.default.Vector=function(){function d(){var T=this,g=d;if(!(T instanceof g))throw new TypeError("Cannot call a class as a function");var v,x,T=typeof(arguments.length<=0?void 0:arguments[0])=="function"?(this.isPInst=!0,this._fromRadians=arguments.length<=0?void 0:arguments[0],this._toRadians=arguments.length<=1?void 0:arguments[1],v=(arguments.length<=2?void 0:arguments[2])||0,x=(arguments.length<=3?void 0:arguments[3])||0,(arguments.length<=4?void 0:arguments[4])||0):(v=(arguments.length<=0?void 0:arguments[0])||0,x=(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0);this.x=v,this.y=x,this.z=T}var y,p,m;return y=d,m=[{key:"fromAngle",value:function(g,v){return new s.default.Vector((v=v===void 0?1:v)*Math.cos(g),v*Math.sin(g),0)}},{key:"fromAngles",value:function(C,w,x){x===void 0&&(x=1);var T=Math.cos(w),w=Math.sin(w),b=Math.cos(C),C=Math.sin(C);return new s.default.Vector(x*C*w,-x*b,x*C*T)}},{key:"random2D",value:function(){return this.fromAngle(Math.random()*a.TWO_PI)}},{key:"random3D",value:function(){var g=Math.random()*a.TWO_PI,v=2*Math.random()-1,T=Math.sqrt(1-v*v),x=T*Math.cos(g),T=T*Math.sin(g);return new s.default.Vector(x,T,v)}},{key:"copy",value:function(g){return g.copy(g)}},{key:"add",value:function(g,v,x){return x?x.set(g):(x=g.copy(),arguments.length===3&&s.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),x.add(v),x}},{key:"rem",value:function(g,v){if(g instanceof s.default.Vector&&v instanceof s.default.Vector)return(g=g.copy()).rem(v),g}},{key:"sub",value:function(g,v,x){return x?x.set(g):(x=g.copy(),arguments.length===3&&s.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),x.sub(v),x}},{key:"mult",value:function(g,v,x){return x?x.set(g):(x=g.copy(),arguments.length===3&&s.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),x.mult(v),x}},{key:"rotate",value:function(g,v,x){return arguments.length===2?x=g.copy():(x instanceof s.default.Vector||s.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),x.set(g)),x.rotate(v),x}},{key:"div",value:function(g,v,x){return x?x.set(g):(x=g.copy(),arguments.length===3&&s.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),x.div(v),x}},{key:"dot",value:function(g,v){return g.dot(v)}},{key:"cross",value:function(g,v){return g.cross(v)}},{key:"dist",value:function(g,v){return g.dist(v)}},{key:"lerp",value:function(g,v,x,T){return T?T.set(g):(T=g.copy(),arguments.length===4&&s.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),T.lerp(v,x),T}},{key:"slerp",value:function(g,v,x,T){return T?T.set(g):(T=g.copy(),arguments.length===4&&s.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.slerp")),T.slerp(v,x),T}},{key:"mag",value:function(g){return g.mag()}},{key:"magSq",value:function(g){return g.magSq()}},{key:"normalize",value:function(g,v){return arguments.length<2?v=g.copy():(v instanceof s.default.Vector||s.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),v.set(g)),v.normalize()}},{key:"limit",value:function(g,v,x){return arguments.length<3?x=g.copy():(x instanceof s.default.Vector||s.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.limit"),x.set(g)),x.limit(v)}},{key:"setMag",value:function(g,v,x){return arguments.length<3?x=g.copy():(x instanceof s.default.Vector||s.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.setMag"),x.set(g)),x.setMag(v)}},{key:"heading",value:function(g){return g.heading()}},{key:"angleBetween",value:function(g,v){return g.angleBetween(v)}},{key:"reflect",value:function(g,v,x){return arguments.length<3?x=g.copy():(x instanceof s.default.Vector||s.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.reflect"),x.set(g)),x.reflect(v)}},{key:"array",value:function(g){return g.array()}},{key:"equals",value:function(g,v){var x;return g instanceof s.default.Vector?x=g:g instanceof Array?x=new s.default.Vector().set(g):s.default._friendlyError("The v1 parameter should be of type Array or p5.Vector","p5.Vector.equals"),x.equals(v)}}],(p=[{key:"toString",value:function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")}},{key:"set",value:function(g,v,x){return g instanceof s.default.Vector?(this.x=g.x||0,this.y=g.y||0,this.z=g.z||0):Array.isArray(g)?(this.x=g[0]||0,this.y=g[1]||0,this.z=g[2]||0):(this.x=g||0,this.y=v||0,this.z=x||0),this}},{key:"copy",value:function(){return this.isPInst?new s.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new s.default.Vector(this.x,this.y,this.z)}},{key:"add",value:function(g,v,x){return g instanceof s.default.Vector?(this.x+=g.x||0,this.y+=g.y||0,this.z+=g.z||0):Array.isArray(g)?(this.x+=g[0]||0,this.y+=g[1]||0,this.z+=g[2]||0):(this.x+=g||0,this.y+=v||0,this.z+=x||0),this}},{key:"rem",value:function(g,v,x){var T;if(g instanceof s.default.Vector){if([g.x,g.y,g.z].every(Number.isFinite))return w=parseFloat(g.x),b=parseFloat(g.y),T=parseFloat(g.z),u.call(this,w,b,T)}else if(Array.isArray(g)){if(g.every(function(C){return Number.isFinite(C)}))return g.length===2?l.call(this,g[0],g[1]):g.length===3?u.call(this,g[0],g[1],g[2]):void 0}else if(arguments.length===1){if(Number.isFinite(g)&&g!==0)return this.x=this.x%g,this.y=this.y%g,this.z=this.z%g,this}else if(arguments.length===2){var w=Array.prototype.slice.call(arguments);if(w.every(function(C){return Number.isFinite(C)})&&w.length===2)return l.call(this,w[0],w[1])}else if(arguments.length===3){var b=Array.prototype.slice.call(arguments);if(b.every(function(C){return Number.isFinite(C)})&&b.length===3)return u.call(this,b[0],b[1],b[2])}}},{key:"sub",value:function(g,v,x){return g instanceof s.default.Vector?(this.x-=g.x||0,this.y-=g.y||0,this.z-=g.z||0):Array.isArray(g)?(this.x-=g[0]||0,this.y-=g[1]||0,this.z-=g[2]||0):(this.x-=g||0,this.y-=v||0,this.z-=x||0),this}},{key:"mult",value:function(g,v,x){var T;return g instanceof s.default.Vector?Number.isFinite(g.x)&&Number.isFinite(g.y)&&Number.isFinite(g.z)&&typeof g.x=="number"&&typeof g.y=="number"&&typeof g.z=="number"?(this.x*=g.x,this.y*=g.y,this.z*=g.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):Array.isArray(g)?g.every(function(w){return Number.isFinite(w)})&&g.every(function(w){return typeof w=="number"})?g.length===1?(this.x*=g[0],this.y*=g[0],this.z*=g[0]):g.length===2?(this.x*=g[0],this.y*=g[1]):g.length===3&&(this.x*=g[0],this.y*=g[1],this.z*=g[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(T=Array.prototype.slice.call(arguments)).every(function(w){return Number.isFinite(w)})&&T.every(function(w){return typeof w=="number"})?(arguments.length===1&&(this.x*=g,this.y*=g,this.z*=g),arguments.length===2&&(this.x*=g,this.y*=v),arguments.length===3&&(this.x*=g,this.y*=v,this.z*=x)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this}},{key:"div",value:function(g,v,x){if(g instanceof s.default.Vector)if(Number.isFinite(g.x)&&Number.isFinite(g.y)&&Number.isFinite(g.z)&&typeof g.x=="number"&&typeof g.y=="number"&&typeof g.z=="number"){var T=g.z===0&&this.z===0;if(g.x===0||g.y===0||!T&&g.z===0)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=g.x,this.y/=g.y,T||(this.z/=g.z)}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(Array.isArray(g))if(g.every(function(w){return Number.isFinite(w)})&&g.every(function(w){return typeof w=="number"})){if(g.some(function(w){return w===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;g.length===1?(this.x/=g[0],this.y/=g[0],this.z/=g[0]):g.length===2?(this.x/=g[0],this.y/=g[1]):g.length===3&&(this.x/=g[0],this.y/=g[1],this.z/=g[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(T=Array.prototype.slice.call(arguments),T.every(function(w){return Number.isFinite(w)})&&T.every(function(w){return typeof w=="number"})){if(T.some(function(w){return w===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;arguments.length===1&&(this.x/=g,this.y/=g,this.z/=g),arguments.length===2&&(this.x/=g,this.y/=v),arguments.length===3&&(this.x/=g,this.y/=v,this.z/=x)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this}},{key:"mag",value:function(){return Math.sqrt(this.magSq())}},{key:"magSq",value:function(){var g=this.x,v=this.y,x=this.z;return g*g+v*v+x*x}},{key:"dot",value:function(g,v,x){return g instanceof s.default.Vector?this.dot(g.x,g.y,g.z):this.x*(g||0)+this.y*(v||0)+this.z*(x||0)}},{key:"cross",value:function(T){var v=this.y*T.z-this.z*T.y,x=this.z*T.x-this.x*T.z,T=this.x*T.y-this.y*T.x;return this.isPInst?new s.default.Vector(this._fromRadians,this._toRadians,v,x,T):new s.default.Vector(v,x,T)}},{key:"dist",value:function(g){return g.copy().sub(this).mag()}},{key:"normalize",value:function(){var g=this.mag();return g!==0&&this.mult(1/g),this}},{key:"limit",value:function(g){var v=this.magSq();return g*g<v&&this.div(Math.sqrt(v)).mult(g),this}},{key:"setMag",value:function(g){return this.normalize().mult(g)}},{key:"heading",value:function(){var g=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(g):g}},{key:"setHeading",value:function(g){this.isPInst&&(g=this._toRadians(g));var v=this.mag();return this.x=v*Math.cos(g),this.y=v*Math.sin(g),this}},{key:"rotate",value:function(v){var v=this.heading()+v,x=(this.isPInst&&(v=this._toRadians(v)),this.mag());return this.x=Math.cos(v)*x,this.y=Math.sin(v)*x,this}},{key:"angleBetween",value:function(g){var v;return this.magSq()*g.magSq()==0?NaN:(v=this.cross(g),g=Math.atan2(v.mag(),this.dot(g))*Math.sign(v.z||1),this.isPInst?this._fromRadians(g):g)}},{key:"lerp",value:function(g,v,x,T){return g instanceof s.default.Vector?this.lerp(g.x,g.y,g.z,v):(this.x+=(g-this.x)*T||0,this.y+=(v-this.y)*T||0,this.z+=(x-this.z)*T||0,this)}},{key:"slerp",value:function(g,v){if(v!==0){if(v===1)return this.set(g);var x=this.mag(),T=g.mag();if(x*T==0)this.mult(1-v).add(g.x*v,g.y*v,g.z*v);else{var w=this.cross(g),b=w.mag(),C=Math.atan2(b,this.dot(g));if(0<b)w.x/=b,w.y/=b,w.z/=b;else{if(C<.5*Math.PI)return this.mult(1-v).add(g.x*v,g.y*v,g.z*v),this;this.z===0&&g.z===0?w.set(0,0,1):this.x!==0?w.set(this.y,-this.x,0).normalize():w.set(1,0,0)}b=w.cross(this),g=1-v+v*T/x,w=g*Math.cos(v*C),T=g*Math.sin(v*C),this.x=this.x*w+b.x*T,this.y=this.y*w+b.y*T,this.z=this.z*w+b.z*T}}return this}},{key:"reflect",value:function(g){return g.normalize(),this.sub(g.mult(2*this.dot(g)))}},{key:"array",value:function(){return[this.x||0,this.y||0,this.z||0]}},{key:"equals",value:function(b,v,x){var T,w,b=b instanceof s.default.Vector?(T=b.x||0,w=b.y||0,b.z||0):Array.isArray(b)?(T=b[0]||0,w=b[1]||0,b[2]||0):(T=b||0,w=v||0,x||0);return this.x===T&&this.y===w&&this.z===b}}])&&h(y.prototype,p),m&&h(y,m),d}();var c=s.default.Vector;i.default=c},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.every":153,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.some":166,"core-js/modules/es.math.sign":172,"core-js/modules/es.number.constructor":173,"core-js/modules/es.number.is-finite":174,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.sub":200,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],309:[function(f,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=(f=f("../core/main"))&&f.__esModule?f:{default:f},o="_lcg_random_state",s=4294967296,a=0,f=(n.default.prototype._lcg=function(h){return this[h]=(1664525*this[h]+1013904223)%s,this[h]/s},n.default.prototype._lcgSetSeed=function(h,l){this[h]=(l??Math.random()*s)>>>0},n.default.prototype.randomSeed=function(h){this._lcgSetSeed(o,h),this._gaussian_previous=!1},n.default.prototype.random=function(h,l){var u,c;return n.default._validateParameters("random",arguments),u=this[o]!=null?this._lcg(o):Math.random(),h===void 0?u:l===void 0?h instanceof Array?h[Math.floor(u*h.length)]:u*h:(l<h&&(c=h,h=l,l=c),u*(l-h)+h)},n.default.prototype.randomGaussian=function(h){var l,u,c,d,y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(this._gaussian_previous)l=a,this._gaussian_previous=!1;else{for(;1<=(d=(u=this.random(2)-1)*u+(c=this.random(2)-1)*c););l=u*(d=Math.sqrt(-2*Math.log(d)/d)),a=c*d,this._gaussian_previous=!0}return l*y+(h||0)},n.default);i.default=f},{"../core/main":275}],310:[function(t,r,i){function n(l){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(l)}function o(l){return(o=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(u){return n(u)}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":n(u)})(l)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(h=t("../core/main"))&&h.__esModule?h:{default:h},a=function(l){if(l&&l.__esModule)return l;if(l===null||o(l)!=="object"&&typeof l!="function")return{default:l};var u=f();if(u&&u.has(l))return u.get(l);var c,d={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in l){var p;Object.prototype.hasOwnProperty.call(l,c)&&((p=y?Object.getOwnPropertyDescriptor(l,c):null)&&(p.get||p.set)?Object.defineProperty(d,c,p):d[c]=l[c])}return d.default=l,u&&u.set(l,d),d}(t("../core/constants"));function f(){var l;return typeof WeakMap!="function"?null:(l=new WeakMap,f=function(){return l},l)}s.default.prototype._angleMode=a.RADIANS,s.default.prototype.acos=function(l){return this._fromRadians(Math.acos(l))},s.default.prototype.asin=function(l){return this._fromRadians(Math.asin(l))},s.default.prototype.atan=function(l){return this._fromRadians(Math.atan(l))},s.default.prototype.atan2=function(l,u){return this._fromRadians(Math.atan2(l,u))},s.default.prototype.cos=function(l){return Math.cos(this._toRadians(l))},s.default.prototype.sin=function(l){return Math.sin(this._toRadians(l))},s.default.prototype.tan=function(l){return Math.tan(this._toRadians(l))},s.default.prototype.degrees=function(l){return l*a.RAD_TO_DEG},s.default.prototype.radians=function(l){return l*a.DEG_TO_RAD},s.default.prototype.angleMode=function(l){if(s.default._validateParameters("angleMode",arguments),l===void 0)return this._angleMode;l!==a.DEGREES&&l!==a.RADIANS||(this._angleMode=l)},s.default.prototype._toRadians=function(l){return this._angleMode===a.DEGREES?l*a.DEG_TO_RAD:l},s.default.prototype._toDegrees=function(l){return this._angleMode===a.RADIANS?l*a.RAD_TO_DEG:l},s.default.prototype._fromRadians=function(l){return this._angleMode===a.DEGREES?l*a.RAD_TO_DEG:l};var h=s.default;i.default=h},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],311:[function(t,r,i){t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=(t=t("../core/main"))&&t.__esModule?t:{default:t};n.default.prototype.textAlign=function(o,s){var a;return n.default._validateParameters("textAlign",arguments),(a=this._renderer).textAlign.apply(a,arguments)},n.default.prototype.textLeading=function(o){var s;return n.default._validateParameters("textLeading",arguments),(s=this._renderer).textLeading.apply(s,arguments)},n.default.prototype.textSize=function(o){var s;return n.default._validateParameters("textSize",arguments),(s=this._renderer).textSize.apply(s,arguments)},n.default.prototype.textStyle=function(o){var s;return n.default._validateParameters("textStyle",arguments),(s=this._renderer).textStyle.apply(s,arguments)},n.default.prototype.textWidth=function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];if(s[0]+="",n.default._validateParameters("textWidth",s),s[0].length===0)return 0;for(var f=s[0].replace(/\t/g,"  ").split(/\r?\n|\r|\n/g),h=[],l=0;l<f.length;l++)h.push(this._renderer.textWidth(f[l]));return Math.max.apply(Math,h)},n.default.prototype.textAscent=function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return n.default._validateParameters("textAscent",s),this._renderer.textAscent()},n.default.prototype.textDescent=function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return n.default._validateParameters("textDescent",s),this._renderer.textDescent()},n.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},n.default.prototype.textWrap=function(o){if(o!=="WORD"&&o!=="CHAR")throw"Error: textWrap accepts only WORD or CHAR";return this._renderer.textWrap(o)},t=n.default,i.default=t},{"../core/main":275,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198}],312:[function(t,r,i){function n(c){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(c)}function o(c){return(o=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(d){return n(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":n(d)})(c)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.split"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(u=t("../core/main"))&&u.__esModule?u:{default:u},a=l(t("../core/constants")),f=l(t("opentype.js"));function h(){var c;return typeof WeakMap!="function"?null:(c=new WeakMap,h=function(){return c},c)}function l(c){if(c&&c.__esModule)return c;if(c===null||o(c)!=="object"&&typeof c!="function")return{default:c};var d=h();if(d&&d.has(c))return d.get(c);var y,p,m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in c)Object.prototype.hasOwnProperty.call(c,y)&&((p=g?Object.getOwnPropertyDescriptor(c,y):null)&&(p.get||p.set)?Object.defineProperty(m,y,p):m[y]=c[y]);return m.default=c,d&&d.set(c,m),m}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),s.default.prototype.loadFont=function(c,d,y){s.default._validateParameters("loadFont",arguments);var p=new s.default.Font(this),m=this;return f.load(c,function(x,T){if(x)return s.default._friendlyFileLoadError(4,c),y!==void 0?y(x):void console.error(x,c);p.font=T,d!==void 0&&d(p),m._decrementPreload();var x=c.split("\\").pop().split("/").pop(),T=x.lastIndexOf("."),w=T<1?null:x.slice(T+1);["ttf","otf","woff","woff2"].includes(w)&&(w=x.slice(0,T!==-1?T:0),(x=document.createElement("style")).appendChild(document.createTextNode(`
@font-face {
font-family: `.concat(w,`;
src: url(`).concat(c,`);
}
`))),document.head.appendChild(x))}),p},s.default.prototype.text=function(c,d,y,p,m){var g;return s.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(g=this._renderer).text.apply(g,arguments):this},s.default.prototype.textFont=function(c,d){if(s.default._validateParameters("textFont",arguments),arguments.length){if(c)return this._renderer._setProperty("_textFont",c),d&&(this._renderer._setProperty("_textSize",d),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",d*a._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var u=s.default;i.default=u},{"../core/constants":264,"../core/friendly_errors/fes_core":266,"../core/friendly_errors/file_errors":267,"../core/friendly_errors/validate_params":270,"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.last-index-of":163,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.split":198,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238,"opentype.js":249}],313:[function(t,r,i){function n(b){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C})(b)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=(o=t("../core/main"))&&o.__esModule?o:{default:o},s=function(b){if(b&&b.__esModule)return b;if(b===null||f(b)!=="object"&&typeof b!="function")return{default:b};var C=a();if(C&&C.has(b))return C.get(b);var A,M={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(A in b){var P;Object.prototype.hasOwnProperty.call(b,A)&&((P=k?Object.getOwnPropertyDescriptor(b,A):null)&&(P.get||P.set)?Object.defineProperty(M,A,P):M[A]=b[A])}return M.default=b,C&&C.set(b,M),M}(t("../core/constants"));function a(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,a=function(){return b},b)}function f(b){return(f=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(C){return n(C)}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":n(C)})(b)}function h(b,C){for(var A=0;A<C.length;A++){var M=C[A];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(b,M.key,M)}}function l(b,C){var A=b.length;return b[C<0?C%A+A:C%A]}function u(b,C,A,M){var k,P,F;return M?(u.tmpPoint1===void 0&&(u.tmpPoint1=[],u.tmpPoint2=[]),P=u.tmpPoint1,F=u.tmpPoint2,P.x=C.x-b.x,P.y=C.y-b.y,F.x=A.x-C.x,F.y=A.y-C.y,k=P.x*F.x+P.y*F.y,P=Math.sqrt(P.x*P.x+P.y*P.y),F=Math.sqrt(F.x*F.x+F.y*F.y),Math.acos(k/(P*F))<M):(C[0]-b[0])*(A[1]-b[1])-(A[0]-b[0])*(C[1]-b[1])==0}function c(O,Z,V,ie,re,P,F,I,B){var H=1-B,W=Math.pow(H,3),Q=Math.pow(H,2),D=B*B,ne=D*B,G=W*O+3*Q*B*V+3*H*B*B*re+ne*F,W=W*Z+3*Q*B*ie+3*H*B*B*P+ne*I,Q=O+2*B*(V-O)+D*(re-2*V+O),ne=Z+2*B*(ie-Z)+D*(P-2*ie+Z),U=V+2*B*(re-V)+D*(F-2*re+V),D=ie+2*B*(P-ie)+D*(I-2*P+ie),O=H*O+B*V,V=H*Z+B*ie,Z=H*re+B*F,ie=H*P+B*I,re=90-180*Math.atan2(Q-U,ne-D)/Math.PI;return(U<Q||ne<D)&&(re+=180),{x:G,y:W,m:{x:Q,y:ne},n:{x:U,y:D},start:{x:O,y:V},end:{x:Z,y:ie},alpha:re}}function d(b,C,A,M,k,P,F,I,B){return B==null?T(b,C,A,M,k,P,F,I):c(b,C,A,M,k,P,F,I,function(H,G,W,Q,ne,U,D,O,V){if(!(V<0||T(H,G,W,Q,ne,U,D,O)<V)){var Z,ie=.5,re=1-ie;for(Z=T(H,G,W,Q,ne,U,D,O,re);.01<Math.abs(Z-V);)Z=T(H,G,W,Q,ne,U,D,O,re+=(Z<V?1:-1)*(ie/=2));return re}}(b,C,A,M,k,P,F,I,B))}function y(b,C,A){for(var M,k,P,F,I,B=0,H=0,G=(b=function(W,Q){function ne(Ae,De,Be){var st,qe;if(!Ae)return["C",De.x,De.y,De.x,De.y,De.x,De.y];switch(Ae[0]in{T:1,Q:1}||(De.qx=De.qy=null),Ae[0]){case"M":De.X=Ae[1],De.Y=Ae[2];break;case"A":Ae=["C"].concat(m.apply(0,[De.x,De.y].concat(Ae.slice(1))));break;case"S":qe=Be==="C"||Be==="S"?(st=2*De.x-De.bx,2*De.y-De.by):(st=De.x,De.y),Ae=["C",st,qe].concat(Ae.slice(1));break;case"T":Be==="Q"||Be==="T"?(De.qx=2*De.x-De.qx,De.qy=2*De.y-De.qy):(De.qx=De.x,De.qy=De.y),Ae=["C"].concat(x(De.x,De.y,De.qx,De.qy,Ae[1],Ae[2]));break;case"Q":De.qx=Ae[1],De.qy=Ae[2],Ae=["C"].concat(x(De.x,De.y,Ae[1],Ae[2],Ae[3],Ae[4]));break;case"L":Ae=["C"].concat(v(De.x,De.y,Ae[1],Ae[2]));break;case"H":Ae=["C"].concat(v(De.x,De.y,Ae[1],De.y));break;case"V":Ae=["C"].concat(v(De.x,De.y,De.x,Ae[1]));break;case"Z":Ae=["C"].concat(v(De.x,De.y,De.X,De.Y))}return Ae}function U(Ae,De){if(7<Ae[De].length){Ae[De].shift();for(var Be=Ae[De];Be.length;)ge[De]="A",Z&&(ye[De]="A"),Ae.splice(De++,0,["C"].concat(Be.splice(0,6)));Ae.splice(De,1),O=Math.max(V.length,Z&&Z.length||0)}}function D(Ae,De,Be,st,qe){Ae&&De&&Ae[qe][0]==="M"&&De[qe][0]!=="M"&&(De.splice(qe,0,["M",st.x,st.y]),Be.bx=0,Be.by=0,Be.x=Ae[qe][1],Be.y=Ae[qe][2],O=Math.max(V.length,Z&&Z.length||0))}var O,V=p(W),Z=Q&&p(Q),ie={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},re={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},ge=[],ye=[],he="",pe="";O=Math.max(V.length,Z&&Z.length||0);for(var we=0;we<O;we++){(he=V[we]?V[we][0]:he)!=="C"&&(ge[we]=he,we&&(pe=ge[we-1])),V[we]=ne(V[we],ie,pe),ge[we]!=="A"&&he==="C"&&(ge[we]="C"),U(V,we),Z&&((he=Z[we]?Z[we][0]:he)!=="C"&&(ye[we]=he,we&&(pe=ye[we-1])),Z[we]=ne(Z[we],re,pe),ye[we]!=="A"&&he==="C"&&(ye[we]="C"),U(Z,we)),D(V,Z,ie,re,we),D(Z,V,re,ie,we);var oe=V[we],fe=Z&&Z[we],Ce=oe.length,Fe=Z&&fe.length;ie.x=oe[Ce-2],ie.y=oe[Ce-1],ie.bx=parseFloat(oe[Ce-4])||ie.x,ie.by=parseFloat(oe[Ce-3])||ie.y,re.bx=Z&&(parseFloat(fe[Fe-4])||re.x),re.by=Z&&(parseFloat(fe[Fe-3])||re.y),re.x=Z&&fe[Fe-2],re.y=Z&&fe[Fe-1]}return Z?[V,Z]:V}(b)).length;H<G;H++){if((P=b[H])[0]==="M")M=+P[1],k=+P[2];else{if(C<B+(F=d(M,k,P[1],P[2],P[3],P[4],P[5],P[6]))&&!A)return{x:(I=d(M,k,P[1],P[2],P[3],P[4],P[5],P[6],C-B)).x,y:I.y,alpha:I.alpha};B+=F,M=+P[5],k=+P[6]}P.shift()}return I=(I=A?B:c(M,k,P[0],P[1],P[2],P[3],P[4],P[5],1)).alpha?{x:I.x,y:I.y,alpha:I.alpha}:I}function p(b){var C=[],A=0,M=0,k=0,P=0,F=0;if(b){b[0][0]==="M"&&(k=A=+b[0][1],P=M=+b[0][2],F++,C[0]=["M",A,M]);for(var I,B,H=b.length===3&&b[0][0]==="M"&&b[1][0].toUpperCase()==="R"&&b[2][0].toUpperCase()==="Z",G=F,W=b.length;G<W;G++){if(C.push(I=[]),(B=b[G])[0]!==String.prototype.toUpperCase.call(B[0]))switch(I[0]=String.prototype.toUpperCase.call(B[0]),I[0]){case"A":I[1]=B[1],I[2]=B[2],I[3]=B[3],I[4]=B[4],I[5]=B[5],I[6]=+(B[6]+A),I[7]=+(B[7]+M);break;case"V":I[1]=+B[1]+M;break;case"H":I[1]=+B[1]+A;break;case"R":for(var Q,ne=2,U=(Q=[A,M].concat(B.slice(1))).length;ne<U;ne++)Q[ne]=+Q[ne]+A,Q[++ne]=+Q[ne]+M;C.pop(),C=C.concat(g(Q,H));break;case"M":k=+B[1]+A,P=+B[2]+M;break;default:for(var D=1,O=B.length;D<O;D++)I[D]=+B[D]+(D%2?A:M)}else if(B[0]==="R")Q=[A,M].concat(B.slice(1)),C.pop(),C=C.concat(g(Q,H)),I=["R"].concat(B.slice(-2));else for(var V=0,Z=B.length;V<Z;V++)I[V]=B[V];switch(I[0]){case"Z":A=k,M=P;break;case"H":A=I[1];break;case"V":M=I[1];break;case"M":k=I[I.length-2],P=I[I.length-1];break;default:A=I[I.length-2],M=I[I.length-1]}}}return C}function m(b,C,A,M,Z,ge,ie,I,B,H){function G(Fe,Ae,De){return{x:Fe*Math.cos(De)-Ae*Math.sin(De),y:Fe*Math.sin(De)+Ae*Math.cos(De)}}var W,O=Math.PI,V=120*O/180,Q=O/180*(+Z||0),ne=[],U=(H?(we=H[0],W=H[1],he=H[2],pe=H[3]):(b=(re=G(b,C,-Q)).x,C=re.y,1<(U=(D=(b-(I=(re=G(I,B,-Q)).x))/2)*D/(A*A)+(re=(C-(B=re.y))/2)*re/(M*M))&&(A*=U=Math.sqrt(U),M*=U),U=A*A,ye=M*M,he=(ge=(ge===ie?-1:1)*Math.sqrt(Math.abs((U*ye-U*re*re-ye*D*D)/(U*re*re+ye*D*D))))*A*re/M+(b+I)/2,pe=ge*-M*D/A+(C+B)/2,we=Math.asin(((C-pe)/M).toFixed(9)),W=Math.asin(((B-pe)/M).toFixed(9)),(we=b<he?O-we:we)<0&&(we=2*O+we),(W=I<he?O-W:W)<0&&(W=2*O+W),ie&&W<we&&(we-=2*O),!ie&&we<W&&(W-=2*O)),W-we),D=(Math.abs(U)>V&&(ye=W,re=I,ge=B,W=we+V*(ie&&we<W?1:-1),ne=m(I=he+A*Math.cos(W),B=pe+M*Math.sin(W),A,M,Z,0,ie,re,ge,[W,ye,he,pe])),U=W-we,Math.cos(we)),O=Math.sin(we),V=Math.cos(W),Z=Math.sin(W),ie=Math.tan(U/4),re=4/3*A*ie,ge=4/3*M*ie,ye=[b,C],he=[b+re*O,C-ge*D],pe=[I+re*Z,B-ge*V],we=[I,B];if(he[0]=2*ye[0]-he[0],he[1]=2*ye[1]-he[1],H)return[he,pe,we].concat(ne);for(var oe=[],fe=0,Ce=(ne=[he,pe,we].concat(ne).join().split(",")).length;fe<Ce;fe++)oe[fe]=fe%2?G(ne[fe-1],ne[fe],Q).y:G(ne[fe],ne[fe+1],Q).x;return oe}function g(b,C){for(var A=[],M=0,k=b.length;M<k-2*!C;M+=2){var P=[{x:+b[M-2],y:+b[M-1]},{x:+b[M],y:+b[M+1]},{x:+b[M+2],y:+b[M+3]},{x:+b[M+4],y:+b[M+5]}];C?M?k-4===M?P[3]={x:+b[0],y:+b[1]}:k-2===M&&(P[2]={x:+b[0],y:+b[1]},P[3]={x:+b[2],y:+b[3]}):P[0]={x:+b[k-2],y:+b[k-1]}:k-4===M?P[3]=P[2]:M||(P[0]={x:+b[M],y:+b[M+1]}),A.push(["C",(-P[0].x+6*P[1].x+P[2].x)/6,(-P[0].y+6*P[1].y+P[2].y)/6,(P[1].x+6*P[2].x-P[3].x)/6,(P[1].y+6*P[2].y-P[3].y)/6,P[2].x,P[2].y])}return A}function v(b,C,A,M){return[b,C,A,M,A,M]}function x(b,C,A,M,k,P){return[1/3*b+2/3*A,1/3*C+2/3*M,1/3*k+2/3*A,1/3*P+2/3*M,k,P]}function T(b,C,A,M,k,P,F,I,B){for(var H=(B=1<(B=B??1)?1:B<0?0:B)/2,G=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],W=0,Q=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],ne=0;ne<12;ne++){var D=H*G[ne]+H,U=w(D,b,A,k,F),D=w(D,C,M,P,I);W+=Q[ne]*Math.sqrt(U*U+D*D)}return H*W}function w(b,C,A,M,k){return b*(b*(-3*C+9*A-9*M+3*k)+6*C-12*A+6*M)-3*C+3*A}o.default.Font=function(){function b(M){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.parent=M,this.cache={},this.font=void 0}var C,A;return C=b,(A=[{key:"textBounds",value:function(M){var k=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,P=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,H=3<arguments.length?arguments[3]:void 0,F=4<arguments.length?arguments[4]:void 0,I=F&&F.renderer&&F.renderer._pInst||this.parent,B=I._renderer.drawingContext,H=(B.textAlign||s.LEFT,B.textBaseline||s.BASELINE,H||I._renderer._textSize);if(!re){for(var G=[],W=[],Q=[],ne=(Q[0]=[],[]),U=this._scale(H),D=I._renderer.textLeading(),O=0,V=(this.font.forEachGlyph(M,k,P,H,F,function(he,pe,we,oe){var fe=he.getMetrics();he.index===0||he.index===10?Q[O+=1]=[]:(Q[O].push(pe+fe.xMin*U),Q[O].push(pe+fe.xMax*U),ne.push(we+O*D+-fe.yMin*U),ne.push(we+O*D+-fe.yMax*U))}),0<Q[O].length&&(G[O]=Math.min.apply(null,Q[O]),W[O]=Math.max.apply(null,Q[O])),0),Z=0;Z<=O;Z++){G[Z]=Math.min.apply(null,Q[Z]),W[Z]=Math.max.apply(null,Q[Z]);var ie=W[Z]-G[Z];V<ie&&(V=ie)}var B=Math.min.apply(null,G),re={x:B,y:P=Math.min.apply(null,ne),h:Math.max.apply(null,ne)-P,w:V,advance:B-k},H=this._handleAlignment(I._renderer,M,re.x,re.y,re.w+re.advance);re.x=H.x,re.y=H.y}return re}},{key:"textToPoints",value:function(M,k,P,F,I){var B=k,H=[],G=M.split(/\r?\n|\r|\n/g);F=F||this.parent._renderer._textSize;for(var W,Q,ne,U=0;U<G.length;U++){var D=0;k=B;for(var O=(O=G[U]).replace("	","  "),V=this._getGlyphs(O),Z=0;Z<V.length;Z++){if(Q=O,!((ne=V)[W=Z].name&&ne[W].name==="space"||Q.length===ne.length&&Q[W]===" "))for(var ie=function(he){for(var pe,we=[],oe=0;oe<he.length;oe++)he[oe].type==="M"&&(pe&&we.push(pe),pe=[]),pe.push(function(fe){var Ce=[fe.type];return fe.type==="M"||fe.type==="L"?Ce.push(fe.x,fe.y):fe.type==="C"?Ce.push(fe.x1,fe.y1,fe.x2,fe.y2,fe.x,fe.y):fe.type==="Q"&&Ce.push(fe.x1,fe.y1,fe.x,fe.y),Ce}(he[oe]));return we.push(pe),we}(V[Z].getPath(k,P,F).commands),re=0;re<ie.length;re++)for(var ge=function(he,pe){for(var pe=function(Ae,De){if(f(Ae)!=="object")Ae=De;else for(var Be in De)Ae[Be]===void 0&&(Ae[Be]=De[Be]);return Ae}(pe,{sampleFactor:.1,simplifyThreshold:0}),we=y(he,0,1),oe=we/(we*pe.sampleFactor),fe=[],Ce=0;Ce<we;Ce+=oe)fe.push(y(he,Ce));return pe.simplifyThreshold&&function(Fe){for(var Ae=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,De=0,Be=Fe.length-1;3<Fe.length&&0<=Be;--Be)u(l(Fe,Be-1),l(Fe,Be),l(Fe,Be+1),Ae)&&(Fe.splice(Be%Fe.length,1),De++)}(fe,pe.simplifyThreshold),fe}(ie[re],I),ye=0;ye<ge.length;ye++)ge[ye].x+=D,H.push(ge[ye]);D+=V[Z].advanceWidth*this._scale(F)}P+=this.parent._renderer._textLeading}return H}},{key:"_getGlyphs",value:function(M){return this.font.stringToGlyphs(M)}},{key:"_getPath",value:function(M,B,P,F){var I=(F&&F.renderer&&F.renderer._pInst||this.parent)._renderer,B=this._handleAlignment(I,M,B,P);return this.font.getPath(M,B.x,B.y,I._textSize,F)}},{key:"_getPathData",value:function(M,k,P,F){var I=3;return typeof M=="string"&&2<arguments.length?M=this._getPath(M,k,P,F):f(k)==="object"&&(F=k),F&&typeof F.decimals=="number"&&(I=F.decimals),M.toPathData(I)}},{key:"_getSVG",value:function(M,k,P,F){var I=3;return typeof M=="string"&&2<arguments.length?M=this._getPath(M,k,P,F):f(k)==="object"&&(F=k),F&&(typeof F.decimals=="number"&&(I=F.decimals),typeof F.strokeWidth=="number"&&(M.strokeWidth=F.strokeWidth),F.fill!==void 0&&(M.fill=F.fill),F.stroke!==void 0&&(M.stroke=F.stroke)),M.toSVG(I)}},{key:"_renderPath",value:function(H,W,Q,F){var I=F&&F.renderer||this.parent._renderer,B=I.drawingContext,H=(f(H)==="object"&&H.commands?H:this._getPath(H,W,Q,F)).commands,G=(B.beginPath(),!0),W=!1,Q=void 0;try{for(var ne,U=H[Symbol.iterator]();!(G=(ne=U.next()).done);G=!0){var D=ne.value;D.type==="M"?B.moveTo(D.x,D.y):D.type==="L"?B.lineTo(D.x,D.y):D.type==="C"?B.bezierCurveTo(D.x1,D.y1,D.x2,D.y2,D.x,D.y):D.type==="Q"?B.quadraticCurveTo(D.x1,D.y1,D.x,D.y):D.type==="Z"&&B.closePath()}}catch(O){W=!0,Q=O}finally{try{G||U.return==null||U.return()}finally{if(W)throw Q}}return I._doStroke&&I._strokeSet&&!I._clipping&&B.stroke(),I._doFill&&!I._clipping&&(I._fillSet||I._setFill(s._DEFAULT_TEXT_FILL),B.fill()),this}},{key:"_textWidth",value:function(M,k){return this.font.getAdvanceWidth(M,k)}},{key:"_textAscent",value:function(M){return this.font.ascender*this._scale(M)}},{key:"_textDescent",value:function(M){return-this.font.descender*this._scale(M)}},{key:"_scale",value:function(M){return 1/this.font.unitsPerEm*(M||this.parent._renderer._textSize)}},{key:"_handleAlignment",value:function(M,k,P,F,I){var B=M._textSize;switch(I===void 0&&(I=this._textWidth(k,B)),M._textAlign){case s.CENTER:P-=I/2;break;case s.RIGHT:P-=I}switch(M._textBaseline){case s.TOP:F+=this._textAscent(B);break;case s.CENTER:F+=this._textAscent(B)/2;break;case s.BOTTOM:F-=this._textDescent(B)}return{x:P,y:F}}}])&&h(C.prototype,A),b}(),t=o.default,i.default=t},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.splice":167,"core-js/modules/es.function.name":168,"core-js/modules/es.number.to-fixed":175,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],314:[function(t,r,i){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.object.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype.append=function(n,o){return n.push(o),n},t.default.prototype.arrayCopy=function(n,o,s,a,f){var h,l;n=f!==void 0?(l=Math.min(f,n.length),h=a,n.slice(o,l+o)):(l=s!==void 0?(l=s,Math.min(l,n.length)):n.length,s=o,n.slice(h=0,l)),Array.prototype.splice.apply(s,[h,l].concat(n))},t.default.prototype.concat=function(n,o){return n.concat(o)},t.default.prototype.reverse=function(n){return n.reverse()},t.default.prototype.shorten=function(n){return n.pop(),n},t.default.prototype.shuffle=function(n,o){for(var s,a,f=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(n),h=(n=o||f?n:n.slice()).length;1<h;)s=this.random(0,1)*h|0,a=n[--h],n[h]=n[s],n[s]=a;return n},t.default.prototype.sort=function(n,a){var s=a?n.slice(0,Math.min(a,n.length)):n,a=a?n.slice(Math.min(a,n.length)):[];return(s=typeof s[0]=="string"?s.sort():s.sort(function(f,h){return f-h})).concat(a)},t.default.prototype.splice=function(n,o,s){return Array.prototype.splice.apply(n,[s,0].concat(o)),n},t.default.prototype.subset=function(n,o,s){return s!==void 0?n.slice(o,o+s):n.slice(o,n.length)},t=t.default,i.default=t},{"../core/main":275,"core-js/modules/es.array-buffer.constructor":150,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.splice":167,"core-js/modules/es.object.to-string":182}],315:[function(t,r,i){t("core-js/modules/es.array.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.repeat"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.repeat"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=(t=t("../core/main"))&&t.__esModule?t:{default:t};n.default.prototype.float=function(o){return o instanceof Array?o.map(parseFloat):parseFloat(o)},n.default.prototype.int=function(o){var s=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return o===1/0||o==="Infinity"?1/0:o===-1/0||o==="-Infinity"?-1/0:typeof o=="string"?parseInt(o,s):typeof o=="number"?0|o:typeof o=="boolean"?o?1:0:o instanceof Array?o.map(function(a){return n.default.prototype.int(a,s)}):void 0},n.default.prototype.str=function(o){return o instanceof Array?o.map(n.default.prototype.str):String(o)},n.default.prototype.boolean=function(o){return typeof o=="number"?o!==0:typeof o=="string"?o.toLowerCase()==="true":typeof o=="boolean"?o:o instanceof Array?o.map(n.default.prototype.boolean):void 0},n.default.prototype.byte=function(o){return o=n.default.prototype.int(o,10),typeof o=="number"?(o+128)%256-128:o instanceof Array?o.map(n.default.prototype.byte):void 0},n.default.prototype.char=function(o){return typeof o!="number"||isNaN(o)?o instanceof Array?o.map(n.default.prototype.char):typeof o=="string"?n.default.prototype.char(parseInt(o,10)):void 0:String.fromCharCode(o)},n.default.prototype.unchar=function(o){return typeof o=="string"&&o.length===1?o.charCodeAt(0):o instanceof Array?o.map(n.default.prototype.unchar):void 0},n.default.prototype.hex=function(o,s){if(s=s??8,o instanceof Array)return o.map(function(f){return n.default.prototype.hex(f,s)});if(o===1/0||o===-1/0)return(o===1/0?"F":"0").repeat(s);if(typeof o=="number"){o<0&&(o=4294967295+o+1);for(var a=Number(o).toString(16).toUpperCase();a.length<s;)a="0".concat(a);return a=a.length>=s?a.substring(a.length-s,a.length):a}},n.default.prototype.unhex=function(o){return o instanceof Array?o.map(n.default.prototype.unhex):parseInt("0x".concat(o),16)},t=n.default,i.default=t},{"../core/main":275,"core-js/modules/es.array.map":164,"core-js/modules/es.number.constructor":173,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.repeat":195}],316:[function(t,r,i){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.pad-start"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.pad-start"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=(l=t("../core/main"))&&l.__esModule?l:{default:l};function o(u,c){return function(d){if(Array.isArray(d))return d}(u)||function(d,y){if(Symbol.iterator in Object(d)||Object.prototype.toString.call(d)==="[object Arguments]"){var p=[],m=!0,g=!1,v=void 0;try{for(var x,T=d[Symbol.iterator]();!(m=(x=T.next()).done)&&(p.push(x.value),!y||p.length!==y);m=!0);}catch(w){g=!0,v=w}finally{try{m||T.return==null||T.return()}finally{if(g)throw v}}return p}}(u,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(u,c,d){var p=o(u.toString().split("."),2),y=p[0],p=p[1];return d===void 0?(y=y.padStart(c,"0"),p?y+"."+p:y):(y=(u=o(u.toFixed(d).toString().split("."),2))[0],p=u[1],y=y.padStart(c,"0"),p===void 0?y:y+"."+p)}function a(p,c){var d=(p=p.toString()).indexOf("."),y=d!==-1?p.substring(d):"",p=(p=d!==-1?p.substring(0,d):p).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(c===0)y="";else if(c!==void 0)if(c>y.length)for(var m=c-(y+=d===-1?".":"").length+1,g=0;g<m;g++)y+="0";else y=y.substring(0,c+1);return p+y}function f(u){return 0<parseFloat(u)?"+".concat(u.toString()):u.toString()}function h(u){return 0<=parseFloat(u)?" ".concat(u.toString()):u.toString()}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),n.default.prototype.join=function(u,c){return n.default._validateParameters("join",arguments),u.join(c)},n.default.prototype.match=function(u,c){return n.default._validateParameters("match",arguments),u.match(c)},n.default.prototype.matchAll=function(u,c){n.default._validateParameters("matchAll",arguments);for(var d=new RegExp(c,"g"),y=d.exec(u),p=[];y!==null;)p.push(y),y=d.exec(u);return p},n.default.prototype.nf=function(u,c,d){return n.default._validateParameters("nf",arguments),u instanceof Array?u.map(function(y){return s(y,c,d)}):Object.prototype.toString.call(u)==="[object Arguments]"?u.length===3?this.nf(u[0],u[1],u[2]):u.length===2?this.nf(u[0],u[1]):this.nf(u[0]):s(u,c,d)},n.default.prototype.nfc=function(u,c){return n.default._validateParameters("nfc",arguments),u instanceof Array?u.map(function(d){return a(d,c)}):a(u,c)},n.default.prototype.nfp=function(){for(var u=arguments.length,c=new Array(u),d=0;d<u;d++)c[d]=arguments[d];n.default._validateParameters("nfp",c);var y=n.default.prototype.nf.apply(this,c);return y instanceof Array?y.map(f):f(y)},n.default.prototype.nfs=function(){for(var u=arguments.length,c=new Array(u),d=0;d<u;d++)c[d]=arguments[d];n.default._validateParameters("nfs",c);var y=n.default.prototype.nf.apply(this,c);return y instanceof Array?y.map(h):h(y)},n.default.prototype.split=function(u,c){return n.default._validateParameters("split",arguments),u.split(c)},n.default.prototype.splitTokens=function(u,c){var d,y;return n.default._validateParameters("splitTokens",arguments),y=c!==void 0?(y=/\]/g.exec(c=c),(d=/\[/g.exec(c))&&y?(c=c.slice(0,y.index)+c.slice(y.index+1),d=/\[/g.exec(c),c=c.slice(0,d.index)+c.slice(d.index+1),new RegExp("[\\[".concat(c,"\\]]"),"g")):y?(c=c.slice(0,y.index)+c.slice(y.index+1),new RegExp("[".concat(c,"\\]]"),"g")):d?(c=c.slice(0,d.index)+c.slice(d.index+1),new RegExp("[".concat(c,"\\[]"),"g")):new RegExp("[".concat(c,"]"),"g")):/\s/g,u.split(y).filter(function(p){return p})},n.default.prototype.trim=function(u){return n.default._validateParameters("trim",arguments),u instanceof Array?u.map(this.trim):u.trim()};var l=n.default;i.default=l},{"../core/friendly_errors/fes_core":266,"../core/friendly_errors/file_errors":267,"../core/friendly_errors/validate_params":270,"../core/main":275,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.number.to-fixed":175,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.constructor":186,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.match":193,"core-js/modules/es.string.pad-start":194,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198,"core-js/modules/es.string.trim":201,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],317:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype.day=function(){return new Date().getDate()},t.default.prototype.hour=function(){return new Date().getHours()},t.default.prototype.minute=function(){return new Date().getMinutes()},t.default.prototype.millis=function(){return this._millisStart===-1?0:window.performance.now()-this._millisStart},t.default.prototype.month=function(){return new Date().getMonth()+1},t.default.prototype.second=function(){return new Date().getSeconds()},t.default.prototype.year=function(){return new Date().getFullYear()},t=t.default,i.default=t},{"../core/main":275}],318:[function(t,r,i){function n(u){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(u)}function o(u){return(o=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(c){return n(c)}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":n(c)})(u)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(l=t("../core/main"))&&l.__esModule?l:{default:l},a=(t("./p5.Geometry"),function(u){if(u&&u.__esModule)return u;if(u===null||o(u)!=="object"&&typeof u!="function")return{default:u};var c=f();if(c&&c.has(u))return c.get(u);var d,y={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in u){var m;Object.prototype.hasOwnProperty.call(u,d)&&((m=p?Object.getOwnPropertyDescriptor(u,d):null)&&(m.get||m.set)?Object.defineProperty(y,d,m):y[d]=u[d])}return y.default=u,c&&c.set(u,y),y}(t("../core/constants")));function f(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,f=function(){return u},u)}s.default.prototype.beginGeometry=function(){return this._renderer.beginGeometry()},s.default.prototype.endGeometry=function(){return this._renderer.endGeometry()},s.default.prototype.buildGeometry=function(u){return this._renderer.buildGeometry(u)},s.default.prototype.freeGeometry=function(u){this._renderer._freeBuffers(u.gid)},s.default.prototype.plane=function(u,c,d,y){this._assert3d("plane"),s.default._validateParameters("plane",arguments),u===void 0&&(u=50),c===void 0&&(c=u),y===void 0&&(y=1);var p,m="plane|".concat(d=d===void 0?1:d,"|").concat(y);return this._renderer.geometryInHash(m)||((p=new s.default.Geometry(d,y,function(){for(var g,v,x=0;x<=this.detailY;x++)for(var T=x/this.detailY,w=0;w<=this.detailX;w++)g=w/this.detailX,v=new s.default.Vector(g-.5,T-.5,0),this.vertices.push(v),this.uvs.push(g,T)})).computeFaces().computeNormals(),d<=1&&y<=1?p._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(m,p)),this._renderer.drawBuffersScaled(m,u,c,1),this},s.default.prototype.box=function(u,c,d,y,p){this._assert3d("box"),s.default._validateParameters("box",arguments),u===void 0&&(u=50),c===void 0&&(c=u),d===void 0&&(d=c);var m,g=this._renderer.attributes&&this._renderer.attributes.perPixelLighting,g=(p===void 0&&(p=g?1:4),"box|".concat(y=y===void 0?g?1:4:y,"|").concat(p));return this._renderer.geometryInHash(g)||((m=new s.default.Geometry(y,p,function(){var v=this;this.edges=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]],[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]].forEach(function(x,T){for(var T=4*T,w=0;w<4;w++){var b=x[w],b=new s.default.Vector((2*(1&b)-1)/2,((2&b)-1)/2,((4&b)/2-1)/2);v.vertices.push(b),v.uvs.push(1&w,(2&w)/2)}v.faces.push([T,1+T,2+T]),v.faces.push([2+T,1+T,3+T])})})).computeNormals(),y<=4&&p<=4?m._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(g,m)),this._renderer.drawBuffersScaled(g,u,c,d),this},s.default.prototype.sphere=function(u,c,d){return this._assert3d("sphere"),s.default._validateParameters("sphere",arguments),this.ellipsoid(u=u===void 0?50:u,u,u,c=c===void 0?24:c,d=d===void 0?16:d),this};function h(u,c,d,y,p,m,g){u=u<=0?1:u,c=c<0?0:c,d=d<=0?u:d,y=y<3?3:y;for(var v,x,T=(m=m===void 0||m)?-2:0,w=(p=p<1?1:p)+((g=g===void 0?c!==0:g)?2:0),b=Math.atan2(u-c,d),C=Math.sin(b),A=Math.cos(b),M=T;M<=w;++M){var k=M/p,P=d*k,F=void 0,F=M<0?(k=P=0,u):p<M?(P=d,k=1,c):u+(c-u)*k;for(M!==-2&&M!==p+2||(F=0),P-=d/2,v=0;v<y;++v){var I=v/(y-1),H=2*Math.PI*I,B=Math.sin(H),H=Math.cos(H),G=(this.vertices.push(new s.default.Vector(B*F,P,H*F)),void 0),G=M<0?new s.default.Vector(0,-1,0):p<M&&c?new s.default.Vector(0,1,0):new s.default.Vector(B*A,C,H*A);this.vertexNormals.push(G),this.uvs.push(I,k)}}var W=0;if(m){for(x=0;x<y;++x)this.faces.push([W+x,W+y+(x+1)%y,W+y+x]);W+=2*y}for(M=0;M<p;++M){for(v=0;v<y;++v){var Q=(v+1)%y;this.faces.push([W+v,W+Q,W+y+Q]),this.faces.push([W+v,W+y+Q,W+y+v])}W+=y}if(g)for(W+=y,v=0;v<y;++v)this.faces.push([W+v,W+(v+1)%y,W+y])}s.default.prototype.cylinder=function(u,c,d,y,p,m){this._assert3d("cylinder"),s.default._validateParameters("cylinder",arguments),u===void 0&&(u=50),c===void 0&&(c=u),y===void 0&&(y=1),m===void 0&&(m=!0),p===void 0&&(p=!0);var g,v="cylinder|".concat(d=d===void 0?24:d,"|").concat(y,"|").concat(p,"|").concat(m);return this._renderer.geometryInHash(v)||(g=new s.default.Geometry(d,y),h.call(g,1,1,1,d,y,p,m),d<=24&&y<=16?g._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(v,g)),this._renderer.drawBuffersScaled(v,u,c,u),this},s.default.prototype.cone=function(u,c,d,y,p){this._assert3d("cone"),s.default._validateParameters("cone",arguments),u===void 0&&(u=50),c===void 0&&(c=u),y===void 0&&(y=1),p===void 0&&(p=!0);var m,g="cone|".concat(d=d===void 0?24:d,"|").concat(y,"|").concat(p);return this._renderer.geometryInHash(g)||(m=new s.default.Geometry(d,y),h.call(m,1,0,1,d,y,p,!1),d<=24&&y<=16?m._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(g,m)),this._renderer.drawBuffersScaled(g,u,c,u),this},s.default.prototype.ellipsoid=function(u,c,d,y,p){this._assert3d("ellipsoid"),s.default._validateParameters("ellipsoid",arguments),u===void 0&&(u=50),c===void 0&&(c=u),d===void 0&&(d=u),p===void 0&&(p=16);var m,g="ellipsoid|".concat(y=y===void 0?24:y,"|").concat(p);return this._renderer.geometryInHash(g)||((m=new s.default.Geometry(y,p,function(){for(var v=0;v<=this.detailY;v++)for(var x=v/this.detailY,T=Math.PI*x-Math.PI/2,w=Math.cos(T),b=Math.sin(T),C=0;C<=this.detailX;C++){var A=C/this.detailX,k=2*Math.PI*A,M=Math.cos(k),k=Math.sin(k),k=new s.default.Vector(w*k,b,w*M);this.vertices.push(k),this.vertexNormals.push(k),this.uvs.push(A,x)}})).computeFaces(),y<=24&&p<=24?m._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(g,m)),this._renderer.drawBuffersScaled(g,u,c,d),this},s.default.prototype.torus=function(u,g,d,y){if(this._assert3d("torus"),s.default._validateParameters("torus",arguments),u===void 0)u=50;else if(!u)return;if(g===void 0)g=10;else if(!g)return;d===void 0&&(d=24),y===void 0&&(y=16);var p,m=(g/u).toPrecision(4),g="torus|".concat(m,"|").concat(d,"|").concat(y);return this._renderer.geometryInHash(g)||((p=new s.default.Geometry(d,y,function(){for(var v=0;v<=this.detailY;v++)for(var x=v/this.detailY,T=2*Math.PI*x,w=Math.cos(T),b=Math.sin(T),C=1+m*w,A=0;A<=this.detailX;A++){var M=A/this.detailX,k=2*Math.PI*M,F=Math.cos(k),k=Math.sin(k),P=new s.default.Vector(C*F,C*k,m*b),F=new s.default.Vector(w*F,w*k,b);this.vertices.push(P),this.vertexNormals.push(F),this.uvs.push(M,x)}})).computeFaces(),d<=24&&y<=16?p._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(g,p)),this._renderer.drawBuffersScaled(g,u,u,u),this},s.default.RendererGL.prototype.point=function(u,c,d){var y=[];return y.push(new s.default.Vector(u,c,d=d===void 0?0:d)),this._drawPoints(y,this.immediateMode.buffers.point),this},s.default.RendererGL.prototype.triangle=function(g){var c=g[0],d=g[1],y=g[2],p=g[3],m=g[4],g=g[5],v=(this.geometryInHash("tri")||((v=new s.default.Geometry(1,1,function(){var w=[];w.push(new s.default.Vector(0,0,0)),w.push(new s.default.Vector(1,0,0)),w.push(new s.default.Vector(0,1,0)),this.edges=[[0,1],[1,2],[2,0]],this.vertices=w,this.faces=[[0,1,2]],this.uvs=[0,0,1,0,1,1]}))._edgesToVertices(),v.computeNormals(),this.createBuffers("tri",v)),this.uMVMatrix.copy());try{var x=Math.sign(c*p-y*d+y*g-m*p+m*d-c*g),T=new s.default.Matrix([y-c,p-d,0,0,m-c,g-d,0,0,0,0,x,0,c,d,0,1]).mult(this.uMVMatrix);this.uMVMatrix=T,this.drawBuffers("tri")}finally{this.uMVMatrix=v}return this},s.default.RendererGL.prototype.ellipse=function(u){this.arc(u[0],u[1],u[2],u[3],0,a.TWO_PI,a.OPEN,u[4])},s.default.RendererGL.prototype.arc=function(u){var c,d=arguments[1],y=arguments[2],p=arguments[3],m=arguments[4],g=arguments[5],v=arguments[6],x=arguments[7]||25,T=(Math.abs(g-m)>=a.TWO_PI?"".concat(w="ellipse","|"):"".concat(w="arc","|").concat(m,"|").concat(g,"|").concat(v,"|")).concat(x,"|"),w=(this.geometryInHash(T)||((c=new s.default.Geometry(x,1,function(){if(m.toFixed(10)!==g.toFixed(10)){v!==a.PIE&&v!==void 0||(this.vertices.push(new s.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var b=0;b<=x;b++){var A=(g-m)*(b/x)+m,C=.5+Math.cos(A)/2,A=.5+Math.sin(A)/2;this.vertices.push(new s.default.Vector(C,A,0)),this.uvs.push([C,A]),b<x-1&&(this.faces.push([0,b+1,b+2]),this.edges.push([b+1,b+2]))}switch(v){case a.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,1]),this.edges.push([this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,this.vertices.length-1]);break;case a.CHORD:this.edges.push([0,1]),this.edges.push([0,this.vertices.length-1]);break;case a.OPEN:this.edges.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([this.vertices.length-2,this.vertices.length-1])}}})).computeNormals(),x<=50?c._edgesToVertices(c):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(w," with more than 50 detail")),this.createBuffers(T,c)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([u,d,0]),this.uMVMatrix.scale(y,p,1),this.drawBuffers(T)}finally{this.uMVMatrix=w}return this},s.default.RendererGL.prototype.rect=function(u){var c=u[0],d=u[1],y=u[2],p=u[3];if(u[4]===void 0){var v=this._pInst._glAttributes.perPixelLighting,m=u[4]||(v?1:24),g=u[5]||(v?1:16),v="rect|".concat(m,"|").concat(g),x=(this.geometryInHash(v)||((x=new s.default.Geometry(m,g,function(){for(var G=0;G<=this.detailY;G++)for(var W=G/this.detailY,Q=0;Q<=this.detailX;Q++){var ne=Q/this.detailX,U=new s.default.Vector(ne,W,0);this.vertices.push(U),this.uvs.push(ne,W)}0<m&&0<g&&(this.edges=[[0,m],[m,(m+1)*(g+1)-1],[(m+1)*(g+1)-1,(m+1)*g],[(m+1)*g,0]])})).computeFaces().computeNormals()._edgesToVertices(),this.createBuffers(v,x)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([c,d,0]),this.uMVMatrix.scale(y,p,1),this.drawBuffers(v)}finally{this.uMVMatrix=x}}else{var v=u[4],x=u[5]===void 0?v:u[5],T=u[6]===void 0?x:u[6],u=u[7]===void 0?T:u[7],k=y,w=p,A=((k+=c)<c&&(A=c,c=k,k=A),(w+=d)<d&&(A=d,d=w,w=A),Math.min((k-c)/2,(w-d)/2)),b=(A<v&&(v=A),A<x&&(x=A),A<T&&(T=A),A<u&&(u=A),c),C=d,A=k,c=w,M=(this.beginShape(),x!==0?(this.vertex(A-x,C),this.quadraticVertex(A,C,A,C+x)):this.vertex(A,C),T!==0?(this.vertex(A,c-T),this.quadraticVertex(A,c,A-T,c)):this.vertex(A,c),u!==0?(this.vertex(b+u,c),this.quadraticVertex(b,c,b,c-u)):this.vertex(b,c),v!==0?(this.vertex(b,C+v),this.quadraticVertex(b,C,b+v,C)):this.vertex(b,C),!(this.immediateMode.geometry.uvs.length=0)),d=!1,k=void 0;try{for(var P,F=this.immediateMode.geometry.vertices[Symbol.iterator]();!(M=(P=F.next()).done);M=!0){var I=P.value,B=(I.x-b)/y,H=(I.y-C)/p;this.immediateMode.geometry.uvs.push(B,H)}}catch(D){d=!0,k=D}finally{try{M||F.return==null||F.return()}finally{if(d)throw k}}this.endShape(a.CLOSE)}return this},s.default.RendererGL.prototype.quad=function(u,c,d,y,p,m,g,v,x,T,w,b,C,A){C===void 0&&(C=2),A===void 0&&(A=2);var M="quad|".concat(u,"|").concat(c,"|").concat(d,"|").concat(y,"|").concat(p,"|").concat(m,"|").concat(g,"|").concat(v,"|").concat(x,"|").concat(T,"|").concat(w,"|").concat(b,"|").concat(C,"|").concat(A);if(!this.geometryInHash(M)){var k=new s.default.Geometry(C,A,function(){for(var Q=1/(this.detailX-1),ne=1/(this.detailY-1),U=0;U<this.detailY;U++)for(var D=0;D<this.detailX;D++){var O=D*Q,V=U*ne;this.vertices.push(new s.default.Vector((1-O)*((1-V)*u+V*T)+O*((1-V)*y+V*g),(1-O)*((1-V)*c+V*w)+O*((1-V)*p+V*v),(1-O)*((1-V)*d+V*b)+O*((1-V)*m+V*x))),this.uvs.push([O,V])}});k.faces=[];for(var P=0;P<A-1;P++)for(var F=0;F<C-1;F++){var I=F+P*C,B=F+1+(P+1)*C,H=F+(P+1)*C;k.faces.push([I,F+1+P*C,B]),k.faces.push([I,B,H])}k.computeNormals();for(var G=[k.edges.length=0,2,3,1],W=0;W<G.length;W++)k.edges.push([G[W],G[(W+1)%G.length]]);k._edgesToVertices(),this.createBuffers(M,k)}return this.drawBuffers(M),this},s.default.RendererGL.prototype.bezier=function(u,c,d,y,p,m,g,v,x,T,w,b){arguments.length===8&&(w=v,T=g,v=m,g=p,p=y,y=d,d=m=x=b=0);var C=this._pInst._bezierDetail||20;this.beginShape();for(var A=0;A<=C;A++){var M=Math.pow(1-A/C,3),k=A/C*3*Math.pow(1-A/C,2),P=3*Math.pow(A/C,2)*(1-A/C),F=Math.pow(A/C,3);this.vertex(u*M+y*k+g*P+T*F,c*M+p*k+v*P+w*F,d*M+m*k+x*P+b*F)}return this.endShape(),this},s.default.RendererGL.prototype.curve=function(u,c,d,y,p,m,g,v,x,T,w,b){arguments.length===8&&(T=g,w=v,g=p,v=y,p=y=d,d=m=x=b=0);var C=this._pInst._curveDetail;this.beginShape();for(var A=0;A<=C;A++){var M=.5*Math.pow(A/C,3),k=.5*Math.pow(A/C,2),P=A/C*.5;this.vertex(M*(3*y-u-3*g+T)+k*(2*u-5*y+4*g-T)+P*(-u+g)+2*y*.5,M*(3*p-c-3*v+w)+k*(2*c-5*p+4*v-w)+P*(-c+v)+2*p*.5,M*(3*m-d-3*x+b)+k*(2*d-5*m+4*x-b)+P*(-d+x)+2*m*.5)}return this.endShape(),this},s.default.RendererGL.prototype.line=function(){return arguments.length===6?(this.beginShape(a.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):arguments.length===4&&(this.beginShape(a.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},s.default.RendererGL.prototype.bezierVertex=function(){if(this.immediateMode._bezierVertex.length===0)throw Error("vertex() must be used once before calling bezierVertex()");var u,c,d,y,p,m,g=[],v=[],x=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var T=1/this._lutBezierDetail,w=0,b=1,C=0;w<1;){if(m=parseFloat(w.toFixed(6)),this._lookUpTableBezier[C]=this._bezierCoefficients(m),b.toFixed(6)===T.toFixed(6)){m=parseFloat(b.toFixed(6))+parseFloat(w.toFixed(6)),++C,this._lookUpTableBezier[C]=this._bezierCoefficients(m);break}w+=T,b-=T,++C}}for(var A=this._lookUpTableBezier.length,M=[],k=0;k<4;k++)M.push([]);M[0]=this.immediateMode.geometry.vertexColors.slice(-4),M[3]=this.curFillColor.slice();var P=[];for(k=0;k<4;k++)P.push([]);if(P[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),P[3]=this.curStrokeColor.slice(),x===6){this.isBezier=!0;var g=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],v=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],F=Math.hypot(g[0]-g[1],v[0]-v[1]),B=Math.hypot(g[1]-g[2],v[1]-v[2]),I=Math.hypot(g[2]-g[3],v[2]-v[3]),B=F+B+I;for(F/=B,I/=B,p=0;p<4;p++)M[1].push(M[0][p]*(1-F)+M[3][p]*F),M[2].push(M[0][p]*I+M[3][p]*(1-I)),P[1].push(P[0][p]*(1-F)+P[3][p]*F),P[2].push(P[0][p]*I+P[3][p]*(1-I));for(y=0;y<A;y++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],k=u=c=0;k<4;k++){for(p=0;p<4;p++)this.curFillColor[p]+=this._lookUpTableBezier[y][k]*M[k][p],this.curStrokeColor[p]+=this._lookUpTableBezier[y][k]*P[k][p];u+=g[k]*this._lookUpTableBezier[y][k],c+=v[k]*this._lookUpTableBezier[y][k]}this.vertex(u,c)}this.curFillColor=M[3],this.curStrokeColor=P[3],this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(x===9){this.isBezier=!0,g=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],v=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]];var H=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],G=Math.hypot(g[0]-g[1],v[0]-v[1],H[0]-H[1]),B=Math.hypot(g[1]-g[2],v[1]-v[2],H[1]-H[2]),W=Math.hypot(g[2]-g[3],v[2]-v[3],H[2]-H[3]),x=G+B+W;for(G/=x,W/=x,p=0;p<4;p++)M[1].push(M[0][p]*(1-G)+M[3][p]*G),M[2].push(M[0][p]*W+M[3][p]*(1-W)),P[1].push(P[0][p]*(1-G)+P[3][p]*G),P[2].push(P[0][p]*W+P[3][p]*(1-W));for(y=0;y<A;y++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],k=u=c=d=0;k<4;k++){for(p=0;p<4;p++)this.curFillColor[p]+=this._lookUpTableBezier[y][k]*M[k][p],this.curStrokeColor[p]+=this._lookUpTableBezier[y][k]*P[k][p];u+=g[k]*this._lookUpTableBezier[y][k],c+=v[k]*this._lookUpTableBezier[y][k],d+=H[k]*this._lookUpTableBezier[y][k]}this.vertex(u,c,d)}this.curFillColor=M[3],this.curStrokeColor=P[3],this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},s.default.RendererGL.prototype.quadraticVertex=function(){if(this.immediateMode._quadraticVertex.length===0)throw Error("vertex() must be used once before calling quadraticVertex()");var u,c,d,y,p,m,g=[],v=[],x=arguments.length;if(this._lookUpTableQuadratic.length===0||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var T=1/this._lutQuadraticDetail,w=0,b=1,C=0;w<1;){if(m=parseFloat(w.toFixed(6)),this._lookUpTableQuadratic[C]=this._quadraticCoefficients(m),b.toFixed(6)===T.toFixed(6)){m=parseFloat(b.toFixed(6))+parseFloat(w.toFixed(6)),++C,this._lookUpTableQuadratic[C]=this._quadraticCoefficients(m);break}w+=T,b-=T,++C}}for(var A=this._lookUpTableQuadratic.length,M=[],k=0;k<3;k++)M.push([]);M[0]=this.immediateMode.geometry.vertexColors.slice(-4),M[2]=this.curFillColor.slice();var P=[];for(k=0;k<3;k++)P.push([]);if(P[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),P[2]=this.curStrokeColor.slice(),x===4){this.isQuadratic=!0;var g=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],v=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],F=Math.hypot(g[0]-g[1],v[0]-v[1]);for(F/=F+Math.hypot(g[1]-g[2],v[1]-v[2]),p=0;p<4;p++)M[1].push(M[0][p]*(1-F)+M[2][p]*F),P[1].push(P[0][p]*(1-F)+P[2][p]*F);for(y=0;y<A;y++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],k=u=c=0;k<3;k++){for(p=0;p<4;p++)this.curFillColor[p]+=this._lookUpTableQuadratic[y][k]*M[k][p],this.curStrokeColor[p]+=this._lookUpTableQuadratic[y][k]*P[k][p];u+=g[k]*this._lookUpTableQuadratic[y][k],c+=v[k]*this._lookUpTableQuadratic[y][k]}this.vertex(u,c)}this.curFillColor=M[2],this.curStrokeColor=P[2],this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(x===6){this.isQuadratic=!0,g=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],v=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]];var I=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],B=Math.hypot(g[0]-g[1],v[0]-v[1],I[0]-I[1]);for(B/=B+Math.hypot(g[1]-g[2],v[1]-v[2],I[1]-I[2]),p=0;p<4;p++)M[1].push(M[0][p]*(1-B)+M[2][p]*B),P[1].push(P[0][p]*(1-B)+P[2][p]*B);for(y=0;y<A;y++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],k=u=c=d=0;k<3;k++){for(p=0;p<4;p++)this.curFillColor[p]+=this._lookUpTableQuadratic[y][k]*M[k][p],this.curStrokeColor[p]+=this._lookUpTableQuadratic[y][k]*P[k][p];u+=g[k]*this._lookUpTableQuadratic[y][k],c+=v[k]*this._lookUpTableQuadratic[y][k],d+=I[k]*this._lookUpTableQuadratic[y][k]}this.vertex(u,c,d)}this.curFillColor=M[2],this.curStrokeColor=P[2],this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},s.default.RendererGL.prototype.curveVertex=function(){var u,c,d,y,p,m,g=[],v=[],x=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var T=1/this._lutBezierDetail,w=0,b=1,C=0;w<1;){if(m=parseFloat(w.toFixed(6)),this._lookUpTableBezier[C]=this._bezierCoefficients(m),b.toFixed(6)===T.toFixed(6)){m=parseFloat(b.toFixed(6))+parseFloat(w.toFixed(6)),++C,this._lookUpTableBezier[C]=this._bezierCoefficients(m);break}w+=T,b-=T,++C}}var A=this._lookUpTableBezier.length;if(x===2){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.length===8){for(this.isCurve=!0,g=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),v=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),p=0;p<A;p++)c=g[0]*this._lookUpTableBezier[p][0]+g[1]*this._lookUpTableBezier[p][1]+g[2]*this._lookUpTableBezier[p][2]+g[3]*this._lookUpTableBezier[p][3],d=v[0]*this._lookUpTableBezier[p][0]+v[1]*this._lookUpTableBezier[p][1]+v[2]*this._lookUpTableBezier[p][2]+v[3]*this._lookUpTableBezier[p][3],this.vertex(c,d);for(p=0;p<x;p++)this.immediateMode._curveVertex.shift()}}else if(x===3&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),this.immediateMode._curveVertex.length===12)){for(this.isCurve=!0,g=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),v=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),u=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),p=0;p<A;p++)c=g[0]*this._lookUpTableBezier[p][0]+g[1]*this._lookUpTableBezier[p][1]+g[2]*this._lookUpTableBezier[p][2]+g[3]*this._lookUpTableBezier[p][3],d=v[0]*this._lookUpTableBezier[p][0]+v[1]*this._lookUpTableBezier[p][1]+v[2]*this._lookUpTableBezier[p][2]+v[3]*this._lookUpTableBezier[p][3],y=u[0]*this._lookUpTableBezier[p][0]+u[1]*this._lookUpTableBezier[p][1]+u[2]*this._lookUpTableBezier[p][2]+u[3]*this._lookUpTableBezier[p][3],this.vertex(c,d,y);for(p=0;p<x;p++)this.immediateMode._curveVertex.shift()}},s.default.RendererGL.prototype.image=function(u,b,d,C,p,m,g,v,x){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.noStroke(),this._pInst.texture(u),this._pInst.textureMode(a.NORMAL);var T=0,w=(b<=u.width&&(T=b/u.width),1),b=(b+C<=u.width&&(w=(b+C)/u.width),0),C=(d<=u.height&&(b=d/u.height),1);d+p<=u.height&&(C=(d+p)/u.height),this.beginShape(),this.vertex(m,g,0,T,b),this.vertex(m+v,g,0,w,b),this.vertex(m+v,g+x,0,w,C),this.vertex(m,g+x,0,T,C),this.endShape(a.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(a.REMOVE)};var l=s.default;i.default=l},{"../core/constants":264,"../core/main":275,"./p5.Geometry":327,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.math.hypot":170,"core-js/modules/es.math.sign":172,"core-js/modules/es.number.to-fixed":175,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],319:[function(t,r,i){function n(c){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(c)}function o(c){return(o=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(d){return n(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":n(d)})(c)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.assign"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(u=t("../core/main"))&&u.__esModule?u:{default:u},a=function(c){if(c&&c.__esModule)return c;if(c===null||o(c)!=="object"&&typeof c!="function")return{default:c};var d=f();if(d&&d.has(c))return d.get(c);var y,p={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in c){var g;Object.prototype.hasOwnProperty.call(c,y)&&((g=m?Object.getOwnPropertyDescriptor(c,y):null)&&(g.get||g.set)?Object.defineProperty(p,y,g):p[y]=c[y])}return p.default=c,d&&d.set(c,p),p}(t("../core/constants"));function f(){var c;return typeof WeakMap!="function"?null:(c=new WeakMap,f=function(){return c},c)}function h(c){return function(d){if(Array.isArray(d)){for(var y=0,p=new Array(d.length);y<d.length;y++)p[y]=d[y];return p}}(c)||function(d){if(Symbol.iterator in Object(d)||Object.prototype.toString.call(d)==="[object Arguments]")return Array.from(d)}(c)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(c,d){for(var y=0;y<d.length;y++){var p=d[y];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(c,p.key,p)}}var u=function(){function c(p){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");(this.renderer=p)._pInst.push(),this.identityMatrix=new s.default.Matrix,p.uMVMatrix=new s.default.Matrix,this.geometry=new s.default.Geometry,this.geometry.gid="_p5_GeometryBuilder_".concat(c.nextGeometryId),c.nextGeometryId++,this.hasTransform=!1}var d,y;return d=c,(y=[{key:"transformVertices",value:function(p){var m=this;return this.hasTransform?p.map(function(g){return m.renderer.uMVMatrix.multiplyPoint(g)}):p}},{key:"transformNormals",value:function(p){var m=this;return this.hasTransform?p.map(function(g){return m.renderer.uNMatrix.multiplyVec3(g)}):p}},{key:"addGeometry",value:function(p){for(var m,g=this,v=(this.hasTransform=!this.renderer.uMVMatrix.mat4.every(function(T,w){return T===g.identityMatrix.mat4[w]}),this.hasTransform&&this.renderer.uNMatrix.inverseTranspose(this.renderer.uMVMatrix),this.geometry.vertices.length),x=((m=this.geometry.vertices).push.apply(m,h(this.transformVertices(p.vertices))),(m=this.geometry.vertexNormals).push.apply(m,h(this.transformNormals(p.vertexNormals))),(m=this.geometry.uvs).push.apply(m,h(p.uvs)),this.renderer._doFill&&(m=this.geometry.faces).push.apply(m,h(p.faces.map(function(T){return T.map(function(w){return w+v})}))),this.renderer._doStroke&&(m=this.geometry.edges).push.apply(m,h(p.edges.map(function(T){return T.map(function(w){return w+v})}))),h(p.vertexColors));x.length<4*p.vertices.length;)x.push.apply(x,h(this.renderer.curFillColor));(m=this.geometry.vertexColors).push.apply(m,h(x))}},{key:"addImmediate",value:function(){var p=this.renderer.immediateMode.geometry,m=this.renderer.immediateMode.shapeMode,g=[];if(this.renderer._doFill)if(m===a.TRIANGLE_STRIP||m===a.QUAD_STRIP)for(var v=2;v<p.vertices.length;v++)v%2==0?g.push([v,v-1,v-2]):g.push([v,v-2,v-1]);else if(m===a.TRIANGLE_FAN)for(var x=2;x<p.vertices.length;x++)g.push([0,x-1,x]);else for(var T=0;T<p.vertices.length;T+=3)g.push([T,T+1,T+2]);this.addGeometry(Object.assign({},p,{faces:g}))}},{key:"addRetained",value:function(p){this.addGeometry(p.model)}},{key:"finish",value:function(){return this.renderer._pInst.pop(),this.geometry}}])&&l(d.prototype,y),c}();u.nextGeometryId=0,i.default=u},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.every":153,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.map":164,"core-js/modules/es.object.assign":176,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],320:[function(t,r,i){function n(l){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(l)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=(h=t("../core/main"))&&h.__esModule?h:{default:h},s=function(l){if(l&&l.__esModule)return l;if(l===null||f(l)!=="object"&&typeof l!="function")return{default:l};var u=a();if(u&&u.has(l))return u.get(l);var c,d={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in l){var p;Object.prototype.hasOwnProperty.call(l,c)&&((p=y?Object.getOwnPropertyDescriptor(l,c):null)&&(p.get||p.set)?Object.defineProperty(d,c,p):d[c]=l[c])}return d.default=l,u&&u.set(l,d),d}(t("../core/constants"));function a(){var l;return typeof WeakMap!="function"?null:(l=new WeakMap,a=function(){return l},l)}function f(l){return(f=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(u){return n(u)}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":n(u)})(l)}o.default.prototype.orbitControl=function(l,u,c,x){var y=this,p=(this._assert3d("orbitControl"),o.default._validateParameters("orbitControl",arguments),this._renderer._curCamera);l===void 0&&(l=1),u===void 0&&(u=l),c===void 0&&(c=1),f(x)!=="object"&&(x={}),this.contextMenuDisabled!==!0&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),this.wheelDefaultDisabled!==!0&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var w=x.disableTouchActions;this.touchActionsDisabled===!0||w!==void 0&&!w||(this.canvas.style["touch-action"]="none",this._setProperty("touchActionsDisabled",!0));var m,g,v,w=x.freeRotation,x=w!==void 0&&w,T=[],w=(this.touches.forEach(function(F){y._renderer.prevTouches.forEach(function(I){F.id===I.id&&(I={x:F.x,y:F.y,px:I.x,py:I.y},T.push(I))})}),this._renderer.prevTouches=this.touches,0),b=0,C=0,A=0,M=0,k=this.height<this.width?this.height:this.width,P=!1;return 0<T.length?(P=0<T[0].x&&T[0].x<this.width&&0<T[0].y&&T[0].y<this.height,T.length===1?(b=-l*((m=T[0]).x-m.px)/k,C=u*(m.y-m.py)/k):(m=T[0],g=T[1],w=-(Math.hypot(m.x-g.x,m.y-g.y)-Math.hypot(m.px-g.px,m.py-g.py))*c*4e-4,A=.5*(m.x+g.x)-.5*(m.px+g.px),M=.5*(m.y+g.y)-.5*(m.py+g.py)),0<this.touches.length?P&&(this._renderer.executeRotateAndMove=!0,this._renderer.executeZoom=!0):(this._renderer.executeRotateAndMove=!1,this._renderer.executeZoom=!1)):(P=0<this.mouseX&&this.mouseX<this.width&&0<this.mouseY&&this.mouseY<this.height,this._mouseWheelDeltaY!==0?(w=Math.sign(this._mouseWheelDeltaY)*c,w*=.01,this._mouseWheelDeltaY=0,P&&(this._renderer.executeZoom=!0)):this._renderer.zoomFlag=!1,this.mouseIsPressed?(this.mouseButton===this.LEFT?(b=-l*this.movedX/k,C=u*this.movedY/k):this.mouseButton===this.RIGHT&&(A=this.movedX,M=this.movedY*p.yScale),P&&(this._renderer.executeRotateAndMove=!0)):this._renderer.executeRotateAndMove=!1),w!==0&&this._renderer.executeZoom&&(this._renderer.zoomVelocity+=w),.001<Math.abs(this._renderer.zoomVelocity)?(x?p._orbitFree(0,0,this._renderer.zoomVelocity):p._orbit(0,0,this._renderer.zoomVelocity),p.projMatrix.mat4[15]!==0&&(p.projMatrix.mat4[0]*=Math.pow(10,-this._renderer.zoomVelocity),p.projMatrix.mat4[5]*=Math.pow(10,-this._renderer.zoomVelocity),this._renderer.uPMatrix.mat4[0]=p.projMatrix.mat4[0],this._renderer.uPMatrix.mat4[5]=p.projMatrix.mat4[5]),this._renderer.zoomVelocity*=.85):this._renderer.zoomVelocity=0,b===0&&C===0||!this._renderer.executeRotateAndMove||this._renderer.rotateVelocity.add(.6*b,.6*C),1e-6<this._renderer.rotateVelocity.magSq()?(x?p._orbitFree(-this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0):p._orbit(this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0),this._renderer.rotateVelocity.mult(.85)):this._renderer.rotateVelocity.set(0,0),A===0&&M===0||!this._renderer.executeRotateAndMove||(m=2*A/this.width,g=2*-M/this.height,this._renderer.moveVelocity.add(.15*m,.15*g)),1e-6<this._renderer.moveVelocity.magSq()?(c=p._getLocalAxes(),l=p.eyeX-p.centerX,u=p.eyeY-p.centerY,k=p.eyeZ-p.centerZ,P=Math.sqrt(l*l+u*u+k*k),w=new o.default.Vector(p.centerX,p.centerY,p.centerZ),w=p.cameraMatrix.multiplyPoint(w),(w=this._renderer.uPMatrix.multiplyAndNormalizePoint(w)).x-=this._renderer.moveVelocity.x,w.y-=this._renderer.moveVelocity.y,C=(b=this._renderer.uPMatrix.mat4)[15]===0?(v=(b[8]+w.x)/b[0]*P,(b[9]+w.y)/b[5]*P):(v=(w.x-b[12])/b[0],(w.y-b[13])/b[5]),p.setPosition(p.eyeX+v*c.x[0]+C*c.y[0],p.eyeY+v*c.x[1]+C*c.y[1],p.eyeZ+v*c.x[2]+C*c.y[2]),this._renderer.moveVelocity.mult(.85)):this._renderer.moveVelocity.set(0,0),this},o.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];o.default._validateParameters("debugMode",u);for(var d=this._registeredMethods.post.length-1;0<=d;d--)this._registeredMethods.post[d].toString()!==this._grid().toString()&&this._registeredMethods.post[d].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(d,1);u[0]===s.GRID?this.registerMethod("post",this._grid.call(this,u[1],u[2],u[3],u[4],u[5])):u[0]===s.AXES?this.registerMethod("post",this._axesIcon.call(this,u[1],u[2],u[3],u[4])):(this.registerMethod("post",this._grid.call(this,u[0],u[1],u[2],u[3],u[4])),this.registerMethod("post",this._axesIcon.call(this,u[5],u[6],u[7],u[8])))},o.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var l=this._registeredMethods.post.length-1;0<=l;l--)this._registeredMethods.post[l].toString()!==this._grid().toString()&&this._registeredMethods.post[l].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(l,1)},o.default.prototype._grid=function(l,u,c,d,y){l===void 0&&(l=this.width/2),u===void 0&&(u=Math.round(l/30)<4?4:Math.round(l/30)),c===void 0&&(c=0),d===void 0&&(d=0),y===void 0&&(y=0);var p=l/u,m=l/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]);for(var g=0;g<=u;g++)this.beginShape(this.LINES),this.vertex(-m+c,d,g*p-m+y),this.vertex(m+c,d,g*p-m+y),this.endShape();for(var v=0;v<=u;v++)this.beginShape(this.LINES),this.vertex(v*p-m+c,d,-m+y),this.vertex(v*p-m+c,d,m+y),this.endShape();this.pop()}},o.default.prototype._axesIcon=function(l,u,c,d){return l===void 0&&(l=40<this.width/20?this.width/20:40),u===void 0&&(u=-this.width/4),c===void 0&&(c=u),d===void 0&&(d=u),function(){this.push(),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(u,c,d),this.vertex(u+l,c,d),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(u,c,d),this.vertex(u,c+l,d),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(u,c,d),this.vertex(u,c,d+l),this.endShape(),this.pop()}};var h=o.default;i.default=h},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.splice":167,"core-js/modules/es.math.hypot":170,"core-js/modules/es.math.sign":172,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238}],321:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=(t=t("../core/main"))&&t.__esModule?t:{default:t};n.default.prototype.ambientLight=function(o,s,a,f){this._assert3d("ambientLight"),n.default._validateParameters("ambientLight",arguments);var h=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(h._array[0],h._array[1],h._array[2]),this._renderer._enableLighting=!0,this},n.default.prototype.specularColor=function(o,s,a){this._assert3d("specularColor"),n.default._validateParameters("specularColor",arguments);var f=this.color.apply(this,arguments);return this._renderer.specularColors=[f._array[0],f._array[1],f._array[2]],this},n.default.prototype.directionalLight=function(o,y,d,f,h,l){this._assert3d("directionalLight"),n.default._validateParameters("directionalLight",arguments),o=o instanceof n.default.Color?o:this.color(o,y,d);var u,c,y=arguments[arguments.length-1],d=typeof y=="number"?(u=arguments[arguments.length-3],c=arguments[arguments.length-2],arguments[arguments.length-1]):(u=y.x,c=y.y,y.z),y=Math.sqrt(u*u+c*c+d*d);return this._renderer.directionalLightDirections.push(u/y,c/y,d/y),this._renderer.directionalLightDiffuseColors.push(o._array[0],o._array[1],o._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},n.default.prototype.pointLight=function(o,d,y,f,h,l){this._assert3d("pointLight"),n.default._validateParameters("pointLight",arguments),o=o instanceof n.default.Color?o:this.color(o,d,y);var u,c,d=arguments[arguments.length-1],y=typeof d=="number"?(u=arguments[arguments.length-3],c=arguments[arguments.length-2],arguments[arguments.length-1]):(u=d.x,c=d.y,d.z);return this._renderer.pointLightPositions.push(u,c,y),this._renderer.pointLightDiffuseColors.push(o._array[0],o._array[1],o._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},n.default.prototype.imageLight=function(o){this._renderer.activeImageLight=o,this._renderer._enableLighting=!0},n.default.prototype.lights=function(){this._assert3d("lights");var o=this.color("rgb(128,128,128)");return this.ambientLight(o),this.directionalLight(o,0,0,-1),this},n.default.prototype.lightFalloff=function(o,s,a){return this._assert3d("lightFalloff"),n.default._validateParameters("lightFalloff",arguments),o<0&&(o=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),s<0&&(s=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),a<0&&(a=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),o===0&&s===0&&a===0&&(o=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=o,this._renderer.linearAttenuation=s,this._renderer.quadraticAttenuation=a,this},n.default.prototype.spotLight=function(o,s,a,f,h,l,u,c,d,y,p){this._assert3d("spotLight"),n.default._validateParameters("spotLight",arguments);var m,g,v,x=arguments.length;switch(x){case 11:case 10:m=this.color(o,s,a),g=new n.default.Vector(f,h,l),v=new n.default.Vector(u,c,d);break;case 9:o instanceof n.default.Color?(m=o,g=new n.default.Vector(s,a,f),v=new n.default.Vector(h,l,u),y=c,p=d):f instanceof n.default.Vector?(m=this.color(o,s,a),g=f,v=new n.default.Vector(h,l,u),y=c,p=d):u instanceof n.default.Vector?(m=this.color(o,s,a),g=new n.default.Vector(f,h,l),v=u,y=c,p=d):(m=this.color(o,s,a),g=new n.default.Vector(f,h,l),v=new n.default.Vector(u,c,d));break;case 8:y=(v=o instanceof n.default.Color?(m=o,g=new n.default.Vector(s,a,f),new n.default.Vector(h,l,u)):f instanceof n.default.Vector?(m=this.color(o,s,a),g=f,new n.default.Vector(h,l,u)):(m=this.color(o,s,a),g=new n.default.Vector(f,h,l),u),c);break;case 7:o instanceof n.default.Color&&s instanceof n.default.Vector?(m=o,g=s,v=new n.default.Vector(a,f,h),y=l,p=u):o instanceof n.default.Color&&h instanceof n.default.Vector?(m=o,g=new n.default.Vector(s,a,f),v=h,y=l,p=u):f instanceof n.default.Vector&&h instanceof n.default.Vector?(m=this.color(o,s,a),g=f,v=h,y=l,p=u):v=o instanceof n.default.Color?(m=o,g=new n.default.Vector(s,a,f),new n.default.Vector(h,l,u)):f instanceof n.default.Vector?(m=this.color(o,s,a),g=f,new n.default.Vector(h,l,u)):(m=this.color(o,s,a),g=new n.default.Vector(f,h,l),u);break;case 6:f instanceof n.default.Vector&&h instanceof n.default.Vector?(m=this.color(o,s,a),g=f,v=h,y=l):o instanceof n.default.Color&&h instanceof n.default.Vector?(m=o,g=new n.default.Vector(s,a,f),v=h,y=l):o instanceof n.default.Color&&s instanceof n.default.Vector&&(m=o,g=s,v=new n.default.Vector(a,f,h),y=l);break;case 5:o instanceof n.default.Color&&s instanceof n.default.Vector&&a instanceof n.default.Vector?(m=o,g=s,v=a,y=f,p=h):f instanceof n.default.Vector&&h instanceof n.default.Vector?(m=this.color(o,s,a),g=f,v=h):o instanceof n.default.Color&&h instanceof n.default.Vector?(m=o,g=new n.default.Vector(s,a,f),v=h):o instanceof n.default.Color&&s instanceof n.default.Vector&&(m=o,g=s,v=new n.default.Vector(a,f,h));break;case 4:m=o,g=s,v=a,y=f;break;case 3:m=o,g=s,v=a;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(x<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(m._array[0],m._array[1],m._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(g.x,g.y,g.z),v.normalize(),this._renderer.spotLightDirections.push(v.x,v.y,v.z),y===void 0&&(y=Math.PI/3),p!==void 0&&p<1?(p=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):p===void 0&&(p=100),y=this._renderer._pInst._toRadians(y),this._renderer.spotLightAngle.push(Math.cos(y)),this._renderer.spotLightConc.push(p),this._renderer._enableLighting=!0,this},n.default.prototype.noLights=function(){this._assert3d("noLights");for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return n.default._validateParameters("noLights",s),this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this},t=n.default,i.default=t},{"../core/main":275}],322:[function(t,r,i){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=(o=t("../core/main"))&&o.__esModule?o:{default:o};t("./p5.Geometry"),n.default.prototype.loadModel=function(s){n.default._validateParameters("loadModel",arguments);var a,f,h,l=s.slice(-4),u=(typeof arguments[1]=="boolean"?(a=arguments[1],f=arguments[2],h=arguments[3],arguments[4]!==void 0&&(l=arguments[4])):(a=!1,f=arguments[1],h=arguments[2],arguments[3]!==void 0&&(l=arguments[3])),new n.default.Geometry),c=(u.gid="".concat(s,"|").concat(a),this);return l.match(/\.stl$/i)?this.httpDo(s,"GET","arrayBuffer",function(d){(function(y,p){if(function(m){for(var g=new DataView(m),v=[115,111,108,105,100],x=0;x<5;x++)if(function(T,w,b){for(var C=0,A=T.length;C<A;C++)if(T[C]!==w.getUint8(b+C,!1))return;return 1}(v,g,x))return;return 1}(p))(function(m,g){for(var v,x,T,w,b,C,A,M=new DataView(g),k=M.getUint32(80,!0),P=!1,F=0;F<70;F++)M.getUint32(F,!1)===1129270351&&M.getUint8(F+4)===82&&M.getUint8(F+5)===61&&(P=!0,w=[],b=M.getUint8(F+6)/255,C=M.getUint8(F+7)/255,A=M.getUint8(F+8)/255);for(var I=0;I<k;I++){for(var B,H=84+50*I,G=M.getFloat32(H,!0),W=M.getFloat32(4+H,!0),Q=M.getFloat32(8+H,!0),ne=(P&&(B=M.getUint16(48+H,!0),T=32768&B?(v=b,x=C,A):(v=(31&B)/31,x=(B>>5&31)/31,(B>>10&31)/31)),new n.default.Vector(G,W,Q)),U=1;U<=3;U++){var D=H+12*U,D=new n.default.Vector(M.getFloat32(D,!0),M.getFloat32(4+D,!0),M.getFloat32(8+D,!0));m.vertices.push(D),m.vertexNormals.push(ne),P&&w.push(v,x,T)}m.faces.push([3*I,3*I+1,3*I+2]),m.uvs.push([0,0],[0,0],[0,0])}})(y,p);else{if(p=new DataView(p),!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)");p=new TextDecoder("utf-8").decode(p).split(`
`),function(m,g){for(var v,x,T="",w=[],b=0;b<g.length;++b){for(var C=g[b].trim(),A=C.split(" "),M=0;M<A.length;++M)A[M]===""&&A.splice(M,1);if(A.length!==0)switch(T){case"":if(A[0]!=="solid")return console.error(C),console.error('Invalid state "'.concat(A[0],'", should be "solid"'));T="solid";break;case"solid":if(A[0]!=="facet"||A[1]!=="normal")return console.error(C),console.error('Invalid state "'.concat(A[0],'", should be "facet normal"'));v=new n.default.Vector(parseFloat(A[2]),parseFloat(A[3]),parseFloat(A[4])),m.vertexNormals.push(v,v,v),T="facet normal";break;case"facet normal":if(A[0]!=="outer"||A[1]!=="loop")return console.error(C),console.error('Invalid state "'.concat(A[0],'", should be "outer loop"'));T="vertex";break;case"vertex":if(A[0]==="vertex")x=new n.default.Vector(parseFloat(A[1]),parseFloat(A[2]),parseFloat(A[3])),m.vertices.push(x),m.uvs.push([0,0]),w.push(m.vertices.indexOf(x));else{if(A[0]!=="endloop")return console.error(C),console.error('Invalid state "'.concat(A[0],'", should be "vertex" or "endloop"'));m.faces.push(w),w=[],T="endloop"}break;case"endloop":if(A[0]!=="endfacet")return console.error(C),console.error('Invalid state "'.concat(A[0],'", should be "endfacet"'));T="endfacet";break;case"endfacet":if(A[0]!=="endsolid"){if(A[0]!=="facet"||A[1]!=="normal")return console.error(C),console.error('Invalid state "'.concat(A[0],'", should be "endsolid" or "facet normal"'));v=new n.default.Vector(parseFloat(A[2]),parseFloat(A[3]),parseFloat(A[4])),m.vertexNormals.push(v,v,v),T="facet normal"}break;default:console.error('Invalid state "'.concat(T,'"'))}}}(y,p)}})(u,d),a&&u.normalize(),c._decrementPreload(),typeof f=="function"&&f(u)},h):l.match(/\.obj$/i)?this.loadStrings(s,function(d){for(var y=u,p=d,m={v:[],vt:[],vn:[]},g={},v=0;v<p.length;++v){var x=p[v].trim().split(/\b\s+/);if(0<x.length){if(x[0]==="v"||x[0]==="vn"){var T=new n.default.Vector(parseFloat(x[1]),parseFloat(x[2]),parseFloat(x[3]));m[x[0]].push(T)}else if(x[0]==="vt")T=[parseFloat(x[1]),1-parseFloat(x[2])],m[x[0]].push(T);else if(x[0]==="f")for(var w=3;w<x.length;++w){for(var b=[],C=[1,w-1,w],A=0;A<C.length;++A){var M=x[C[A]],k=0;if(g[M]!==void 0)k=g[M];else{for(var P=M.split("/"),F=0;F<P.length;F++)P[F]=parseInt(P[F])-1;k=g[M]=y.vertices.length,y.vertices.push(m.v[P[0]].copy()),m.vt[P[1]]?y.uvs.push(m.vt[P[1]].slice()):y.uvs.push([0,0]),m.vn[P[2]]&&y.vertexNormals.push(m.vn[P[2]].copy())}b.push(k)}b[0]!==b[1]&&b[0]!==b[2]&&b[1]!==b[2]&&y.faces.push(b)}}}y.vertexNormals.length===0&&y.computeNormals(),a&&u.normalize(),c._decrementPreload(),typeof f=="function"&&f(u)},h):(n.default._friendlyFileLoadError(3,s),h?h():n.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),u},n.default.prototype.model=function(s){this._assert3d("model"),n.default._validateParameters("model",arguments),0<s.vertices.length&&(this._renderer.geometryInHash(s.gid)||(s.edges.length===0&&s._makeTriangleEdges(),s._edgesToVertices(),this._renderer.createBuffers(s.gid,s)),this._renderer.drawBuffers(s.gid))};var o=n.default;i.default=o},{"../core/main":275,"./p5.Geometry":327,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.splice":167,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.match":193,"core-js/modules/es.string.split":198,"core-js/modules/es.string.trim":201}],323:[function(t,r,i){function n(l){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(l)}function o(l){return(o=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(u){return n(u)}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":n(u)})(l)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(h=t("../core/main"))&&h.__esModule?h:{default:h},a=function(l){if(l&&l.__esModule)return l;if(l===null||o(l)!=="object"&&typeof l!="function")return{default:l};var u=f();if(u&&u.has(l))return u.get(l);var c,d={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in l){var p;Object.prototype.hasOwnProperty.call(l,c)&&((p=y?Object.getOwnPropertyDescriptor(l,c):null)&&(p.get||p.set)?Object.defineProperty(d,c,p):d[c]=l[c])}return d.default=l,u&&u.set(l,d),d}(t("../core/constants"));function f(){var l;return typeof WeakMap!="function"?null:(l=new WeakMap,f=function(){return l},l)}t("./p5.Texture"),s.default.prototype.loadShader=function(l,u,c,d){s.default._validateParameters("loadShader",arguments),d=d||console.error;function y(){m._decrementPreload(),c&&c(p)}var p=new s.default.Shader,m=this,g=!1,v=!1;return this.loadStrings(l,function(x){p._vertSrc=x.join(`
`),v=!0,g&&y()},d),this.loadStrings(u,function(x){p._fragSrc=x.join(`
`),g=!0,v&&y()},d),p},s.default.prototype.createShader=function(l,u){return s.default._validateParameters("createShader",arguments),new s.default.Shader(this._renderer,l,u)},s.default.prototype.createFilterShader=function(l){s.default._validateParameters("createFilterShader",arguments);var u=l.includes("#version 300 es")?`#version 300 es
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    in vec3 aPosition;
    in vec2 aTexCoord;
    out vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `:`
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    attribute vec3 aPosition;
    // texcoords only come from p5 to vertex shader
    // so pass texcoords on to the fragment shader in a varying variable
    attribute vec2 aTexCoord;
    varying vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `,u=new s.default.Shader(this._renderer,u,l);return this._renderer.GL?u.ensureCompiledOnContext(this):u.ensureCompiledOnContext(this._renderer.getFilterGraphicsLayer()),u},s.default.prototype.shader=function(l){return this._assert3d("shader"),s.default._validateParameters("shader",arguments),l.ensureCompiledOnContext(this),l.isStrokeShader()?this._renderer.userStrokeShader=l:(this._renderer.userFillShader=l,this._renderer._useNormalMaterial=!1),this},s.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},s.default.prototype.texture=function(l){return this._assert3d("texture"),s.default._validateParameters("texture",arguments),l.gifProperties&&l._animateGif(this),this._renderer.drawMode=a.TEXTURE,this._renderer._useNormalMaterial=!1,this._renderer._tex=l,this._renderer._setProperty("_doFill",!0),this},s.default.prototype.textureMode=function(l){l!==a.IMAGE&&l!==a.NORMAL?console.warn("You tried to set ".concat(l," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=l},s.default.prototype.textureWrap=function(l){var u=1<arguments.length&&arguments[1]!==void 0?arguments[1]:l,c=(this._renderer.textureWrapX=l,this._renderer.textureWrapY=u,!0),d=!1,y=void 0;try{for(var p,m=this._renderer.textures.values()[Symbol.iterator]();!(c=(p=m.next()).done);c=!0)p.value.setWrapMode(l,u)}catch(g){d=!0,y=g}finally{try{c||m.return==null||m.return()}finally{if(d)throw y}}},s.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return s.default._validateParameters("normalMaterial",u),this._renderer.drawMode=a.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},s.default.prototype.ambientMaterial=function(l,u,c){this._assert3d("ambientMaterial"),s.default._validateParameters("ambientMaterial",arguments);var d=s.default.prototype.color.apply(this,arguments);return this._renderer._hasSetAmbient=!0,this._renderer.curAmbientColor=d._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._setProperty("_doFill",!0),this},s.default.prototype.emissiveMaterial=function(l,u,c,d){this._assert3d("emissiveMaterial"),s.default._validateParameters("emissiveMaterial",arguments);var y=s.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=y._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},s.default.prototype.specularMaterial=function(l,u,c,d){this._assert3d("specularMaterial"),s.default._validateParameters("specularMaterial",arguments);var y=s.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=y._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},s.default.prototype.shininess=function(l){return this._assert3d("shininess"),s.default._validateParameters("shininess",arguments),this._renderer._useShininess=l=l<1?1:l,this},s.default.RendererGL.prototype._applyColorBlend=function(l){var u=this.GL,c=this.drawMode===a.TEXTURE,c=this.userFillShader||this.userStrokeShader||this.userPointShader||c||this.curBlendMode!==a.BLEND||l[l.length-1]<1||this._isErasing;return c!==this._isBlending&&(c||this.curBlendMode!==a.BLEND&&this.curBlendMode!==a.ADD?u.enable(u.BLEND):u.disable(u.BLEND),u.depthMask(!0),this._isBlending=c),this._applyBlendMode(),l},s.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var l=this.GL;switch(this.curBlendMode){case a.BLEND:l.blendEquation(l.FUNC_ADD),l.blendFunc(l.ONE,l.ONE_MINUS_SRC_ALPHA);break;case a.ADD:l.blendEquation(l.FUNC_ADD),l.blendFunc(l.ONE,l.ONE);break;case a.REMOVE:l.blendEquation(l.FUNC_ADD),l.blendFunc(l.ZERO,l.ONE_MINUS_SRC_ALPHA);break;case a.MULTIPLY:l.blendEquation(l.FUNC_ADD),l.blendFunc(l.DST_COLOR,l.ONE_MINUS_SRC_ALPHA);break;case a.SCREEN:l.blendEquation(l.FUNC_ADD),l.blendFunc(l.ONE,l.ONE_MINUS_SRC_COLOR);break;case a.EXCLUSION:l.blendEquationSeparate(l.FUNC_ADD,l.FUNC_ADD),l.blendFuncSeparate(l.ONE_MINUS_DST_COLOR,l.ONE_MINUS_SRC_COLOR,l.ONE,l.ONE);break;case a.REPLACE:l.blendEquation(l.FUNC_ADD),l.blendFunc(l.ONE,l.ZERO);break;case a.SUBTRACT:l.blendEquationSeparate(l.FUNC_REVERSE_SUBTRACT,l.FUNC_ADD),l.blendFuncSeparate(l.ONE,l.ONE,l.ONE,l.ONE_MINUS_SRC_ALPHA);break;case a.DARKEST:this.blendExt?(l.blendEquationSeparate(this.blendExt.MIN||this.blendExt.MIN_EXT,l.FUNC_ADD),l.blendFuncSeparate(l.ONE,l.ONE,l.ONE,l.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case a.LIGHTEST:this.blendExt?(l.blendEquationSeparate(this.blendExt.MAX||this.blendExt.MAX_EXT,l.FUNC_ADD),l.blendFuncSeparate(l.ONE,l.ONE,l.ONE,l.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var h=s.default;i.default=h},{"../core/constants":264,"../core/main":275,"./p5.Texture":334,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],324:[function(t,r,i){t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.string.sub"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=(t=t("../core/main"))&&t.__esModule?t:{default:t};function o(s,a){for(var f=0;f<a.length;f++){var h=a[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(s,h.key,h)}}n.default.prototype.camera=function(){var s;this._assert3d("camera");for(var a=arguments.length,f=new Array(a),h=0;h<a;h++)f[h]=arguments[h];return n.default._validateParameters("camera",f),(s=this._renderer._curCamera).camera.apply(s,f),this},n.default.prototype.perspective=function(){var s;this._assert3d("perspective");for(var a=arguments.length,f=new Array(a),h=0;h<a;h++)f[h]=arguments[h];return n.default._validateParameters("perspective",f),(s=this._renderer._curCamera).perspective.apply(s,f),this},n.default.prototype.ortho=function(){var s;this._assert3d("ortho");for(var a=arguments.length,f=new Array(a),h=0;h<a;h++)f[h]=arguments[h];return n.default._validateParameters("ortho",f),(s=this._renderer._curCamera).ortho.apply(s,f),this},n.default.prototype.frustum=function(){var s;this._assert3d("frustum");for(var a=arguments.length,f=new Array(a),h=0;h<a;h++)f[h]=arguments[h];return n.default._validateParameters("frustum",f),(s=this._renderer._curCamera).frustum.apply(s,f),this},n.default.prototype.createCamera=function(){this._assert3d("createCamera");var s=new n.default.Camera(this._renderer);return s._computeCameraDefaultSettings(),s._setDefaultCamera(),this._renderer._curCamera=s},n.default.Camera=function(){function s(h){if(!(this instanceof s))throw new TypeError("Cannot call a class as a function");this._renderer=h,this.cameraType="default",this.cameraMatrix=new n.default.Matrix,this.projMatrix=new n.default.Matrix,this.yScale=1}var a,f;return a=s,(f=[{key:"perspective",value:function(d,l,u,c){this.cameraType=0<arguments.length?"custom":"default",d===void 0?(d=this.defaultCameraFOV,this.cameraFOV=d):this.cameraFOV=this._renderer._pInst._toRadians(d),l===void 0&&(l=this.defaultAspectRatio),u===void 0&&(u=this.defaultCameraNear),c===void 0&&(c=this.defaultCameraFar),u<=1e-4&&(u=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),c<u&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=l,this.cameraNear=u,this.cameraFar=c,this.projMatrix=n.default.Matrix.identity();var d=1/Math.tan(this.cameraFOV/2),y=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(d/l,0,0,0,0,-d*this.yScale,0,0,0,0,(c+u)*y,-1,0,0,2*c*u*y,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15])}},{key:"ortho",value:function(w,T,u,c,d,y){w===void 0&&(w=-this._renderer.width/2),T===void 0&&(T=+this._renderer.width/2),u===void 0&&(u=-this._renderer.height/2),c===void 0&&(c=+this._renderer.height/2),d===void 0&&(d=0),y===void 0&&(y=Math.max(this._renderer.width,this._renderer.height)),this.cameraNear=d;var b=T-w,p=c-u,m=(this.cameraFar=y)-d,g=2/b,v=2/p*this.yScale,x=-2/m,T=-(T+w)/b,w=-(c+u)/p,b=-(y+d)/m;this.projMatrix=n.default.Matrix.identity(),this.projMatrix.set(g,0,0,0,0,-v,0,0,0,0,x,0,T,w,b,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"}},{key:"frustum",value:function(w,T,u,c,d,y){w===void 0&&(w=.05*-this._renderer.width),T===void 0&&(T=.05*+this._renderer.width),u===void 0&&(u=.05*+this._renderer.height),c===void 0&&(c=.05*-this._renderer.height),d===void 0&&(d=this.defaultCameraNear),y===void 0&&(y=this.defaultCameraFar),this.cameraNear=d;var b=T-w,p=c-u,m=(this.cameraFar=y)-d,g=2*d/b,v=2*d/p*this.yScale,x=-2*y*d/m,T=(T+w)/b,w=(c+u)/p,b=-(y+d)/m;this.projMatrix=n.default.Matrix.identity(),this.projMatrix.set(g,0,0,0,0,-v,0,0,T,w,b,-1,0,0,x,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"}},{key:"_rotateView",value:function(g,l,u,c){var d=this.centerX,y=this.centerY,p=this.centerZ,m=(d-=this.eyeX,y-=this.eyeY,p-=this.eyeZ,n.default.Matrix.identity(this._renderer._pInst)),g=(m.rotate(this._renderer._pInst._toRadians(g),l,u,c),[d*m.mat4[0]+y*m.mat4[4]+p*m.mat4[8],d*m.mat4[1]+y*m.mat4[5]+p*m.mat4[9],d*m.mat4[2]+y*m.mat4[6]+p*m.mat4[10]]);g[0]+=this.eyeX,g[1]+=this.eyeY,g[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,g[0],g[1],g[2],this.upX,this.upY,this.upZ)}},{key:"pan",value:function(h){var l=this._getLocalAxes();this._rotateView(h,l.y[0],l.y[1],l.y[2])}},{key:"tilt",value:function(h){var l=this._getLocalAxes();this._rotateView(h,l.x[0],l.x[1],l.x[2])}},{key:"lookAt",value:function(h,l,u){this.camera(this.eyeX,this.eyeY,this.eyeZ,h,l,u,this.upX,this.upY,this.upZ)}},{key:"camera",value:function(h,l,u,c,d,y,p,m,g){return h===void 0&&(h=this.defaultEyeX,l=this.defaultEyeY,u=this.defaultEyeZ,c=h,d=l,m=1,g=p=y=0),this.eyeX=h,this.eyeY=l,this.eyeZ=u,c!==void 0&&(this.centerX=c,this.centerY=d,this.centerZ=y),p!==void 0&&(this.upX=p,this.upY=m,this.upZ=g),c=this._getLocalAxes(),this.cameraMatrix.set(c.x[0],c.y[0],c.z[0],0,c.x[1],c.y[1],c.z[1],0,c.x[2],c.y[2],c.z[2],0,0,0,0,1),d=-h,this.cameraMatrix.translate([d,-l,-u]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix.mat4[0],this.cameraMatrix.mat4[1],this.cameraMatrix.mat4[2],this.cameraMatrix.mat4[3],this.cameraMatrix.mat4[4],this.cameraMatrix.mat4[5],this.cameraMatrix.mat4[6],this.cameraMatrix.mat4[7],this.cameraMatrix.mat4[8],this.cameraMatrix.mat4[9],this.cameraMatrix.mat4[10],this.cameraMatrix.mat4[11],this.cameraMatrix.mat4[12],this.cameraMatrix.mat4[13],this.cameraMatrix.mat4[14],this.cameraMatrix.mat4[15]),this}},{key:"move",value:function(c,d,u){var y=this._getLocalAxes(),c=[y.x[0]*c,y.x[1]*c,y.x[2]*c],d=[y.y[0]*d,y.y[1]*d,y.y[2]*d],y=[y.z[0]*u,y.z[1]*u,y.z[2]*u];this.camera(this.eyeX+c[0]+d[0]+y[0],this.eyeY+c[1]+d[1]+y[1],this.eyeZ+c[2]+d[2]+y[2],this.centerX+c[0]+d[0]+y[0],this.centerY+c[1]+d[1]+y[1],this.centerZ+c[2]+d[2]+y[2],this.upX,this.upY,this.upZ)}},{key:"setPosition",value:function(h,l,u){var c=h-this.eyeX,d=l-this.eyeY,y=u-this.eyeZ;this.camera(h,l,u,this.centerX+c,this.centerY+d,this.centerZ+y,this.upX,this.upY,this.upZ)}},{key:"set",value:function(h){for(var l=0,u=["eyeX","eyeY","eyeZ","centerX","centerY","centerZ","upX","upY","upZ","cameraFOV","aspectRatio","cameraNear","cameraFar","cameraType","yScale"];l<u.length;l++){var c=u[l];this[c]=h[c]}this.cameraMatrix=h.cameraMatrix.copy(),this.projMatrix=h.projMatrix.copy(),this._isActive()&&(this._renderer.uMVMatrix.mat4=this.cameraMatrix.mat4.slice(),this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())}},{key:"slerp",value:function(h,l,u){var c,d,y,p,m,g,v,x,T,w,b,C,A,M,k,P,F,I;u===0?this.set(h):u===1?this.set(l):(this.projMatrix.mat4[15]!==0&&(this.projMatrix.mat4[0]=h.projMatrix.mat4[0]*Math.pow(l.projMatrix.mat4[0]/h.projMatrix.mat4[0],u),this.projMatrix.mat4[5]=h.projMatrix.mat4[5]*Math.pow(l.projMatrix.mat4[5]/h.projMatrix.mat4[5],u),this._isActive()&&(this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())),p=new n.default.Vector(h.eyeX,h.eyeY,h.eyeZ),m=new n.default.Vector(l.eyeX,l.eyeY,l.eyeZ),P=new n.default.Vector(h.centerX,h.centerY,h.centerZ),I=new n.default.Vector(l.centerX,l.centerY,l.centerZ),y=n.default.Vector.dist(p,P),c=n.default.Vector.dist(m,I),c=y*Math.pow(c/y,u),y=n.default.Vector.sub(p,m),d=1,1e-6<(F=(M=p.copy().sub(m).sub(P).add(I)).magSq())&&(d=n.default.Vector.dot(y,M)/F,d=Math.max(0,Math.min(d,1))),y=n.default.Vector.lerp(n.default.Vector.lerp(p,P,d),n.default.Vector.lerp(m,I,d),u),M=h.cameraMatrix.createSubMatrix3x3(),F=l.cameraMatrix.createSubMatrix3x3(),p=M.row(2),P=F.row(2),m=M.row(1),I=F.row(1),h=new n.default.Vector,l=new n.default.Vector,g=new n.default.Vector,v=new n.default.Vector,1-(x=.5*((M=(F=F.mult3x3(M.copy().transpose3x3())).diagonal())[0]+M[1]+M[2]-1))<1e-7?(h.set(n.default.Vector.lerp(p,P,u)).normalize(),g.set(h).mult(d*c).add(y),v.set(h).mult((d-1)*c).add(y),l.set(n.default.Vector.lerp(m,I,u)).normalize()):(P=1/(1-x),I=Math.max(M[0],M[1],M[2]),C=F.mat3[1]+F.mat3[3],A=F.mat3[2]+F.mat3[6],k=F.mat3[5]+F.mat3[7],I=I===M[0]?(w=.5*C*(P/=T=Math.sqrt((M[0]-x)*P)),b=.5*A*P,.5*(F.mat3[7]-F.mat3[5])/T):I===M[1]?(b=.5*k*(P/=w=Math.sqrt((M[1]-x)*P)),T=.5*C*P,.5*(F.mat3[2]-F.mat3[6])/w):(T=.5*A*(P/=b=Math.sqrt((M[2]-x)*P)),w=.5*k*P,.5*(F.mat3[3]-F.mat3[1])/b),C=u*Math.atan2(I,x),A=Math.cos(C),M=Math.sin(C),(I=new n.default.Matrix("mat3",[A+(k=1-A)*T*T,k*(P=T*w)+M*b,k*(F=b*T)-M*w,k*P-M*b,A+k*w*w,k*(u=w*b)+M*T,k*F+M*w,k*u-M*T,A+k*b*b])).multiplyVec3(p,h),g.set(h).mult(d*c).add(y),v.set(h).mult((d-1)*c).add(y),I.multiplyVec3(m,l)),this.camera(g.x,g.y,g.z,v.x,v.y,v.z,l.x,l.y,l.z))}},{key:"_computeCameraDefaultSettings",value:function(){this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=800,this.defaultCameraFOV=2*Math.atan(this._renderer.height/2/this.defaultEyeZ),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_setDefaultCamera",value:function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"}},{key:"_resize",value:function(){this.cameraType==="default"&&(this._computeCameraDefaultSettings(),this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.perspective())}},{key:"copy",value:function(){var h=new n.default.Camera(this._renderer);return h.cameraFOV=this.cameraFOV,h.aspectRatio=this.aspectRatio,h.eyeX=this.eyeX,h.eyeY=this.eyeY,h.eyeZ=this.eyeZ,h.centerX=this.centerX,h.centerY=this.centerY,h.centerZ=this.centerZ,h.upX=this.upX,h.upY=this.upY,h.upZ=this.upZ,h.cameraNear=this.cameraNear,h.cameraFar=this.cameraFar,h.cameraType=this.cameraType,h.cameraMatrix=this.cameraMatrix.copy(),h.projMatrix=this.projMatrix.copy(),h.yScale=this.yScale,h}},{key:"_getLocalAxes",value:function(){var h=this.eyeX-this.centerX,l=this.eyeY-this.centerY,u=this.eyeZ-this.centerZ,p=Math.sqrt(h*h+l*l+u*u),p=(p!==0&&(h/=p,l/=p,u/=p),this.upX),c=(m=this.upY)*u-(g=this.upZ)*l,d=-p*u+g*h,y=p*l-m*h,p=l*y-u*d,m=-h*y+u*c,g=h*d-l*c,v=Math.sqrt(c*c+d*d+y*y),v=(v!==0&&(c/=v,d/=v,y/=v),Math.sqrt(p*p+m*m+g*g));return v!==0&&(p/=v,m/=v,g/=v),{x:[c,d,y],y:[p,m,g],z:[h,l,u]}}},{key:"_orbit",value:function(h,v,g){var d=this.eyeX-this.centerX,y=this.eyeY-this.centerY,p=this.eyeZ-this.centerZ,c=Math.hypot(d,y,p),d=new n.default.Vector(d,y,p).normalize(),y=new n.default.Vector(this.upX,this.upY,this.upZ).normalize(),p=new n.default.Vector.cross(y,d).normalize(),m=new n.default.Vector.cross(p,y),g=((c=(c*=Math.pow(10,g))<this.cameraNear?this.cameraNear:c)>this.cameraFar&&(c=this.cameraFar),Math.acos(Math.max(-1,Math.min(1,n.default.Vector.dot(d,y))))+v),v=h;(g<=0||g>=Math.PI)&&(this.upX*=-1,this.upY*=-1,this.upZ*=-1),y.mult(Math.cos(g)),m.mult(Math.cos(v)*Math.sin(g)),p.mult(Math.sin(v)*Math.sin(g)),d.set(y).add(m).add(p),this.eyeX=c*d.x+this.centerX,this.eyeY=c*d.y+this.centerY,this.eyeZ=c*d.z+this.centerZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,this.upX,this.upY,this.upZ)}},{key:"_orbitFree",value:function(g,v,T){var d=this.eyeX-this.centerX,y=this.eyeY-this.centerY,p=this.eyeZ-this.centerZ,c=Math.hypot(d,y,p),d=new n.default.Vector(d,y,p).normalize(),y=new n.default.Vector(this.upX,this.upY,this.upZ),p=new n.default.Vector.cross(y,d).normalize(),m=new n.default.Vector.cross(d,p),w=Math.atan2(v,g),w=(m.mult(Math.sin(w)),p.mult(Math.cos(w)).add(m),Math.sqrt(g*g+v*v)),m=new n.default.Vector.cross(d,p),g=((c=(c*=Math.pow(10,T))<this.cameraNear?this.cameraNear:c)>this.cameraFar&&(c=this.cameraFar),Math.cos(w)),v=Math.sin(w),T=y.dot(d),w=y.dot(p),x=T*g+w*v,T=-T*v+w*g,w=y.dot(m);y.x=x*d.x+T*p.x+w*m.x,y.y=x*d.y+T*p.y+w*m.y,y.z=x*d.z+T*p.z+w*m.z,p.mult(-v),d.mult(g).add(p).mult(c),this.camera(d.x+this.centerX,d.y+this.centerY,d.z+this.centerZ,this.centerX,this.centerY,this.centerZ,y.x,y.y,y.z)}},{key:"_isActive",value:function(){return this===this._renderer._curCamera}}])&&o(a.prototype,f),s}(),n.default.prototype.setCamera=function(s){this._renderer._curCamera=s,this._renderer.uPMatrix.set(s.projMatrix.mat4[0],s.projMatrix.mat4[1],s.projMatrix.mat4[2],s.projMatrix.mat4[3],s.projMatrix.mat4[4],s.projMatrix.mat4[5],s.projMatrix.mat4[6],s.projMatrix.mat4[7],s.projMatrix.mat4[8],s.projMatrix.mat4[9],s.projMatrix.mat4[10],s.projMatrix.mat4[11],s.projMatrix.mat4[12],s.projMatrix.mat4[13],s.projMatrix.mat4[14],s.projMatrix.mat4[15])},t=n.default.Camera,i.default=t},{"../core/main":275,"core-js/modules/es.array.slice":165,"core-js/modules/es.math.hypot":170,"core-js/modules/es.string.sub":200}],325:[function(t,r,i){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.log2"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.log2"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t};function n(o,s){for(var a=0;a<s.length;a++){var f=s[a];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(o,f.key,f)}}t.default.DataArray=function(){function o(){var f=0<arguments.length&&arguments[0]!==void 0?arguments[0]:128,h=this,l=o;if(!(h instanceof l))throw new TypeError("Cannot call a class as a function");this.length=0,this.data=new Float32Array(f),this.initialLength=f}var s,a;return s=o,(a=[{key:"dataArray",value:function(){return this.subArray(0,this.length)}},{key:"clear",value:function(){this.length=0}},{key:"rescale",value:function(){var f;this.length<this.data.length/2&&(f=1<<Math.ceil(Math.log2(this.length)),(f=new Float32Array(f)).set(this.data.subarray(0,this.length),0),this.data=f)}},{key:"reset",value:function(){this.clear(),this.data=new Float32Array(this.initialLength)}},{key:"push",value:function(){for(var f=arguments.length,h=new Array(f),l=0;l<f;l++)h[l]=arguments[l];this.ensureLength(this.length+h.length),this.data.set(h,this.length),this.length+=h.length}},{key:"slice",value:function(f,h){return this.data.slice(f,Math.min(h,this.length))}},{key:"subArray",value:function(f,h){return this.data.subarray(f,Math.min(h,this.length))}},{key:"ensureLength",value:function(f){for(;this.data.length<f;){var h=new Float32Array(2*this.data.length);h.set(this.data,0),this.data=h}}}])&&n(s.prototype,a),o}(),t=t.default.DataArray,i.default=t},{"../core/main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.math.log2":171,"core-js/modules/es.object.to-string":182,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.float32-array":211,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231}],326:[function(C,r,i){function n(A){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M})(A)}function o(A){return(o=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(M){return n(M)}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":n(M)})(A)}C("core-js/modules/es.symbol"),C("core-js/modules/es.symbol.description"),C("core-js/modules/es.symbol.iterator"),C("core-js/modules/es.array.fill"),C("core-js/modules/es.array.includes"),C("core-js/modules/es.array.iterator"),C("core-js/modules/es.object.get-own-property-descriptor"),C("core-js/modules/es.object.get-prototype-of"),C("core-js/modules/es.object.to-string"),C("core-js/modules/es.reflect.construct"),C("core-js/modules/es.reflect.get"),C("core-js/modules/es.regexp.to-string"),C("core-js/modules/es.string.includes"),C("core-js/modules/es.string.iterator"),C("core-js/modules/es.typed-array.float32-array"),C("core-js/modules/es.typed-array.uint8-array"),C("core-js/modules/es.typed-array.uint8-clamped-array"),C("core-js/modules/es.typed-array.copy-within"),C("core-js/modules/es.typed-array.every"),C("core-js/modules/es.typed-array.fill"),C("core-js/modules/es.typed-array.filter"),C("core-js/modules/es.typed-array.find"),C("core-js/modules/es.typed-array.find-index"),C("core-js/modules/es.typed-array.for-each"),C("core-js/modules/es.typed-array.includes"),C("core-js/modules/es.typed-array.index-of"),C("core-js/modules/es.typed-array.iterator"),C("core-js/modules/es.typed-array.join"),C("core-js/modules/es.typed-array.last-index-of"),C("core-js/modules/es.typed-array.map"),C("core-js/modules/es.typed-array.reduce"),C("core-js/modules/es.typed-array.reduce-right"),C("core-js/modules/es.typed-array.reverse"),C("core-js/modules/es.typed-array.set"),C("core-js/modules/es.typed-array.slice"),C("core-js/modules/es.typed-array.some"),C("core-js/modules/es.typed-array.sort"),C("core-js/modules/es.typed-array.subarray"),C("core-js/modules/es.typed-array.to-locale-string"),C("core-js/modules/es.typed-array.to-string"),C("core-js/modules/es.weak-map"),C("core-js/modules/web.dom-collections.iterator"),C("core-js/modules/es.array.fill"),C("core-js/modules/es.array.includes"),C("core-js/modules/es.array.iterator"),C("core-js/modules/es.object.get-prototype-of"),C("core-js/modules/es.object.to-string"),C("core-js/modules/es.string.includes"),C("core-js/modules/es.typed-array.float32-array"),C("core-js/modules/es.typed-array.uint8-array"),C("core-js/modules/es.typed-array.uint8-clamped-array"),C("core-js/modules/es.typed-array.copy-within"),C("core-js/modules/es.typed-array.every"),C("core-js/modules/es.typed-array.fill"),C("core-js/modules/es.typed-array.filter"),C("core-js/modules/es.typed-array.find"),C("core-js/modules/es.typed-array.find-index"),C("core-js/modules/es.typed-array.for-each"),C("core-js/modules/es.typed-array.includes"),C("core-js/modules/es.typed-array.index-of"),C("core-js/modules/es.typed-array.iterator"),C("core-js/modules/es.typed-array.join"),C("core-js/modules/es.typed-array.last-index-of"),C("core-js/modules/es.typed-array.map"),C("core-js/modules/es.typed-array.reduce"),C("core-js/modules/es.typed-array.reduce-right"),C("core-js/modules/es.typed-array.reverse"),C("core-js/modules/es.typed-array.set"),C("core-js/modules/es.typed-array.slice"),C("core-js/modules/es.typed-array.some"),C("core-js/modules/es.typed-array.sort"),C("core-js/modules/es.typed-array.subarray"),C("core-js/modules/es.typed-array.to-locale-string"),C("core-js/modules/es.typed-array.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(b=C("../core/main"))&&b.__esModule?b:{default:b},a=function(A){if(A&&A.__esModule)return A;if(A===null||o(A)!=="object"&&typeof A!="function")return{default:A};var M=l();if(M&&M.has(A))return M.get(A);var k,P={},F=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(k in A){var I;Object.prototype.hasOwnProperty.call(A,k)&&((I=F?Object.getOwnPropertyDescriptor(A,k):null)&&(I.get||I.set)?Object.defineProperty(P,k,I):P[k]=A[k])}return P.default=A,M&&M.set(A,P),P}(C("../core/constants")),f=C("./p5.Texture"),h=C("./p5.RendererGL");function l(){var A;return typeof WeakMap!="function"?null:(A=new WeakMap,l=function(){return A},A)}function u(A,M){return function(k){if(Array.isArray(k))return k}(A)||function(k,P){if(Symbol.iterator in Object(k)||Object.prototype.toString.call(k)==="[object Arguments]"){var F=[],I=!0,B=!1,H=void 0;try{for(var G,W=k[Symbol.iterator]();!(I=(G=W.next()).done)&&(F.push(G.value),!P||F.length!==P);I=!0);}catch(Q){B=!0,H=Q}finally{try{I||W.return==null||W.return()}finally{if(B)throw H}}return F}}(A,M)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function c(A,M,k){return M in A?Object.defineProperty(A,M,{value:k,enumerable:!0,configurable:!0,writable:!0}):A[M]=k,A}function d(A,M){if(!(A instanceof M))throw new TypeError("Cannot call a class as a function")}function y(A,M){for(var k=0;k<M.length;k++){var P=M[k];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(A,P.key,P)}}function p(A,M,k){M&&y(A.prototype,M),k&&y(A,k)}function m(A,M,k){return(m=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(B,F,I){var B=function(H,G){for(;!Object.prototype.hasOwnProperty.call(H,G)&&(H=x(H))!==null;);return H}(B,F);if(B)return(B=Object.getOwnPropertyDescriptor(B,F)).get?B.get.call(I):B.value})(A,M,k||A)}function g(A,M){return(g=Object.setPrototypeOf||function(k,P){return k.__proto__=P,k})(A,M)}function v(A){return function(){var M,k=x(A),k=(M=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(M=x(this).constructor,Reflect.construct(k,arguments,M)):k.apply(this,arguments),this);if(!M||o(M)!=="object"&&typeof M!="function"){if(k!==void 0)return k;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return M}}function x(A){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(M){return M.__proto__||Object.getPrototypeOf(M)})(A)}var T=function(A){var M=P;if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(A&&A.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),A&&g(M,A);var k=v(P);function P(F){var I;return d(this,P),(I=k.call(this,F.target._renderer)).fbo=F,I.yScale=-1,I}return p(P,[{key:"_computeCameraDefaultSettings",value:function(){m(x(P.prototype),"_computeCameraDefaultSettings",this).call(this),this.defaultAspectRatio=this.fbo.width/this.fbo.height,this.defaultCameraFOV=2*Math.atan(this.fbo.height/2/this.defaultEyeZ)}}]),P}(s.default.Camera),w=(s.default.FramebufferCamera=T,function(){function A(M,k){d(this,A),this.framebuffer=M,this.property=k}return p(A,[{key:"rawTexture",value:function(){return this.framebuffer[this.property]}},{key:"width",get:function(){return this.framebuffer.width*this.framebuffer.density}},{key:"height",get:function(){return this.framebuffer.height*this.framebuffer.density}}]),A}()),b=(s.default.FramebufferTexture=w,function(){function A(F){var k=this,P=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},F=(d(this,A),this.target=F,this.target._renderer.framebuffers.add(this),this._isClipApplied=!1,this.pixels=[],this.format=P.format||a.UNSIGNED_BYTE,this.channels=P.channels||(F._renderer._pInst._glAttributes.alpha?a.RGBA:a.RGB),this.useDepth=P.depth===void 0||P.depth,this.depthFormat=P.depthFormat||a.FLOAT,this.textureFiltering=P.textureFiltering||a.LINEAR,P.antialias===void 0?this.antialiasSamples=F._renderer._pInst._glAttributes.antialias?2:0:typeof P.antialias=="number"?this.antialiasSamples=P.antialias:this.antialiasSamples=P.antialias?2:0,this.antialias=0<this.antialiasSamples,this.antialias&&F.webglVersion!==a.WEBGL2&&(console.warn("Antialiasing is unsupported in a WebGL 1 context"),this.antialias=!1),P.width&&P.height?(this.width=P.width,this.height=P.height,this.autoSized=!1):(P.width===void 0!=(P.height===void 0)&&console.warn("Please supply both width and height for a framebuffer to give it a size. Only one was given, so the framebuffer will match the size of its canvas."),this.width=F.width,this.height=F.height,this.autoSized=!0),this.density=P.density||F.pixelDensity(),F._renderer.GL);if(this.gl=F,this._checkIfFormatsAvailable(),P.stencil&&!this.useDepth&&console.warn("A stencil buffer can only be used if also using depth. Since the framebuffer has no depth buffer, the stencil buffer will be ignored."),this.useStencil=this.useDepth&&(P.stencil===void 0||P.stencil),this.framebuffer=F.createFramebuffer(),!this.framebuffer)throw new Error("Unable to create a framebuffer");if(this.antialias&&(this.aaFramebuffer=F.createFramebuffer(),!this.aaFramebuffer))throw new Error("Unable to create a framebuffer for antialiasing");this._recreateTextures(),P=this.target._renderer._curCamera,this.defaultCamera=this.createCamera(),this.target._renderer._curCamera=P,this.draw(function(){return k.target.clear()})}return p(A,[{key:"resize",value:function(M,k){this.autoSized=!1,this.width=M,this.height=k,this._handleResize()}},{key:"pixelDensity",value:function(M){if(!M)return this.density;this.autoSized=!1,this.density=M,this._handleResize()}},{key:"autoSized",value:function(M){if(M===void 0)return this.autoSized;this.autoSized=M,this._handleResize()}},{key:"_checkIfFormatsAvailable",value:function(){var M=this.gl,M=(this.useDepth&&this.target.webglVersion===a.WEBGL&&!M.getExtension("WEBGL_depth_texture")&&(console.warn("Unable to create depth textures in this environment. Falling back to a framebuffer without depth."),this.useDepth=!1),this.useDepth&&this.target.webglVersion===a.WEBGL&&this.depthFormat===a.FLOAT&&(console.warn("FLOAT depth format is unavailable in WebGL 1. Defaulting to UNSIGNED_INT."),this.depthFormat=a.UNSIGNED_INT),[a.UNSIGNED_BYTE,a.FLOAT,a.HALF_FLOAT].includes(this.format)||(console.warn("Unknown Framebuffer format. Please use UNSIGNED_BYTE, FLOAT, or HALF_FLOAT. Defaulting to UNSIGNED_BYTE."),this.format=a.UNSIGNED_BYTE),this.useDepth&&![a.UNSIGNED_INT,a.FLOAT].includes(this.depthFormat)&&(console.warn("Unknown Framebuffer depth format. Please use UNSIGNED_INT or FLOAT. Defaulting to FLOAT."),this.depthFormat=a.FLOAT),(0,f.checkWebGLCapabilities)(this.target._renderer));M.float||this.format!==a.FLOAT||(console.warn("This environment does not support FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=a.UNSIGNED_BYTE),this.useDepth&&!M.float&&this.depthFormat===a.FLOAT&&(console.warn("This environment does not support FLOAT depth textures. Falling back to UNSIGNED_INT."),this.depthFormat=a.UNSIGNED_INT),M.halfFloat||this.format!==a.HALF_FLOAT||(console.warn("This environment does not support HALF_FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=a.UNSIGNED_BYTE),this.channels===a.RGB&&[a.FLOAT,a.HALF_FLOAT].includes(this.format)&&(console.warn("FLOAT and HALF_FLOAT formats do not work cross-platform with only RGB channels. Falling back to RGBA."),this.channels=a.RGBA)}},{key:"_recreateTextures",value:function(){var M=this.gl,k=(this._updateSize(),M.getParameter(M.TEXTURE_BINDING_2D)),P=M.getParameter(M.FRAMEBUFFER_BINDING),F=M.createTexture();if(!F)throw new Error("Unable to create color texture");M.bindTexture(M.TEXTURE_2D,F);var I=this._glColorFormat();if(M.texImage2D(M.TEXTURE_2D,0,I.internalFormat,this.width*this.density,this.height*this.density,0,I.format,I.type,null),this.colorTexture=F,M.bindFramebuffer(M.FRAMEBUFFER,this.framebuffer),M.framebufferTexture2D(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.TEXTURE_2D,F,0),this.useDepth){var F=M.createTexture();if(!F)throw new Error("Unable to create depth texture");var B=this._glDepthFormat();M.bindTexture(M.TEXTURE_2D,F),M.texImage2D(M.TEXTURE_2D,0,B.internalFormat,this.width*this.density,this.height*this.density,0,B.format,B.type,null),M.framebufferTexture2D(M.FRAMEBUFFER,this.useStencil?M.DEPTH_STENCIL_ATTACHMENT:M.DEPTH_ATTACHMENT,M.TEXTURE_2D,F,0),this.depthTexture=F}this.antialias&&(this.colorRenderbuffer=M.createRenderbuffer(),M.bindRenderbuffer(M.RENDERBUFFER,this.colorRenderbuffer),M.renderbufferStorageMultisample(M.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,M.getParameter(M.MAX_SAMPLES))),I.internalFormat,this.width*this.density,this.height*this.density),this.useDepth&&(B=this._glDepthFormat(),this.depthRenderbuffer=M.createRenderbuffer(),M.bindRenderbuffer(M.RENDERBUFFER,this.depthRenderbuffer),M.renderbufferStorageMultisample(M.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,M.getParameter(M.MAX_SAMPLES))),B.internalFormat,this.width*this.density,this.height*this.density)),M.bindFramebuffer(M.FRAMEBUFFER,this.aaFramebuffer),M.framebufferRenderbuffer(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.RENDERBUFFER,this.colorRenderbuffer),this.useDepth&&M.framebufferRenderbuffer(M.FRAMEBUFFER,this.useStencil?M.DEPTH_STENCIL_ATTACHMENT:M.DEPTH_ATTACHMENT,M.RENDERBUFFER,this.depthRenderbuffer)),this.useDepth&&(this.depth=new w(this,"depthTexture"),F=M.NEAREST,this.depthP5Texture=new s.default.Texture(this.target._renderer,this.depth,{minFilter:F,magFilter:F}),this.target._renderer.textures.set(this.depth,this.depthP5Texture)),this.color=new w(this,"colorTexture"),I=this.textureFiltering===a.LINEAR?M.LINEAR:M.NEAREST,this.colorP5Texture=new s.default.Texture(this.target._renderer,this.color,{minFilter:I,magFilter:I}),this.target._renderer.textures.set(this.color,this.colorP5Texture),M.bindTexture(M.TEXTURE_2D,k),M.bindFramebuffer(M.FRAMEBUFFER,P)}},{key:"_glColorFormat",value:function(){var M,k,P=this.gl,F=this.format===a.FLOAT?P.FLOAT:this.format===a.HALF_FLOAT?this.target.webglVersion===a.WEBGL2?P.HALF_FLOAT:P.getExtension("OES_texture_half_float").HALF_FLOAT_OES:P.UNSIGNED_BYTE,I=this.channels===a.RGBA?P.RGBA:P.RGB;return{internalFormat:this.target.webglVersion===a.WEBGL2?(c(k={},P.FLOAT,c({},P.RGBA,P.RGBA32F)),c(k,P.HALF_FLOAT,c({},P.RGBA,P.RGBA16F)),c(k,P.UNSIGNED_BYTE,(c(M={},P.RGBA,P.RGBA8),c(M,P.RGB,P.RGB8),M)),k[F][I]):this.format===a.HALF_FLOAT?P.RGBA:I,format:I,type:F}}},{key:"_glDepthFormat",value:function(){var P=this.gl,M=this.useStencil?this.depthFormat===a.FLOAT?P.FLOAT_32_UNSIGNED_INT_24_8_REV:this.target.webglVersion===a.WEBGL2?P.UNSIGNED_INT_24_8:P.getExtension("WEBGL_depth_texture").UNSIGNED_INT_24_8_WEBGL:this.depthFormat===a.FLOAT?P.FLOAT:P.UNSIGNED_INT,k=this.useStencil?P.DEPTH_STENCIL:P.DEPTH_COMPONENT,P=this.useStencil?this.depthFormat===a.FLOAT?P.DEPTH32F_STENCIL8:this.target.webglVersion===a.WEBGL2?P.DEPTH24_STENCIL8:P.DEPTH_STENCIL:this.target.webglVersion===a.WEBGL2?this.depthFormat===a.FLOAT?P.DEPTH_COMPONENT32F:P.DEPTH_COMPONENT24:P.DEPTH_COMPONENT;return{internalFormat:P,format:k,type:M}}},{key:"_updateSize",value:function(){this.autoSized&&(this.width=this.target.width,this.height=this.target.height,this.density=this.target.pixelDensity())}},{key:"_canvasSizeChanged",value:function(){this.autoSized&&this._handleResize()}},{key:"_handleResize",value:function(){var F=this.color,M=this.depth,k=this.colorRenderbuffer,P=this.depthRenderbuffer,F=(this._deleteTexture(F),M&&this._deleteTexture(M),this.gl);k&&F.deleteRenderbuffer(k),P&&F.deleteRenderbuffer(P),this._recreateTextures(),this.defaultCamera._resize()}},{key:"createCamera",value:function(){var M=new T(this);return M._computeCameraDefaultSettings(),M._setDefaultCamera(),this.target._renderer._curCamera=M}},{key:"_deleteTexture",value:function(M){this.gl.deleteTexture(M.rawTexture()),this.target._renderer.textures.delete(M)}},{key:"remove",value:function(){var M=this.gl;this._deleteTexture(this.color),this.depth&&this._deleteTexture(this.depth),M.deleteFramebuffer(this.framebuffer),this.aaFramebuffer&&M.deleteFramebuffer(this.aaFramebuffer),this.depthRenderbuffer&&M.deleteRenderbuffer(this.depthRenderbuffer),this.colorRenderbuffer&&M.deleteRenderbuffer(this.colorRenderbuffer),this.target._renderer.framebuffers.delete(this)}},{key:"begin",value:function(){this.prevFramebuffer=this.target._renderer.activeFramebuffer(),this.prevFramebuffer&&this.prevFramebuffer._beforeEnd(),this.target._renderer.activeFramebuffers.push(this),this._beforeBegin(),this.target.push(),this.target.setCamera(this.defaultCamera),this.target._renderer.uMVMatrix.set(this.target._renderer._curCamera.cameraMatrix.mat4[0],this.target._renderer._curCamera.cameraMatrix.mat4[1],this.target._renderer._curCamera.cameraMatrix.mat4[2],this.target._renderer._curCamera.cameraMatrix.mat4[3],this.target._renderer._curCamera.cameraMatrix.mat4[4],this.target._renderer._curCamera.cameraMatrix.mat4[5],this.target._renderer._curCamera.cameraMatrix.mat4[6],this.target._renderer._curCamera.cameraMatrix.mat4[7],this.target._renderer._curCamera.cameraMatrix.mat4[8],this.target._renderer._curCamera.cameraMatrix.mat4[9],this.target._renderer._curCamera.cameraMatrix.mat4[10],this.target._renderer._curCamera.cameraMatrix.mat4[11],this.target._renderer._curCamera.cameraMatrix.mat4[12],this.target._renderer._curCamera.cameraMatrix.mat4[13],this.target._renderer._curCamera.cameraMatrix.mat4[14],this.target._renderer._curCamera.cameraMatrix.mat4[15])}},{key:"_framebufferToBind",value:function(){return this.antialias?this.aaFramebuffer:this.framebuffer}},{key:"_beforeBegin",value:function(){var M=this.gl;M.bindFramebuffer(M.FRAMEBUFFER,this._framebufferToBind()),this.target._renderer.viewport(this.width*this.density,this.height*this.density)}},{key:"_beforeEnd",value:function(){if(this.antialias){var M=this.gl,k=(M.bindFramebuffer(M.READ_FRAMEBUFFER,this.aaFramebuffer),M.bindFramebuffer(M.DRAW_FRAMEBUFFER,this.framebuffer),[[M.COLOR_BUFFER_BIT,this.colorP5Texture.glMagFilter]]);this.useDepth&&k.push([M.DEPTH_BUFFER_BIT,this.depthP5Texture.glMagFilter]);for(var P=0,F=k;P<F.length;P++){var B=u(F[P],2),I=B[0],B=B[1];M.blitFramebuffer(0,0,this.width*this.density,this.height*this.density,0,0,this.width*this.density,this.height*this.density,I,B)}}}},{key:"end",value:function(){var M=this.gl;if(this.target.pop(),this.target._renderer.activeFramebuffers.pop()!==this)throw new Error("It looks like you've called end() while another Framebuffer is active.");this._beforeEnd(),this.prevFramebuffer?this.prevFramebuffer._beforeBegin():(M.bindFramebuffer(M.FRAMEBUFFER,null),this.target._renderer.viewport(this.target._renderer._origViewport.width,this.target._renderer._origViewport.height)),this.target._renderer._applyStencilTestIfClipping()}},{key:"draw",value:function(M){this.begin(),M(),this.end()}},{key:"loadPixels",value:function(){var M=this.gl,k=this.target._renderer.activeFramebuffer(),P=(M.bindFramebuffer(M.FRAMEBUFFER,this.framebuffer),this._glColorFormat());this.pixels=(0,h.readPixelsWebGL)(this.pixels,M,this.framebuffer,0,0,this.width*this.density,this.height*this.density,P.format,P.type),k?M.bindFramebuffer(M.FRAMEBUFFER,k._framebufferToBind()):M.bindFramebuffer(M.FRAMEBUFFER,null)}},{key:"get",value:function(M,k,P,F){s.default._validateParameters("p5.Framebuffer.get",arguments);var I=this._glColorFormat();if(M===void 0&&k===void 0)k=M=0,P=this.width,F=this.height;else if(P===void 0&&F===void 0)return(M<0||k<0||M>=this.width||k>=this.height)&&(console.warn("The x and y values passed to p5.Framebuffer.get are outside of its range and will be clamped."),M=this.target.constrain(M,0,this.width-1),k=this.target.constrain(k,0,this.height-1)),(0,h.readPixelWebGL)(this.gl,this.framebuffer,M*this.density,k*this.density,I.format,I.type);M=this.target.constrain(M,0,this.width-1),k=this.target.constrain(k,0,this.height-1),P=this.target.constrain(P,1,this.width-M),F=this.target.constrain(F,1,this.height-k);for(var B=(0,h.readPixelsWebGL)(void 0,this.gl,this.framebuffer,M*this.density,k*this.density,P*this.density,F*this.density,I.format,I.type),H=new Uint8ClampedArray(P*F*this.density*this.density*4),G=(H.fill(255),I.type===this.gl.RGB?3:4),W=0;W<F*this.density;W++)for(var Q=0;Q<P*this.density;Q++)for(var ne=0;ne<4;ne++){var U,D=4*(W*P*this.density+Q)+ne;ne<G&&(U=G==4?D:(W*P*this.density+Q)*G+ne,H[D]=B[U])}return M=new s.default.Image(P*this.density,F*this.density),M.imageData=M.canvas.getContext("2d").createImageData(M.width,M.height),M.imageData.data.set(H),M.pixels=M.imageData.data,M.updatePixels(),this.density!==1&&M.resize(P,F),M}},{key:"updatePixels",value:function(){var M=this.gl,k=(this.colorP5Texture.bindTexture(),this._glColorFormat()),P=k.format===M.RGBA?4:3,P=this.width*this.height*this.density*this.density*P,F=k.type===M.UNSIGNED_BYTE?Uint8Array:Float32Array;if(!(this.pixels instanceof F)||this.pixels.length!==P)throw new Error("The pixels array has not been set correctly. Please call loadPixels() before updatePixels().");M.texImage2D(M.TEXTURE_2D,0,k.internalFormat,this.width*this.density,this.height*this.density,0,k.format,k.type,this.pixels),this.colorP5Texture.unbindTexture(),F=this.target._renderer.activeFramebuffer(),this.antialias?(this.begin(),this.target.push(),this.target.imageMode(this.target.CENTER),this.target.resetMatrix(),this.target.noStroke(),this.target.clear(),this.target.image(this,0,0),this.target.pop(),this.useDepth&&(M.clearDepth(1),M.clear(M.DEPTH_BUFFER_BIT)),this.end()):(M.bindFramebuffer(M.FRAMEBUFFER,this.framebuffer),this.useDepth&&(M.clearDepth(1),M.clear(M.DEPTH_BUFFER_BIT)),F?M.bindFramebuffer(M.FRAMEBUFFER,F._framebufferToBind()):M.bindFramebuffer(M.FRAMEBUFFER,null))}}]),A}()),C=s.default.Framebuffer=b;i.default=C},{"../core/constants":264,"../core/main":275,"./p5.RendererGL":332,"./p5.Texture":334,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.reflect.get":185,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.float32-array":211,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint8-array":234,"core-js/modules/es.typed-array.uint8-clamped-array":235,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],327:[function(t,r,i){function n(c){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(c)}function o(c){return(o=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(d){return n(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":n(d)})(c)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.map"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.map"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(u=t("../core/main"))&&u.__esModule?u:{default:u},a=function(c){if(c&&c.__esModule)return c;if(c===null||o(c)!=="object"&&typeof c!="function")return{default:c};var d=f();if(d&&d.has(c))return d.get(c);var y,p={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in c){var g;Object.prototype.hasOwnProperty.call(c,y)&&((g=m?Object.getOwnPropertyDescriptor(c,y):null)&&(g.get||g.set)?Object.defineProperty(p,y,g):p[y]=c[y])}return p.default=c,d&&d.set(c,p),p}(t("../core/constants"));function f(){var c;return typeof WeakMap!="function"?null:(c=new WeakMap,f=function(){return c},c)}function h(c){return function(d){if(Array.isArray(d)){for(var y=0,p=new Array(d.length);y<d.length;y++)p[y]=d[y];return p}}(c)||function(d){if(Symbol.iterator in Object(d)||Object.prototype.toString.call(d)==="[object Arguments]")return Array.from(d)}(c)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(c,d){for(var y=0;y<d.length;y++){var p=d[y];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(c,p.key,p)}}s.default.Geometry=function(){function c(p,m,g){if(this instanceof c)return this.vertices=[],this.lineVertices=new s.default.DataArray,this.lineTangentsIn=new s.default.DataArray,this.lineTangentsOut=new s.default.DataArray,this.lineSides=new s.default.DataArray,this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.vertexStrokeColors=[],this.lineVertexColors=new s.default.DataArray,this.detailX=p!==void 0?p:1,this.detailY=m!==void 0?m:1,this.dirtyFlags={},g instanceof Function&&g.call(this),this;throw new TypeError("Cannot call a class as a function")}var d,y;return d=c,(y=[{key:"reset",value:function(){this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear(),this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexStrokeColors.length=0,this.lineVertexColors.clear(),this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}}},{key:"clearColors",value:function(){return this.vertexColors=[],this}},{key:"computeFaces",value:function(){this.faces.length=0;for(var p,m,g,v=this.detailX+1,x=0;x<this.detailY;x++)for(var T=0;T<this.detailX;T++)m=(x+1)*v+T+1,this.faces.push([x*v+T,p=x*v+T+1,g=(x+1)*v+T]),this.faces.push([g,p,m]);return this}},{key:"_getFaceNormal",value:function(m){var m=this.faces[m],g=this.vertices[m[0]],x=this.vertices[m[1]],m=this.vertices[m[2]],x=s.default.Vector.sub(x,g),m=s.default.Vector.sub(m,g),g=s.default.Vector.cross(x,m),v=s.default.Vector.mag(g),x=v/(s.default.Vector.mag(x)*s.default.Vector.mag(m));return x===0||isNaN(x)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),g):(1<x&&(x=1),g.mult(Math.asin(x)/v))}},{key:"computeNormals",value:function(){var p,m=this,g=0<arguments.length&&arguments[0]!==void 0?arguments[0]:a.FLAT,v=(1<arguments.length&&arguments[1]!==void 0?arguments[1]:{}).roundToPrecision,x=this.vertexNormals,T=this.vertices,w=this.faces;if(g===a.SMOOTH){for(var b={},C=[],A=Math.pow(10,v===void 0?3:v),M=function(B){return Math.round(B*A)/A},k=function(B){return"".concat(M(B.x),",").concat(M(B.y),",").concat(M(B.z))},P=0;P<T.length;P++){var F=T[P],I=k(F);b[I]===void 0&&(b[I]=C.length,C.push(F))}w.forEach(function(B){for(var H=0;H<3;++H){var G=B[H],G=T[G],G=k(G);B[H]=b[G]}}),this.edges.forEach(function(B){for(var H=0;H<2;++H){var G=B[H],G=T[G],G=k(G);B[H]=b[G]}}),this.vertices=T=C}for(p=x.length=0;p<T.length;++p)x.push(new s.default.Vector);for(w.forEach(function(B,H){for(var G=m._getFaceNormal(H),W=0;W<3;++W){var Q=B[W];x[Q].add(G)}}),p=0;p<T.length;++p)x[p].normalize();return this}},{key:"averageNormals",value:function(){for(var p=0;p<=this.detailY;p++){var m=this.detailX+1,g=s.default.Vector.add(this.vertexNormals[p*m],this.vertexNormals[p*m+this.detailX]),g=s.default.Vector.div(g,2);this.vertexNormals[p*m]=g,this.vertexNormals[p*m+this.detailX]=g}return this}},{key:"averagePoleNormals",value:function(){for(var p=new s.default.Vector(0,0,0),m=0;m<this.detailX;m++)p.add(this.vertexNormals[m]);for(var p=s.default.Vector.div(p,this.detailX),g=0;g<this.detailX;g++)this.vertexNormals[g]=p;p=new s.default.Vector(0,0,0);for(var v=this.vertices.length-1;v>this.vertices.length-1-this.detailX;v--)p.add(this.vertexNormals[v]);p=s.default.Vector.div(p,this.detailX);for(var x=this.vertices.length-1;x>this.vertices.length-1-this.detailX;x--)this.vertexNormals[x]=p;return this}},{key:"_makeTriangleEdges",value:function(){for(var p=this.edges.length=0;p<this.faces.length;p++)this.edges.push([this.faces[p][0],this.faces[p][1]]),this.edges.push([this.faces[p][1],this.faces[p][2]]),this.edges.push([this.faces[p][2],this.faces[p][0]]);return this}},{key:"_edgesToVertices",value:function(){this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear();for(var p,m=new Map,g=new Set,v=0;v<this.edges.length;v++){var x,T=this.edges[v-1],w=this.edges[v],b=this.vertices[w[0]],C=this.vertices[w[1]],A=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*w[0],4*(w[0]+1)):[0,0,0,0],M=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*w[1],4*(w[1]+1)):[0,0,0,0],k=C.copy().sub(b).normalize(),P=0<k.magSq();P&&this._addSegment(b,C,A,M,k),0<v&&T[1]===w[0]?g.has(w[0])||(g.add(w[0]),m.delete(w[0]),p&&P&&k.dot(p)<1-1e-8&&this._addJoin(b,p,k,A)):(P&&!g.has(w[0])&&((x=m.get(w[0]))?(this._addJoin(b,x.dir,k,A),m.delete(w[0]),g.add(w[0])):m.set(w[0],{point:b,dir:k.copy().mult(-1),color:A})),p&&!g.has(T[1])&&((x=m.get(T[1]))?(this._addJoin(this.vertices[T[1]],p,x.dir.copy().mult(-1),A),m.delete(T[1]),g.add(T[1])):m.set(T[1],{point:this.vertices[T[1]],dir:p,color:A}),p=void 0)),v!==this.edges.length-1||g.has(w[1])||((b=m.get(w[1]))?(this._addJoin(C,k,b.dir.copy().mult(-1),M),m.delete(w[1]),g.add(w[1])):m.set(w[1],{point:C,dir:k,color:M})),P&&(p=k)}var F=!0,I=!1,B=void 0;try{for(var H,G=m.values()[Symbol.iterator]();!(F=(H=G.next()).done);F=!0){var W=H.value,Q=W.point,ne=W.dir,U=W.color;this._addCap(Q,ne,U)}}catch(D){I=!0,B=D}finally{try{F||G.return==null||G.return()}finally{if(I)throw B}}return this}},{key:"_addSegment",value:function(T,w,g,v,x){var T=T.array(),w=w.array(),b=x.array();this.lineSides.push(1,1,-1,1,-1,-1);for(var C=0,A=[this.lineTangentsIn,this.lineTangentsOut];C<A.length;C++)for(var M=A[C],k=0;k<6;k++)M.push.apply(M,h(b));return(x=this.lineVertices).push.apply(x,h(T).concat(h(w),h(T),h(w),h(w),h(T))),(x=this.lineVertexColors).push.apply(x,h(g).concat(h(v),h(g),h(v),h(v),h(g))),this}},{key:"_addCap",value:function(p,m,g){for(var v,x=p.array(),T=m.array(),w=[0,0,0],b=0;b<6;b++)(v=this.lineVertices).push.apply(v,h(x)),(v=this.lineTangentsIn).push.apply(v,h(T)),(v=this.lineTangentsOut).push.apply(v,w),(v=this.lineVertexColors).push.apply(v,h(g));return this.lineSides.push(-1,2,-2,1,2,-1),this}},{key:"_addJoin",value:function(p,m,g,v){for(var x,T=p.array(),w=m.array(),b=g.array(),C=0;C<12;C++)(x=this.lineVertices).push.apply(x,h(T)),(x=this.lineTangentsIn).push.apply(x,h(w)),(x=this.lineTangentsOut).push.apply(x,h(b)),(x=this.lineVertexColors).push.apply(x,h(v));return this.lineSides.push(-1,-3,-2,-1,0,-3),this.lineSides.push(3,1,2,3,0,1),this}},{key:"normalize",value:function(){if(0<this.vertices.length){for(var p=this.vertices[0].copy(),m=this.vertices[0].copy(),g=0;g<this.vertices.length;g++)p.x=Math.max(p.x,this.vertices[g].x),m.x=Math.min(m.x,this.vertices[g].x),p.y=Math.max(p.y,this.vertices[g].y),m.y=Math.min(m.y,this.vertices[g].y),p.z=Math.max(p.z,this.vertices[g].z),m.z=Math.min(m.z,this.vertices[g].z);for(var v=s.default.Vector.lerp(p,m,.5),x=s.default.Vector.sub(p,m),T=200/Math.max(Math.max(x.x,x.y),x.z),w=0;w<this.vertices.length;w++)this.vertices[w].sub(v),this.vertices[w].mult(T)}return this}}])&&l(d.prototype,y),c}();var u=s.default.Geometry;i.default=u},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.map":169,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.set":189,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.sub":200,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238}],328:[function(f,r,i){f("core-js/modules/es.array.iterator"),f("core-js/modules/es.object.to-string"),f("core-js/modules/es.typed-array.float32-array"),f("core-js/modules/es.typed-array.copy-within"),f("core-js/modules/es.typed-array.every"),f("core-js/modules/es.typed-array.fill"),f("core-js/modules/es.typed-array.filter"),f("core-js/modules/es.typed-array.find"),f("core-js/modules/es.typed-array.find-index"),f("core-js/modules/es.typed-array.for-each"),f("core-js/modules/es.typed-array.includes"),f("core-js/modules/es.typed-array.index-of"),f("core-js/modules/es.typed-array.iterator"),f("core-js/modules/es.typed-array.join"),f("core-js/modules/es.typed-array.last-index-of"),f("core-js/modules/es.typed-array.map"),f("core-js/modules/es.typed-array.reduce"),f("core-js/modules/es.typed-array.reduce-right"),f("core-js/modules/es.typed-array.reverse"),f("core-js/modules/es.typed-array.set"),f("core-js/modules/es.typed-array.slice"),f("core-js/modules/es.typed-array.some"),f("core-js/modules/es.typed-array.sort"),f("core-js/modules/es.typed-array.subarray"),f("core-js/modules/es.typed-array.to-locale-string"),f("core-js/modules/es.typed-array.to-string"),f("core-js/modules/es.array.iterator"),f("core-js/modules/es.object.to-string"),f("core-js/modules/es.typed-array.float32-array"),f("core-js/modules/es.typed-array.copy-within"),f("core-js/modules/es.typed-array.every"),f("core-js/modules/es.typed-array.fill"),f("core-js/modules/es.typed-array.filter"),f("core-js/modules/es.typed-array.find"),f("core-js/modules/es.typed-array.find-index"),f("core-js/modules/es.typed-array.for-each"),f("core-js/modules/es.typed-array.includes"),f("core-js/modules/es.typed-array.index-of"),f("core-js/modules/es.typed-array.iterator"),f("core-js/modules/es.typed-array.join"),f("core-js/modules/es.typed-array.last-index-of"),f("core-js/modules/es.typed-array.map"),f("core-js/modules/es.typed-array.reduce"),f("core-js/modules/es.typed-array.reduce-right"),f("core-js/modules/es.typed-array.reverse"),f("core-js/modules/es.typed-array.set"),f("core-js/modules/es.typed-array.slice"),f("core-js/modules/es.typed-array.some"),f("core-js/modules/es.typed-array.sort"),f("core-js/modules/es.typed-array.subarray"),f("core-js/modules/es.typed-array.to-locale-string"),f("core-js/modules/es.typed-array.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=(f=f("../core/main"))&&f.__esModule?f:{default:f};function o(h,l){for(var u=0;u<l.length;u++){var c=l[u];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(h,c.key,c)}}var s=Array,a=function(h){return Array.isArray(h)},f=(typeof Float32Array<"u"&&(s=Float32Array,a=function(h){return Array.isArray(h)||h instanceof Float32Array}),n.default.Matrix=function(){function h(){var d=this,y=h;if(d instanceof y)return arguments.length&&((d=arguments.length-1)<0||arguments.length<=d?void 0:arguments[d])instanceof n.default&&(this.p5=(y=arguments.length-1)<0||arguments.length<=y?void 0:arguments[y]),(arguments.length<=0?void 0:arguments[0])==="mat3"?this.mat3=Array.isArray(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:new s([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:new s([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this;throw new TypeError("Cannot call a class as a function")}var l,u,c;return l=h,c=[{key:"identity",value:function(d){return new n.default.Matrix(d)}}],(u=[{key:"set",value:function(d){return d instanceof n.default.Matrix?this.mat4=d.mat4:a(d)?this.mat4=d:arguments.length===16&&(this.mat4[0]=d,this.mat4[1]=arguments[1],this.mat4[2]=arguments[2],this.mat4[3]=arguments[3],this.mat4[4]=arguments[4],this.mat4[5]=arguments[5],this.mat4[6]=arguments[6],this.mat4[7]=arguments[7],this.mat4[8]=arguments[8],this.mat4[9]=arguments[9],this.mat4[10]=arguments[10],this.mat4[11]=arguments[11],this.mat4[12]=arguments[12],this.mat4[13]=arguments[13],this.mat4[14]=arguments[14],this.mat4[15]=arguments[15]),this}},{key:"get",value:function(){return new n.default.Matrix(this.mat4,this.p5)}},{key:"copy",value:function(){var d;return this.mat3!==void 0?((d=new n.default.Matrix("mat3",this.p5)).mat3[0]=this.mat3[0],d.mat3[1]=this.mat3[1],d.mat3[2]=this.mat3[2],d.mat3[3]=this.mat3[3],d.mat3[4]=this.mat3[4],d.mat3[5]=this.mat3[5],d.mat3[6]=this.mat3[6],d.mat3[7]=this.mat3[7],d.mat3[8]=this.mat3[8]):((d=new n.default.Matrix(this.p5)).mat4[0]=this.mat4[0],d.mat4[1]=this.mat4[1],d.mat4[2]=this.mat4[2],d.mat4[3]=this.mat4[3],d.mat4[4]=this.mat4[4],d.mat4[5]=this.mat4[5],d.mat4[6]=this.mat4[6],d.mat4[7]=this.mat4[7],d.mat4[8]=this.mat4[8],d.mat4[9]=this.mat4[9],d.mat4[10]=this.mat4[10],d.mat4[11]=this.mat4[11],d.mat4[12]=this.mat4[12],d.mat4[13]=this.mat4[13],d.mat4[14]=this.mat4[14],d.mat4[15]=this.mat4[15]),d}},{key:"transpose",value:function(d){var y,p,m,g,v,x;return d instanceof n.default.Matrix?(y=d.mat4[1],p=d.mat4[2],m=d.mat4[3],g=d.mat4[6],v=d.mat4[7],x=d.mat4[11],this.mat4[0]=d.mat4[0],this.mat4[1]=d.mat4[4],this.mat4[2]=d.mat4[8],this.mat4[3]=d.mat4[12],this.mat4[4]=y,this.mat4[5]=d.mat4[5],this.mat4[6]=d.mat4[9],this.mat4[7]=d.mat4[13],this.mat4[8]=p,this.mat4[9]=g,this.mat4[10]=d.mat4[10],this.mat4[11]=d.mat4[14],this.mat4[12]=m,this.mat4[13]=v,this.mat4[14]=x,this.mat4[15]=d.mat4[15]):a(d)&&(y=d[1],p=d[2],m=d[3],g=d[6],v=d[7],x=d[11],this.mat4[0]=d[0],this.mat4[1]=d[4],this.mat4[2]=d[8],this.mat4[3]=d[12],this.mat4[4]=y,this.mat4[5]=d[5],this.mat4[6]=d[9],this.mat4[7]=d[13],this.mat4[8]=p,this.mat4[9]=g,this.mat4[10]=d[10],this.mat4[11]=d[14],this.mat4[12]=m,this.mat4[13]=v,this.mat4[14]=x,this.mat4[15]=d[15]),this}},{key:"invert",value:function(B){B instanceof n.default.Matrix?(y=B.mat4[0],p=B.mat4[1],m=B.mat4[2],g=B.mat4[3],v=B.mat4[4],x=B.mat4[5],T=B.mat4[6],w=B.mat4[7],b=B.mat4[8],C=B.mat4[9],A=B.mat4[10],M=B.mat4[11],k=B.mat4[12],P=B.mat4[13],F=B.mat4[14],I=B.mat4[15]):a(B)&&(y=B[0],p=B[1],m=B[2],g=B[3],v=B[4],x=B[5],T=B[6],w=B[7],b=B[8],C=B[9],A=B[10],M=B[11],k=B[12],P=B[13],F=B[14],I=B[15]);var y,p,m,g,v,x,T,w,b,C,A,M,k,P,F,I,B=y*x-p*v,H=y*T-m*v,G=y*w-g*v,W=p*T-m*x,Q=p*w-g*x,ne=m*w-g*T,U=b*P-C*k,D=b*F-A*k,O=b*I-M*k,V=C*F-A*P,Z=C*I-M*P,ie=A*I-M*F,re=B*ie-H*Z+G*V+W*O-Q*D+ne*U;return re?(this.mat4[0]=(x*ie-T*Z+w*V)*(re=1/re),this.mat4[1]=(m*Z-p*ie-g*V)*re,this.mat4[2]=(P*ne-F*Q+I*W)*re,this.mat4[3]=(A*Q-C*ne-M*W)*re,this.mat4[4]=(T*O-v*ie-w*D)*re,this.mat4[5]=(y*ie-m*O+g*D)*re,this.mat4[6]=(F*G-k*ne-I*H)*re,this.mat4[7]=(b*ne-A*G+M*H)*re,this.mat4[8]=(v*Z-x*O+w*U)*re,this.mat4[9]=(p*O-y*Z-g*U)*re,this.mat4[10]=(k*Q-P*G+I*B)*re,this.mat4[11]=(C*G-b*Q-M*B)*re,this.mat4[12]=(x*D-v*V-T*U)*re,this.mat4[13]=(y*V-p*D+m*U)*re,this.mat4[14]=(P*H-k*W-F*B)*re,this.mat4[15]=(b*W-C*H+A*B)*re,this):null}},{key:"invert3x3",value:function(){var d=this.mat3[0],y=this.mat3[1],p=this.mat3[2],m=this.mat3[3],g=this.mat3[4],v=this.mat3[5],x=this.mat3[6],T=this.mat3[7],w=this.mat3[8],b=w*g-v*T,C=-w*m+v*x,A=T*m-g*x,M=d*b+y*C+p*A;return M?(this.mat3[0]=b*(M=1/M),this.mat3[1]=(-w*y+p*T)*M,this.mat3[2]=(v*y-p*g)*M,this.mat3[3]=C*M,this.mat3[4]=(w*d-p*x)*M,this.mat3[5]=(-v*d+p*m)*M,this.mat3[6]=A*M,this.mat3[7]=(-T*d+y*x)*M,this.mat3[8]=(g*d-y*m)*M,this):null}},{key:"transpose3x3",value:function(d){var y=(d=d===void 0?this.mat3:d)[1],p=d[2],m=d[5];return this.mat3[0]=d[0],this.mat3[1]=d[3],this.mat3[2]=d[6],this.mat3[3]=y,this.mat3[4]=d[4],this.mat3[5]=d[7],this.mat3[6]=p,this.mat3[7]=m,this.mat3[8]=d[8],this}},{key:"inverseTranspose",value:function(d){if(d=d.mat4,this.mat3===void 0?n.default._friendlyError("sorry, this function only works with mat3"):(this.mat3[0]=d[0],this.mat3[1]=d[1],this.mat3[2]=d[2],this.mat3[3]=d[4],this.mat3[4]=d[5],this.mat3[5]=d[6],this.mat3[6]=d[8],this.mat3[7]=d[9],this.mat3[8]=d[10]),d=this.invert3x3(),d)d.transpose3x3(this.mat3);else for(var y=0;y<9;y++)this.mat3[y]=0;return this}},{key:"determinant",value:function(){var d=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],y=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],p=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],m=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],g=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],v=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],x=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],T=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],w=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],b=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],C=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return d*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-y*C+p*b+m*w-g*T+v*x}},{key:"mult",value:function(p){var y;if(p===this||p===this.mat4)y=this.copy().mat4;else if(p instanceof n.default.Matrix)y=p.mat4;else if(a(p))y=p;else{if(arguments.length!==16)return;y=arguments}var p=this.mat4[0],m=this.mat4[1],g=this.mat4[2],v=this.mat4[3];return this.mat4[0]=p*y[0]+m*y[4]+g*y[8]+v*y[12],this.mat4[1]=p*y[1]+m*y[5]+g*y[9]+v*y[13],this.mat4[2]=p*y[2]+m*y[6]+g*y[10]+v*y[14],this.mat4[3]=p*y[3]+m*y[7]+g*y[11]+v*y[15],p=this.mat4[4],m=this.mat4[5],g=this.mat4[6],v=this.mat4[7],this.mat4[4]=p*y[0]+m*y[4]+g*y[8]+v*y[12],this.mat4[5]=p*y[1]+m*y[5]+g*y[9]+v*y[13],this.mat4[6]=p*y[2]+m*y[6]+g*y[10]+v*y[14],this.mat4[7]=p*y[3]+m*y[7]+g*y[11]+v*y[15],p=this.mat4[8],m=this.mat4[9],g=this.mat4[10],v=this.mat4[11],this.mat4[8]=p*y[0]+m*y[4]+g*y[8]+v*y[12],this.mat4[9]=p*y[1]+m*y[5]+g*y[9]+v*y[13],this.mat4[10]=p*y[2]+m*y[6]+g*y[10]+v*y[14],this.mat4[11]=p*y[3]+m*y[7]+g*y[11]+v*y[15],p=this.mat4[12],m=this.mat4[13],g=this.mat4[14],v=this.mat4[15],this.mat4[12]=p*y[0]+m*y[4]+g*y[8]+v*y[12],this.mat4[13]=p*y[1]+m*y[5]+g*y[9]+v*y[13],this.mat4[14]=p*y[2]+m*y[6]+g*y[10]+v*y[14],this.mat4[15]=p*y[3]+m*y[7]+g*y[11]+v*y[15],this}},{key:"apply",value:function(p){var y;if(p===this||p===this.mat4)y=this.copy().mat4;else if(p instanceof n.default.Matrix)y=p.mat4;else if(a(p))y=p;else{if(arguments.length!==16)return;y=arguments}var p=this.mat4,m=p[0],g=p[4],v=p[8],x=p[12],m=(p[0]=y[0]*m+y[1]*g+y[2]*v+y[3]*x,p[4]=y[4]*m+y[5]*g+y[6]*v+y[7]*x,p[8]=y[8]*m+y[9]*g+y[10]*v+y[11]*x,p[12]=y[12]*m+y[13]*g+y[14]*v+y[15]*x,p[1]),g=p[5],v=p[9],x=p[13],m=(p[1]=y[0]*m+y[1]*g+y[2]*v+y[3]*x,p[5]=y[4]*m+y[5]*g+y[6]*v+y[7]*x,p[9]=y[8]*m+y[9]*g+y[10]*v+y[11]*x,p[13]=y[12]*m+y[13]*g+y[14]*v+y[15]*x,p[2]),g=p[6],v=p[10],x=p[14],m=(p[2]=y[0]*m+y[1]*g+y[2]*v+y[3]*x,p[6]=y[4]*m+y[5]*g+y[6]*v+y[7]*x,p[10]=y[8]*m+y[9]*g+y[10]*v+y[11]*x,p[14]=y[12]*m+y[13]*g+y[14]*v+y[15]*x,p[3]),g=p[7],v=p[11],x=p[15];return p[3]=y[0]*m+y[1]*g+y[2]*v+y[3]*x,p[7]=y[4]*m+y[5]*g+y[6]*v+y[7]*x,p[11]=y[8]*m+y[9]*g+y[10]*v+y[11]*x,p[15]=y[12]*m+y[13]*g+y[14]*v+y[15]*x,this}},{key:"scale",value:function(d,y,p){return d instanceof n.default.Vector?(y=d.y,p=d.z,d=d.x):d instanceof Array&&(y=d[1],p=d[2],d=d[0]),this.mat4[0]*=d,this.mat4[1]*=d,this.mat4[2]*=d,this.mat4[3]*=d,this.mat4[4]*=y,this.mat4[5]*=y,this.mat4[6]*=y,this.mat4[7]*=y,this.mat4[8]*=p,this.mat4[9]*=p,this.mat4[10]*=p,this.mat4[11]*=p,this}},{key:"rotate",value:function(B,Z,V,m){Z instanceof n.default.Vector?(V=Z.y,m=Z.z,Z=Z.x):Z instanceof Array&&(V=Z[1],m=Z[2],Z=Z[0]);var g=Math.sqrt(Z*Z+V*V+m*m),g=(Z*=1/g,V*=1/g,m*=1/g,this.mat4[0]),v=this.mat4[1],x=this.mat4[2],T=this.mat4[3],w=this.mat4[4],b=this.mat4[5],C=this.mat4[6],A=this.mat4[7],M=this.mat4[8],k=this.mat4[9],P=this.mat4[10],F=this.mat4[11],I=Math.sin(B),B=Math.cos(B),H=1-B,G=Z*Z*H+B,W=V*Z*H+m*I,Q=m*Z*H-V*I,ne=Z*V*H-m*I,U=V*V*H+B,D=m*V*H+Z*I,O=Z*m*H+V*I,V=V*m*H-Z*I,Z=m*m*H+B;return this.mat4[0]=g*G+w*W+M*Q,this.mat4[1]=v*G+b*W+k*Q,this.mat4[2]=x*G+C*W+P*Q,this.mat4[3]=T*G+A*W+F*Q,this.mat4[4]=g*ne+w*U+M*D,this.mat4[5]=v*ne+b*U+k*D,this.mat4[6]=x*ne+C*U+P*D,this.mat4[7]=T*ne+A*U+F*D,this.mat4[8]=g*O+w*V+M*Z,this.mat4[9]=v*O+b*V+k*Z,this.mat4[10]=x*O+C*V+P*Z,this.mat4[11]=T*O+A*V+F*Z,this}},{key:"translate",value:function(m){var y=m[0],p=m[1],m=m[2]||0;this.mat4[12]+=this.mat4[0]*y+this.mat4[4]*p+this.mat4[8]*m,this.mat4[13]+=this.mat4[1]*y+this.mat4[5]*p+this.mat4[9]*m,this.mat4[14]+=this.mat4[2]*y+this.mat4[6]*p+this.mat4[10]*m,this.mat4[15]+=this.mat4[3]*y+this.mat4[7]*p+this.mat4[11]*m}},{key:"rotateX",value:function(d){this.rotate(d,1,0,0)}},{key:"rotateY",value:function(d){this.rotate(d,0,1,0)}},{key:"rotateZ",value:function(d){this.rotate(d,0,0,1)}},{key:"perspective",value:function(g,y,p,m){var g=1/Math.tan(g/2),v=1/(p-m);return this.mat4[0]=g/y,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=g,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(m+p)*v,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*m*p*v,this.mat4[15]=0,this}},{key:"ortho",value:function(d,y,p,m,g,v){var x=1/(d-y),T=1/(p-m),w=1/(g-v);return this.mat4[0]=-2*x,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*T,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*w,this.mat4[11]=0,this.mat4[12]=(d+y)*x,this.mat4[13]=(m+p)*T,this.mat4[14]=(v+g)*w,this.mat4[15]=1,this}},{key:"multiplyVec4",value:function(d,y,p,m){var g=new Array(4),v=this.mat4;return g[0]=v[0]*d+v[4]*y+v[8]*p+v[12]*m,g[1]=v[1]*d+v[5]*y+v[9]*p+v[13]*m,g[2]=v[2]*d+v[6]*y+v[10]*p+v[14]*m,g[3]=v[3]*d+v[7]*y+v[11]*p+v[15]*m,g}},{key:"multiplyPoint",value:function(p){var m=p.x,y=p.y,p=p.z,m=this.multiplyVec4(m,y,p,1);return new n.default.Vector(m[0],m[1],m[2])}},{key:"multiplyAndNormalizePoint",value:function(p){var m=p.x,y=p.y,p=p.z,m=this.multiplyVec4(m,y,p,1);return m[0]/=m[3],m[1]/=m[3],m[2]/=m[3],new n.default.Vector(m[0],m[1],m[2])}},{key:"multiplyDirection",value:function(p){var m=p.x,y=p.y,p=p.z,m=this.multiplyVec4(m,y,p,0);return new n.default.Vector(m[0],m[1],m[2])}},{key:"mult3x3",value:function(p){var y;if(p===this||p===this.mat3)y=this.copy().mat3;else if(p instanceof n.default.Matrix)y=p.mat3;else if(a(p))y=p;else{if(arguments.length!==9)return;y=arguments}var p=this.mat3[0],m=this.mat3[1],g=this.mat3[2];return this.mat3[0]=p*y[0]+m*y[3]+g*y[6],this.mat3[1]=p*y[1]+m*y[4]+g*y[7],this.mat3[2]=p*y[2]+m*y[5]+g*y[8],p=this.mat3[3],m=this.mat3[4],g=this.mat3[5],this.mat3[3]=p*y[0]+m*y[3]+g*y[6],this.mat3[4]=p*y[1]+m*y[4]+g*y[7],this.mat3[5]=p*y[2]+m*y[5]+g*y[8],p=this.mat3[6],m=this.mat3[7],g=this.mat3[8],this.mat3[6]=p*y[0]+m*y[3]+g*y[6],this.mat3[7]=p*y[1]+m*y[4]+g*y[7],this.mat3[8]=p*y[2]+m*y[5]+g*y[8],this}},{key:"column",value:function(d){return new n.default.Vector(this.mat3[3*d],this.mat3[3*d+1],this.mat3[3*d+2])}},{key:"row",value:function(d){return new n.default.Vector(this.mat3[d],this.mat3[d+3],this.mat3[d+6])}},{key:"diagonal",value:function(){return this.mat3!==void 0?[this.mat3[0],this.mat3[4],this.mat3[8]]:[this.mat4[0],this.mat4[5],this.mat4[10],this.mat4[15]]}},{key:"multiplyVec3",value:function(d,y){return(y=y===void 0?d.copy():y).x=this.row(0).dot(d),y.y=this.row(1).dot(d),y.z=this.row(2).dot(d),y}},{key:"createSubMatrix3x3",value:function(){var d=new n.default.Matrix("mat3");return d.mat3[0]=this.mat4[0],d.mat3[1]=this.mat4[1],d.mat3[2]=this.mat4[2],d.mat3[3]=this.mat4[4],d.mat3[4]=this.mat4[5],d.mat3[5]=this.mat4[6],d.mat3[6]=this.mat4[8],d.mat3[7]=this.mat4[9],d.mat3[8]=this.mat4[10],d}}])&&o(l.prototype,u),c&&o(l,c),h}(),n.default.Matrix);i.default=f},{"../core/main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.to-string":182,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.float32-array":211,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231}],329:[function(t,r,i){t("core-js/modules/es.array.map"),t("core-js/modules/es.array.map"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t};function n(o,s){for(var a=0;a<s.length;a++){var f=s[a];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(o,f.key,f)}}t.default.RenderBuffer=function(){function o(f,h,l,u,c,d){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");this.size=f,this.src=h,this.dst=l,this.attr=u,this._renderer=c,this.map=d}var s,a;return s=o,(a=[{key:"_prepareBuffer",value:function(f,h){var l,u,c,p=h.attributes,d=this._renderer.GL,y=f.model||f,p=p[this.attr];p&&(l=f[this.dst],0<(u=y[this.src]).length?((c=!l)&&(f[this.dst]=l=d.createBuffer()),d.bindBuffer(d.ARRAY_BUFFER,l),!c&&y.dirtyFlags[this.src]===!1||(c=(f=this.map)?f(u):u,this._renderer._bindBuffer(l,d.ARRAY_BUFFER,c),y.dirtyFlags[this.src]=!1),h.enableAttrib(p,this.size)):(f=p.location)!==-1&&this._renderer.registerEnabled.has(f)&&(d.disableVertexAttribArray(f),this._renderer.registerEnabled.delete(f)))}}])&&n(s.prototype,a),o}(),t=t.default.RenderBuffer,i.default=t},{"../core/main":275,"core-js/modules/es.array.map":164}],330:[function(t,r,i){function n(c){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(c)}function o(c){return(o=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(d){return n(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":n(d)})(c)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.find-index"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.map"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.find-index"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.map"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(u=t("../core/main"))&&u.__esModule?u:{default:u},a=function(c){if(c&&c.__esModule)return c;if(c===null||o(c)!=="object"&&typeof c!="function")return{default:c};var d=f();if(d&&d.has(c))return d.get(c);var y,p={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in c){var g;Object.prototype.hasOwnProperty.call(c,y)&&((g=m?Object.getOwnPropertyDescriptor(c,y):null)&&(g.get||g.set)?Object.defineProperty(p,y,g):p[y]=c[y])}return p.default=c,d&&d.set(c,p),p}(t("../core/constants"));function f(){var c;return typeof WeakMap!="function"?null:(c=new WeakMap,f=function(){return c},c)}function h(c){return function(d){if(Array.isArray(d)){for(var y=0,p=new Array(d.length);y<d.length;y++)p[y]=d[y];return p}}(c)||function(d){if(Symbol.iterator in Object(d)||Object.prototype.toString.call(d)==="[object Arguments]")return Array.from(d)}(c)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t("./p5.RenderBuffer"),s.default.RendererGL.prototype.beginShape=function(c){return this.immediateMode.shapeMode=c!==void 0?c:a.TESS,this.immediateMode.geometry.reset(),this.immediateMode.contourIndices=[],this};var l={vertices:1,vertexNormals:1,vertexColors:4,vertexStrokeColors:4,uvs:2},u=(s.default.RendererGL.prototype.beginContour=function(){if(this.immediateMode.shapeMode!==a.TESS)throw new Error("WebGL mode can only use contours with beginShape(TESS).");this.immediateMode.contourIndices.push(this.immediateMode.geometry.vertices.length)},s.default.RendererGL.prototype.vertex=function(c,d){if(this.immediateMode.shapeMode===a.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var y in l){var p=l[y],y=this.immediateMode.geometry[y];y.push.apply(y,h(y.slice(y.length-3*p,y.length-2*p)).concat(h(y.slice(y.length-p,y.length))))}var m,g,v=m=g=0,x=(arguments.length===3?v=arguments[2]:arguments.length===4?(m=arguments[2],g=arguments[3]):arguments.length===5&&(v=arguments[2],m=arguments[3],g=arguments[4]),new s.default.Vector(c,d,v)),x=(this.immediateMode.geometry.vertices.push(x),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),this.curFillColor||[.5,.5,.5,1]),x=(this.immediateMode.geometry.vertexColors.push(x[0],x[1],x[2],x[3]),this.curStrokeColor||[.5,.5,.5,1]);return this.immediateMode.geometry.vertexStrokeColors.push(x[0],x[1],x[2],x[3]),this.textureMode!==a.IMAGE||this.isProcessingVertices||(this._tex!==null?0<this._tex.width&&0<this._tex.height&&(m/=this._tex.width,g/=this._tex.height):this.userFillShader===void 0&&this.userStrokeShader===void 0&&this.userPointShader===void 0&&this._tex===null&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(m,g),this.immediateMode._bezierVertex[0]=c,this.immediateMode._bezierVertex[1]=d,this.immediateMode._bezierVertex[2]=v,this.immediateMode._quadraticVertex[0]=c,this.immediateMode._quadraticVertex[1]=d,this.immediateMode._quadraticVertex[2]=v,this},s.default.RendererGL.prototype.normal=function(c,d,y){return c instanceof s.default.Vector?this._currentNormal=c:this._currentNormal=new s.default.Vector(c,d,y),this},s.default.RendererGL.prototype.endShape=function(c,d,y,p,m,g){var v=6<arguments.length&&arguments[6]!==void 0?arguments[6]:1;return this.immediateMode.shapeMode===a.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this.immediateMode.geometry.vertices.length===3&&this.immediateMode.shapeMode===a.TESS&&(this.immediateMode.shapeMode,a.TRIANGLES),this.isProcessingVertices=!0,this._processVertices.apply(this,arguments),this.isProcessingVertices=!1,this.immediateMode.shapeMode!==a.LINE_STRIP&&this.immediateMode.shapeMode!==a.LINES||(this.immediateMode.shapeMode=a.TRIANGLE_FAN),this.immediateMode.shapeMode===a.QUADS?this.immediateMode.shapeMode=a.TRIANGLES:this.immediateMode.shapeMode===a.QUAD_STRIP&&(this.immediateMode.shapeMode=a.TRIANGLE_STRIP),this._doFill&&!this.geometryBuilder&&3<=this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(v),this._doStroke&&!this.geometryBuilder&&1<=this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.geometryBuilder&&this.geometryBuilder.addImmediate(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},s.default.RendererGL.prototype._processVertices=function(c){var d;this.immediateMode.geometry.vertices.length!==0&&(d=this._doStroke,c=c===a.CLOSE,d&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,c),this.geometryBuilder||this.immediateMode.geometry._edgesToVertices()),d=this.immediateMode.shapeMode===a.TESS,c=0<this.immediateMode.contourIndices.length,this._doFill&&(this.isBezier||this.isQuadratic||this.isCurve||d||c)&&this.immediateMode.shapeMode!==a.LINES&&this._tesselateShape())},s.default.RendererGL.prototype._calculateEdges=function(c,d,y){var p=[],m=0,g=this.immediateMode.contourIndices.slice(),v=0;switch(c){case a.TRIANGLE_STRIP:for(m=0;m<d.length-2;m++)p.push([m,m+1]),p.push([m,m+2]);p.push([m,m+1]);break;case a.TRIANGLE_FAN:for(m=1;m<d.length-1;m++)p.push([0,m]),p.push([m,m+1]);p.push([0,d.length-1]);break;case a.TRIANGLES:for(m=0;m<d.length-2;m+=3)p.push([m,m+1]),p.push([m+1,m+2]),p.push([m+2,m]);break;case a.LINES:for(m=0;m<d.length-1;m+=2)p.push([m,m+1]);break;case a.QUADS:for(m=0;m<d.length-5;m+=6)p.push([m,m+1]),p.push([m+1,m+2]),p.push([m+3,m+5]),p.push([m+4,m+5]);break;case a.QUAD_STRIP:for(m=0;m<d.length-2;m+=2)p.push([m,m+1]),p.push([m,m+2]),p.push([m+1,m+3]);p.push([m,m+1]);break;default:for(m=0;m<d.length;m++)m+1<d.length&&m+1!==g[0]?p.push([m,m+1]):((y||v)&&p.push([m,v]),0<g.length&&(v=g.shift()))}return c!==a.TESS&&y&&p.push([d.length-1,0]),p},s.default.RendererGL.prototype._tesselateShape=function(){for(var c=this,d=(this.immediateMode.shapeMode=a.TRIANGLES,[[]]),y=0;y<this.immediateMode.geometry.vertices.length;y++)0<this.immediateMode.contourIndices.length&&this.immediateMode.contourIndices[0]===y&&(this.immediateMode.contourIndices.shift(),d.push([])),d[d.length-1].push(this.immediateMode.geometry.vertices[y].x,this.immediateMode.geometry.vertices[y].y,this.immediateMode.geometry.vertices[y].z,this.immediateMode.geometry.uvs[2*y],this.immediateMode.geometry.uvs[2*y+1],this.immediateMode.geometry.vertexColors[4*y],this.immediateMode.geometry.vertexColors[4*y+1],this.immediateMode.geometry.vertexColors[4*y+2],this.immediateMode.geometry.vertexColors[4*y+3],this.immediateMode.geometry.vertexNormals[y].x,this.immediateMode.geometry.vertexNormals[y].y,this.immediateMode.geometry.vertexNormals[y].z);for(var p,m=this._triangulate(d),g=this.immediateMode.geometry.vertices,v=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),x=0,T=m.length;x<T;x+=s.default.RendererGL.prototype.tessyVertexSize)v.push.apply(v,h(m.slice(x+5,x+9))),this.normal.apply(this,h(m.slice(x+9,x+12))),this.vertex.apply(this,h(m.slice(x,x+5)));this.geometryBuilder&&(p=new Map,this.immediateMode.geometry.edges=this.immediateMode.geometry.edges.map(function(w){return w.map(function(b){if(!p.has(b)){var C=g[b],A=c.immediateMode.geometry.vertices.findIndex(function(H){return C.x===H.x&&C.y===H.y&&C.z===H.z});if(A===-1){for(var M=1/0,k=0,P=0;P<c.immediateMode.geometry.vertices.length;P++){var I=c.immediateMode.geometry.vertices[P],B=C.x-I.x,F=C.y-I.y,I=C.z-I.z,B=B*B+F*F+I*I;B<M&&(M=B,k=P)}A=k}p.set(b,A)}return p.get(b)})})),this.immediateMode.geometry.vertexColors=v},s.default.RendererGL.prototype._drawImmediateFill=function(){var c,d=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1,y=this.GL,p=(this._useVertexColor=0<this.immediateMode.geometry.vertexColors.length,c=this._getImmediateFillShader(),this._setFillUniforms(c),!0),m=!1,g=void 0;try{for(var v,x=this.immediateMode.buffers.fill[Symbol.iterator]();!(p=(v=x.next()).done);p=!0)v.value._prepareBuffer(this.immediateMode.geometry,c)}catch(T){m=!0,g=T}finally{try{p||x.return==null||x.return()}finally{if(m)throw g}}if(c.disableRemainingAttributes(),this._applyColorBlend(this.curFillColor),d===1)y.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length);else try{y.drawArraysInstanced(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length,d)}catch{console.log("ð¸ p5.js says: Instancing is only supported in WebGL2 mode")}c.unbindShader()},s.default.RendererGL.prototype._drawImmediateStroke=function(){var c=this.GL,d=(this._useLineColor=0<this.immediateMode.geometry.vertexStrokeColors.length,this._getImmediateStrokeShader()),y=(this._setStrokeUniforms(d),!0),p=!1,m=void 0;try{for(var g,v=this.immediateMode.buffers.stroke[Symbol.iterator]();!(y=(g=v.next()).done);y=!0)g.value._prepareBuffer(this.immediateMode.geometry,d)}catch(x){p=!0,m=x}finally{try{y||v.return==null||v.return()}finally{if(p)throw m}}d.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor),c.drawArrays(c.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length/3),d.unbindShader()},s.default.RendererGL);i.default=u},{"../core/constants":264,"../core/main":275,"./p5.RenderBuffer":329,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.find-index":156,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.map":169,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],331:[function(t,r,i){function n(l){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(l)}function o(l){return(o=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(u){return n(u)}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":n(u)})(l)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.some"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.uint16-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.some"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.uint16-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=(h=t("../core/main"))&&h.__esModule?h:{default:h},a=(t("./p5.RendererGL"),t("./p5.RenderBuffer"),function(l){if(l&&l.__esModule)return l;if(l===null||o(l)!=="object"&&typeof l!="function")return{default:l};var u=f();if(u&&u.has(l))return u.get(l);var c,d={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in l){var p;Object.prototype.hasOwnProperty.call(l,c)&&((p=y?Object.getOwnPropertyDescriptor(l,c):null)&&(p.get||p.set)?Object.defineProperty(d,c,p):d[c]=l[c])}return d.default=l,u&&u.set(l,d),d}(t("../core/constants")));function f(){var l;return typeof WeakMap!="function"?null:(l=new WeakMap,f=function(){return l},l)}s.default.RendererGL.prototype.freeGeometry=function(l){l.gid?this._freeBuffers(l.gid):console.warn("The model you passed to freeGeometry does not have an id!")},s.default.RendererGL.prototype._initBufferDefaults=function(l){var u;return this._freeBuffers(l),1e3<Object.keys(this.retainedMode.geometry).length&&(u=Object.keys(this.retainedMode.geometry)[0],this._freeBuffers(u)),this.retainedMode.geometry[l]={}},s.default.RendererGL.prototype._freeBuffers=function(l){var u,c=this.retainedMode.geometry[l];function d(y){var p=!0,m=!1,g=void 0;try{for(var v,x=y[Symbol.iterator]();!(p=(v=x.next()).done);p=!0){var T=v.value;c[T.dst]&&(u.deleteBuffer(c[T.dst]),c[T.dst]=null)}}catch(w){m=!0,g=w}finally{try{p||x.return==null||x.return()}finally{if(m)throw g}}}c&&(delete this.retainedMode.geometry[l],u=this.GL,c.indexBuffer&&u.deleteBuffer(c.indexBuffer),d(this.retainedMode.buffers.stroke),d(this.retainedMode.buffers.fill))},s.default.RendererGL.prototype.createBuffers=function(m,u){var c,d,y,p=this.GL,m=this._initBufferDefaults(m),g=(m.model=u,m.indexBuffer);return u.faces.length?(g=g||(m.indexBuffer=p.createBuffer()),y=(d=(c=s.default.RendererGL.prototype._flatten(u.faces)).some(function(v){return 65535<v}))?Uint32Array:Uint16Array,this._bindBuffer(g,p.ELEMENT_ARRAY_BUFFER,c,y),m.indexBufferType=d?p.UNSIGNED_INT:p.UNSIGNED_SHORT,m.vertexCount=3*u.faces.length):(g&&(p.deleteBuffer(g),m.indexBuffer=null),m.vertexCount=u.vertices?u.vertices.length:0),m.lineVertexCount=u.lineVertices?u.lineVertices.length/3:0,m},s.default.RendererGL.prototype.drawBuffers=function(l){var u=this.GL,c=this.retainedMode.geometry[l];if(!this.geometryBuilder&&this._doFill&&0<this.retainedMode.geometry[l].vertexCount){this._useVertexColor=0<c.model.vertexColors.length;var d=this._getRetainedFillShader(),y=(this._setFillUniforms(d),!0),p=!1,m=void 0;try{for(var g,v=this.retainedMode.buffers.fill[Symbol.iterator]();!(y=(g=v.next()).done);y=!0)g.value._prepareBuffer(c,d)}catch(C){p=!0,m=C}finally{try{y||v.return==null||v.return()}finally{if(p)throw m}}d.disableRemainingAttributes(),c.indexBuffer&&this._bindBuffer(c.indexBuffer,u.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor),this._drawElements(u.TRIANGLES,l),d.unbindShader()}if(!this.geometryBuilder&&this._doStroke&&0<c.lineVertexCount){this._useLineColor=0<c.model.vertexStrokeColors.length;var x=this._getRetainedStrokeShader(),T=(this._setStrokeUniforms(x),!0),p=!1,m=void 0;try{for(var w,b=this.retainedMode.buffers.stroke[Symbol.iterator]();!(T=(w=b.next()).done);T=!0)w.value._prepareBuffer(c,x)}catch(M){p=!0,m=M}finally{try{T||b.return==null||b.return()}finally{if(p)throw m}}x.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor),this._drawArrays(u.TRIANGLES,l),x.unbindShader()}return this.geometryBuilder&&this.geometryBuilder.addRetained(c),this},s.default.RendererGL.prototype.drawBuffersScaled=function(l,u,c,d){var y=this.uMVMatrix.copy();try{this.uMVMatrix.scale(u,c,d),this.drawBuffers(l)}finally{this.uMVMatrix=y}},s.default.RendererGL.prototype._drawArrays=function(l,u){return this.GL.drawArrays(l,0,this.retainedMode.geometry[u].lineVertexCount),this},s.default.RendererGL.prototype._drawElements=function(l,c){var c=this.retainedMode.geometry[c],d=this.GL;if(c.indexBuffer){if(this._pInst.webglVersion!==a.WEBGL2&&c.indexBufferType===d.UNSIGNED_INT&&!d.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");d.drawElements(d.TRIANGLES,c.vertexCount,c.indexBufferType,0)}else d.drawArrays(l||d.TRIANGLES,0,c.vertexCount)},s.default.RendererGL.prototype._drawPoints=function(l,u){var c=this.GL,d=this._getImmediatePointShader();this._setPointUniforms(d),this._bindBuffer(u,c.ARRAY_BUFFER,this._vToNArray(l),Float32Array,c.STATIC_DRAW),d.enableAttrib(d.attributes.aPosition,3),this._applyColorBlend(this.curStrokeColor),c.drawArrays(c.Points,0,l.length),d.unbindShader()};var h=s.default.RendererGL;i.default=h},{"../core/constants":264,"../core/main":275,"./p5.RenderBuffer":329,"./p5.RendererGL":332,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.some":166,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.float32-array":211,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint16-array":232,"core-js/modules/es.typed-array.uint32-array":233,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],332:[function(P,r,i){function n(G){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W})(G)}function o(G){return(o=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(W){return n(W)}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":n(W)})(G)}P("core-js/modules/es.symbol"),P("core-js/modules/es.symbol.description"),P("core-js/modules/es.symbol.iterator"),P("core-js/modules/es.array.concat"),P("core-js/modules/es.array.copy-within"),P("core-js/modules/es.array.every"),P("core-js/modules/es.array.fill"),P("core-js/modules/es.array.from"),P("core-js/modules/es.array.includes"),P("core-js/modules/es.array.iterator"),P("core-js/modules/es.array.slice"),P("core-js/modules/es.array.some"),P("core-js/modules/es.map"),P("core-js/modules/es.object.assign"),P("core-js/modules/es.object.get-own-property-descriptor"),P("core-js/modules/es.object.get-prototype-of"),P("core-js/modules/es.object.to-string"),P("core-js/modules/es.reflect.construct"),P("core-js/modules/es.reflect.get"),P("core-js/modules/es.regexp.to-string"),P("core-js/modules/es.set"),P("core-js/modules/es.string.includes"),P("core-js/modules/es.string.iterator"),P("core-js/modules/es.typed-array.float32-array"),P("core-js/modules/es.typed-array.float64-array"),P("core-js/modules/es.typed-array.int16-array"),P("core-js/modules/es.typed-array.uint8-array"),P("core-js/modules/es.typed-array.uint16-array"),P("core-js/modules/es.typed-array.uint32-array"),P("core-js/modules/es.typed-array.copy-within"),P("core-js/modules/es.typed-array.every"),P("core-js/modules/es.typed-array.fill"),P("core-js/modules/es.typed-array.filter"),P("core-js/modules/es.typed-array.find"),P("core-js/modules/es.typed-array.find-index"),P("core-js/modules/es.typed-array.for-each"),P("core-js/modules/es.typed-array.includes"),P("core-js/modules/es.typed-array.index-of"),P("core-js/modules/es.typed-array.iterator"),P("core-js/modules/es.typed-array.join"),P("core-js/modules/es.typed-array.last-index-of"),P("core-js/modules/es.typed-array.map"),P("core-js/modules/es.typed-array.reduce"),P("core-js/modules/es.typed-array.reduce-right"),P("core-js/modules/es.typed-array.reverse"),P("core-js/modules/es.typed-array.set"),P("core-js/modules/es.typed-array.slice"),P("core-js/modules/es.typed-array.some"),P("core-js/modules/es.typed-array.sort"),P("core-js/modules/es.typed-array.subarray"),P("core-js/modules/es.typed-array.to-locale-string"),P("core-js/modules/es.typed-array.to-string"),P("core-js/modules/es.weak-map"),P("core-js/modules/web.dom-collections.iterator"),P("core-js/modules/es.symbol"),P("core-js/modules/es.symbol.description"),P("core-js/modules/es.symbol.iterator"),P("core-js/modules/es.array.concat"),P("core-js/modules/es.array.copy-within"),P("core-js/modules/es.array.every"),P("core-js/modules/es.array.fill"),P("core-js/modules/es.array.from"),P("core-js/modules/es.array.includes"),P("core-js/modules/es.array.iterator"),P("core-js/modules/es.array.slice"),P("core-js/modules/es.array.some"),P("core-js/modules/es.map"),P("core-js/modules/es.object.assign"),P("core-js/modules/es.object.to-string"),P("core-js/modules/es.set"),P("core-js/modules/es.string.includes"),P("core-js/modules/es.string.iterator"),P("core-js/modules/es.typed-array.float32-array"),P("core-js/modules/es.typed-array.float64-array"),P("core-js/modules/es.typed-array.int16-array"),P("core-js/modules/es.typed-array.uint8-array"),P("core-js/modules/es.typed-array.uint16-array"),P("core-js/modules/es.typed-array.uint32-array"),P("core-js/modules/es.typed-array.copy-within"),P("core-js/modules/es.typed-array.every"),P("core-js/modules/es.typed-array.fill"),P("core-js/modules/es.typed-array.filter"),P("core-js/modules/es.typed-array.find"),P("core-js/modules/es.typed-array.find-index"),P("core-js/modules/es.typed-array.for-each"),P("core-js/modules/es.typed-array.includes"),P("core-js/modules/es.typed-array.index-of"),P("core-js/modules/es.typed-array.iterator"),P("core-js/modules/es.typed-array.join"),P("core-js/modules/es.typed-array.last-index-of"),P("core-js/modules/es.typed-array.map"),P("core-js/modules/es.typed-array.reduce"),P("core-js/modules/es.typed-array.reduce-right"),P("core-js/modules/es.typed-array.reverse"),P("core-js/modules/es.typed-array.set"),P("core-js/modules/es.typed-array.slice"),P("core-js/modules/es.typed-array.some"),P("core-js/modules/es.typed-array.sort"),P("core-js/modules/es.typed-array.subarray"),P("core-js/modules/es.typed-array.to-locale-string"),P("core-js/modules/es.typed-array.to-string"),P("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.readPixelsWebGL=B,i.readPixelWebGL=H,i.default=void 0;var s=c(P("../core/main")),a=function(G){if(G&&G.__esModule)return G;if(G===null||o(G)!=="object"&&typeof G!="function")return{default:G};var W=u();if(W&&W.has(G))return W.get(G);var Q,ne={},U=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(Q in G){var D;Object.prototype.hasOwnProperty.call(G,Q)&&((D=U?Object.getOwnPropertyDescriptor(G,Q):null)&&(D.get||D.set)?Object.defineProperty(ne,Q,D):ne[Q]=G[Q])}return ne.default=G,W&&W.set(G,ne),ne}(P("../core/constants")),f=c(P("./GeometryBuilder")),h=c(P("libtess")),l=(P("./p5.Shader"),P("./p5.Camera"),P("../core/p5.Renderer"),P("./p5.Matrix"),P("./p5.Framebuffer"),P("path"),P("./p5.Texture"));function u(){var G;return typeof WeakMap!="function"?null:(G=new WeakMap,u=function(){return G},G)}function c(G){return G&&G.__esModule?G:{default:G}}function d(G){return function(W){if(Array.isArray(W)){for(var Q=0,ne=new Array(W.length);Q<W.length;Q++)ne[Q]=W[Q];return ne}}(G)||function(W){if(Symbol.iterator in Object(W)||Object.prototype.toString.call(W)==="[object Arguments]")return Array.from(W)}(G)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function y(G,W){for(var Q=0;Q<W.length;Q++){var ne=W[Q];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(G,ne.key,ne)}}function p(G,W,Q){return(p=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(O,U,D){var O=function(V,Z){for(;!Object.prototype.hasOwnProperty.call(V,Z)&&(V=x(V))!==null;);return V}(O,U);if(O)return(O=Object.getOwnPropertyDescriptor(O,U)).get?O.get.call(D):O.value})(G,W,Q||G)}function m(G,W){return(m=Object.setPrototypeOf||function(Q,ne){return Q.__proto__=ne,Q})(G,W)}function g(G){return function(){var W,Q,ne=x(G);return W=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(W=x(this).constructor,Reflect.construct(ne,arguments,W)):ne.apply(this,arguments),ne=this,!(Q=W)||o(Q)!=="object"&&typeof Q!="function"?v(ne):Q}}function v(G){if(G===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return G}function x(G){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(W){return W.__proto__||Object.getPrototypeOf(W)})(G)}function T(G,W,Q){W in G?Object.defineProperty(G,W,{value:Q,enumerable:!0,configurable:!0,writable:!0}):G[W]=Q}function w(G,W){k+="#define STROKE_CAP_".concat(G," ").concat(W,`
`),A[a[G]]=W}function b(G,W){k+="#define STROKE_JOIN_".concat(G," ").concat(W,`
`),M[a[G]]=W}var C,A={},M={},k="",P=(w("ROUND",0),w("PROJECT",1),w("SQUARE",2),b("ROUND",0),b("MITER",1),b("BEVEL",2),`#define PI 3.141592

precision highp float;
precision highp int;

uniform mat4 uViewMatrix;

uniform bool uUseLighting;

uniform int uAmbientLightCount;
uniform vec3 uAmbientColor[5];

uniform int uDirectionalLightCount;
uniform vec3 uLightingDirection[5];
uniform vec3 uDirectionalDiffuseColors[5];
uniform vec3 uDirectionalSpecularColors[5];

uniform int uPointLightCount;
uniform vec3 uPointLightLocation[5];
uniform vec3 uPointLightDiffuseColors[5];	
uniform vec3 uPointLightSpecularColors[5];

uniform int uSpotLightCount;
uniform float uSpotLightAngle[5];
uniform float uSpotLightConc[5];
uniform vec3 uSpotLightDiffuseColors[5];
uniform vec3 uSpotLightSpecularColors[5];
uniform vec3 uSpotLightLocation[5];
uniform vec3 uSpotLightDirection[5];

uniform bool uSpecular;
uniform float uShininess;

uniform float uConstantAttenuation;
uniform float uLinearAttenuation;
uniform float uQuadraticAttenuation;

// setting from  _setImageLightUniforms()
// boolean to initiate the calculateImageDiffuse and calculateImageSpecular
uniform bool uUseImageLight;
// texture for use in calculateImageDiffuse
uniform sampler2D environmentMapDiffused;
// texture for use in calculateImageSpecular
uniform sampler2D environmentMapSpecular;
// roughness for use in calculateImageSpecular
uniform float levelOfDetail;

const float specularFactor = 2.0;
const float diffuseFactor = 0.73;

struct LightResult {
  float specular;
  float diffuse;
};

float _phongSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float shininess) {

  vec3 R = reflect(lightDirection, surfaceNormal);
  return pow(max(0.0, dot(R, viewDirection)), shininess);
}

float _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {
  return max(0.0, dot(-lightDirection, surfaceNormal));
}

LightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {

  vec3 lightDir = normalize(lightVector);

  //compute our diffuse & specular terms
  LightResult lr;
  if (uSpecular)
    lr.specular = _phongSpecular(lightDir, viewDirection, normal, uShininess);
  lr.diffuse = _lambertDiffuse(lightDir, normal);
  return lr;
}

// converts the range of "value" from [min1 to max1] to [min2 to max2]
float map(float value, float min1, float max1, float min2, float max2) {
  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
}

vec2 mapTextureToNormal( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( fract(theta + 0.25), 1.0 - phi );
  return angles;
}


vec3 calculateImageDiffuse( vec3 vNormal, vec3 vViewPosition ){
  // make 2 seperate builds 
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);  // hardcoded world camera position
  vec3 worldNormal = normalize(vNormal);
  vec2 newTexCoor = mapTextureToNormal( worldNormal );
  vec4 texture = TEXTURE( environmentMapDiffused, newTexCoor );
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return smoothstep(vec3(0.0), vec3(0.8), texture.xyz);
}

vec3 calculateImageSpecular( vec3 vNormal, vec3 vViewPosition ){
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);
  vec3 worldNormal = normalize(vNormal);
  vec3 lightDirection = normalize( vViewPosition - worldCameraPosition );
  vec3 R = reflect(lightDirection, worldNormal);
  vec2 newTexCoor = mapTextureToNormal( R );
#ifdef WEBGL2
  vec4 outColor = textureLod(environmentMapSpecular, newTexCoor, levelOfDetail);
#else
  vec4 outColor = TEXTURE(environmentMapSpecular, newTexCoor);
#endif
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return pow(outColor.xyz, vec3(10.0));
}

void totalLight(
  vec3 modelPosition,
  vec3 normal,
  out vec3 totalDiffuse,
  out vec3 totalSpecular
) {

  totalSpecular = vec3(0.0);

  if (!uUseLighting) {
    totalDiffuse = vec3(1.0);
    return;
  }

  totalDiffuse = vec3(0.0);

  vec3 viewDirection = normalize(-modelPosition);

  for (int j = 0; j < 5; j++) {
    if (j < uDirectionalLightCount) {
      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;
      vec3 lightColor = uDirectionalDiffuseColors[j];
      vec3 specularColor = uDirectionalSpecularColors[j];
      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if (j < uPointLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      //calculate attenuation
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);
      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];
      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];

      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if(j < uSpotLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);

      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;
      float spotDot = dot(normalize(lightVector), normalize(lightDirection));
      float spotFalloff;
      if(spotDot < uSpotLightAngle[j]) {
        spotFalloff = 0.0;
      }
      else {
        spotFalloff = pow(spotDot, uSpotLightConc[j]);
      }
      lightFalloff *= spotFalloff;

      vec3 lightColor = uSpotLightDiffuseColors[j];
      vec3 specularColor = uSpotLightSpecularColors[j];
     
      LightResult result = _light(viewDirection, normal, lightVector);
      
      totalDiffuse += result.diffuse * lightColor * lightFalloff;
      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;
    }
  }

  if( uUseImageLight ){
    totalDiffuse += calculateImageDiffuse(normal, modelPosition);
    totalSpecular += calculateImageSpecular(normal, modelPosition);
  }

  totalDiffuse *= diffuseFactor;
  totalSpecular *= specularFactor;
}
`),F={immediateVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uResolution;
uniform float uPointSize;

OUT vec4 vColor;
void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
  gl_PointSize = uPointSize;
}
`,vertexColorVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

OUT vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
}
`,vertexColorFrag:`IN vec4 vColor;
void main(void) {
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,normalVert:`IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform vec4 uMaterialColor;
uniform bool uUseVertexColor;

OUT vec3 vVertexNormal;
OUT highp vec2 vVertTexCoord;
OUT vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));
  vVertTexCoord = aTexCoord;
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,normalFrag:`IN vec3 vVertexNormal;
void main(void) {
  OUT_COLOR = vec4(vVertexNormal, 1.0);
}
`,basicFrag:`IN vec4 vColor;
void main(void) {
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,lightVert:P+`// include lighting.glgl

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT highp vec2 vVertTexCoord;
OUT vec3 vDiffuseColor;
OUT vec3 vSpecularColor;
OUT vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;

  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);
  vVertTexCoord = aTexCoord;

  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);

  for (int i = 0; i < 8; i++) {
    if (i < uAmbientLightCount) {
      vDiffuseColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,lightTextureFrag:`uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

IN highp vec2 vVertTexCoord;
IN vec3 vDiffuseColor;
IN vec3 vSpecularColor;
IN vec4 vColor;

void main(void) {
  if(uEmissive && !isTexture) {
    OUT_COLOR = vColor;
  }
  else {
    vec4 baseColor = isTexture
      // Textures come in with premultiplied alpha. To apply tint and still have
      // premultiplied alpha output, we need to multiply the RGB channels by the
      // tint RGB, and all channels by the tint alpha.
      ? TEXTURE(uSampler, vVertTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
      // Colors come in with unmultiplied alpha, so we need to multiply the RGB
      // channels by alpha to convert it to premultiplied alpha.
      : vec4(vColor.rgb * vColor.a, vColor.a);
    OUT_COLOR = vec4(baseColor.rgb * vDiffuseColor + vSpecularColor, baseColor.a);
  }
}
`,phongVert:`precision highp int;

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform vec3 uAmbientColor[5];

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;
uniform int uAmbientLightCount;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT vec3 vNormal;
OUT vec2 vTexCoord;
OUT vec3 vViewPosition;
OUT vec3 vAmbientColor;
OUT vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);

  // Pass varyings to fragment shader
  vViewPosition = viewModelPosition.xyz;
  gl_Position = uProjectionMatrix * viewModelPosition;  

  vNormal = uNormalMatrix * aNormal;
  vTexCoord = aTexCoord;

  // TODO: this should be a uniform
  vAmbientColor = vec3(0.0);
  for (int i = 0; i < 5; i++) {
    if (i < uAmbientLightCount) {
      vAmbientColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,phongFrag:P+`// include lighting.glsl
precision highp int;

uniform bool uHasSetAmbient;
uniform vec4 uSpecularMatColor;
uniform vec4 uAmbientMatColor;
uniform vec4 uEmissiveMatColor;

uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;

IN vec3 vNormal;
IN vec2 vTexCoord;
IN vec3 vViewPosition;
IN vec3 vAmbientColor;
IN vec4 vColor;

void main(void) {

  vec3 diffuse;
  vec3 specular;
  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);

  // Calculating final color as result of all lights (plus emissive term).

  vec4 baseColor = isTexture
    // Textures come in with premultiplied alpha. To apply tint and still have
    // premultiplied alpha output, we need to multiply the RGB channels by the
    // tint RGB, and all channels by the tint alpha.
    ? TEXTURE(uSampler, vTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
    // Colors come in with unmultiplied alpha, so we need to multiply the RGB
    // channels by alpha to convert it to premultiplied alpha.
    : vec4(vColor.rgb * vColor.a, vColor.a);
  OUT_COLOR = vec4(diffuse * baseColor.rgb + 
                    vAmbientColor * (
                      uHasSetAmbient ? uAmbientMatColor.rgb : baseColor.rgb
                    ) + 
                    specular * uSpecularMatColor.rgb + 
                    uEmissiveMatColor.rgb, baseColor.a);
}
`,fontVert:`IN vec3 aPosition;
IN vec2 aTexCoord;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

uniform vec4 uGlyphRect;
uniform float uGlyphOffset;

OUT vec2 vTexCoord;
OUT float w;

void main() {
  vec4 positionVec4 = vec4(aPosition, 1.0);

  // scale by the size of the glyph's rectangle
  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;

  // Expand glyph bounding boxes by 1px on each side to give a bit of room
  // for antialiasing
  vec3 newOrigin = (uModelViewMatrix * vec4(0., 0., 0., 1.)).xyz;
  vec3 newDX = (uModelViewMatrix * vec4(1., 0., 0., 1.)).xyz;
  vec3 newDY = (uModelViewMatrix * vec4(0., 1., 0., 1.)).xyz;
  vec2 pixelScale = vec2(
    1. / length(newOrigin - newDX),
    1. / length(newOrigin - newDY)
  );
  vec2 offset = pixelScale * normalize(aTexCoord - vec2(0.5, 0.5)) * vec2(1., -1.);
  vec2 textureOffset = offset * (1. / vec2(
    uGlyphRect.z - uGlyphRect.x,
    uGlyphRect.w - uGlyphRect.y
  ));

  // move to the corner of the glyph
  positionVec4.xy += uGlyphRect.xy;

  // move to the letter's line offset
  positionVec4.x += uGlyphOffset;

  positionVec4.xy += offset;
  
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vTexCoord = aTexCoord + textureOffset;
  w = gl_Position.w;
}
`,fontFrag:`#ifndef WEBGL2
#extension GL_OES_standard_derivatives : enable
#endif

#if 0
  // simulate integer math using floats
	#define int float
	#define ivec2 vec2
	#define INT(x) float(x)

	int ifloor(float v) { return floor(v); }
	ivec2 ifloor(vec2 v) { return floor(v); }

#else
  // use native integer math
	precision highp int;
	#define INT(x) x

	int ifloor(float v) { return int(v); }
	int ifloor(int v) { return v; }
	ivec2 ifloor(vec2 v) { return ivec2(v); }

#endif

uniform sampler2D uSamplerStrokes;
uniform sampler2D uSamplerRowStrokes;
uniform sampler2D uSamplerRows;
uniform sampler2D uSamplerColStrokes;
uniform sampler2D uSamplerCols;

uniform ivec2 uStrokeImageSize;
uniform ivec2 uCellsImageSize;
uniform ivec2 uGridImageSize;

uniform ivec2 uGridOffset;
uniform ivec2 uGridSize;
uniform vec4 uMaterialColor;

IN vec2 vTexCoord;

// some helper functions
int ROUND(float v) { return ifloor(v + 0.5); }
ivec2 ROUND(vec2 v) { return ifloor(v + 0.5); }
float saturate(float v) { return clamp(v, 0.0, 1.0); }
vec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }

int mul(float v1, int v2) {
  return ifloor(v1 * float(v2));
}

ivec2 mul(vec2 v1, ivec2 v2) {
  return ifloor(v1 * vec2(v2) + 0.5);
}

// unpack a 16-bit integer from a float vec2
int getInt16(vec2 v) {
  ivec2 iv = ROUND(v * 255.0);
  return iv.x * INT(128) + iv.y;
}

vec2 pixelScale;
vec2 coverage = vec2(0.0);
vec2 weight = vec2(0.5);
const float minDistance = 1.0/8192.0;
const float hardness = 1.05; // amount of antialias

// the maximum number of curves in a glyph
const int N = INT(250);

// retrieves an indexed pixel from a sampler
vec4 getTexel(sampler2D sampler, int pos, ivec2 size) {
  int width = size.x;
  int y = ifloor(pos / width);
  int x = pos - y * width;  // pos % width

  return TEXTURE(sampler, (vec2(x, y) + 0.5) / vec2(size));
}

void calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {

  // get the coefficients of the quadratic in t
  vec2 a = p0 - p1 * 2.0 + p2;
  vec2 b = p0 - p1;
  vec2 c = p0 - vTexCoord;

  // found out which values of 't' it crosses the axes
  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));
  vec2 t1 = ((b - surd) / a).yx;
  vec2 t2 = ((b + surd) / a).yx;

  // approximate straight lines to avoid rounding errors
  if (abs(a.y) < 0.001)
    t1.x = t2.x = c.y / (2.0 * b.y);

  if (abs(a.x) < 0.001)
    t1.y = t2.y = c.x / (2.0 * b.x);

  // plug into quadratic formula to find the corrdinates of the crossings
  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;
  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;
}

void coverageX(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  // determine on which side of the x-axis the points lie
  bool y0 = p0.y > vTexCoord.y;
  bool y1 = p1.y > vTexCoord.y;
  bool y2 = p2.y > vTexCoord.y;

  // could web be under the curve (after t1)?
  if (y1 ? !y2 : y0) {
    // add the coverage for t1
    coverage.x += saturate(C1.x + 0.5);
    // calculate the anti-aliasing for t1
    weight.x = min(weight.x, abs(C1.x));
  }

  // are we outside the curve (after t2)?
  if (y1 ? !y0 : y2) {
    // subtract the coverage for t2
    coverage.x -= saturate(C2.x + 0.5);
    // calculate the anti-aliasing for t2
    weight.x = min(weight.x, abs(C2.x));
  }
}

// this is essentially the same as coverageX, but with the axes swapped
void coverageY(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  bool x0 = p0.x > vTexCoord.x;
  bool x1 = p1.x > vTexCoord.x;
  bool x2 = p2.x > vTexCoord.x;

  if (x1 ? !x2 : x0) {
    coverage.y -= saturate(C1.y + 0.5);
    weight.y = min(weight.y, abs(C1.y));
  }

  if (x1 ? !x0 : x2) {
    coverage.y += saturate(C2.y + 0.5);
    weight.y = min(weight.y, abs(C2.y));
  }
}

void main() {

  // calculate the pixel scale based on screen-coordinates
  pixelScale = hardness / fwidth(vTexCoord);

  // which grid cell is this pixel in?
  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));

  // intersect curves in this row
  {
    // the index into the row info bitmap
    int rowIndex = gridCoord.y + uGridOffset.y;
    // fetch the info texel
    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);
    // unpack the rowInfo
    int rowStrokeIndex = getInt16(rowInfo.xy);
    int rowStrokeCount = getInt16(rowInfo.zw);

    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {
      if (iRowStroke >= rowStrokeCount)
        break;

      // each stroke is made up of 3 points: the start and control point
      // and the start of the next curve.
      // fetch the indices of this pair of strokes:
      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);

      // unpack the stroke index
      int strokePos = getInt16(strokeIndices.xy);

      // fetch the two strokes
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);

      // calculate the coverage
      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  // intersect curves in this column
  {
    int colIndex = gridCoord.x + uGridOffset.x;
    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);
    int colStrokeIndex = getInt16(colInfo.xy);
    int colStrokeCount = getInt16(colInfo.zw);
    
    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {
      if (iColStroke >= colStrokeCount)
        break;

      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);

      int strokePos = getInt16(strokeIndices.xy);
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);
      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  weight = saturate(1.0 - weight * 2.0);
  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.
  float antialias = abs(dot(coverage, weight) / distance);
  float cover = min(abs(coverage.x), abs(coverage.y));
  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
  OUT_COLOR *= saturate(max(antialias, cover));
}
`,lineVert:k+`/*
  Part of the Processing project - http://processing.org
  Copyright (c) 2012-15 The Processing Foundation
  Copyright (c) 2004-12 Ben Fry and Casey Reas
  Copyright (c) 2001-04 Massachusetts Institute of Technology
  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation, version 2.1.
  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.
  You should have received a copy of the GNU Lesser General
  Public License along with this library; if not, write to the
  Free Software Foundation, Inc., 59 Temple Place, Suite 330,
  Boston, MA  02111-1307  USA
*/

#define PROCESSING_LINE_SHADER

precision mediump int;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uStrokeWeight;

uniform bool uUseLineColor;
uniform vec4 uMaterialColor;

uniform vec4 uViewport;
uniform int uPerspective;
uniform int uStrokeJoin;

IN vec4 aPosition;
IN vec3 aTangentIn;
IN vec3 aTangentOut;
IN float aSide;
IN vec4 aVertexColor;

OUT vec4 vColor;
OUT vec2 vTangent;
OUT vec2 vCenter;
OUT vec2 vPosition;
OUT float vMaxDist;
OUT float vCap;
OUT float vJoin;

vec2 lineIntersection(vec2 aPoint, vec2 aDir, vec2 bPoint, vec2 bDir) {
  // Rotate and translate so a starts at the origin and goes out to the right
  bPoint -= aPoint;
  vec2 rotatedBFrom = vec2(
    bPoint.x*aDir.x + bPoint.y*aDir.y,
    bPoint.y*aDir.x - bPoint.x*aDir.y
  );
  vec2 bTo = bPoint + bDir;
  vec2 rotatedBTo = vec2(
    bTo.x*aDir.x + bTo.y*aDir.y,
    bTo.y*aDir.x - bTo.x*aDir.y
  );
  float intersectionDistance =
    rotatedBTo.x + (rotatedBFrom.x - rotatedBTo.x) * rotatedBTo.y /
    (rotatedBTo.y - rotatedBFrom.y);
  return aPoint + aDir * intersectionDistance;
}

void main() {
  // Caps have one of either the in or out tangent set to 0
  vCap = (aTangentIn == vec3(0.)) != (aTangentOut == (vec3(0.)))
    ? 1. : 0.;

  // Joins have two unique, defined tangents
  vJoin = (
    aTangentIn != vec3(0.) &&
    aTangentOut != vec3(0.) &&
    aTangentIn != aTangentOut
  ) ? 1. : 0.;

  vec4 posp = uModelViewMatrix * aPosition;
  vec4 posqIn = uModelViewMatrix * (aPosition + vec4(aTangentIn, 0));
  vec4 posqOut = uModelViewMatrix * (aPosition + vec4(aTangentOut, 0));

  float facingCamera = pow(
    // The word space tangent's z value is 0 if it's facing the camera
    abs(normalize(posqIn-posp).z),

    // Using pow() here to ramp \`facingCamera\` up from 0 to 1 really quickly
    // so most lines get scaled and don't get clipped
    0.25
  );

  // using a scale <1 moves the lines towards the camera
  // in order to prevent popping effects due to half of
  // the line disappearing behind the geometry faces.
  float scale = mix(1., 0.995, facingCamera);

  // Moving vertices slightly toward the camera
  // to avoid depth-fighting with the fill triangles.
  // Discussed here:
  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  
  posp.xyz = posp.xyz * scale;
  posqIn.xyz = posqIn.xyz * scale;
  posqOut.xyz = posqOut.xyz * scale;

  vec4 p = uProjectionMatrix * posp;
  vec4 qIn = uProjectionMatrix * posqIn;
  vec4 qOut = uProjectionMatrix * posqOut;
  vCenter = p.xy;

  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])
  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw

  // prevent division by W by transforming the tangent formula (div by 0 causes
  // the line to disappear, see https://github.com/processing/processing/issues/5183)
  // t = screen_q - screen_p
  //
  // tangent is normalized and we don't care which aDirection it points to (+-)
  // t = +- normalize( screen_q - screen_p )
  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )
  //
  // extract common factor, <1,1> - <1,1> cancels out
  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )
  //
  // convert to common divisor
  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )
  //
  // remove the common scalar divisor/factor, not needed due to normalize and +-
  // (keep uViewport - can't remove because it has different components for x and y
  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)
  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )

  vec2 tangentIn = normalize((qIn.xy*p.w - p.xy*qIn.w) * uViewport.zw);
  vec2 tangentOut = normalize((qOut.xy*p.w - p.xy*qOut.w) * uViewport.zw);

  vec2 curPerspScale;
  if(uPerspective == 1) {
    // Perspective ---
    // convert from world to clip by multiplying with projection scaling factor
    // to get the right thickness (see https://github.com/processing/processing/issues/5182)

    // The y value of the projection matrix may be flipped if rendering to a Framebuffer.
    // Multiplying again by its sign here negates the flip to get just the scale.
    curPerspScale = (uProjectionMatrix * vec4(1, sign(uProjectionMatrix[1][1]), 0, 0)).xy;
  } else {
    // No Perspective ---
    // multiply by W (to cancel out division by W later in the pipeline) and
    // convert from screen to clip (derived from clip to screen above)
    curPerspScale = p.w / (0.5 * uViewport.zw);
  }

  vec2 offset;
  if (vJoin == 1.) {
    vTangent = normalize(tangentIn + tangentOut);
    vec2 normalIn = vec2(-tangentIn.y, tangentIn.x);
    vec2 normalOut = vec2(-tangentOut.y, tangentOut.x);
    float side = sign(aSide);
    float sideEnum = abs(aSide);

    // We generate vertices for joins on either side of the centerline, but
    // the "elbow" side is the only one needing a join. By not setting the
    // offset for the other side, all its vertices will end up in the same
    // spot and not render, effectively discarding it.
    if (sign(dot(tangentOut, vec2(-tangentIn.y, tangentIn.x))) != side) {
      // Side enums:
      //   1: the side going into the join
      //   2: the middle of the join
      //   3: the side going out of the join
      if (sideEnum == 2.) {
        // Calculate the position + tangent on either side of the join, and
        // find where the lines intersect to find the elbow of the join
        vec2 c = (posp.xy/posp.w + vec2(1.,1.)) * 0.5 * uViewport.zw;
        vec2 intersection = lineIntersection(
          c + (side * normalIn * uStrokeWeight / 2.),
          tangentIn,
          c + (side * normalOut * uStrokeWeight / 2.),
          tangentOut
        );
        offset = (intersection - c);

        // When lines are thick and the angle of the join approaches 180, the
        // elbow might be really far from the center. We'll apply a limit to
        // the magnitude to avoid lines going across the whole screen when this
        // happens.
        float mag = length(offset);
        float maxMag = 3. * uStrokeWeight;
        if (mag > maxMag) {
          offset *= maxMag / mag;
        }
      } else if (sideEnum == 1.) {
        offset = side * normalIn * uStrokeWeight / 2.;
      } else if (sideEnum == 3.) {
        offset = side * normalOut * uStrokeWeight / 2.;
      }
    }
    if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 avgNormal = vec2(-vTangent.y, vTangent.x);
      vMaxDist = abs(dot(avgNormal, normalIn * uStrokeWeight / 2.));
    } else {
      vMaxDist = uStrokeWeight / 2.;
    }
  } else {
    vec2 tangent = aTangentIn == vec3(0.) ? tangentOut : tangentIn;
    vTangent = tangent;
    vec2 normal = vec2(-tangent.y, tangent.x);

    float normalOffset = sign(aSide);
    // Caps will have side values of -2 or 2 on the edge of the cap that
    // extends out from the line
    float tangentOffset = abs(aSide) - 1.;
    offset = (normal * normalOffset + tangent * tangentOffset) *
      uStrokeWeight * 0.5;
    vMaxDist = uStrokeWeight / 2.;
  }
  vPosition = vCenter + offset;

  gl_Position.xy = p.xy + offset.xy * curPerspScale;
  gl_Position.zw = p.zw;
  
  vColor = (uUseLineColor ? aVertexColor : uMaterialColor);
}
`,lineFrag:k+`precision mediump int;

uniform vec4 uMaterialColor;
uniform int uStrokeCap;
uniform int uStrokeJoin;
uniform float uStrokeWeight;

IN vec4 vColor;
IN vec2 vTangent;
IN vec2 vCenter;
IN vec2 vPosition;
IN float vMaxDist;
IN float vCap;
IN float vJoin;

float distSquared(vec2 a, vec2 b) {
  vec2 aToB = b - a;
  return dot(aToB, aToB);
}

void main() {
  if (vCap > 0.) {
    if (
      uStrokeCap == STROKE_CAP_ROUND &&
      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25
    ) {
      discard;
    } else if (
      uStrokeCap == STROKE_CAP_SQUARE &&
      dot(vPosition - vCenter, vTangent) > 0.
    ) {
      discard;
    }
    // Use full area for PROJECT
  } else if (vJoin > 0.) {
    if (
      uStrokeJoin == STROKE_JOIN_ROUND &&
      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25
    ) {
      discard;
    } else if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 normal = vec2(-vTangent.y, vTangent.x);
      if (abs(dot(vPosition - vCenter, normal)) > vMaxDist) {
        discard;
      }
    }
    // Use full area for MITER
  }
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,pointVert:`IN vec3 aPosition;
uniform float uPointSize;
OUT float vStrokeWeight;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
void main() {
	vec4 positionVec4 =  vec4(aPosition, 1.0);
	gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
	gl_PointSize = uPointSize;
	vStrokeWeight = uPointSize;
}
`,pointFrag:`precision mediump int;
uniform vec4 uMaterialColor;
IN float vStrokeWeight;

void main(){
  float mask = 0.0;

  // make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)
  // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant

  mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));

  // if strokeWeight is 1 or less lets just draw a square
  // this prevents weird artifacting from carving circles when our points are really small
  // if strokeWeight is larger than 1, we just use it as is

  mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));

  // throw away the borders of the mask
  // otherwise we get weird alpha blending issues

  if(mask > 0.98){
    discard;
  }

  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
}
`,imageLightVert:`precision highp float;
attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

varying vec3 localPos;
varying vec3 vWorldNormal;
varying vec3 vWorldPosition;
varying vec2 vTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

void main() {
  // Multiply the position by the matrix.
  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;  
  
  // orient the normals and pass to the fragment shader
  vWorldNormal = uNormalMatrix * aNormal;
  
  // send the view position to the fragment shader
  vWorldPosition = (uModelViewMatrix * vec4(aPosition, 1.0)).xyz;
  
  localPos = vWorldPosition;
  vTexCoord = aTexCoord;
}


/*
in the vertex shader we'll compute the world position and world oriented normal of the vertices and pass those to the fragment shader as varyings.
*/
`,imageLightDiffusedFrag:`precision highp float;
varying vec3 localPos;

// the HDR cubemap converted (can be from an equirectangular environment map.)
uniform sampler2D environmentMap;
varying vec2 vTexCoord;

const float PI = 3.14159265359;

vec2 nTOE( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( phi, theta );
  return angles;
}

void main()
{   	 
	// the sample direction equals the hemisphere's orientation
  float phi = vTexCoord.x * 2.0 * PI;
  float theta = vTexCoord.y * PI;
  float x = sin(theta) * cos(phi);
  float y = sin(theta) * sin(phi);
  float z = cos(theta);
  vec3 normal = vec3( x, y, z);

	// Discretely sampling the hemisphere given the integral's
  // spherical coordinates translates to the following fragment code:
	vec3 irradiance = vec3(0.0);  
	vec3 up	= vec3(0.0, 1.0, 0.0);
	vec3 right = normalize(cross(up, normal));
	up = normalize(cross(normal, right));

	//  We specify a fixed sampleDelta delta value to traverse
  // the hemisphere; decreasing or increasing the sample delta
  // will increase or decrease the accuracy respectively.
	const float sampleDelta = 0.025;
	float nrSamples = 0.0;
  
	for(float phi = 0.0; phi < 2.0 * PI; phi += sampleDelta)
	{
    for(float theta = 0.0; theta < ( 0.5 ) * PI; theta += sampleDelta)
    {
      // spherical to cartesian (in tangent space) // tangent space to world // add each sample result to irradiance
      float x = sin(theta) * cos(phi);
      float y = sin(theta) * sin(phi);
      float z = cos(theta);
      vec3 tangentSample = vec3( x, y, z);
      
      vec3 sampleVec = tangentSample.x * right + tangentSample.y * up + tangentSample.z * normal;
        irradiance += (texture2D(environmentMap, nTOE(sampleVec)).xyz) * cos(theta) * sin(theta);
      nrSamples++;
    }
	}
	// divide by the total number of samples taken, giving us the average sampled irradiance.
	irradiance = PI * irradiance * (1.0 / float(nrSamples )) ;
  
 
	gl_FragColor = vec4(irradiance, 1.0);
}`,imageLightSpecularFrag:`precision highp float;\r
varying vec3 localPos;\r
varying vec2 vTexCoord;\r
\r
// our texture\r
uniform sampler2D environmentMap;\r
uniform float roughness;\r
\r
const float PI = 3.14159265359;\r
\r
float VanDerCorput(int bits);\r
vec2 HammersleyNoBitOps(int i, int N);\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness);\r
\r
\r
vec2 nTOE( vec3 v ){\r
  // x = r sin(phi) cos(theta)   \r
  // y = r cos(phi)  \r
  // z = r sin(phi) sin(theta)\r
  float phi = acos( v.y );\r
  // if phi is 0, then there are no x, z components\r
  float theta = 0.0;\r
  // else \r
  theta = acos(v.x / sin(phi));\r
  float sinTheta = v.z / sin(phi);\r
  if (sinTheta < 0.0) {\r
    // Turn it into -theta, but in the 0-2PI range\r
    theta = 2.0 * PI - theta;\r
  }\r
  theta = theta / (2.0 * 3.14159);\r
  phi = phi / 3.14159 ;\r
  \r
  vec2 angles = vec2( phi, theta );\r
  return angles;\r
}\r
\r
\r
void main(){\r
  const int SAMPLE_COUNT = 1024; // 4096\r
  float totalWeight = 0.0;\r
  vec3 prefilteredColor = vec3(0.0);\r
  float phi = vTexCoord.x * 2.0 * PI;\r
  float theta = vTexCoord.y * PI;\r
  float x = sin(theta) * cos(phi);\r
  float y = sin(theta) * sin(phi);\r
  float z = cos(theta);\r
  vec3 N = vec3(x,y,z);\r
  vec3 V = N;\r
  for (int i = 0; i < SAMPLE_COUNT; ++i)\r
  {\r
    vec2 Xi = HammersleyNoBitOps(i, SAMPLE_COUNT);\r
    vec3 H = ImportanceSampleGGX(Xi, N, roughness);\r
    vec3 L = normalize(2.0 * dot(V, H) * H - V);\r
\r
    float NdotL = max(dot(N, L), 0.0);\r
    if (NdotL > 0.0)\r
    {\r
      prefilteredColor += texture2D(environmentMap, nTOE(L)).xyz * NdotL;\r
      totalWeight += NdotL;\r
    }\r
  }\r
  prefilteredColor = prefilteredColor / totalWeight;\r
\r
  gl_FragColor = vec4(prefilteredColor, 1.0);\r
}\r
\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness){\r
  float a = roughness * roughness;\r
\r
  float phi = 2.0 * PI * Xi.x;\r
  float cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a * a - 1.0) * Xi.y));\r
  float sinTheta = sqrt(1.0 - cosTheta * cosTheta);\r
  // from spherical coordinates to cartesian coordinates\r
  vec3 H;\r
  H.x = cos(phi) * sinTheta;\r
  H.y = sin(phi) * sinTheta;\r
  H.z = cosTheta;\r
\r
  // from tangent-space vector to world-space sample vector\r
  vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\r
  vec3 tangent = normalize(cross(up, N));\r
  vec3 bitangent = cross(N, tangent);\r
\r
  vec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;\r
  return normalize(sampleVec);\r
}\r
\r
\r
float VanDerCorput(int n, int base)\r
{\r
  float invBase = 1.0 / float(base);\r
  float denom = 1.0;\r
  float result = 0.0;\r
\r
  for (int i = 0; i < 32; ++i)\r
  {\r
	if (n > 0)\r
	{\r
  	denom = mod(float(n), 2.0);\r
  	result += denom * invBase;\r
  	invBase = invBase / 2.0;\r
  	n = int(float(n) / 2.0);\r
	}\r
  }\r
\r
  return result;\r
}\r
\r
vec2 HammersleyNoBitOps(int i, int N)\r
{\r
  return vec2(float(i) / float(N), VanDerCorput(i, 2));\r
}\r
`};for(C in F)F[C]=`#ifdef WEBGL2

#define IN in
#define OUT out

#ifdef FRAGMENT_SHADER
out vec4 outColor;
#define OUT_COLOR outColor
#endif
#define TEXTURE texture

#else

#ifdef FRAGMENT_SHADER
#define IN varying
#else
#define IN attribute
#endif
#define OUT varying
#define TEXTURE texture2D

#ifdef FRAGMENT_SHADER
#define OUT_COLOR gl_FragColor
#endif

#endif
`+F[C];T(P={},a.GRAY,`precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 tex = texture2D(tex0, vTexCoord);
  float gray = luma(tex.rgb);
  gl_FragColor = vec4(gray, gray, gray, tex.a);
}
`),T(P,a.ERODE,`// Reduces the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the darkest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum < lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),T(P,a.DILATE,`// Increase the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the brightest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum > lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),T(P,a.BLUR,`precision highp float;

// Two-pass blur filter, unweighted kernel.
// See also a similar blur at Adam Ferriss' repo of shader examples:
// https://github.com/aferriss/p5jsShaderExamples/blob/gh-pages/4_image-effects/4-9_single-pass-blur/effect.frag


uniform sampler2D tex0;
varying vec2 vTexCoord;
uniform vec2 direction;
uniform vec2 canvasSize;
uniform float radius;

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

// This isn't a real Gaussian weight, it's a quadratic weight. It's what the
// CPU mode's blur uses though, so we also use it here to match.
float quadWeight(float x, float e) {
  return pow(e-abs(x), 2.);
}

void main(){
  vec2 uv = vTexCoord;

  // A reasonable maximum number of samples
  const float maxSamples = 64.0;

  float numSamples = floor(7. * radius);
  if (fract(numSamples / 2.) == 0.) {
    numSamples++;
  }
  vec4 avg = vec4(0.0);
  float total = 0.0;

  // Calculate the spacing to avoid skewing if numSamples > maxSamples
  float spacing = 1.0;
  if (numSamples > maxSamples) {
    spacing = numSamples / maxSamples;
    numSamples = maxSamples;
  }

  float randomOffset = (spacing - 1.0) * mix(-0.5, 0.5, random(gl_FragCoord.xy));
  for (float i = 0.0; i < maxSamples; i++) {
    if (i >= numSamples) break;

    float sample = i * spacing - (numSamples - 1.0) * 0.5 * spacing + randomOffset;
    vec2 sampleCoord = uv + vec2(sample, sample) / canvasSize * direction;
    float weight = quadWeight(sample, (numSamples - 1.0) * 0.5 * spacing);

    avg += weight * texture2D(tex0, sampleCoord);
    total += weight;
  }

  avg /= total;
  gl_FragColor = avg;
}
`),T(P,a.POSTERIZE,`// Limit color space for a stylized cartoon / poster effect

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

vec3 quantize(vec3 color, float n) {
  // restrict values to N options/bins
  // and floor each channel to nearest value
  //
  // eg. when N = 5, values = 0.0, 0.25, 0.50, 0.75, 1.0
  // then quantize (0.1, 0.7, 0.9) -> (0.0, 0.5, 1.0)

  color = color * n;
  color = floor(color);
  color = color / (n - 1.0);
  return color;
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);

  vec3 restrictedColor = quantize(color.rgb / color.a, filterParameter);

  gl_FragColor = vec4(restrictedColor.rgb * color.a, color.a);
}
`),T(P,a.OPAQUE,`// Set alpha channel to entirely opaque

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  gl_FragColor = vec4(color.rgb / color.a, 1.0);
}
`),T(P,a.INVERT,`// Set each pixel to inverse value
// Note that original INVERT does not change the opacity, so this follows suit

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
vec4 color = texture2D(tex0, vTexCoord);
vec3 origColor = color.rgb / color.a;
vec3 invertedColor = vec3(1.0) - origColor;
gl_FragColor = vec4(invertedColor * color.a, color.a);
}
`),T(P,a.THRESHOLD,`// Convert pixels to either white or black, 
// depending on if their luma is above or below filterParameter

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float gray = luma(color.rgb / color.a);
  // floor() used to match src/image/filters.js
  float threshold = floor(filterParameter * 255.0) / 255.0;
  float blackOrWhite = step(threshold, gray);
  gl_FragColor = vec4(vec3(blackOrWhite) * color.a, color.a);
}
`);var I=P;function B(G,W,ge,ne,U,D,O,V,Z,ie){var re=W.getParameter(W.FRAMEBUFFER_BINDING),ge=(W.bindFramebuffer(W.FRAMEBUFFER,ge),V===W.RGBA?4:3),ye=D*O*ge,he=Z===W.UNSIGNED_BYTE?Uint8Array:Float32Array;if(G instanceof he&&G.length===ye||(G=new he(ye)),W.readPixels(ne,ie?ie-U-O:U,D,O,V,Z,G),W.bindFramebuffer(W.FRAMEBUFFER,re),ie)for(var pe=Math.floor(O/2),we=new he(D*ge),oe=0;oe<pe;oe++){var fe=oe*D*4,Ce=(O-oe-1)*D*4;we.set(G.subarray(fe,fe+4*D)),G.copyWithin(fe,Ce,Ce+4*D),G.set(we,Ce)}return G}function H(G,Z,Q,ne,U,D,O){var V=G.getParameter(G.FRAMEBUFFER_BINDING),Z=(G.bindFramebuffer(G.FRAMEBUFFER,Z),U===G.RGBA?4:3),Z=new(D===G.UNSIGNED_BYTE?Uint8Array:Float32Array)(Z);return G.readPixels(Q,O?O-ne-1:ne,1,1,U,D,Z),G.bindFramebuffer(G.FRAMEBUFFER,V),Array.from(Z)}s.default.prototype.setAttributes=function(G,W){if(this._glAttributes===void 0)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var Q=!0;if(W!==void 0?(this._glAttributes===null&&(this._glAttributes={}),this._glAttributes[G]!==W&&(this._glAttributes[G]=W,Q=!1)):G instanceof Object&&this._glAttributes!==G&&(this._glAttributes=G,Q=!1),this._renderer.isP3D&&!Q){if(!this._setupDone){for(var ne in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(ne))return void s.default._friendlyError("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()")}this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},s.default.RendererGL=function(G){var W=ne;if(typeof G!="function"&&G!==null)throw new TypeError("Super expression must either be null or a function");W.prototype=Object.create(G&&G.prototype,{constructor:{value:W,writable:!0,configurable:!0}}),G&&m(W,G);var Q=g(ne);function ne(U,D,O,V){if(this instanceof ne)return(U=Q.call(this,U,D,O))._setAttributeDefaults(D),U._initContext(),U.isP3D=!0,U.geometryBuilder=void 0,U.GL=U.drawingContext,U._pInst._setProperty("drawingContext",U.drawingContext),U._isErasing=!1,U._clipDepths=[],U._isClipApplied=!1,U._stencilTestOn=!1,U._enableLighting=!1,U.ambientLightColors=[],U.specularColors=[1,1,1],U.directionalLightDirections=[],U.directionalLightDiffuseColors=[],U.directionalLightSpecularColors=[],U.pointLightPositions=[],U.pointLightDiffuseColors=[],U.pointLightSpecularColors=[],U.spotLightPositions=[],U.spotLightDirections=[],U.spotLightDiffuseColors=[],U.spotLightSpecularColors=[],U.spotLightAngle=[],U.spotLightConc=[],U.activeImageLight=null,U.diffusedTextures=new Map,U.specularTextures=new Map,U.drawMode=a.FILL,U.curFillColor=U._cachedFillStyle=[1,1,1,1],U.curAmbientColor=U._cachedFillStyle=[1,1,1,1],U.curSpecularColor=U._cachedFillStyle=[0,0,0,0],U.curEmissiveColor=U._cachedFillStyle=[0,0,0,0],U.curStrokeColor=U._cachedStrokeStyle=[0,0,0,1],U.curBlendMode=a.BLEND,U._cachedBlendMode=void 0,U.webglVersion===a.WEBGL2?U.blendExt=U.GL:U.blendExt=U.GL.getExtension("EXT_blend_minmax"),U._isBlending=!1,U._hasSetAmbient=!1,U._useSpecularMaterial=!1,U._useEmissiveMaterial=!1,U._useNormalMaterial=!1,U._useShininess=1,U._useLineColor=!1,U._useVertexColor=!1,U.registerEnabled=new Set,U._tint=[255,255,255,255],U.constantAttenuation=1,U.linearAttenuation=0,U.quadraticAttenuation=0,U.uMVMatrix=new s.default.Matrix,U.uPMatrix=new s.default.Matrix,U.uNMatrix=new s.default.Matrix("mat3"),U._currentNormal=new s.default.Vector(0,0,1),U._curCamera=new s.default.Camera(v(U)),U._curCamera._computeCameraDefaultSettings(),U._curCamera._setDefaultCamera(),U.filterCamera=new s.default.Camera(v(U)),U.filterCamera._computeCameraDefaultSettings(),U.filterCamera._setDefaultCamera(),U.prevTouches=[],U.zoomVelocity=0,U.rotateVelocity=new s.default.Vector(0,0),U.moveVelocity=new s.default.Vector(0,0),U.executeZoom=!1,U.executeRotateAndMove=!1,U._defaultLightShader=void 0,U._defaultImmediateModeShader=void 0,U._defaultNormalShader=void 0,U._defaultColorShader=void 0,U._defaultPointShader=void 0,U.userFillShader=void 0,U.userStrokeShader=void 0,U.userPointShader=void 0,U.retainedMode={geometry:{},buffers:{stroke:[new s.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",v(U)),new s.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",v(U)),new s.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",v(U)),new s.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",v(U)),new s.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",v(U))],fill:[new s.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",v(U),U._vToNArray),new s.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",v(U),U._vToNArray),new s.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",v(U)),new s.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",v(U)),new s.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",v(U),U._flatten)],text:[new s.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",v(U),U._vToNArray),new s.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",v(U),U._flatten)]}},U.immediateMode={geometry:new s.default.Geometry,shapeMode:a.TRIANGLE_FAN,contourIndices:[],_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new s.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",v(U),U._vToNArray),new s.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",v(U),U._vToNArray),new s.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",v(U)),new s.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",v(U)),new s.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",v(U),U._flatten)],stroke:[new s.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",v(U)),new s.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",v(U)),new s.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",v(U)),new s.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",v(U)),new s.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",v(U))],point:U.GL.createBuffer()}},U.pointSize=5,U.curStrokeWeight=1,U.curStrokeCap=a.ROUND,U.curStrokeJoin=a.ROUND,U.textures=new Map,U.framebuffers=new Set,U.activeFramebuffers=[],U.filterShader=void 0,U.filterLayer=void 0,U.filterLayerTemp=void 0,U.defaultFilterShaders={},U.textureMode=a.IMAGE,U.textureWrapX=a.CLAMP,U.textureWrapY=a.CLAMP,U._tex=null,U._curveTightness=6,U._lookUpTableBezier=[],U._lookUpTableQuadratic=[],U._lutBezierDetail=0,U._lutQuadraticDetail=0,U.isProcessingVertices=!1,U._tessy=U._initTessy(),U.fontInfos={},U._curShader=void 0,U;throw new TypeError("Cannot call a class as a function")}return W=ne,(G=[{key:"beginGeometry",value:function(){if(this.geometryBuilder)throw new Error("It looks like `beginGeometry()` is being called while another p5.Geometry is already being build.");this.geometryBuilder=new f.default(this)}},{key:"endGeometry",value:function(){var U;if(this.geometryBuilder)return U=this.geometryBuilder.finish(),this.geometryBuilder=void 0,U;throw new Error("Make sure you call beginGeometry() before endGeometry()!")}},{key:"buildGeometry",value:function(U){return this.beginGeometry(),U(),this.endGeometry()}},{key:"_setAttributeDefaults",value:function(U){var D={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!0,preserveDrawingBuffer:!0,perPixelLighting:!0,version:2};U._glAttributes===null?U._glAttributes=D:U._glAttributes=Object.assign(D,U._glAttributes)}},{key:"_initContext",value:function(){if(this._pInst._glAttributes.version!==1&&(this.drawingContext=this.canvas.getContext("webgl2",this._pInst._glAttributes)),this.webglVersion=this.drawingContext?a.WEBGL2:a.WEBGL,this._pInst._setProperty("webglVersion",this.webglVersion),this.drawingContext||(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes)),this.drawingContext===null)throw new Error("Error creating webgl context");var U=this.drawingContext;U.enable(U.DEPTH_TEST),U.depthFunc(U.LEQUAL),U.viewport(0,0,U.drawingBufferWidth,U.drawingBufferHeight),U.pixelStorei(U.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}},{key:"_resetContext",value:function(U,D){var O,V=this.width,Z=this.height,re=this.canvas.id,ie=this._pInst instanceof s.default.Graphics,re=(ie?((O=this._pInst).canvas.parentNode.removeChild(O.canvas),O.canvas=document.createElement("canvas"),(O._pInst._userNode||document.body).appendChild(O.canvas),s.default.Element.call(O,O.canvas,O._pInst),O.width=V,O.height=Z):((O=this.canvas)&&O.parentNode.removeChild(O),(O=document.createElement("canvas")).id=re,(this._pInst._userNode||document.body).appendChild(O),this._pInst.canvas=O,this.canvas=O),new s.default.RendererGL(this._pInst.canvas,this._pInst,!ie));this._pInst._setProperty("_renderer",re),re.resize(V,Z),re._applyDefaults(),ie||this._pInst._elements.push(re),typeof D=="function"&&setTimeout(function(){D.apply(window._renderer,U)},0)}},{key:"_update",value:function(){this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clearStencil(0),this.GL.clear(this.GL.DEPTH_BUFFER_BIT|this.GL.STENCIL_BUFFER_BIT),this.GL.disable(this.GL.STENCIL_TEST)}},{key:"background",value:function(){var V=(V=this._pInst).color.apply(V,arguments),U=V.levels[0]/255,D=V.levels[1]/255,O=V.levels[2]/255,V=V.levels[3]/255;this.clear(U,D,O,V)}},{key:"fill",value:function(U,D,O,V){var Z=s.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=Z._array,this.drawMode=a.FILL,this._useNormalMaterial=!1,this._tex=null}},{key:"stroke",value:function(U,D,O,V){var Z=s.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=Z._array}},{key:"strokeCap",value:function(U){this.curStrokeCap=U}},{key:"strokeJoin",value:function(U){this.curStrokeJoin=U}},{key:"getFilterLayer",value:function(){return this.filterLayer||(this.filterLayer=this._pInst.createFramebuffer()),this.filterLayer}},{key:"getFilterLayerTemp",value:function(){return this.filterLayerTemp||(this.filterLayerTemp=this._pInst.createFramebuffer()),this.filterLayerTemp}},{key:"matchSize",value:function(U,D){U.width===D.width&&U.height===D.height||U.resize(D.width,D.height),U.pixelDensity()!==D.pixelDensity()&&U.pixelDensity(D.pixelDensity())}},{key:"filter",value:function(){var U,D,O=this,V=this.getFilterLayer(),Z=void 0,ie=void 0,re=(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(ie=arguments.length<=0?void 0:arguments[0],T(U={},a.BLUR,3),T(U,a.POSTERIZE,4),T(U,a.THRESHOLD,.5),Z=ie in(U=U)&&(arguments.length<=1?void 0:arguments[1])===void 0?U[ie]:arguments.length<=1?void 0:arguments[1],ie in this.defaultFilterShaders||(this.defaultFilterShaders[ie]=new s.default.Shader(V._renderer,`uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

attribute vec3 aPosition;
// texcoords only come from p5 to vertex shader
// so pass texcoords on to the fragment shader in a varying variable
attribute vec2 aTexCoord;
varying vec2 vTexCoord;

void main() {
  // transferring texcoords for the frag shader
  vTexCoord = aTexCoord;

  // copy position with a fourth coordinate for projection (1.0 is normal)
  vec4 positionVec4 = vec4(aPosition, 1.0);

  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
}
`,I[ie])),this.filterShader=this.defaultFilterShaders[ie]):this.filterShader=arguments.length<=0?void 0:arguments[0],this.activeFramebuffer()||this),ge=(this.matchSize(V,re),re!==this&&(this.filterCamera=this.getFilterLayer().createCamera()),V.draw(function(){return O._pInst.clear()}),[1/(re.width*re.pixelDensity()),1/(re.height*re.pixelDensity())]);ie===a.BLUR?(D=this.getFilterLayerTemp(),this.matchSize(D,re),this._pInst.push(),this._pInst.noStroke(),this._pInst.shader(this.filterShader),this.filterShader.setUniform("texelSize",ge),this.filterShader.setUniform("canvasSize",[re.width,re.height]),this.filterShader.setUniform("radius",Math.max(1,Z)),D.draw(function(){O.filterShader.setUniform("direction",[1,0]),O.filterShader.setUniform("tex0",re),O._pInst.clear(),O._pInst.shader(O.filterShader),O._pInst.rect(-re.width/2,-re.height/2,re.width,re.height)}),V.draw(function(){O.filterShader.setUniform("direction",[0,1]),O.filterShader.setUniform("tex0",D),O._pInst.clear(),O._pInst.shader(O.filterShader),O._pInst.rect(-re.width/2,-re.height/2,re.width,re.height)}),this._pInst.pop()):V.draw(function(){O._pInst.noStroke(),O._pInst.shader(O.filterShader),O.filterShader.setUniform("tex0",re),O.filterShader.setUniform("texelSize",ge),O.filterShader.setUniform("canvasSize",[re.width,re.height]),O.filterShader.setUniform("filterParameter",Z),O._pInst.rect(-re.width/2,-re.height/2,re.width,re.height)}),this._pInst.push(),this._pInst.noStroke(),this.clear(),this._pInst.push(),this._pInst.imageMode(a.CORNER),this._pInst.blendMode(a.BLEND),this.filterCamera._resize(),this._pInst.setCamera(this.filterCamera),this._pInst.resetMatrix(),this._pInst.image(V,-this.width/2,-this.height/2,this.width,this.height),this._pInst.pop(),this._pInst.pop()}},{key:"pixelDensity",value:function(U){return U?this._pInst.pixelDensity(U):this._pInst.pixelDensity()}},{key:"blendMode",value:function(U){U===a.DARKEST||U===a.LIGHTEST||U===a.ADD||U===a.BLEND||U===a.SUBTRACT||U===a.SCREEN||U===a.EXCLUSION||U===a.REPLACE||U===a.MULTIPLY||U===a.REMOVE?this.curBlendMode=U:U!==a.BURN&&U!==a.OVERLAY&&U!==a.HARD_LIGHT&&U!==a.SOFT_LIGHT&&U!==a.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")}},{key:"erase",value:function(U,D){this._isErasing||(this._cachedBlendMode=this.curBlendMode,this._isErasing=!0,this.blendMode(a.REMOVE),this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,U/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,D/255])}},{key:"noErase",value:function(){var U;this._isErasing&&(this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),U=this.curBlendMode,this.blendMode(this._cachedBlendMode),this._cachedBlendMode=U,this._isErasing=!1,this._applyBlendMode())}},{key:"drawTarget",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||this}},{key:"beginClip",value:function(){var U=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},U=(p(x(ne.prototype),"beginClip",this).call(this,U),this.drawTarget()._isClipApplied=!0,this.GL);U.clearStencil(0),U.clear(U.STENCIL_BUFFER_BIT),U.enable(U.STENCIL_TEST),this._stencilTestOn=!0,U.stencilFunc(U.ALWAYS,1,255),U.stencilOp(U.KEEP,U.KEEP,U.REPLACE),U.disable(U.DEPTH_TEST),this._pInst.push(),this._pInst.resetShader(),this._doFill&&this._pInst.fill(0,0),this._doStroke&&this._pInst.stroke(0,0)}},{key:"endClip",value:function(){this._pInst.pop();var U=this.GL;U.stencilOp(U.KEEP,U.KEEP,U.KEEP),U.stencilFunc(this._clipInvert?U.EQUAL:U.NOTEQUAL,0,255),U.enable(U.DEPTH_TEST),this._clipDepths.push(this._pushPopDepth),p(x(ne.prototype),"endClip",this).call(this)}},{key:"_clearClip",value:function(){this.GL.clearStencil(1),this.GL.clear(this.GL.STENCIL_BUFFER_BIT),0<this._clipDepths.length&&this._clipDepths.pop(),this.drawTarget()._isClipApplied=!1}},{key:"strokeWeight",value:function(U){this.curStrokeWeight!==U&&(this.pointSize=U,this.curStrokeWeight=U)}},{key:"_getPixel",value:function(U,D){var O=this.GL;return H(O,null,U,D,O.RGBA,O.UNSIGNED_BYTE,this._pInst.height*this._pInst.pixelDensity())}},{key:"loadPixels",value:function(){var U,D,O=this._pixelsState;this._pInst._glAttributes.preserveDrawingBuffer!==!0?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):(U=this._pInst._pixelDensity,D=this.GL,O._setProperty("pixels",B(O.pixels,D,null,0,0,this.width*U,this.height*U,D.RGBA,D.UNSIGNED_BYTE,this.height*U)))}},{key:"updatePixels",value:function(){var U=this._getTempFramebuffer();U.pixels=this._pixelsState.pixels,U.updatePixels(),this._pInst.push(),this._pInst.resetMatrix(),this._pInst.clear(),this._pInst.imageMode(a.CENTER),this._pInst.image(U,0,0),this._pInst.pop(),this.GL.clearDepth(1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"_getTempFramebuffer",value:function(){return this._tempFramebuffer||(this._tempFramebuffer=this._pInst.createFramebuffer({format:a.UNSIGNED_BYTE,useDepth:this._pInst._glAttributes.depth,depthFormat:a.UNSIGNED_INT,antialias:this._pInst._glAttributes.antialias})),this._tempFramebuffer}},{key:"geometryInHash",value:function(U){return this.retainedMode.geometry[U]!==void 0}},{key:"viewport",value:function(U,D){this._viewport=[0,0,U,D],this.GL.viewport(0,0,U,D)}},{key:"resize",value:function(Z,V){s.default.Renderer.prototype.resize.call(this,Z,V),this._origViewport={width:this.GL.drawingBufferWidth,height:this.GL.drawingBufferHeight},this.viewport(this._origViewport.width,this._origViewport.height),this._curCamera._resize();var Z=this._pixelsState,O=(Z.pixels!==void 0&&Z._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4)),!0),V=!1,Z=void 0;try{for(var ie,re=this.framebuffers[Symbol.iterator]();!(O=(ie=re.next()).done);O=!0)ie.value._canvasSizeChanged()}catch(ge){V=!0,Z=ge}finally{try{O||re.return==null||re.return()}finally{if(V)throw Z}}}},{key:"clear",value:function(){var U=(arguments.length<=0?void 0:arguments[0])||0,D=(arguments.length<=1?void 0:arguments[1])||0,O=(arguments.length<=2?void 0:arguments[2])||0,V=(arguments.length<=3?void 0:arguments[3])||0,Z=this.activeFramebuffer();Z&&Z.format===a.UNSIGNED_BYTE&&!Z.antialias&&V===0&&(V=1e-10),this.GL.clearColor(U*V,D*V,O*V,V),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)}},{key:"applyMatrix",value:function(U,D,O,V,Z,ie){arguments.length===16?s.default.Matrix.prototype.apply.apply(this.uMVMatrix,arguments):this.uMVMatrix.apply([U,D,0,0,O,V,0,0,0,0,1,0,Z,ie,0,1])}},{key:"translate",value:function(U,D,O){return U instanceof s.default.Vector&&(O=U.z,D=U.y,U=U.x),this.uMVMatrix.translate([U,D,O]),this}},{key:"scale",value:function(U,D,O){return this.uMVMatrix.scale(U,D,O),this}},{key:"rotate",value:function(U,D){return D===void 0?this.rotateZ(U):(s.default.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)}},{key:"rotateX",value:function(U){return this.rotate(U,1,0,0),this}},{key:"rotateY",value:function(U){return this.rotate(U,0,1,0),this}},{key:"rotateZ",value:function(U){return this.rotate(U,0,0,1),this}},{key:"push",value:function(){var U=s.default.Renderer.prototype.push.apply(this),D=U.properties;return D.uMVMatrix=this.uMVMatrix.copy(),D.uPMatrix=this.uPMatrix.copy(),D._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),D.ambientLightColors=this.ambientLightColors.slice(),D.specularColors=this.specularColors.slice(),D.directionalLightDirections=this.directionalLightDirections.slice(),D.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),D.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),D.pointLightPositions=this.pointLightPositions.slice(),D.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),D.pointLightSpecularColors=this.pointLightSpecularColors.slice(),D.spotLightPositions=this.spotLightPositions.slice(),D.spotLightDirections=this.spotLightDirections.slice(),D.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),D.spotLightSpecularColors=this.spotLightSpecularColors.slice(),D.spotLightAngle=this.spotLightAngle.slice(),D.spotLightConc=this.spotLightConc.slice(),D.userFillShader=this.userFillShader,D.userStrokeShader=this.userStrokeShader,D.userPointShader=this.userPointShader,D.pointSize=this.pointSize,D.curStrokeWeight=this.curStrokeWeight,D.curStrokeColor=this.curStrokeColor,D.curFillColor=this.curFillColor,D.curAmbientColor=this.curAmbientColor,D.curSpecularColor=this.curSpecularColor,D.curEmissiveColor=this.curEmissiveColor,D._hasSetAmbient=this._hasSetAmbient,D._useSpecularMaterial=this._useSpecularMaterial,D._useEmissiveMaterial=this._useEmissiveMaterial,D._useShininess=this._useShininess,D.constantAttenuation=this.constantAttenuation,D.linearAttenuation=this.linearAttenuation,D.quadraticAttenuation=this.quadraticAttenuation,D._enableLighting=this._enableLighting,D._useNormalMaterial=this._useNormalMaterial,D._tex=this._tex,D.drawMode=this.drawMode,D._currentNormal=this._currentNormal,D.curBlendMode=this.curBlendMode,D.activeImageLight=this.activeImageLight,U}},{key:"pop",value:function(){var U;0<this._clipDepths.length&&this._pushPopDepth===this._clipDepths[this._clipDepths.length-1]&&this._clearClip();for(var D=arguments.length,O=new Array(D),V=0;V<D;V++)O[V]=arguments[V];(U=p(x(ne.prototype),"pop",this)).call.apply(U,[this].concat(O)),this._applyStencilTestIfClipping()}},{key:"_applyStencilTestIfClipping",value:function(){var U=this.drawTarget();U._isClipApplied!==this._stencilTestOn&&(U._isClipApplied?(this.GL.enable(this.GL.STENCIL_TEST),this._stencilTestOn=!0):(this.GL.disable(this.GL.STENCIL_TEST),this._stencilTestOn=!1))}},{key:"resetMatrix",value:function(){return this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this}},{key:"_getImmediateStrokeShader",value:function(){var U=this.userStrokeShader;return U&&U.isStrokeShader()?U:this._getLineShader()}},{key:"_getRetainedStrokeShader",value:function(){return this._getImmediateStrokeShader()}},{key:"_getImmediateFillShader",value:function(){var U=this.userFillShader;if(this._useNormalMaterial&&(!U||!U.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!U||!U.isLightShader())return this._getLightShader()}else if(this._tex){if(!U||!U.isTextureShader())return this._getLightShader()}else if(!U)return this._getImmediateModeShader();return U}},{key:"_getRetainedFillShader",value:function(){if(this._useNormalMaterial)return this._getNormalShader();var U=this.userFillShader;if(this._enableLighting){if(!U||!U.isLightShader())return this._getLightShader()}else if(this._tex){if(!U||!U.isTextureShader())return this._getLightShader()}else if(!U)return this._getColorShader();return U}},{key:"_getImmediatePointShader",value:function(){var U=this.userPointShader;return U&&U.isPointShader()?U:this._getPointShader()}},{key:"_getRetainedLineShader",value:function(){return this._getImmediateLineShader()}},{key:"_getLightShader",value:function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new s.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+F.phongVert,this._webGL2CompatibilityPrefix("frag","highp")+F.phongFrag):this._defaultLightShader=new s.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+F.lightVert,this._webGL2CompatibilityPrefix("frag","highp")+F.lightTextureFrag)),this._defaultLightShader}},{key:"_getImmediateModeShader",value:function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new s.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+F.immediateVert,this._webGL2CompatibilityPrefix("frag","mediump")+F.vertexColorFrag)),this._defaultImmediateModeShader}},{key:"_getNormalShader",value:function(){return this._defaultNormalShader||(this._defaultNormalShader=new s.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+F.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+F.normalFrag)),this._defaultNormalShader}},{key:"_getColorShader",value:function(){return this._defaultColorShader||(this._defaultColorShader=new s.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+F.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+F.basicFrag)),this._defaultColorShader}},{key:"_getPointShader",value:function(){return this._defaultPointShader||(this._defaultPointShader=new s.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+F.pointVert,this._webGL2CompatibilityPrefix("frag","mediump")+F.pointFrag)),this._defaultPointShader}},{key:"_getLineShader",value:function(){return this._defaultLineShader||(this._defaultLineShader=new s.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+F.lineVert,this._webGL2CompatibilityPrefix("frag","mediump")+F.lineFrag)),this._defaultLineShader}},{key:"_getFontShader",value:function(){return this._defaultFontShader||(this.webglVersion===a.WEBGL&&this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new s.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+F.fontVert,this._webGL2CompatibilityPrefix("frag","mediump")+F.fontFrag)),this._defaultFontShader}},{key:"_webGL2CompatibilityPrefix",value:function(U,D){var O="";return this.webglVersion===a.WEBGL2&&(O+=`#version 300 es
#define WEBGL2
`),U==="vert"?O+=`#define VERTEX_SHADER
`:U==="frag"&&(O+=`#define FRAGMENT_SHADER
`),D&&(O+="precision ".concat(D,` float;
`)),O}},{key:"_getEmptyTexture",value:function(){var U;return this._emptyTexture||((U=new s.default.Image(1,1)).set(0,0,255),this._emptyTexture=new s.default.Texture(this,U)),this._emptyTexture}},{key:"getTexture",value:function(U){U instanceof s.default.Framebuffer&&(U=U.color);var D=this.textures.get(U);return D||(D=new s.default.Texture(this,U),this.textures.set(U,D),D)}},{key:"getDiffusedTexture",value:function(U){var D,O;return this.diffusedTextures.get(U)!=null?this.diffusedTextures.get(U):(D=Math.floor(U.height/U.width*200),O=(D=this._pInst.createGraphics(200,D,a.WEBGL)).createShader(F.imageLightVert,F.imageLightDiffusedFrag),D.shader(O),O.setUniform("environmentMap",U),D.noStroke(),D.rectMode(D.CENTER),D.rect(0,0,D.width,D.height),this.diffusedTextures.set(U,D),D)}},{key:"getSpecularTexture",value:function(U){if(this.specularTextures.get(U)!=null)return this.specularTextures.get(U);var D,O=[],V=this._pInst.createGraphics(512,512,a.WEBGL),Z=Math.log(512)/Math.log(2);V.pixelDensity(1);for(var ie=512;1<=ie;ie/=2){V.resizeCanvas(ie,ie);var re=1-Math.log(ie)/Math.log(2)/Z,ge=V.createShader(F.imageLightVert,F.imageLightSpecularFrag);V.shader(ge),V.clear(),ge.setUniform("environmentMap",U),ge.setUniform("roughness",re),V.noStroke(),V.plane(ie,ie),O.push(V.get().drawingContext.getImageData(0,0,ie,ie))}return V.remove(),D=new l.MipmapTexture(this,O,{}),this.specularTextures.set(U,D),D}},{key:"activeFramebuffer",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||null}},{key:"createFramebuffer",value:function(U){return new s.default.Framebuffer(this,U)}},{key:"_setStrokeUniforms",value:function(U){U.bindShader(),U.setUniform("uUseLineColor",this._useLineColor),U.setUniform("uMaterialColor",this.curStrokeColor),U.setUniform("uStrokeWeight",this.curStrokeWeight),U.setUniform("uStrokeCap",A[this.curStrokeCap]),U.setUniform("uStrokeJoin",M[this.curStrokeJoin])}},{key:"_setFillUniforms",value:function(U){U.bindShader(),U.setUniform("uUseVertexColor",this._useVertexColor),U.setUniform("uMaterialColor",this.curFillColor),U.setUniform("isTexture",!!this._tex),this._tex&&U.setUniform("uSampler",this._tex),U.setUniform("uTint",this._tint),U.setUniform("uHasSetAmbient",this._hasSetAmbient),U.setUniform("uAmbientMatColor",this.curAmbientColor),U.setUniform("uSpecularMatColor",this.curSpecularColor),U.setUniform("uEmissiveMatColor",this.curEmissiveColor),U.setUniform("uSpecular",this._useSpecularMaterial),U.setUniform("uEmissive",this._useEmissiveMaterial),U.setUniform("uShininess",this._useShininess),this._setImageLightUniforms(U),U.setUniform("uUseLighting",this._enableLighting);var D=this.pointLightDiffuseColors.length/3,D=(U.setUniform("uPointLightCount",D),U.setUniform("uPointLightLocation",this.pointLightPositions),U.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),U.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),this.directionalLightDiffuseColors.length/3),D=(U.setUniform("uDirectionalLightCount",D),U.setUniform("uLightingDirection",this.directionalLightDirections),U.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),U.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),this.ambientLightColors.length/3),D=(U.setUniform("uAmbientLightCount",D),U.setUniform("uAmbientColor",this.ambientLightColors),this.spotLightDiffuseColors.length/3);U.setUniform("uSpotLightCount",D),U.setUniform("uSpotLightAngle",this.spotLightAngle),U.setUniform("uSpotLightConc",this.spotLightConc),U.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),U.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),U.setUniform("uSpotLightLocation",this.spotLightPositions),U.setUniform("uSpotLightDirection",this.spotLightDirections),U.setUniform("uConstantAttenuation",this.constantAttenuation),U.setUniform("uLinearAttenuation",this.linearAttenuation),U.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),U.bindTextures()}},{key:"_setImageLightUniforms",value:function(U){var D,O;U.setUniform("uUseImageLight",this.activeImageLight!=null),this.activeImageLight&&(D=this.getDiffusedTexture(this.activeImageLight),U.setUniform("environmentMapDiffused",D),D=this.getSpecularTexture(this.activeImageLight),O=20/this._useShininess,U.setUniform("levelOfDetail",8*O),U.setUniform("environmentMapSpecular",D))}},{key:"_setPointUniforms",value:function(U){U.bindShader(),U.setUniform("uMaterialColor",this.curStrokeColor),U.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)}},{key:"_bindBuffer",value:function(U,D,O,V,Z){D=D||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(D,U),O!==void 0&&((U=O)instanceof s.default.DataArray?U=O.dataArray():U instanceof(V||Float32Array)||(U=new(V||Float32Array)(U)),this.GL.bufferData(D,U,Z||this.GL.STATIC_DRAW))}},{key:"_arraysEqual",value:function(U,D){return U.length===D.length&&U.every(function(O,V){return O===D[V]})}},{key:"_isTypedArray",value:function(U){return[Float32Array,Float64Array,Int16Array,Uint16Array,Uint32Array].some(function(D){return U instanceof D})}},{key:"_flatten",value:function(U){if(U.length===0)return[];var D;if(2e4<U.length){for(var O=[],V=U.slice(),Z=V.pop();Array.isArray(Z)?V.push.apply(V,d(Z)):O.push(Z),V.length&&(Z=V.pop())!==void 0;);return O.reverse(),O}return(D=[]).concat.apply(D,d(U))}},{key:"_vToNArray",value:function(U){var D=[],O=!0,V=!1,Z=void 0;try{for(var ie,re=U[Symbol.iterator]();!(O=(ie=re.next()).done);O=!0){var ge=ie.value;D.push(ge.x,ge.y,ge.z)}}catch(ye){V=!0,Z=ye}finally{try{O||re.return==null||re.return()}finally{if(V)throw Z}}return D}},{key:"_bezierCoefficients",value:function(U){var D=U*U,O=1-U,V=O*O;return[V*O,3*V*U,3*O*D,D*U]}},{key:"_quadraticCoefficients",value:function(U){var D=1-U;return[D*D,2*D*U,U*U]}},{key:"_bezierToCatmull",value:function(U){return[U[1],U[1]+(U[2]-U[0])/this._curveTightness,U[2]-(U[3]-U[1])/this._curveTightness,U[2]]}},{key:"_initTessy",value:function(){var U=new h.default.GluTesselator;return U.gluTessCallback(h.default.gluEnum.GLU_TESS_VERTEX_DATA,function(D,O){for(var V=0;V<D.length;V++)O.push(D[V])}),U.gluTessCallback(h.default.gluEnum.GLU_TESS_BEGIN,function(D){D!==h.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(D))}),U.gluTessCallback(h.default.gluEnum.GLU_TESS_ERROR,function(D){console.log("error callback"),console.log("error number: ".concat(D))}),U.gluTessCallback(h.default.gluEnum.GLU_TESS_COMBINE,function(D,O,V){for(var Z=new Array(s.default.RendererGL.prototype.tessyVertexSize).fill(0),ie=0;ie<V.length;ie++)for(var re=0;re<Z.length;re++)V[ie]!==0&&O[ie]&&(Z[re]+=O[ie][re]*V[ie]);return Z}),U.gluTessCallback(h.default.gluEnum.GLU_TESS_EDGE_FLAG,function(D){}),U.gluTessProperty(h.default.gluEnum.GLU_TESS_WINDING_RULE,h.default.windingRule.GLU_TESS_WINDING_NONZERO),U}},{key:"_triangulate",value:function(U){var D=U[0]?U[0][2]:void 0,O=!0,V=!0,ye=!1,pe=void 0;try{for(var Z,ie=U[Symbol.iterator]();!(V=(Z=ie.next()).done);V=!0)for(var re=Z.value,ge=0;ge<re.length;ge+=s.default.RendererGL.prototype.tessyVertexSize)if(re[ge+2]!==D){O=!1;break}}catch(De){ye=!0,pe=De}finally{try{V||ie.return==null||ie.return()}finally{if(ye)throw pe}}O?this._tessy.gluTessNormal(0,0,1):this._tessy.gluTessNormal(0,0,0);var ye=[],he=(this._tessy.gluTessBeginPolygon(ye),!0),pe=!1,we=void 0;try{for(var oe,fe=U[Symbol.iterator]();!(he=(oe=fe.next()).done);he=!0){var Ce=oe.value;this._tessy.gluTessBeginContour();for(var Fe=0;Fe<Ce.length;Fe+=s.default.RendererGL.prototype.tessyVertexSize){var Ae=Ce.slice(Fe,Fe+s.default.RendererGL.prototype.tessyVertexSize);this._tessy.gluTessVertex(Ae,Ae)}this._tessy.gluTessEndContour()}}catch(De){pe=!0,we=De}finally{try{he||fe.return==null||fe.return()}finally{if(pe)throw we}}return this._tessy.gluTessEndPolygon(),ye}}])&&y(W.prototype,G),ne}(s.default.Renderer),s.default.prototype._assert3d=function(G){if(!this._renderer.isP3D)throw new Error("".concat(G,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},s.default.RendererGL.prototype.tessyVertexSize=12,P=s.default.RendererGL,i.default=P},{"../core/constants":264,"../core/main":275,"../core/p5.Renderer":278,"./GeometryBuilder":319,"./p5.Camera":324,"./p5.Framebuffer":326,"./p5.Matrix":328,"./p5.Shader":333,"./p5.Texture":334,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.copy-within":152,"core-js/modules/es.array.every":153,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.from":158,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.some":166,"core-js/modules/es.map":169,"core-js/modules/es.object.assign":176,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.reflect.get":185,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.set":189,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.float32-array":211,"core-js/modules/es.typed-array.float64-array":212,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.int16-array":216,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint16-array":232,"core-js/modules/es.typed-array.uint32-array":233,"core-js/modules/es.typed-array.uint8-array":234,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238,libtess:247,path:250}],333:[function(t,r,i){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=(t=t("../core/main"))&&t.__esModule?t:{default:t};function o(s,a){for(var f=0;f<a.length;f++){var h=a[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(s,h.key,h)}}n.default.Shader=function(){function s(h,l,u){if(!(this instanceof s))throw new TypeError("Cannot call a class as a function");this._renderer=h,this._vertSrc=l,this._fragSrc=u,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]}var a,f;return a=s,(f=[{key:"init",value:function(){if(this._glProgram===0){var h=this._renderer.GL;if(this._vertShader=h.createShader(h.VERTEX_SHADER),h.shaderSource(this._vertShader,this._vertSrc),h.compileShader(this._vertShader),!h.getShaderParameter(this._vertShader,h.COMPILE_STATUS))return n.default._friendlyError("Yikes! An error occurred compiling the vertex shader:".concat(h.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=h.createShader(h.FRAGMENT_SHADER),h.shaderSource(this._fragShader,this._fragSrc),h.compileShader(this._fragShader),!h.getShaderParameter(this._fragShader,h.COMPILE_STATUS))return n.default._friendlyError("Darn! An error occurred compiling the fragment shader:".concat(h.getShaderInfoLog(this._fragShader))),null;this._glProgram=h.createProgram(),h.attachShader(this._glProgram,this._vertShader),h.attachShader(this._glProgram,this._fragShader),h.linkProgram(this._glProgram),h.getProgramParameter(this._glProgram,h.LINK_STATUS)||n.default._friendlyError("Snap! Error linking shader program: ".concat(h.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this}},{key:"copyToContext",value:function(h){var l=new n.default.Shader(h._renderer,this._vertSrc,this._fragSrc);return l.ensureCompiledOnContext(h),l}},{key:"ensureCompiledOnContext",value:function(h){if(this._glProgram!==0&&this._renderer!==h._renderer)throw new Error("The shader being run is attached to a different context. Do you need to copy it to this context first with .copyToContext()?");this._glProgram===0&&(this._renderer=h._renderer,this.init())}},{key:"_loadAttributes",value:function(){if(!this._loadedAttributes){this.attributes={};for(var h=this._renderer.GL,l=h.getProgramParameter(this._glProgram,h.ACTIVE_ATTRIBUTES),u=0;u<l;++u){var c=h.getActiveAttrib(this._glProgram,u),d=c.name,y=h.getAttribLocation(this._glProgram,d),p={};p.name=d,p.location=y,p.index=u,p.type=c.type,p.size=c.size,this.attributes[d]=p}this._loadedAttributes=!0}}},{key:"_loadUniforms",value:function(){if(!this._loadedUniforms){for(var h=this._renderer.GL,l=h.getProgramParameter(this._glProgram,h.ACTIVE_UNIFORMS),u=0,c=0;c<l;++c){var d=h.getActiveUniform(this._glProgram,c),y={},p=(y.location=h.getUniformLocation(this._glProgram,d.name),y.size=d.size,d.name);1<d.size&&(p=p.substring(0,p.indexOf("[0]"))),y.name=p,y.type=d.type,y._cachedData=void 0,y.type===h.SAMPLER_2D&&(y.samplerIndex=u,u++,this.samplers.push(y)),y.isArray=1<d.size||y.type===h.FLOAT_MAT3||y.type===h.FLOAT_MAT4||y.type===h.FLOAT_VEC2||y.type===h.FLOAT_VEC3||y.type===h.FLOAT_VEC4||y.type===h.INT_VEC2||y.type===h.INT_VEC4||y.type===h.INT_VEC3,this.uniforms[p]=y}this._loadedUniforms=!0}}},{key:"compile",value:function(){}},{key:"bindShader",value:function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))}},{key:"unbindShader",value:function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this}},{key:"bindTextures",value:function(){var h=this._renderer.GL,l=!0,u=!1,c=void 0;try{for(var d,y=this.samplers[Symbol.iterator]();!(l=(d=y.next()).done);l=!0){var p=d.value,m=p.texture;m===void 0&&(m=this._renderer._getEmptyTexture()),h.activeTexture(h.TEXTURE0+p.samplerIndex),m.bindTexture(),m.update(),h.uniform1i(p.location,p.samplerIndex)}}catch(g){u=!0,c=g}finally{try{l||y.return==null||y.return()}finally{if(u)throw c}}}},{key:"updateTextures",value:function(){var h=!0,l=!1,u=void 0;try{for(var c,d=this.samplers[Symbol.iterator]();!(h=(c=d.next()).done);h=!0){var y=c.value.texture;y&&y.update()}}catch(p){l=!0,u=p}finally{try{h||d.return==null||d.return()}finally{if(l)throw u}}}},{key:"unbindTextures",value:function(){var h=!0,l=!1,u=void 0;try{for(var c,d=this.samplers[Symbol.iterator]();!(h=(c=d.next()).done);h=!0){var y=c.value;this.setUniform(y.name,this._renderer._getEmptyTexture())}}catch(p){l=!0,u=p}finally{try{h||d.return==null||d.return()}finally{if(l)throw u}}}},{key:"_setMatrixUniforms",value:function(){var h=this._renderer._curCamera.cameraMatrix,l=this._renderer.uPMatrix,u=this._renderer.uMVMatrix,c=u.copy();c.mult(l),this.isStrokeShader()&&(this._renderer._curCamera.cameraType==="default"?this.setUniform("uPerspective",1):this.setUniform("uPerspective",0)),this.setUniform("uViewMatrix",h.mat4),this.setUniform("uProjectionMatrix",l.mat4),this.setUniform("uModelViewMatrix",u.mat4),this.setUniform("uModelViewProjectionMatrix",c.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3))}},{key:"useProgram",value:function(){var h=this._renderer.GL;return this._renderer._curShader!==this&&(h.useProgram(this._glProgram),this._renderer._curShader=this),this}},{key:"setUniform",value:function(h,l){var u=this.uniforms[h];if(u){var c=this._renderer.GL;if(u.isArray){if(u._cachedData&&this._renderer._arraysEqual(u._cachedData,l))return;u._cachedData=l.slice(0)}else{if(u._cachedData&&u._cachedData===l)return;Array.isArray(l)?u._cachedData=l.slice(0):u._cachedData=l}var d=u.location;switch(this.useProgram(),u.type){case c.BOOL:l===!0?c.uniform1i(d,1):c.uniform1i(d,0);break;case c.INT:1<u.size?l.length&&c.uniform1iv(d,l):c.uniform1i(d,l);break;case c.FLOAT:1<u.size?l.length&&c.uniform1fv(d,l):c.uniform1f(d,l);break;case c.FLOAT_MAT3:c.uniformMatrix3fv(d,!1,l);break;case c.FLOAT_MAT4:c.uniformMatrix4fv(d,!1,l);break;case c.FLOAT_VEC2:1<u.size?l.length&&c.uniform2fv(d,l):c.uniform2f(d,l[0],l[1]);break;case c.FLOAT_VEC3:1<u.size?l.length&&c.uniform3fv(d,l):c.uniform3f(d,l[0],l[1],l[2]);break;case c.FLOAT_VEC4:1<u.size?l.length&&c.uniform4fv(d,l):c.uniform4f(d,l[0],l[1],l[2],l[3]);break;case c.INT_VEC2:1<u.size?l.length&&c.uniform2iv(d,l):c.uniform2i(d,l[0],l[1]);break;case c.INT_VEC3:1<u.size?l.length&&c.uniform3iv(d,l):c.uniform3i(d,l[0],l[1],l[2]);break;case c.INT_VEC4:1<u.size?l.length&&c.uniform4iv(d,l):c.uniform4i(d,l[0],l[1],l[2],l[3]);break;case c.SAMPLER_2D:c.activeTexture(c.TEXTURE0+u.samplerIndex),u.texture=l instanceof n.default.Texture?l:this._renderer.getTexture(l),c.uniform1i(d,u.samplerIndex),u.texture.src.gifProperties&&u.texture.src._animateGif(this._renderer._pInst)}return this}}},{key:"isLightShader",value:function(){return this.attributes.aNormal!==void 0||this.uniforms.uUseLighting!==void 0||this.uniforms.uAmbientLightCount!==void 0||this.uniforms.uDirectionalLightCount!==void 0||this.uniforms.uPointLightCount!==void 0||this.uniforms.uAmbientColor!==void 0||this.uniforms.uDirectionalDiffuseColors!==void 0||this.uniforms.uDirectionalSpecularColors!==void 0||this.uniforms.uPointLightLocation!==void 0||this.uniforms.uPointLightDiffuseColors!==void 0||this.uniforms.uPointLightSpecularColors!==void 0||this.uniforms.uLightingDirection!==void 0||this.uniforms.uSpecular!==void 0}},{key:"isNormalShader",value:function(){return this.attributes.aNormal!==void 0}},{key:"isTextureShader",value:function(){return 0<this.samplers.length}},{key:"isColorShader",value:function(){return this.attributes.aVertexColor!==void 0||this.uniforms.uMaterialColor!==void 0}},{key:"isTexLightShader",value:function(){return this.isLightShader()&&this.isTextureShader()}},{key:"isStrokeShader",value:function(){return this.uniforms.uStrokeWeight!==void 0}},{key:"enableAttrib",value:function(h,l,u,c,d,y){var p;return h&&(h=h.location)!==-1&&(p=this._renderer.GL,this._renderer.registerEnabled.has(h)||(p.enableVertexAttribArray(h),this._renderer.registerEnabled.add(h)),this._renderer.GL.vertexAttribPointer(h,l,u||p.FLOAT,c||!1,d||0,y||0)),this}},{key:"disableRemainingAttributes",value:function(){var h=this,l=!0,u=!1,c=void 0;try{for(var d,y=this._renderer.registerEnabled.values()[Symbol.iterator]();!(l=(d=y.next()).done);l=!0)(function(){var p=d.value;Object.keys(h.attributes).some(function(m){return h.attributes[m].location===p})||(h._renderer.GL.disableVertexAttribArray(p),h._renderer.registerEnabled.delete(p))})()}catch(p){u=!0,c=p}finally{try{l||y.return==null||y.return()}finally{if(u)throw c}}}}])&&o(a.prototype,f),s}(),t=n.default.Shader,i.default=t},{"../core/main":275,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.some":166,"core-js/modules/es.function.name":168,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],334:[function(t,r,i){function n(g){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(g)}function o(g){return(o=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(v){return n(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":n(v)})(g)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.checkWebGLCapabilities=m,i.default=i.MipmapTexture=void 0;var s=(p=t("../core/main"))&&p.__esModule?p:{default:p},a=function(g){if(g&&g.__esModule)return g;if(g===null||o(g)!=="object"&&typeof g!="function")return{default:g};var v=f();if(v&&v.has(g))return v.get(g);var x,T={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(x in g){var b;Object.prototype.hasOwnProperty.call(g,x)&&((b=w?Object.getOwnPropertyDescriptor(g,x):null)&&(b.get||b.set)?Object.defineProperty(T,x,b):T[x]=g[x])}return T.default=g,v&&v.set(g,T),T}(t("../core/constants"));function f(){var g;return typeof WeakMap!="function"?null:(g=new WeakMap,f=function(){return g},g)}function h(g,v){return(h=Object.setPrototypeOf||function(x,T){return x.__proto__=T,x})(g,v)}function l(g){return function(){var v,x=u(g),x=(v=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(v=u(this).constructor,Reflect.construct(x,arguments,v)):x.apply(this,arguments),this);if(!v||o(v)!=="object"&&typeof v!="function"){if(x!==void 0)return x;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return v}}function u(g){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)})(g)}function c(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}function d(g,v){for(var x=0;x<v.length;x++){var T=v[x];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(g,T.key,T)}}function y(g,v,x){v&&d(g.prototype,v),x&&d(g,x)}s.default.Texture=function(){function g(C,x,b){c(this,g),this._renderer=C;var w=this._renderer.GL,b=(b=b||{},this.src=x,this.glTex=void 0,this.glTarget=w.TEXTURE_2D,this.glFormat=b.format||w.RGBA,this.mipmaps=!1,this.glMinFilter=b.minFilter||w.LINEAR,this.glMagFilter=b.magFilter||w.LINEAR,this.glWrapS=b.wrapS||w.CLAMP_TO_EDGE,this.glWrapT=b.wrapT||w.CLAMP_TO_EDGE,this.glDataType=b.dataType||w.UNSIGNED_BYTE,m(C)),C=(this.glFormat!==w.HALF_FLOAT||b.halfFloat||(console.log("This device does not support dataType HALF_FLOAT. Falling back to FLOAT."),this.glDataType=w.FLOAT),this.glFormat!==w.HALF_FLOAT||this.glMinFilter!==w.LINEAR&&this.glMagFilter!==w.LINEAR||b.halfFloatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===w.LINEAR&&(this.glMinFilter=w.NEAREST),this.glMagFilter===w.LINEAR&&(this.glMagFilter=w.NEAREST)),this.glFormat!==w.FLOAT||b.float||(console.log("This device does not support dataType FLOAT. Falling back to UNSIGNED_BYTE."),this.glDataType=w.UNSIGNED_BYTE),this.glFormat!==w.FLOAT||this.glMinFilter!==w.LINEAR&&this.glMagFilter!==w.LINEAR||b.floatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===w.LINEAR&&(this.glMinFilter=w.NEAREST),this.glMagFilter===w.LINEAR&&(this.glMagFilter=w.NEAREST)),this.isSrcMediaElement=s.default.MediaElement!==void 0&&x instanceof s.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=s.default.Element!==void 0&&x instanceof s.default.Element&&!(x instanceof s.default.Graphics)&&!(x instanceof s.default.Renderer),this.isSrcP5Image=x instanceof s.default.Image,this.isSrcP5Graphics=x instanceof s.default.Graphics,this.isSrcP5Renderer=x instanceof s.default.Renderer,this.isImageData=typeof ImageData<"u"&&x instanceof ImageData,this.isFramebufferTexture=x instanceof s.default.FramebufferTexture,this._getTextureDataFromSource());return this.width=C.width,this.height=C.height,this.init(C),this}return y(g,[{key:"_getTextureDataFromSource",value:function(){var v;return this.isFramebufferTexture?v=this.src.rawTexture():this.isSrcP5Image?v=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?v=this.src.elt:this.isImageData&&(v=this.src),v}},{key:"init",value:function(v){var x,T=this._renderer.GL;this.isFramebufferTexture||(this.glTex=T.createTexture()),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,this.glMagFilter),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,this.glMinFilter),this.isFramebufferTexture||(this.width===0||this.height===0||this.isSrcMediaElement&&!this.src.loadedmetadata?(x=new Uint8Array([1,1,1,1]),T.texImage2D(this.glTarget,0,T.RGBA,1,1,0,this.glFormat,this.glDataType,x)):T.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,v))}},{key:"update",value:function(){var v,x,T,w=this.src;return w.width!==0&&w.height!==0&&!this.isFramebufferTexture&&(v=this._getTextureDataFromSource(),x=!1,T=this._renderer.GL,v.width!==this.width||v.height!==this.height?(x=!0,this.width=v.width||w.width,this.height=v.height||w.height,this.isSrcP5Image?w.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&w.setModified(!0)):this.isSrcP5Image?w.isModified()&&w.setModified(!(x=!0)):this.isSrcMediaElement?w.isModified()?w.setModified(!(x=!0)):w.loadedmetadata&&this._videoPrevUpdateTime!==w.time()&&(this._videoPrevUpdateTime=w.time(),x=!0):this.isImageData?w._dirty&&(x=!(w._dirty=!1)):x=!0,x&&(this.bindTexture(),T.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,v)),x)}},{key:"bindTexture",value:function(){return this._renderer.GL.bindTexture(this.glTarget,this.getTexture()),this}},{key:"unbindTexture",value:function(){this._renderer.GL.bindTexture(this.glTarget,null)}},{key:"getTexture",value:function(){return this.isFramebufferTexture?this.src.rawTexture():this.glTex}},{key:"setInterpolation",value:function(v,x){var T=this._renderer.GL;this.glMinFilter=this.glFilter(v),this.glMagFilter=this.glFilter(x),this.bindTexture(),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,this.glMinFilter),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()}},{key:"glFilter",value:function(v){var x=this._renderer.GL;return v===a.NEAREST?x.NEAREST:x.LINEAR}},{key:"setWrapMode",value:function(v,x){function T(A){return(A&A-1)==0}var w=this._renderer.GL,C=this._getTextureDataFromSource(),C=C.naturalWidth&&C.naturalHeight?(b=C.naturalWidth,C.naturalHeight):(b=this.width,this.height),b=T(b),C=T(C);v===a.REPEAT?this._renderer.webglVersion===a.WEBGL2||b&&C?this.glWrapS=w.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=w.CLAMP_TO_EDGE):v===a.MIRROR?this._renderer.webglVersion===a.WEBGL2||b&&C?this.glWrapS=w.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=w.CLAMP_TO_EDGE):this.glWrapS=w.CLAMP_TO_EDGE,x===a.REPEAT?this._renderer.webglVersion===a.WEBGL2||b&&C?this.glWrapT=w.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=w.CLAMP_TO_EDGE):x===a.MIRROR?this._renderer.webglVersion===a.WEBGL2||b&&C?this.glWrapT=w.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=w.CLAMP_TO_EDGE):this.glWrapT=w.CLAMP_TO_EDGE,this.bindTexture(),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,this.glWrapS),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()}}]),g}();var p=function(g){var v=T;if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(g&&g.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),g&&h(v,g);var x=l(T);function T(w,b,C){return c(this,T),b=(w=x.call(this,w,b,C))._renderer.GL,w.glMinFilter===b.LINEAR&&(w.glMinFilter=b.LINEAR_MIPMAP_LINEAR),w}return y(T,[{key:"glFilter",value:function(w){return this._renderer.GL.LINEAR_MIPMAP_LINEAR}},{key:"_getTextureDataFromSource",value:function(){return this.src}},{key:"init",value:function(w){var b=this._renderer.GL;this.glTex=b.createTexture(),this.bindTexture();for(var C=0;C<w.length;C++)b.texImage2D(this.glTarget,C,this.glFormat,this.glFormat,this.glDataType,w[C]);this.glMinFilter=b.LINEAR_MIPMAP_LINEAR,b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,this.glMagFilter),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,this.glMinFilter),this.unbindTexture()}},{key:"update",value:function(){}}]),T}(s.default.Texture);function m(w){var v=w.GL,w=w.webglVersion,x=w===a.WEBGL2?v.getExtension("EXT_color_buffer_float")&&v.getExtension("EXT_float_blend"):v.getExtension("OES_texture_float"),T=x&&v.getExtension("OES_texture_float_linear"),w=w===a.WEBGL2?v.getExtension("EXT_color_buffer_float"):v.getExtension("OES_texture_half_float");return{float:x,floatLinear:T,halfFloat:w,halfFloatLinear:w&&v.getExtension("OES_texture_half_float_linear")}}i.MipmapTexture=p,t=s.default.Texture,i.default=t},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint8-array":234,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],335:[function(t,r,i){function n(g){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(g)}function o(g){return(o=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?function(v){return n(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":n(v)})(g)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.sub"),t("core-js/modules/web.dom-collections.iterator");var s,a=(s=t("../core/main"))&&s.__esModule?s:{default:s},f=function(g){if(g&&g.__esModule)return g;if(g===null||o(g)!=="object"&&typeof g!="function")return{default:g};var v=h();if(v&&v.has(g))return v.get(g);var x,T={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(x in g){var b;Object.prototype.hasOwnProperty.call(g,x)&&((b=w?Object.getOwnPropertyDescriptor(g,x):null)&&(b.get||b.set)?Object.defineProperty(T,x,b):T[x]=g[x])}return T.default=g,v&&v.set(g,T),T}(t("../core/constants"));function h(){var g;return typeof WeakMap!="function"?null:(g=new WeakMap,h=function(){return g},g)}function l(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}function u(g,v){for(var x=0;x<v.length;x++){var T=v[x];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(g,T.key,T)}}function c(g,v,x){v&&u(g.prototype,v),x&&u(g,x)}t("./p5.Shader"),t("./p5.RendererGL.Retained"),a.default.RendererGL.prototype._applyTextProperties=function(){},a.default.RendererGL.prototype.textWidth=function(g){return this._isOpenType()?this._textFont._textWidth(g,this._textSize):0};var d=function(){function g(v,x){l(this,g),this.width=v,this.height=x,this.infos=[]}return c(g,[{key:"findImage",value:function(v){var x,T,w=this.width*this.height;if(w<v)throw new Error("font is too complex to render in 3D");for(var b=this.infos.length-1;0<=b;--b){var C=this.infos[b];if(C.index+v<w){T=(x=C).imageData;break}}if(!x){try{T=new ImageData(this.width,this.height)}catch{var A=document.getElementsByTagName("canvas")[0],M=!A,k=(A||((A=document.createElement("canvas")).style.display="none",document.body.appendChild(A)),A.getContext("2d"));k&&(T=k.createImageData(this.width,this.height)),M&&document.body.removeChild(A)}this.infos.push(x={index:0,imageData:T})}return k=x.index,x.index+=v,T._dirty=!0,{imageData:T,index:k}}}]),g}();function y(C,v,x,T,w){var b=C.imageData.data,C=4*C.index++;b[C++]=v,b[C++]=x,b[C++]=T,b[+C]=w}var p=Math.sqrt(3),m=function(){function g(v){l(this,g),this.font=v,this.strokeImageInfos=new d(64,64),this.colDimImageInfos=new d(64,64),this.rowDimImageInfos=new d(64,64),this.colCellImageInfos=new d(64,64),this.rowCellImageInfos=new d(64,64),this.glyphInfos={}}return c(g,[{key:"getGlyphInfo",value:function(v){var x=this.glyphInfos[v.index];if(!x){var T=v.getBoundingBox(),w=T.x1,b=T.y1,C=T.x2-w,A=T.y2-b,M=v.path.commands;if(C==0||A==0||!M.length)return this.glyphInfos[v.index]={};for(var k=[],P=[],F=[],I=8;0<=I;--I)F.push([]);for(I=8;0<=I;--I)P.push([]);var B,H,G,W,Q=function(){function de(le,Ue,Ze,Me){l(this,de),this.p0=le,this.c0=Ue,this.c1=Ze,this.p1=Me}return c(de,[{key:"toQuadratic",value:function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}}},{key:"quadError",value:function(){return a.default.Vector.sub(a.default.Vector.sub(this.p1,this.p0),a.default.Vector.mult(a.default.Vector.sub(this.c1,this.c0),3)).mag()/2}},{key:"split",value:function(ze){var Ue=a.default.Vector.lerp(this.p0,this.c0,ze),Me=a.default.Vector.lerp(this.c0,this.c1,ze),Ze=a.default.Vector.lerp(Ue,Me,ze),Me=(this.c1=a.default.Vector.lerp(this.c1,this.p1,ze),this.c0=a.default.Vector.lerp(Me,this.c1,ze),a.default.Vector.lerp(Ze,this.c0,ze)),ze=new de(this.p0,Ue,Ze,Me);return this.p0=Me,ze}},{key:"splitInflections",value:function(){var le=a.default.Vector.sub(this.c0,this.p0),Ue=a.default.Vector.sub(a.default.Vector.sub(this.c1,this.c0),le),Ze=a.default.Vector.sub(a.default.Vector.sub(a.default.Vector.sub(this.p1,this.c1),le),a.default.Vector.mult(Ue,2)),Me=[],ze=Ue.x*Ze.y-Ue.y*Ze.x;return ze!==0&&0<=(le=(Ze=le.x*Ze.y-le.y*Ze.x)*Ze-4*ze*(le.x*Ue.y-le.y*Ue.x))&&(ze<0&&(ze=-ze,Ze=-Ze),le=(-Ze+(Ue=Math.sqrt(le)))/(2*ze),0<(Ze=(-Ze-Ue)/(2*ze))&&Ze<1&&(Me.push(this.split(Ze)),le=1-(1-le)/(1-Ze)),0<le&&le<1&&Me.push(this.split(le))),Me.push(this),Me}}]),de}(),ne=!0,U=!1,D=void 0;try{for(var O,V=M[Symbol.iterator]();!(ne=(O=V.next()).done);ne=!0){var Z=O.value,ie=(Z.x-w)/C,re=(Z.y-b)/A;if(!qe(B,H,ie,re)){switch(Z.type){case"M":G=ie,W=re;break;case"L":st(B,H,ie,re);break;case"Q":var ge=(Z.x1-w)/C,ye=(Z.y1-b)/A;De([B,ie,ge],[H,re,ye],{x:B,y:H,cx:ge,cy:ye});break;case"Z":qe(B,H,G,W)?k.push({x:B,y:H}):(st(B,H,G,W),k.push({x:G,y:W}));break;case"C":for(var he=function(te,Le,Ne,Ze,Me,ze,Re,q){var te=new Q(new a.default.Vector(te,Le),new a.default.Vector(Ne,Ze),new a.default.Vector(Me,ze),new a.default.Vector(Re,q)).splitInflections(),ee=[],ae=30/p,Se=!0,Le=!1,Ne=void 0;try{for(var at,ft=te[Symbol.iterator]();!(Se=(at=ft.next()).done);Se=!0){for(var bt=at.value,Ee=[],Ke=void 0;!(.125<=(Ke=ae/bt.quadError()));){var ot=Math.pow(Ke,.3333333333333333),ut=bt.split(ot),_t=bt.split(1-ot/(1-ot));ee.push(ut),Ee.push(bt),bt=_t}Ke<1&&ee.push(bt.split(.5)),ee.push(bt),Array.prototype.push.apply(ee,Ee.reverse())}}catch(jt){Le=!0,Ne=jt}finally{try{Se||ft.return==null||ft.return()}finally{if(Le)throw Ne}}return ee}(B,H,(Z.x1-w)/C,(Z.y1-b)/A,(Z.x2-w)/C,(Z.y2-b)/A,ie,re),pe=0;pe<he.length;pe++){var we=he[pe].toQuadratic();De([we.x,we.x1,we.cx],[we.y,we.y1,we.cy],we)}break;default:throw new Error("unknown command type: ".concat(Z.type))}B=ie,H=re}}}catch(de){U=!0,D=de}finally{try{ne||V.return==null||V.return()}finally{if(U)throw D}}for(var oe=k.length,fe=this.strokeImageInfos.findImage(oe),Ce=fe.index,Fe=0;Fe<oe;++Fe){var Ae=k[Fe];y(fe,Be(Ae.x),Be(Ae.y),Be(Ae.cx),Be(Ae.cy))}(x=this.glyphInfos[v.index]={glyph:v,uGlyphRect:[T.x1,-T.y1,T.x2,-T.y2],strokeImageInfo:fe,strokes:k,colInfo:Et(F,this.colDimImageInfos,this.colCellImageInfos),rowInfo:Et(P,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[x.colInfo.dimOffset,x.rowInfo.dimOffset]}return x;function De(de,le,Ue){var Ze=k.length;function Me(ee,ae,Se){for(var Le=ee.length;0<Le--;){var Ne=ee[Le];Ne<ae&&(ae=Ne),Se<Ne&&(Se=Ne)}return{min:ae,max:Se}}k.push(Ue);for(var Ue=Me(de,1,0),de=Math.max(Math.floor(9*Ue.min-.5),0),ze=Math.min(Math.ceil(9*Ue.max+.5),9),Re=de;Re<ze;++Re)F[Re].push(Ze);for(var Ue=Me(le,1,0),de=Math.max(Math.floor(9*Ue.min-.5),0),q=Math.min(Math.ceil(9*Ue.max+.5),9),te=de;te<q;++te)P[te].push(Ze)}function Be(de){return(de=(Ue=255)*de)<(le=0)?le:Ue<de?Ue:de;var le,Ue}function st(de,le,Ue,Ze){De([de,Ue],[le,Ze],{x:de,y:le,cx:(de+Ue)/2,cy:(le+Ze)/2})}function qe(de,le,Ue,Ze){return Math.abs(Ue-de)<1e-5&&Math.abs(Ze-le)<1e-5}function Et(de,le,Ue){for(var Ze=de.length,Me=le.findImage(Ze),le=Me.index,ze=0,Re=0;Re<Ze;++Re)ze+=de[Re].length;for(var q=Ue.findImage(ze),te=0;te<Ze;++te){var ee=de[te],ae=ee.length,Se=q.index;y(Me,Se>>7,127&Se,ae>>7,127&ae);for(var Le=0;Le<ae;++Le){var Ne=ee[Le]+Ce;y(q,Ne>>7,127&Ne,0,0)}}return{cellImageInfo:q,dimOffset:le,dimImageInfo:Me}}}}]),g}();a.default.RendererGL.prototype._renderText=function(g,v,x,T,w){if(this._textFont&&typeof this._textFont!="string"){if(!(w<=T)&&this._doFill){if(this._isOpenType()){g.push();var w=this._doStroke,b=this.drawMode,C=(this._doStroke=!1,this.drawMode=f.TEXTURE,this._textFont.font),A=(A=this._textFont._fontInfo)||(this._textFont._fontInfo=new m(C)),x=this._textFont._handleAlignment(this,v,x,T),T=this._textSize/C.unitsPerEm,M=(this.translate(x.x,x.y,0),this.scale(T,T,1),this.GL),x=!this._defaultFontShader,k=this._getFontShader(),P=(k.init(),k.bindShader(),x&&(k.setUniform("uGridImageSize",[64,64]),k.setUniform("uCellsImageSize",[64,64]),k.setUniform("uStrokeImageSize",[64,64]),k.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),F=(P||((T=this._textGeom=new a.default.Geometry(1,1,function(){for(var pe=0;pe<=1;pe++)for(var we=0;we<=1;we++)this.vertices.push(new a.default.Vector(we,pe,0)),this.uvs.push(we,pe)})).computeFaces().computeNormals(),P=this.createBuffers("glyph",T)),!0),x=!1,T=void 0;try{for(var I,B=this.retainedMode.buffers.text[Symbol.iterator]();!(F=(I=B.next()).done);F=!0)I.value._prepareBuffer(P,k)}catch(pe){x=!0,T=pe}finally{try{F||B.return==null||B.return()}finally{if(x)throw T}}this._bindBuffer(P.indexBuffer,M.ELEMENT_ARRAY_BUFFER),k.setUniform("uMaterialColor",this.curFillColor),M.pixelStorei(M.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);try{var H=0,G=null,W=C.stringToGlyphs(v),Q=!0,ne=!1,U=void 0;try{for(var D,O=W[Symbol.iterator]();!(Q=(D=O.next()).done);Q=!0){var V,Z,ie=D.value,re=(G&&(H+=C.getKerningValue(G,ie)),A.getGlyphInfo(ie));re.uGlyphRect&&(V=re.rowInfo,Z=re.colInfo,k.setUniform("uSamplerStrokes",re.strokeImageInfo.imageData),k.setUniform("uSamplerRowStrokes",V.cellImageInfo.imageData),k.setUniform("uSamplerRows",V.dimImageInfo.imageData),k.setUniform("uSamplerColStrokes",Z.cellImageInfo.imageData),k.setUniform("uSamplerCols",Z.dimImageInfo.imageData),k.setUniform("uGridOffset",re.uGridOffset),k.setUniform("uGlyphRect",re.uGlyphRect),k.setUniform("uGlyphOffset",H),k.bindTextures(),M.drawElements(M.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),H+=ie.advanceWidth,G=ie}}catch(pe){ne=!0,U=pe}finally{try{Q||O.return==null||O.return()}finally{if(ne)throw U}}}finally{k.unbindShader(),this._doStroke=w,this.drawMode=b,M.pixelStorei(M.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),g.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return g}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":264,"../core/main":275,"./p5.RendererGL.Retained":331,"./p5.Shader":333,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.split":198,"core-js/modules/es.string.sub":200,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}]},{},[259])(259)});class es{constructor(t,r){this.r=t,this.pos=r}display(){noFill(),circle(this.pos.x,this.pos.y,this.r)}}let hi=[],Ri=240,Io=Ri/2,ji,Ci,ja,fh=600,Ca,Jl,Ql,eu,tu;const ph=S=>{function t(){ja.parent("fin")}class r{constructor(n){this.path=n,this.rayon=n.r,this.size=S.random(1,3),this.rand=S.random(.25,.85),this.hue=Math.floor(S.random(140,150)),this.diff=n.r/4+5,this.dist=S.createVector(S.random(n.pos.x-this.diff,n.pos.x+this.diff),S.random(n.pos.y-this.diff,n.pos.y+this.diff)),this.rep=50,this.starter=S.random(-this.rep,this.rep),this.form=S.random(1,1.25),this.pos=S.createVector(this.dist.x,this.dist.y),this.acc=S.createVector(),this.vel=S.createVector(),this.force=S.createVector(),this.project=S.createVector()}update(){let n=25,o=S.map(S.mouseX,n,S.width-n,-1,1),s=this.rayon/2,a=S.createVector(S.map(S.cos(this.starter),-1,1,-s,s),S.map(S.sin(this.starter),-1,1,-s,s));this.starter+=.016*o,this.pos=a.copy().add(this.vel),this.pos.add(this.dist),this.vel.add(this.acc),this.vel.limit(100),this.acc.mult(0)}applyForce(){let n=p5.Vector.sub(this.path.pos,this.pos);n.normalize(),n.mult(S.random(this.form)),this.acc.add(n)}link(n){for(let o of n){let s=dist(this.pos.x,this.pos.y,o.pos.x,o.pos.y);s<15&&(S.stroke(245),S.strokeWeight(map(s,0,150,.4,0)),S.line(this.pos.x,this.pos.y,o.pos.x,o.pos.y))}}display(){S.noStroke(),S.fill(S.color(`hsla(${this.hue}, 24%, 50%, ${this.rand})`)),S.circle(this.pos.x,this.pos.y,this.size)}projection(){S.fill("red"),this.project=this.path.pos.copy();let n=p5.Vector.sub(this.pos,this.project);n.normalize(),n.mult(this.path.r/2),this.project.add(n),S.fill("red")}}S.setup=()=>{ja=S.createCanvas(fh,700),t(),ji=S.width/2,Ci=S.height/2,Ca=new es(Ri,S.createVector(ji,Ci)),Jl=new es(Ri,S.createVector(ji,Ci-Io)),Ql=new es(Ri,S.createVector(ji+Io,Ci)),eu=new es(Ri,S.createVector(ji,Ci+Io)),tu=new es(Ri,S.createVector(ji-Io,Ci)),ja.push,hi.push(new r(Ca));for(let n=0;n<150;n++)hi.push(new r(Ca)),hi.push(new r(Jl)),hi.push(new r(eu)),hi.push(new r(tu)),hi.push(new r(Ql));let i=new es(Ri*2,S.createVector(ji,Ci));for(let n=0;n<200;n++)hi.push(new r(i))},S.draw=()=>{S.background(250,246,237,0),S.background("#e2e2e2"),hi.forEach(i=>{i.display(),i.applyForce(),i.update()})},S.windowResized=()=>{t()}};new p5(ph,"one");/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Pl="149",ts={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},rs={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},mh=0,ru=1,gh=2,$c=1,Jc=2,io=3,oi=0,mn=1,ni=2,wi=0,ws=1,nu=2,iu=3,su=4,yh=5,vs=100,vh=101,bh=102,ou=103,au=104,_h=200,xh=201,wh=202,Sh=203,Qc=204,ed=205,Mh=206,Th=207,Eh=208,jh=209,Ch=210,Ah=0,Lh=1,Ph=2,fl=3,Rh=4,Dh=5,kh=6,Oh=7,td=0,Ih=1,Nh=2,si=0,Fh=1,Uh=2,Bh=3,Gh=4,zh=5,rd=300,js=301,Cs=302,pl=303,ml=304,ma=306,As=1e3,Mn=1001,da=1002,Nr=1003,gl=1004,aa=1005,an=1006,nd=1007,zi=1008,Vi=1009,Vh=1010,Hh=1011,id=1012,Wh=1013,Ii=1014,_i=1015,uo=1016,qh=1017,Xh=1018,Ss=1020,Yh=1021,Tn=1023,Zh=1024,Kh=1025,Bi=1026,Ls=1027,$h=1028,Jh=1029,Qh=1030,ef=1031,tf=1033,Aa=33776,La=33777,Pa=33778,Ra=33779,lu=35840,uu=35841,cu=35842,du=35843,rf=36196,hu=37492,fu=37496,pu=37808,mu=37809,gu=37810,yu=37811,vu=37812,bu=37813,_u=37814,xu=37815,wu=37816,Su=37817,Mu=37818,Tu=37819,Eu=37820,ju=37821,Da=36492,nf=36283,Cu=36284,Au=36285,Lu=36286,co=2300,Ps=2301,ka=2302,Pu=2400,Ru=2401,Du=2402,sf=2500,of=0,sd=1,yl=2,Hi=3e3,pr=3001,af=3200,lf=3201,od=0,uf=1,Un="srgb",ho="srgb-linear",Oa=7680,cf=519,vl=35044,ku="300 es",bl=1035;class Xi{addEventListener(t,r){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[t]===void 0&&(i[t]=[]),i[t].indexOf(r)===-1&&i[t].push(r)}hasEventListener(t,r){if(this._listeners===void 0)return!1;const i=this._listeners;return i[t]!==void 0&&i[t].indexOf(r)!==-1}removeEventListener(t,r){if(this._listeners===void 0)return;const n=this._listeners[t];if(n!==void 0){const o=n.indexOf(r);o!==-1&&n.splice(o,1)}}dispatchEvent(t){if(this._listeners===void 0)return;const i=this._listeners[t.type];if(i!==void 0){t.target=this;const n=i.slice(0);for(let o=0,s=n.length;o<s;o++)n[o].call(this,t);t.target=null}}}const Zr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Ou=1234567;const oo=Math.PI/180,fo=180/Math.PI;function Dn(){const S=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Zr[S&255]+Zr[S>>8&255]+Zr[S>>16&255]+Zr[S>>24&255]+"-"+Zr[t&255]+Zr[t>>8&255]+"-"+Zr[t>>16&15|64]+Zr[t>>24&255]+"-"+Zr[r&63|128]+Zr[r>>8&255]+"-"+Zr[r>>16&255]+Zr[r>>24&255]+Zr[i&255]+Zr[i>>8&255]+Zr[i>>16&255]+Zr[i>>24&255]).toLowerCase()}function Kr(S,t,r){return Math.max(t,Math.min(r,S))}function Rl(S,t){return(S%t+t)%t}function df(S,t,r,i,n){return i+(S-t)*(n-i)/(r-t)}function hf(S,t,r){return S!==t?(r-S)/(t-S):0}function ao(S,t,r){return(1-r)*S+r*t}function ff(S,t,r,i){return ao(S,t,1-Math.exp(-r*i))}function pf(S,t=1){return t-Math.abs(Rl(S,t*2)-t)}function mf(S,t,r){return S<=t?0:S>=r?1:(S=(S-t)/(r-t),S*S*(3-2*S))}function gf(S,t,r){return S<=t?0:S>=r?1:(S=(S-t)/(r-t),S*S*S*(S*(S*6-15)+10))}function yf(S,t){return S+Math.floor(Math.random()*(t-S+1))}function vf(S,t){return S+Math.random()*(t-S)}function bf(S){return S*(.5-Math.random())}function _f(S){S!==void 0&&(Ou=S);let t=Ou+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function xf(S){return S*oo}function wf(S){return S*fo}function _l(S){return(S&S-1)===0&&S!==0}function ad(S){return Math.pow(2,Math.ceil(Math.log(S)/Math.LN2))}function ha(S){return Math.pow(2,Math.floor(Math.log(S)/Math.LN2))}function Sf(S,t,r,i,n){const o=Math.cos,s=Math.sin,a=o(r/2),f=s(r/2),h=o((t+i)/2),l=s((t+i)/2),u=o((t-i)/2),c=s((t-i)/2),d=o((i-t)/2),y=s((i-t)/2);switch(n){case"XYX":S.set(a*l,f*u,f*c,a*h);break;case"YZY":S.set(f*c,a*l,f*u,a*h);break;case"ZXZ":S.set(f*u,f*c,a*l,a*h);break;case"XZX":S.set(a*l,f*y,f*d,a*h);break;case"YXY":S.set(f*d,a*l,f*y,a*h);break;case"ZYZ":S.set(f*y,f*d,a*l,a*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+n)}}function ii(S,t){switch(t.constructor){case Float32Array:return S;case Uint16Array:return S/65535;case Uint8Array:return S/255;case Int16Array:return Math.max(S/32767,-1);case Int8Array:return Math.max(S/127,-1);default:throw new Error("Invalid component type.")}}function vr(S,t){switch(t.constructor){case Float32Array:return S;case Uint16Array:return Math.round(S*65535);case Uint8Array:return Math.round(S*255);case Int16Array:return Math.round(S*32767);case Int8Array:return Math.round(S*127);default:throw new Error("Invalid component type.")}}var Mf=Object.freeze({__proto__:null,DEG2RAD:oo,RAD2DEG:fo,ceilPowerOfTwo:ad,clamp:Kr,damp:ff,degToRad:xf,denormalize:ii,euclideanModulo:Rl,floorPowerOfTwo:ha,generateUUID:Dn,inverseLerp:hf,isPowerOfTwo:_l,lerp:ao,mapLinear:df,normalize:vr,pingpong:pf,radToDeg:wf,randFloat:vf,randFloatSpread:bf,randInt:yf,seededRandom:_f,setQuaternionFromProperEuler:Sf,smootherstep:gf,smoothstep:mf});class Qt{constructor(t=0,r=0){Qt.prototype.isVector2=!0,this.x=t,this.y=r}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,r){return this.x=t,this.y=r,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this}addScaledVector(t,r){return this.x+=t.x*r,this.y+=t.y*r,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const r=this.x,i=this.y,n=t.elements;return this.x=n[0]*r+n[3]*i+n[6],this.y=n[1]*r+n[4]*i+n[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,r){return this.x=Math.max(t.x,Math.min(r.x,this.x)),this.y=Math.max(t.y,Math.min(r.y,this.y)),this}clampScalar(t,r){return this.x=Math.max(t,Math.min(r,this.x)),this.y=Math.max(t,Math.min(r,this.y)),this}clampLength(t,r){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(r,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const r=this.x-t.x,i=this.y-t.y;return r*r+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this}lerpVectors(t,r,i){return this.x=t.x+(r.x-t.x)*i,this.y=t.y+(r.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,r=0){return this.x=t[r],this.y=t[r+1],this}toArray(t=[],r=0){return t[r]=this.x,t[r+1]=this.y,t}fromBufferAttribute(t,r){return this.x=t.getX(r),this.y=t.getY(r),this}rotateAround(t,r){const i=Math.cos(r),n=Math.sin(r),o=this.x-t.x,s=this.y-t.y;return this.x=o*i-s*n+t.x,this.y=o*n+s*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class pn{constructor(){pn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(t,r,i,n,o,s,a,f,h){const l=this.elements;return l[0]=t,l[1]=n,l[2]=a,l[3]=r,l[4]=o,l[5]=f,l[6]=i,l[7]=s,l[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const r=this.elements,i=t.elements;return r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r[4]=i[4],r[5]=i[5],r[6]=i[6],r[7]=i[7],r[8]=i[8],this}extractBasis(t,r,i){return t.setFromMatrix3Column(this,0),r.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const r=t.elements;return this.set(r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,r){const i=t.elements,n=r.elements,o=this.elements,s=i[0],a=i[3],f=i[6],h=i[1],l=i[4],u=i[7],c=i[2],d=i[5],y=i[8],p=n[0],m=n[3],g=n[6],v=n[1],x=n[4],T=n[7],w=n[2],b=n[5],C=n[8];return o[0]=s*p+a*v+f*w,o[3]=s*m+a*x+f*b,o[6]=s*g+a*T+f*C,o[1]=h*p+l*v+u*w,o[4]=h*m+l*x+u*b,o[7]=h*g+l*T+u*C,o[2]=c*p+d*v+y*w,o[5]=c*m+d*x+y*b,o[8]=c*g+d*T+y*C,this}multiplyScalar(t){const r=this.elements;return r[0]*=t,r[3]*=t,r[6]*=t,r[1]*=t,r[4]*=t,r[7]*=t,r[2]*=t,r[5]*=t,r[8]*=t,this}determinant(){const t=this.elements,r=t[0],i=t[1],n=t[2],o=t[3],s=t[4],a=t[5],f=t[6],h=t[7],l=t[8];return r*s*l-r*a*h-i*o*l+i*a*f+n*o*h-n*s*f}invert(){const t=this.elements,r=t[0],i=t[1],n=t[2],o=t[3],s=t[4],a=t[5],f=t[6],h=t[7],l=t[8],u=l*s-a*h,c=a*f-l*o,d=h*o-s*f,y=r*u+i*c+n*d;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);const p=1/y;return t[0]=u*p,t[1]=(n*h-l*i)*p,t[2]=(a*i-n*s)*p,t[3]=c*p,t[4]=(l*r-n*f)*p,t[5]=(n*o-a*r)*p,t[6]=d*p,t[7]=(i*f-h*r)*p,t[8]=(s*r-i*o)*p,this}transpose(){let t;const r=this.elements;return t=r[1],r[1]=r[3],r[3]=t,t=r[2],r[2]=r[6],r[6]=t,t=r[5],r[5]=r[7],r[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const r=this.elements;return t[0]=r[0],t[1]=r[3],t[2]=r[6],t[3]=r[1],t[4]=r[4],t[5]=r[7],t[6]=r[2],t[7]=r[5],t[8]=r[8],this}setUvTransform(t,r,i,n,o,s,a){const f=Math.cos(o),h=Math.sin(o);return this.set(i*f,i*h,-i*(f*s+h*a)+s+t,-n*h,n*f,-n*(-h*s+f*a)+a+r,0,0,1),this}scale(t,r){return this.premultiply(Ia.makeScale(t,r)),this}rotate(t){return this.premultiply(Ia.makeRotation(-t)),this}translate(t,r){return this.premultiply(Ia.makeTranslation(t,r)),this}makeTranslation(t,r){return this.set(1,0,t,0,1,r,0,0,1),this}makeRotation(t){const r=Math.cos(t),i=Math.sin(t);return this.set(r,-i,0,i,r,0,0,0,1),this}makeScale(t,r){return this.set(t,0,0,0,r,0,0,0,1),this}equals(t){const r=this.elements,i=t.elements;for(let n=0;n<9;n++)if(r[n]!==i[n])return!1;return!0}fromArray(t,r=0){for(let i=0;i<9;i++)this.elements[i]=t[i+r];return this}toArray(t=[],r=0){const i=this.elements;return t[r]=i[0],t[r+1]=i[1],t[r+2]=i[2],t[r+3]=i[3],t[r+4]=i[4],t[r+5]=i[5],t[r+6]=i[6],t[r+7]=i[7],t[r+8]=i[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const Ia=new pn;function ld(S){for(let t=S.length-1;t>=0;--t)if(S[t]>=65535)return!0;return!1}function po(S){return document.createElementNS("http://www.w3.org/1999/xhtml",S)}function Gi(S){return S<.04045?S*.0773993808:Math.pow(S*.9478672986+.0521327014,2.4)}function la(S){return S<.0031308?S*12.92:1.055*Math.pow(S,.41666)-.055}const Na={[Un]:{[ho]:Gi},[ho]:{[Un]:la}},Jr={legacyMode:!0,get workingColorSpace(){return ho},set workingColorSpace(S){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(S,t,r){if(this.legacyMode||t===r||!t||!r)return S;if(Na[t]&&Na[t][r]!==void 0){const i=Na[t][r];return S.r=i(S.r),S.g=i(S.g),S.b=i(S.b),S}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(S,t){return this.convert(S,this.workingColorSpace,t)},toWorkingColorSpace:function(S,t){return this.convert(S,t,this.workingColorSpace)}},ud={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ur={r:0,g:0,b:0},Ln={h:0,s:0,l:0},No={h:0,s:0,l:0};function Fa(S,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?S+(t-S)*6*r:r<1/2?t:r<2/3?S+(t-S)*6*(2/3-r):S}function Fo(S,t){return t.r=S.r,t.g=S.g,t.b=S.b,t}class ht{constructor(t,r,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,r===void 0&&i===void 0?this.set(t):this.setRGB(t,r,i)}set(t){return t&&t.isColor?this.copy(t):typeof t=="number"?this.setHex(t):typeof t=="string"&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,r=Un){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,Jr.toWorkingColorSpace(this,r),this}setRGB(t,r,i,n=Jr.workingColorSpace){return this.r=t,this.g=r,this.b=i,Jr.toWorkingColorSpace(this,n),this}setHSL(t,r,i,n=Jr.workingColorSpace){if(t=Rl(t,1),r=Kr(r,0,1),i=Kr(i,0,1),r===0)this.r=this.g=this.b=i;else{const o=i<=.5?i*(1+r):i+r-i*r,s=2*i-o;this.r=Fa(s,o,t+1/3),this.g=Fa(s,o,t),this.b=Fa(s,o,t-1/3)}return Jr.toWorkingColorSpace(this,n),this}setStyle(t,r=Un){function i(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let o;const s=n[1],a=n[2];switch(s){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,Jr.toWorkingColorSpace(this,r),i(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,Jr.toWorkingColorSpace(this,r),i(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const f=parseFloat(o[1])/360,h=parseFloat(o[2])/100,l=parseFloat(o[3])/100;return i(o[4]),this.setHSL(f,h,l,r)}break}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(t)){const o=n[1],s=o.length;if(s===3)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,Jr.toWorkingColorSpace(this,r),this;if(s===6)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,Jr.toWorkingColorSpace(this,r),this}return t&&t.length>0?this.setColorName(t,r):this}setColorName(t,r=Un){const i=ud[t.toLowerCase()];return i!==void 0?this.setHex(i,r):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Gi(t.r),this.g=Gi(t.g),this.b=Gi(t.b),this}copyLinearToSRGB(t){return this.r=la(t.r),this.g=la(t.g),this.b=la(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Un){return Jr.fromWorkingColorSpace(Fo(this,Ur),t),Kr(Ur.r*255,0,255)<<16^Kr(Ur.g*255,0,255)<<8^Kr(Ur.b*255,0,255)<<0}getHexString(t=Un){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,r=Jr.workingColorSpace){Jr.fromWorkingColorSpace(Fo(this,Ur),r);const i=Ur.r,n=Ur.g,o=Ur.b,s=Math.max(i,n,o),a=Math.min(i,n,o);let f,h;const l=(a+s)/2;if(a===s)f=0,h=0;else{const u=s-a;switch(h=l<=.5?u/(s+a):u/(2-s-a),s){case i:f=(n-o)/u+(n<o?6:0);break;case n:f=(o-i)/u+2;break;case o:f=(i-n)/u+4;break}f/=6}return t.h=f,t.s=h,t.l=l,t}getRGB(t,r=Jr.workingColorSpace){return Jr.fromWorkingColorSpace(Fo(this,Ur),r),t.r=Ur.r,t.g=Ur.g,t.b=Ur.b,t}getStyle(t=Un){return Jr.fromWorkingColorSpace(Fo(this,Ur),t),t!==Un?`color(${t} ${Ur.r} ${Ur.g} ${Ur.b})`:`rgb(${Ur.r*255|0},${Ur.g*255|0},${Ur.b*255|0})`}offsetHSL(t,r,i){return this.getHSL(Ln),Ln.h+=t,Ln.s+=r,Ln.l+=i,this.setHSL(Ln.h,Ln.s,Ln.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,r){return this.r=t.r+r.r,this.g=t.g+r.g,this.b=t.b+r.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,r){return this.r+=(t.r-this.r)*r,this.g+=(t.g-this.g)*r,this.b+=(t.b-this.b)*r,this}lerpColors(t,r,i){return this.r=t.r+(r.r-t.r)*i,this.g=t.g+(r.g-t.g)*i,this.b=t.b+(r.b-t.b)*i,this}lerpHSL(t,r){this.getHSL(Ln),t.getHSL(No);const i=ao(Ln.h,No.h,r),n=ao(Ln.s,No.s,r),o=ao(Ln.l,No.l,r);return this.setHSL(i,n,o),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,r=0){return this.r=t[r],this.g=t[r+1],this.b=t[r+2],this}toArray(t=[],r=0){return t[r]=this.r,t[r+1]=this.g,t[r+2]=this.b,t}fromBufferAttribute(t,r){return this.r=t.getX(r),this.g=t.getY(r),this.b=t.getZ(r),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}ht.NAMES=ud;let ns;class cd{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let r;if(t instanceof HTMLCanvasElement)r=t;else{ns===void 0&&(ns=po("canvas")),ns.width=t.width,ns.height=t.height;const i=ns.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),r=ns}return r.width>2048||r.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),r.toDataURL("image/jpeg",.6)):r.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const r=po("canvas");r.width=t.width,r.height=t.height;const i=r.getContext("2d");i.drawImage(t,0,0,t.width,t.height);const n=i.getImageData(0,0,t.width,t.height),o=n.data;for(let s=0;s<o.length;s++)o[s]=Gi(o[s]/255)*255;return i.putImageData(n,0,0),r}else if(t.data){const r=t.data.slice(0);for(let i=0;i<r.length;i++)r instanceof Uint8Array||r instanceof Uint8ClampedArray?r[i]=Math.floor(Gi(r[i]/255)*255):r[i]=Gi(r[i]);return{data:r,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}class dd{constructor(t=null){this.isSource=!0,this.uuid=Dn(),this.data=t,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const r=t===void 0||typeof t=="string";if(!r&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const i={uuid:this.uuid,url:""},n=this.data;if(n!==null){let o;if(Array.isArray(n)){o=[];for(let s=0,a=n.length;s<a;s++)n[s].isDataTexture?o.push(Ua(n[s].image)):o.push(Ua(n[s]))}else o=Ua(n);i.url=o}return r||(t.images[this.uuid]=i),i}}function Ua(S){return typeof HTMLImageElement<"u"&&S instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&S instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&S instanceof ImageBitmap?cd.getDataURL(S):S.data?{data:Array.from(S.data),width:S.width,height:S.height,type:S.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Tf=0;class Xr extends Xi{constructor(t=Xr.DEFAULT_IMAGE,r=Xr.DEFAULT_MAPPING,i=Mn,n=Mn,o=an,s=zi,a=Tn,f=Vi,h=Xr.DEFAULT_ANISOTROPY,l=Hi){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Tf++}),this.uuid=Dn(),this.name="",this.source=new dd(t),this.mipmaps=[],this.mapping=r,this.wrapS=i,this.wrapT=n,this.magFilter=o,this.minFilter=s,this.anisotropy=h,this.format=a,this.internalFormat=null,this.type=f,this.offset=new Qt(0,0),this.repeat=new Qt(1,1),this.center=new Qt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new pn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=l,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const r=t===void 0||typeof t=="string";if(!r&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),r||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==rd)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case As:t.x=t.x-Math.floor(t.x);break;case Mn:t.x=t.x<0?0:1;break;case da:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case As:t.y=t.y-Math.floor(t.y);break;case Mn:t.y=t.y<0?0:1;break;case da:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}}Xr.DEFAULT_IMAGE=null;Xr.DEFAULT_MAPPING=rd;Xr.DEFAULT_ANISOTROPY=1;class br{constructor(t=0,r=0,i=0,n=1){br.prototype.isVector4=!0,this.x=t,this.y=r,this.z=i,this.w=n}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,r,i,n){return this.x=t,this.y=r,this.z=i,this.w=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;case 3:this.w=r;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this.z=t.z+r.z,this.w=t.w+r.w,this}addScaledVector(t,r){return this.x+=t.x*r,this.y+=t.y*r,this.z+=t.z*r,this.w+=t.w*r,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this.z=t.z-r.z,this.w=t.w-r.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const r=this.x,i=this.y,n=this.z,o=this.w,s=t.elements;return this.x=s[0]*r+s[4]*i+s[8]*n+s[12]*o,this.y=s[1]*r+s[5]*i+s[9]*n+s[13]*o,this.z=s[2]*r+s[6]*i+s[10]*n+s[14]*o,this.w=s[3]*r+s[7]*i+s[11]*n+s[15]*o,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const r=Math.sqrt(1-t.w*t.w);return r<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/r,this.y=t.y/r,this.z=t.z/r),this}setAxisAngleFromRotationMatrix(t){let r,i,n,o;const f=t.elements,h=f[0],l=f[4],u=f[8],c=f[1],d=f[5],y=f[9],p=f[2],m=f[6],g=f[10];if(Math.abs(l-c)<.01&&Math.abs(u-p)<.01&&Math.abs(y-m)<.01){if(Math.abs(l+c)<.1&&Math.abs(u+p)<.1&&Math.abs(y+m)<.1&&Math.abs(h+d+g-3)<.1)return this.set(1,0,0,0),this;r=Math.PI;const x=(h+1)/2,T=(d+1)/2,w=(g+1)/2,b=(l+c)/4,C=(u+p)/4,A=(y+m)/4;return x>T&&x>w?x<.01?(i=0,n=.707106781,o=.707106781):(i=Math.sqrt(x),n=b/i,o=C/i):T>w?T<.01?(i=.707106781,n=0,o=.707106781):(n=Math.sqrt(T),i=b/n,o=A/n):w<.01?(i=.707106781,n=.707106781,o=0):(o=Math.sqrt(w),i=C/o,n=A/o),this.set(i,n,o,r),this}let v=Math.sqrt((m-y)*(m-y)+(u-p)*(u-p)+(c-l)*(c-l));return Math.abs(v)<.001&&(v=1),this.x=(m-y)/v,this.y=(u-p)/v,this.z=(c-l)/v,this.w=Math.acos((h+d+g-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,r){return this.x=Math.max(t.x,Math.min(r.x,this.x)),this.y=Math.max(t.y,Math.min(r.y,this.y)),this.z=Math.max(t.z,Math.min(r.z,this.z)),this.w=Math.max(t.w,Math.min(r.w,this.w)),this}clampScalar(t,r){return this.x=Math.max(t,Math.min(r,this.x)),this.y=Math.max(t,Math.min(r,this.y)),this.z=Math.max(t,Math.min(r,this.z)),this.w=Math.max(t,Math.min(r,this.w)),this}clampLength(t,r){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(r,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this.z+=(t.z-this.z)*r,this.w+=(t.w-this.w)*r,this}lerpVectors(t,r,i){return this.x=t.x+(r.x-t.x)*i,this.y=t.y+(r.y-t.y)*i,this.z=t.z+(r.z-t.z)*i,this.w=t.w+(r.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,r=0){return this.x=t[r],this.y=t[r+1],this.z=t[r+2],this.w=t[r+3],this}toArray(t=[],r=0){return t[r]=this.x,t[r+1]=this.y,t[r+2]=this.z,t[r+3]=this.w,t}fromBufferAttribute(t,r){return this.x=t.getX(r),this.y=t.getY(r),this.z=t.getZ(r),this.w=t.getW(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Si extends Xi{constructor(t=1,r=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=r,this.depth=1,this.scissor=new br(0,0,t,r),this.scissorTest=!1,this.viewport=new br(0,0,t,r);const n={width:t,height:r,depth:1};this.texture=new Xr(n,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:an,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(t,r,i=1){(this.width!==t||this.height!==r||this.depth!==i)&&(this.width=t,this.height=r,this.depth=i,this.texture.image.width=t,this.texture.image.height=r,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,t,r),this.scissor.set(0,0,t,r)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const r=Object.assign({},t.texture.image);return this.texture.source=new dd(r),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class hd extends Xr{constructor(t=null,r=1,i=1,n=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:r,height:i,depth:n},this.magFilter=Nr,this.minFilter=Nr,this.wrapR=Mn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ef extends Xr{constructor(t=null,r=1,i=1,n=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:r,height:i,depth:n},this.magFilter=Nr,this.minFilter=Nr,this.wrapR=Mn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Hn{constructor(t=0,r=0,i=0,n=1){this.isQuaternion=!0,this._x=t,this._y=r,this._z=i,this._w=n}static slerpFlat(t,r,i,n,o,s,a){let f=i[n+0],h=i[n+1],l=i[n+2],u=i[n+3];const c=o[s+0],d=o[s+1],y=o[s+2],p=o[s+3];if(a===0){t[r+0]=f,t[r+1]=h,t[r+2]=l,t[r+3]=u;return}if(a===1){t[r+0]=c,t[r+1]=d,t[r+2]=y,t[r+3]=p;return}if(u!==p||f!==c||h!==d||l!==y){let m=1-a;const g=f*c+h*d+l*y+u*p,v=g>=0?1:-1,x=1-g*g;if(x>Number.EPSILON){const w=Math.sqrt(x),b=Math.atan2(w,g*v);m=Math.sin(m*b)/w,a=Math.sin(a*b)/w}const T=a*v;if(f=f*m+c*T,h=h*m+d*T,l=l*m+y*T,u=u*m+p*T,m===1-a){const w=1/Math.sqrt(f*f+h*h+l*l+u*u);f*=w,h*=w,l*=w,u*=w}}t[r]=f,t[r+1]=h,t[r+2]=l,t[r+3]=u}static multiplyQuaternionsFlat(t,r,i,n,o,s){const a=i[n],f=i[n+1],h=i[n+2],l=i[n+3],u=o[s],c=o[s+1],d=o[s+2],y=o[s+3];return t[r]=a*y+l*u+f*d-h*c,t[r+1]=f*y+l*c+h*u-a*d,t[r+2]=h*y+l*d+a*c-f*u,t[r+3]=l*y-a*u-f*c-h*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,r,i,n){return this._x=t,this._y=r,this._z=i,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,r){const i=t._x,n=t._y,o=t._z,s=t._order,a=Math.cos,f=Math.sin,h=a(i/2),l=a(n/2),u=a(o/2),c=f(i/2),d=f(n/2),y=f(o/2);switch(s){case"XYZ":this._x=c*l*u+h*d*y,this._y=h*d*u-c*l*y,this._z=h*l*y+c*d*u,this._w=h*l*u-c*d*y;break;case"YXZ":this._x=c*l*u+h*d*y,this._y=h*d*u-c*l*y,this._z=h*l*y-c*d*u,this._w=h*l*u+c*d*y;break;case"ZXY":this._x=c*l*u-h*d*y,this._y=h*d*u+c*l*y,this._z=h*l*y+c*d*u,this._w=h*l*u-c*d*y;break;case"ZYX":this._x=c*l*u-h*d*y,this._y=h*d*u+c*l*y,this._z=h*l*y-c*d*u,this._w=h*l*u+c*d*y;break;case"YZX":this._x=c*l*u+h*d*y,this._y=h*d*u+c*l*y,this._z=h*l*y-c*d*u,this._w=h*l*u-c*d*y;break;case"XZY":this._x=c*l*u-h*d*y,this._y=h*d*u-c*l*y,this._z=h*l*y+c*d*u,this._w=h*l*u+c*d*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return r!==!1&&this._onChangeCallback(),this}setFromAxisAngle(t,r){const i=r/2,n=Math.sin(i);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const r=t.elements,i=r[0],n=r[4],o=r[8],s=r[1],a=r[5],f=r[9],h=r[2],l=r[6],u=r[10],c=i+a+u;if(c>0){const d=.5/Math.sqrt(c+1);this._w=.25/d,this._x=(l-f)*d,this._y=(o-h)*d,this._z=(s-n)*d}else if(i>a&&i>u){const d=2*Math.sqrt(1+i-a-u);this._w=(l-f)/d,this._x=.25*d,this._y=(n+s)/d,this._z=(o+h)/d}else if(a>u){const d=2*Math.sqrt(1+a-i-u);this._w=(o-h)/d,this._x=(n+s)/d,this._y=.25*d,this._z=(f+l)/d}else{const d=2*Math.sqrt(1+u-i-a);this._w=(s-n)/d,this._x=(o+h)/d,this._y=(f+l)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(t,r){let i=t.dot(r)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*r.z-t.z*r.y,this._y=t.z*r.x-t.x*r.z,this._z=t.x*r.y-t.y*r.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Kr(this.dot(t),-1,1)))}rotateTowards(t,r){const i=this.angleTo(t);if(i===0)return this;const n=Math.min(1,r/i);return this.slerp(t,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,r){const i=t._x,n=t._y,o=t._z,s=t._w,a=r._x,f=r._y,h=r._z,l=r._w;return this._x=i*l+s*a+n*h-o*f,this._y=n*l+s*f+o*a-i*h,this._z=o*l+s*h+i*f-n*a,this._w=s*l-i*a-n*f-o*h,this._onChangeCallback(),this}slerp(t,r){if(r===0)return this;if(r===1)return this.copy(t);const i=this._x,n=this._y,o=this._z,s=this._w;let a=s*t._w+i*t._x+n*t._y+o*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=s,this._x=i,this._y=n,this._z=o,this;const f=1-a*a;if(f<=Number.EPSILON){const d=1-r;return this._w=d*s+r*this._w,this._x=d*i+r*this._x,this._y=d*n+r*this._y,this._z=d*o+r*this._z,this.normalize(),this._onChangeCallback(),this}const h=Math.sqrt(f),l=Math.atan2(h,a),u=Math.sin((1-r)*l)/h,c=Math.sin(r*l)/h;return this._w=s*u+this._w*c,this._x=i*u+this._x*c,this._y=n*u+this._y*c,this._z=o*u+this._z*c,this._onChangeCallback(),this}slerpQuaternions(t,r,i){return this.copy(t).slerp(r,i)}random(){const t=Math.random(),r=Math.sqrt(1-t),i=Math.sqrt(t),n=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(r*Math.cos(n),i*Math.sin(o),i*Math.cos(o),r*Math.sin(n))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,r=0){return this._x=t[r],this._y=t[r+1],this._z=t[r+2],this._w=t[r+3],this._onChangeCallback(),this}toArray(t=[],r=0){return t[r]=this._x,t[r+1]=this._y,t[r+2]=this._z,t[r+3]=this._w,t}fromBufferAttribute(t,r){return this._x=t.getX(r),this._y=t.getY(r),this._z=t.getZ(r),this._w=t.getW(r),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Ve{constructor(t=0,r=0,i=0){Ve.prototype.isVector3=!0,this.x=t,this.y=r,this.z=i}set(t,r,i){return i===void 0&&(i=this.z),this.x=t,this.y=r,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this.z=t.z+r.z,this}addScaledVector(t,r){return this.x+=t.x*r,this.y+=t.y*r,this.z+=t.z*r,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this.z=t.z-r.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,r){return this.x=t.x*r.x,this.y=t.y*r.y,this.z=t.z*r.z,this}applyEuler(t){return this.applyQuaternion(Iu.setFromEuler(t))}applyAxisAngle(t,r){return this.applyQuaternion(Iu.setFromAxisAngle(t,r))}applyMatrix3(t){const r=this.x,i=this.y,n=this.z,o=t.elements;return this.x=o[0]*r+o[3]*i+o[6]*n,this.y=o[1]*r+o[4]*i+o[7]*n,this.z=o[2]*r+o[5]*i+o[8]*n,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const r=this.x,i=this.y,n=this.z,o=t.elements,s=1/(o[3]*r+o[7]*i+o[11]*n+o[15]);return this.x=(o[0]*r+o[4]*i+o[8]*n+o[12])*s,this.y=(o[1]*r+o[5]*i+o[9]*n+o[13])*s,this.z=(o[2]*r+o[6]*i+o[10]*n+o[14])*s,this}applyQuaternion(t){const r=this.x,i=this.y,n=this.z,o=t.x,s=t.y,a=t.z,f=t.w,h=f*r+s*n-a*i,l=f*i+a*r-o*n,u=f*n+o*i-s*r,c=-o*r-s*i-a*n;return this.x=h*f+c*-o+l*-a-u*-s,this.y=l*f+c*-s+u*-o-h*-a,this.z=u*f+c*-a+h*-s-l*-o,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const r=this.x,i=this.y,n=this.z,o=t.elements;return this.x=o[0]*r+o[4]*i+o[8]*n,this.y=o[1]*r+o[5]*i+o[9]*n,this.z=o[2]*r+o[6]*i+o[10]*n,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,r){return this.x=Math.max(t.x,Math.min(r.x,this.x)),this.y=Math.max(t.y,Math.min(r.y,this.y)),this.z=Math.max(t.z,Math.min(r.z,this.z)),this}clampScalar(t,r){return this.x=Math.max(t,Math.min(r,this.x)),this.y=Math.max(t,Math.min(r,this.y)),this.z=Math.max(t,Math.min(r,this.z)),this}clampLength(t,r){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(r,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this.z+=(t.z-this.z)*r,this}lerpVectors(t,r,i){return this.x=t.x+(r.x-t.x)*i,this.y=t.y+(r.y-t.y)*i,this.z=t.z+(r.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,r){const i=t.x,n=t.y,o=t.z,s=r.x,a=r.y,f=r.z;return this.x=n*f-o*a,this.y=o*s-i*f,this.z=i*a-n*s,this}projectOnVector(t){const r=t.lengthSq();if(r===0)return this.set(0,0,0);const i=t.dot(this)/r;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return Ba.copy(this).projectOnVector(t),this.sub(Ba)}reflect(t){return this.sub(Ba.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const r=Math.sqrt(this.lengthSq()*t.lengthSq());if(r===0)return Math.PI/2;const i=this.dot(t)/r;return Math.acos(Kr(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const r=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return r*r+i*i+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,r,i){const n=Math.sin(r)*t;return this.x=n*Math.sin(i),this.y=Math.cos(r)*t,this.z=n*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,r,i){return this.x=t*Math.sin(r),this.y=i,this.z=t*Math.cos(r),this}setFromMatrixPosition(t){const r=t.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this}setFromMatrixScale(t){const r=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),n=this.setFromMatrixColumn(t,2).length();return this.x=r,this.y=i,this.z=n,this}setFromMatrixColumn(t,r){return this.fromArray(t.elements,r*4)}setFromMatrix3Column(t,r){return this.fromArray(t.elements,r*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,r=0){return this.x=t[r],this.y=t[r+1],this.z=t[r+2],this}toArray(t=[],r=0){return t[r]=this.x,t[r+1]=this.y,t[r+2]=this.z,t}fromBufferAttribute(t,r){return this.x=t.getX(r),this.y=t.getY(r),this.z=t.getZ(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=(Math.random()-.5)*2,r=Math.random()*Math.PI*2,i=Math.sqrt(1-t**2);return this.x=i*Math.cos(r),this.y=i*Math.sin(r),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Ba=new Ve,Iu=new Hn;class Os{constructor(t=new Ve(1/0,1/0,1/0),r=new Ve(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=r}set(t,r){return this.min.copy(t),this.max.copy(r),this}setFromArray(t){let r=1/0,i=1/0,n=1/0,o=-1/0,s=-1/0,a=-1/0;for(let f=0,h=t.length;f<h;f+=3){const l=t[f],u=t[f+1],c=t[f+2];l<r&&(r=l),u<i&&(i=u),c<n&&(n=c),l>o&&(o=l),u>s&&(s=u),c>a&&(a=c)}return this.min.set(r,i,n),this.max.set(o,s,a),this}setFromBufferAttribute(t){let r=1/0,i=1/0,n=1/0,o=-1/0,s=-1/0,a=-1/0;for(let f=0,h=t.count;f<h;f++){const l=t.getX(f),u=t.getY(f),c=t.getZ(f);l<r&&(r=l),u<i&&(i=u),c<n&&(n=c),l>o&&(o=l),u>s&&(s=u),c>a&&(a=c)}return this.min.set(r,i,n),this.max.set(o,s,a),this}setFromPoints(t){this.makeEmpty();for(let r=0,i=t.length;r<i;r++)this.expandByPoint(t[r]);return this}setFromCenterAndSize(t,r){const i=Ai.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,r=!1){return this.makeEmpty(),this.expandByObject(t,r)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,r=!1){t.updateWorldMatrix(!1,!1);const i=t.geometry;if(i!==void 0)if(r&&i.attributes!=null&&i.attributes.position!==void 0){const o=i.attributes.position;for(let s=0,a=o.count;s<a;s++)Ai.fromBufferAttribute(o,s).applyMatrix4(t.matrixWorld),this.expandByPoint(Ai)}else i.boundingBox===null&&i.computeBoundingBox(),Ga.copy(i.boundingBox),Ga.applyMatrix4(t.matrixWorld),this.union(Ga);const n=t.children;for(let o=0,s=n.length;o<s;o++)this.expandByObject(n[o],r);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,r){return r.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,Ai),Ai.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let r,i;return t.normal.x>0?(r=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(r=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(r+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(r+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(r+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(r+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),r<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Xs),Uo.subVectors(this.max,Xs),is.subVectors(t.a,Xs),ss.subVectors(t.b,Xs),os.subVectors(t.c,Xs),fi.subVectors(ss,is),pi.subVectors(os,ss),Li.subVectors(is,os);let r=[0,-fi.z,fi.y,0,-pi.z,pi.y,0,-Li.z,Li.y,fi.z,0,-fi.x,pi.z,0,-pi.x,Li.z,0,-Li.x,-fi.y,fi.x,0,-pi.y,pi.x,0,-Li.y,Li.x,0];return!za(r,is,ss,os,Uo)||(r=[1,0,0,0,1,0,0,0,1],!za(r,is,ss,os,Uo))?!1:(Bo.crossVectors(fi,pi),r=[Bo.x,Bo.y,Bo.z],za(r,is,ss,os,Uo))}clampPoint(t,r){return r.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return Ai.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=this.getSize(Ai).length()*.5,t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(Kn[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Kn[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Kn[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Kn[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Kn[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Kn[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Kn[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Kn[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Kn),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Kn=[new Ve,new Ve,new Ve,new Ve,new Ve,new Ve,new Ve,new Ve],Ai=new Ve,Ga=new Os,is=new Ve,ss=new Ve,os=new Ve,fi=new Ve,pi=new Ve,Li=new Ve,Xs=new Ve,Uo=new Ve,Bo=new Ve,Pi=new Ve;function za(S,t,r,i,n){for(let o=0,s=S.length-3;o<=s;o+=3){Pi.fromArray(S,o);const a=n.x*Math.abs(Pi.x)+n.y*Math.abs(Pi.y)+n.z*Math.abs(Pi.z),f=t.dot(Pi),h=r.dot(Pi),l=i.dot(Pi);if(Math.max(-Math.max(f,h,l),Math.min(f,h,l))>a)return!1}return!0}const jf=new Os,Ys=new Ve,Va=new Ve;class Is{constructor(t=new Ve,r=-1){this.center=t,this.radius=r}set(t,r){return this.center.copy(t),this.radius=r,this}setFromPoints(t,r){const i=this.center;r!==void 0?i.copy(r):jf.setFromPoints(t).getCenter(i);let n=0;for(let o=0,s=t.length;o<s;o++)n=Math.max(n,i.distanceToSquared(t[o]));return this.radius=Math.sqrt(n),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const r=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=r*r}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,r){const i=this.center.distanceToSquared(t);return r.copy(t),i>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;Ys.subVectors(t,this.center);const r=Ys.lengthSq();if(r>this.radius*this.radius){const i=Math.sqrt(r),n=(i-this.radius)*.5;this.center.addScaledVector(Ys,n/i),this.radius+=n}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(Va.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(Ys.copy(t.center).add(Va)),this.expandByPoint(Ys.copy(t.center).sub(Va))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}const $n=new Ve,Ha=new Ve,Go=new Ve,mi=new Ve,Wa=new Ve,zo=new Ve,qa=new Ve;class Dl{constructor(t=new Ve,r=new Ve(0,0,-1)){this.origin=t,this.direction=r}set(t,r){return this.origin.copy(t),this.direction.copy(r),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,r){return r.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,$n)),this}closestPointToPoint(t,r){r.subVectors(t,this.origin);const i=r.dot(this.direction);return i<0?r.copy(this.origin):r.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const r=$n.subVectors(t,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(t):($n.copy(this.direction).multiplyScalar(r).add(this.origin),$n.distanceToSquared(t))}distanceSqToSegment(t,r,i,n){Ha.copy(t).add(r).multiplyScalar(.5),Go.copy(r).sub(t).normalize(),mi.copy(this.origin).sub(Ha);const o=t.distanceTo(r)*.5,s=-this.direction.dot(Go),a=mi.dot(this.direction),f=-mi.dot(Go),h=mi.lengthSq(),l=Math.abs(1-s*s);let u,c,d,y;if(l>0)if(u=s*f-a,c=s*a-f,y=o*l,u>=0)if(c>=-y)if(c<=y){const p=1/l;u*=p,c*=p,d=u*(u+s*c+2*a)+c*(s*u+c+2*f)+h}else c=o,u=Math.max(0,-(s*c+a)),d=-u*u+c*(c+2*f)+h;else c=-o,u=Math.max(0,-(s*c+a)),d=-u*u+c*(c+2*f)+h;else c<=-y?(u=Math.max(0,-(-s*o+a)),c=u>0?-o:Math.min(Math.max(-o,-f),o),d=-u*u+c*(c+2*f)+h):c<=y?(u=0,c=Math.min(Math.max(-o,-f),o),d=c*(c+2*f)+h):(u=Math.max(0,-(s*o+a)),c=u>0?o:Math.min(Math.max(-o,-f),o),d=-u*u+c*(c+2*f)+h);else c=s>0?-o:o,u=Math.max(0,-(s*c+a)),d=-u*u+c*(c+2*f)+h;return i&&i.copy(this.direction).multiplyScalar(u).add(this.origin),n&&n.copy(Go).multiplyScalar(c).add(Ha),d}intersectSphere(t,r){$n.subVectors(t.center,this.origin);const i=$n.dot(this.direction),n=$n.dot($n)-i*i,o=t.radius*t.radius;if(n>o)return null;const s=Math.sqrt(o-n),a=i-s,f=i+s;return a<0&&f<0?null:a<0?this.at(f,r):this.at(a,r)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const r=t.normal.dot(this.direction);if(r===0)return t.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(t.normal)+t.constant)/r;return i>=0?i:null}intersectPlane(t,r){const i=this.distanceToPlane(t);return i===null?null:this.at(i,r)}intersectsPlane(t){const r=t.distanceToPoint(this.origin);return r===0||t.normal.dot(this.direction)*r<0}intersectBox(t,r){let i,n,o,s,a,f;const h=1/this.direction.x,l=1/this.direction.y,u=1/this.direction.z,c=this.origin;return h>=0?(i=(t.min.x-c.x)*h,n=(t.max.x-c.x)*h):(i=(t.max.x-c.x)*h,n=(t.min.x-c.x)*h),l>=0?(o=(t.min.y-c.y)*l,s=(t.max.y-c.y)*l):(o=(t.max.y-c.y)*l,s=(t.min.y-c.y)*l),i>s||o>n||((o>i||isNaN(i))&&(i=o),(s<n||isNaN(n))&&(n=s),u>=0?(a=(t.min.z-c.z)*u,f=(t.max.z-c.z)*u):(a=(t.max.z-c.z)*u,f=(t.min.z-c.z)*u),i>f||a>n)||((a>i||i!==i)&&(i=a),(f<n||n!==n)&&(n=f),n<0)?null:this.at(i>=0?i:n,r)}intersectsBox(t){return this.intersectBox(t,$n)!==null}intersectTriangle(t,r,i,n,o){Wa.subVectors(r,t),zo.subVectors(i,t),qa.crossVectors(Wa,zo);let s=this.direction.dot(qa),a;if(s>0){if(n)return null;a=1}else if(s<0)a=-1,s=-s;else return null;mi.subVectors(this.origin,t);const f=a*this.direction.dot(zo.crossVectors(mi,zo));if(f<0)return null;const h=a*this.direction.dot(Wa.cross(mi));if(h<0||f+h>s)return null;const l=-a*mi.dot(qa);return l<0?null:this.at(l/s,o)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class or{constructor(){or.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,r,i,n,o,s,a,f,h,l,u,c,d,y,p,m){const g=this.elements;return g[0]=t,g[4]=r,g[8]=i,g[12]=n,g[1]=o,g[5]=s,g[9]=a,g[13]=f,g[2]=h,g[6]=l,g[10]=u,g[14]=c,g[3]=d,g[7]=y,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new or().fromArray(this.elements)}copy(t){const r=this.elements,i=t.elements;return r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r[4]=i[4],r[5]=i[5],r[6]=i[6],r[7]=i[7],r[8]=i[8],r[9]=i[9],r[10]=i[10],r[11]=i[11],r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15],this}copyPosition(t){const r=this.elements,i=t.elements;return r[12]=i[12],r[13]=i[13],r[14]=i[14],this}setFromMatrix3(t){const r=t.elements;return this.set(r[0],r[3],r[6],0,r[1],r[4],r[7],0,r[2],r[5],r[8],0,0,0,0,1),this}extractBasis(t,r,i){return t.setFromMatrixColumn(this,0),r.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,r,i){return this.set(t.x,r.x,i.x,0,t.y,r.y,i.y,0,t.z,r.z,i.z,0,0,0,0,1),this}extractRotation(t){const r=this.elements,i=t.elements,n=1/as.setFromMatrixColumn(t,0).length(),o=1/as.setFromMatrixColumn(t,1).length(),s=1/as.setFromMatrixColumn(t,2).length();return r[0]=i[0]*n,r[1]=i[1]*n,r[2]=i[2]*n,r[3]=0,r[4]=i[4]*o,r[5]=i[5]*o,r[6]=i[6]*o,r[7]=0,r[8]=i[8]*s,r[9]=i[9]*s,r[10]=i[10]*s,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromEuler(t){const r=this.elements,i=t.x,n=t.y,o=t.z,s=Math.cos(i),a=Math.sin(i),f=Math.cos(n),h=Math.sin(n),l=Math.cos(o),u=Math.sin(o);if(t.order==="XYZ"){const c=s*l,d=s*u,y=a*l,p=a*u;r[0]=f*l,r[4]=-f*u,r[8]=h,r[1]=d+y*h,r[5]=c-p*h,r[9]=-a*f,r[2]=p-c*h,r[6]=y+d*h,r[10]=s*f}else if(t.order==="YXZ"){const c=f*l,d=f*u,y=h*l,p=h*u;r[0]=c+p*a,r[4]=y*a-d,r[8]=s*h,r[1]=s*u,r[5]=s*l,r[9]=-a,r[2]=d*a-y,r[6]=p+c*a,r[10]=s*f}else if(t.order==="ZXY"){const c=f*l,d=f*u,y=h*l,p=h*u;r[0]=c-p*a,r[4]=-s*u,r[8]=y+d*a,r[1]=d+y*a,r[5]=s*l,r[9]=p-c*a,r[2]=-s*h,r[6]=a,r[10]=s*f}else if(t.order==="ZYX"){const c=s*l,d=s*u,y=a*l,p=a*u;r[0]=f*l,r[4]=y*h-d,r[8]=c*h+p,r[1]=f*u,r[5]=p*h+c,r[9]=d*h-y,r[2]=-h,r[6]=a*f,r[10]=s*f}else if(t.order==="YZX"){const c=s*f,d=s*h,y=a*f,p=a*h;r[0]=f*l,r[4]=p-c*u,r[8]=y*u+d,r[1]=u,r[5]=s*l,r[9]=-a*l,r[2]=-h*l,r[6]=d*u+y,r[10]=c-p*u}else if(t.order==="XZY"){const c=s*f,d=s*h,y=a*f,p=a*h;r[0]=f*l,r[4]=-u,r[8]=h*l,r[1]=c*u+p,r[5]=s*l,r[9]=d*u-y,r[2]=y*u-d,r[6]=a*l,r[10]=p*u+c}return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Cf,t,Af)}lookAt(t,r,i){const n=this.elements;return hn.subVectors(t,r),hn.lengthSq()===0&&(hn.z=1),hn.normalize(),gi.crossVectors(i,hn),gi.lengthSq()===0&&(Math.abs(i.z)===1?hn.x+=1e-4:hn.z+=1e-4,hn.normalize(),gi.crossVectors(i,hn)),gi.normalize(),Vo.crossVectors(hn,gi),n[0]=gi.x,n[4]=Vo.x,n[8]=hn.x,n[1]=gi.y,n[5]=Vo.y,n[9]=hn.y,n[2]=gi.z,n[6]=Vo.z,n[10]=hn.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,r){const i=t.elements,n=r.elements,o=this.elements,s=i[0],a=i[4],f=i[8],h=i[12],l=i[1],u=i[5],c=i[9],d=i[13],y=i[2],p=i[6],m=i[10],g=i[14],v=i[3],x=i[7],T=i[11],w=i[15],b=n[0],C=n[4],A=n[8],M=n[12],k=n[1],P=n[5],F=n[9],I=n[13],B=n[2],H=n[6],G=n[10],W=n[14],Q=n[3],ne=n[7],U=n[11],D=n[15];return o[0]=s*b+a*k+f*B+h*Q,o[4]=s*C+a*P+f*H+h*ne,o[8]=s*A+a*F+f*G+h*U,o[12]=s*M+a*I+f*W+h*D,o[1]=l*b+u*k+c*B+d*Q,o[5]=l*C+u*P+c*H+d*ne,o[9]=l*A+u*F+c*G+d*U,o[13]=l*M+u*I+c*W+d*D,o[2]=y*b+p*k+m*B+g*Q,o[6]=y*C+p*P+m*H+g*ne,o[10]=y*A+p*F+m*G+g*U,o[14]=y*M+p*I+m*W+g*D,o[3]=v*b+x*k+T*B+w*Q,o[7]=v*C+x*P+T*H+w*ne,o[11]=v*A+x*F+T*G+w*U,o[15]=v*M+x*I+T*W+w*D,this}multiplyScalar(t){const r=this.elements;return r[0]*=t,r[4]*=t,r[8]*=t,r[12]*=t,r[1]*=t,r[5]*=t,r[9]*=t,r[13]*=t,r[2]*=t,r[6]*=t,r[10]*=t,r[14]*=t,r[3]*=t,r[7]*=t,r[11]*=t,r[15]*=t,this}determinant(){const t=this.elements,r=t[0],i=t[4],n=t[8],o=t[12],s=t[1],a=t[5],f=t[9],h=t[13],l=t[2],u=t[6],c=t[10],d=t[14],y=t[3],p=t[7],m=t[11],g=t[15];return y*(+o*f*u-n*h*u-o*a*c+i*h*c+n*a*d-i*f*d)+p*(+r*f*d-r*h*c+o*s*c-n*s*d+n*h*l-o*f*l)+m*(+r*h*u-r*a*d-o*s*u+i*s*d+o*a*l-i*h*l)+g*(-n*a*l-r*f*u+r*a*c+n*s*u-i*s*c+i*f*l)}transpose(){const t=this.elements;let r;return r=t[1],t[1]=t[4],t[4]=r,r=t[2],t[2]=t[8],t[8]=r,r=t[6],t[6]=t[9],t[9]=r,r=t[3],t[3]=t[12],t[12]=r,r=t[7],t[7]=t[13],t[13]=r,r=t[11],t[11]=t[14],t[14]=r,this}setPosition(t,r,i){const n=this.elements;return t.isVector3?(n[12]=t.x,n[13]=t.y,n[14]=t.z):(n[12]=t,n[13]=r,n[14]=i),this}invert(){const t=this.elements,r=t[0],i=t[1],n=t[2],o=t[3],s=t[4],a=t[5],f=t[6],h=t[7],l=t[8],u=t[9],c=t[10],d=t[11],y=t[12],p=t[13],m=t[14],g=t[15],v=u*m*h-p*c*h+p*f*d-a*m*d-u*f*g+a*c*g,x=y*c*h-l*m*h-y*f*d+s*m*d+l*f*g-s*c*g,T=l*p*h-y*u*h+y*a*d-s*p*d-l*a*g+s*u*g,w=y*u*f-l*p*f-y*a*c+s*p*c+l*a*m-s*u*m,b=r*v+i*x+n*T+o*w;if(b===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const C=1/b;return t[0]=v*C,t[1]=(p*c*o-u*m*o-p*n*d+i*m*d+u*n*g-i*c*g)*C,t[2]=(a*m*o-p*f*o+p*n*h-i*m*h-a*n*g+i*f*g)*C,t[3]=(u*f*o-a*c*o-u*n*h+i*c*h+a*n*d-i*f*d)*C,t[4]=x*C,t[5]=(l*m*o-y*c*o+y*n*d-r*m*d-l*n*g+r*c*g)*C,t[6]=(y*f*o-s*m*o-y*n*h+r*m*h+s*n*g-r*f*g)*C,t[7]=(s*c*o-l*f*o+l*n*h-r*c*h-s*n*d+r*f*d)*C,t[8]=T*C,t[9]=(y*u*o-l*p*o-y*i*d+r*p*d+l*i*g-r*u*g)*C,t[10]=(s*p*o-y*a*o+y*i*h-r*p*h-s*i*g+r*a*g)*C,t[11]=(l*a*o-s*u*o-l*i*h+r*u*h+s*i*d-r*a*d)*C,t[12]=w*C,t[13]=(l*p*n-y*u*n+y*i*c-r*p*c-l*i*m+r*u*m)*C,t[14]=(y*a*n-s*p*n-y*i*f+r*p*f+s*i*m-r*a*m)*C,t[15]=(s*u*n-l*a*n+l*i*f-r*u*f-s*i*c+r*a*c)*C,this}scale(t){const r=this.elements,i=t.x,n=t.y,o=t.z;return r[0]*=i,r[4]*=n,r[8]*=o,r[1]*=i,r[5]*=n,r[9]*=o,r[2]*=i,r[6]*=n,r[10]*=o,r[3]*=i,r[7]*=n,r[11]*=o,this}getMaxScaleOnAxis(){const t=this.elements,r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(r,i,n))}makeTranslation(t,r,i){return this.set(1,0,0,t,0,1,0,r,0,0,1,i,0,0,0,1),this}makeRotationX(t){const r=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,r,-i,0,0,i,r,0,0,0,0,1),this}makeRotationY(t){const r=Math.cos(t),i=Math.sin(t);return this.set(r,0,i,0,0,1,0,0,-i,0,r,0,0,0,0,1),this}makeRotationZ(t){const r=Math.cos(t),i=Math.sin(t);return this.set(r,-i,0,0,i,r,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,r){const i=Math.cos(r),n=Math.sin(r),o=1-i,s=t.x,a=t.y,f=t.z,h=o*s,l=o*a;return this.set(h*s+i,h*a-n*f,h*f+n*a,0,h*a+n*f,l*a+i,l*f-n*s,0,h*f-n*a,l*f+n*s,o*f*f+i,0,0,0,0,1),this}makeScale(t,r,i){return this.set(t,0,0,0,0,r,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,r,i,n,o,s){return this.set(1,i,o,0,t,1,s,0,r,n,1,0,0,0,0,1),this}compose(t,r,i){const n=this.elements,o=r._x,s=r._y,a=r._z,f=r._w,h=o+o,l=s+s,u=a+a,c=o*h,d=o*l,y=o*u,p=s*l,m=s*u,g=a*u,v=f*h,x=f*l,T=f*u,w=i.x,b=i.y,C=i.z;return n[0]=(1-(p+g))*w,n[1]=(d+T)*w,n[2]=(y-x)*w,n[3]=0,n[4]=(d-T)*b,n[5]=(1-(c+g))*b,n[6]=(m+v)*b,n[7]=0,n[8]=(y+x)*C,n[9]=(m-v)*C,n[10]=(1-(c+p))*C,n[11]=0,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=1,this}decompose(t,r,i){const n=this.elements;let o=as.set(n[0],n[1],n[2]).length();const s=as.set(n[4],n[5],n[6]).length(),a=as.set(n[8],n[9],n[10]).length();this.determinant()<0&&(o=-o),t.x=n[12],t.y=n[13],t.z=n[14],Pn.copy(this);const h=1/o,l=1/s,u=1/a;return Pn.elements[0]*=h,Pn.elements[1]*=h,Pn.elements[2]*=h,Pn.elements[4]*=l,Pn.elements[5]*=l,Pn.elements[6]*=l,Pn.elements[8]*=u,Pn.elements[9]*=u,Pn.elements[10]*=u,r.setFromRotationMatrix(Pn),i.x=o,i.y=s,i.z=a,this}makePerspective(t,r,i,n,o,s){const a=this.elements,f=2*o/(r-t),h=2*o/(i-n),l=(r+t)/(r-t),u=(i+n)/(i-n),c=-(s+o)/(s-o),d=-2*s*o/(s-o);return a[0]=f,a[4]=0,a[8]=l,a[12]=0,a[1]=0,a[5]=h,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=c,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,r,i,n,o,s){const a=this.elements,f=1/(r-t),h=1/(i-n),l=1/(s-o),u=(r+t)*f,c=(i+n)*h,d=(s+o)*l;return a[0]=2*f,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*h,a[9]=0,a[13]=-c,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const r=this.elements,i=t.elements;for(let n=0;n<16;n++)if(r[n]!==i[n])return!1;return!0}fromArray(t,r=0){for(let i=0;i<16;i++)this.elements[i]=t[i+r];return this}toArray(t=[],r=0){const i=this.elements;return t[r]=i[0],t[r+1]=i[1],t[r+2]=i[2],t[r+3]=i[3],t[r+4]=i[4],t[r+5]=i[5],t[r+6]=i[6],t[r+7]=i[7],t[r+8]=i[8],t[r+9]=i[9],t[r+10]=i[10],t[r+11]=i[11],t[r+12]=i[12],t[r+13]=i[13],t[r+14]=i[14],t[r+15]=i[15],t}}const as=new Ve,Pn=new or,Cf=new Ve(0,0,0),Af=new Ve(1,1,1),gi=new Ve,Vo=new Ve,hn=new Ve,Nu=new or,Fu=new Hn;class ga{constructor(t=0,r=0,i=0,n=ga.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=r,this._z=i,this._order=n}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,r,i,n=this._order){return this._x=t,this._y=r,this._z=i,this._order=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,r=this._order,i=!0){const n=t.elements,o=n[0],s=n[4],a=n[8],f=n[1],h=n[5],l=n[9],u=n[2],c=n[6],d=n[10];switch(r){case"XYZ":this._y=Math.asin(Kr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-l,d),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(c,h),this._z=0);break;case"YXZ":this._x=Math.asin(-Kr(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(f,h)):(this._y=Math.atan2(-u,o),this._z=0);break;case"ZXY":this._x=Math.asin(Kr(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-s,h)):(this._y=0,this._z=Math.atan2(f,o));break;case"ZYX":this._y=Math.asin(-Kr(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(c,d),this._z=Math.atan2(f,o)):(this._x=0,this._z=Math.atan2(-s,h));break;case"YZX":this._z=Math.asin(Kr(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(-l,h),this._y=Math.atan2(-u,o)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-Kr(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(c,h),this._y=Math.atan2(a,o)):(this._x=Math.atan2(-l,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+r)}return this._order=r,i===!0&&this._onChangeCallback(),this}setFromQuaternion(t,r,i){return Nu.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Nu,r,i)}setFromVector3(t,r=this._order){return this.set(t.x,t.y,t.z,r)}reorder(t){return Fu.setFromEuler(this),this.setFromQuaternion(Fu,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],r=0){return t[r]=this._x,t[r+1]=this._y,t[r+2]=this._z,t[r+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ga.DEFAULT_ORDER="XYZ";class fd{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let Lf=0;const Uu=new Ve,ls=new Hn,Jn=new or,Ho=new Ve,Zs=new Ve,Pf=new Ve,Rf=new Hn,Bu=new Ve(1,0,0),Gu=new Ve(0,1,0),zu=new Ve(0,0,1),Df={type:"added"},Vu={type:"removed"};class Cr extends Xi{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Lf++}),this.uuid=Dn(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Cr.DEFAULT_UP.clone();const t=new Ve,r=new ga,i=new Hn,n=new Ve(1,1,1);function o(){i.setFromEuler(r,!1)}function s(){r.setFromQuaternion(i,void 0,!1)}r._onChange(o),i._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new or},normalMatrix:{value:new pn}}),this.matrix=new or,this.matrixWorld=new or,this.matrixAutoUpdate=Cr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Cr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new fd,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,r){this.quaternion.setFromAxisAngle(t,r)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,r){return ls.setFromAxisAngle(t,r),this.quaternion.multiply(ls),this}rotateOnWorldAxis(t,r){return ls.setFromAxisAngle(t,r),this.quaternion.premultiply(ls),this}rotateX(t){return this.rotateOnAxis(Bu,t)}rotateY(t){return this.rotateOnAxis(Gu,t)}rotateZ(t){return this.rotateOnAxis(zu,t)}translateOnAxis(t,r){return Uu.copy(t).applyQuaternion(this.quaternion),this.position.add(Uu.multiplyScalar(r)),this}translateX(t){return this.translateOnAxis(Bu,t)}translateY(t){return this.translateOnAxis(Gu,t)}translateZ(t){return this.translateOnAxis(zu,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Jn.copy(this.matrixWorld).invert())}lookAt(t,r,i){t.isVector3?Ho.copy(t):Ho.set(t,r,i);const n=this.parent;this.updateWorldMatrix(!0,!1),Zs.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Jn.lookAt(Zs,Ho,this.up):Jn.lookAt(Ho,Zs,this.up),this.quaternion.setFromRotationMatrix(Jn),n&&(Jn.extractRotation(n.matrixWorld),ls.setFromRotationMatrix(Jn),this.quaternion.premultiply(ls.invert()))}add(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.add(arguments[r]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.parent!==null&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Df)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const r=this.children.indexOf(t);return r!==-1&&(t.parent=null,this.children.splice(r,1),t.dispatchEvent(Vu)),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const r=this.children[t];r.parent=null,r.dispatchEvent(Vu)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Jn.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Jn.multiply(t.parent.matrixWorld)),t.applyMatrix4(Jn),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,r){if(this[t]===r)return this;for(let i=0,n=this.children.length;i<n;i++){const s=this.children[i].getObjectByProperty(t,r);if(s!==void 0)return s}}getObjectsByProperty(t,r){let i=[];this[t]===r&&i.push(this);for(let n=0,o=this.children.length;n<o;n++){const s=this.children[n].getObjectsByProperty(t,r);s.length>0&&(i=i.concat(s))}return i}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Zs,t,Pf),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Zs,Rf,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const r=this.matrixWorld.elements;return t.set(r[8],r[9],r[10]).normalize()}raycast(){}traverse(t){t(this);const r=this.children;for(let i=0,n=r.length;i<n;i++)r[i].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const r=this.children;for(let i=0,n=r.length;i<n;i++)r[i].traverseVisible(t)}traverseAncestors(t){const r=this.parent;r!==null&&(t(r),r.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const r=this.children;for(let i=0,n=r.length;i<n;i++){const o=r[i];(o.matrixWorldAutoUpdate===!0||t===!0)&&o.updateMatrixWorld(t)}}updateWorldMatrix(t,r){const i=this.parent;if(t===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),r===!0){const n=this.children;for(let o=0,s=n.length;o<s;o++){const a=n[o];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(t){const r=t===void 0||typeof t=="string",i={};r&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const n={};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.castShadow===!0&&(n.castShadow=!0),this.receiveShadow===!0&&(n.receiveShadow=!0),this.visible===!1&&(n.visible=!1),this.frustumCulled===!1&&(n.frustumCulled=!1),this.renderOrder!==0&&(n.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(n.instanceColor=this.instanceColor.toJSON()));function o(a,f){return a[f.uuid]===void 0&&(a[f.uuid]=f.toJSON(t)),f.uuid}if(this.isScene)this.background&&(this.background.isColor?n.background=this.background.toJSON():this.background.isTexture&&(n.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(n.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){n.geometry=o(t.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const f=a.shapes;if(Array.isArray(f))for(let h=0,l=f.length;h<l;h++){const u=f[h];o(t.shapes,u)}else o(t.shapes,f)}}if(this.isSkinnedMesh&&(n.bindMode=this.bindMode,n.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(t.skeletons,this.skeleton),n.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let f=0,h=this.material.length;f<h;f++)a.push(o(t.materials,this.material[f]));n.material=a}else n.material=o(t.materials,this.material);if(this.children.length>0){n.children=[];for(let a=0;a<this.children.length;a++)n.children.push(this.children[a].toJSON(t).object)}if(this.animations.length>0){n.animations=[];for(let a=0;a<this.animations.length;a++){const f=this.animations[a];n.animations.push(o(t.animations,f))}}if(r){const a=s(t.geometries),f=s(t.materials),h=s(t.textures),l=s(t.images),u=s(t.shapes),c=s(t.skeletons),d=s(t.animations),y=s(t.nodes);a.length>0&&(i.geometries=a),f.length>0&&(i.materials=f),h.length>0&&(i.textures=h),l.length>0&&(i.images=l),u.length>0&&(i.shapes=u),c.length>0&&(i.skeletons=c),d.length>0&&(i.animations=d),y.length>0&&(i.nodes=y)}return i.object=n,i;function s(a){const f=[];for(const h in a){const l=a[h];delete l.metadata,f.push(l)}return f}}clone(t){return new this.constructor().copy(this,t)}copy(t,r=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),r===!0)for(let i=0;i<t.children.length;i++){const n=t.children[i];this.add(n.clone())}return this}}Cr.DEFAULT_UP=new Ve(0,1,0);Cr.DEFAULT_MATRIX_AUTO_UPDATE=!0;Cr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Rn=new Ve,Qn=new Ve,Xa=new Ve,ei=new Ve,us=new Ve,cs=new Ve,Hu=new Ve,Ya=new Ve,Za=new Ve,Ka=new Ve;class ri{constructor(t=new Ve,r=new Ve,i=new Ve){this.a=t,this.b=r,this.c=i}static getNormal(t,r,i,n){n.subVectors(i,r),Rn.subVectors(t,r),n.cross(Rn);const o=n.lengthSq();return o>0?n.multiplyScalar(1/Math.sqrt(o)):n.set(0,0,0)}static getBarycoord(t,r,i,n,o){Rn.subVectors(n,r),Qn.subVectors(i,r),Xa.subVectors(t,r);const s=Rn.dot(Rn),a=Rn.dot(Qn),f=Rn.dot(Xa),h=Qn.dot(Qn),l=Qn.dot(Xa),u=s*h-a*a;if(u===0)return o.set(-2,-1,-1);const c=1/u,d=(h*f-a*l)*c,y=(s*l-a*f)*c;return o.set(1-d-y,y,d)}static containsPoint(t,r,i,n){return this.getBarycoord(t,r,i,n,ei),ei.x>=0&&ei.y>=0&&ei.x+ei.y<=1}static getUV(t,r,i,n,o,s,a,f){return this.getBarycoord(t,r,i,n,ei),f.set(0,0),f.addScaledVector(o,ei.x),f.addScaledVector(s,ei.y),f.addScaledVector(a,ei.z),f}static isFrontFacing(t,r,i,n){return Rn.subVectors(i,r),Qn.subVectors(t,r),Rn.cross(Qn).dot(n)<0}set(t,r,i){return this.a.copy(t),this.b.copy(r),this.c.copy(i),this}setFromPointsAndIndices(t,r,i,n){return this.a.copy(t[r]),this.b.copy(t[i]),this.c.copy(t[n]),this}setFromAttributeAndIndices(t,r,i,n){return this.a.fromBufferAttribute(t,r),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,n),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Rn.subVectors(this.c,this.b),Qn.subVectors(this.a,this.b),Rn.cross(Qn).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return ri.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,r){return ri.getBarycoord(t,this.a,this.b,this.c,r)}getUV(t,r,i,n,o){return ri.getUV(t,this.a,this.b,this.c,r,i,n,o)}containsPoint(t){return ri.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return ri.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,r){const i=this.a,n=this.b,o=this.c;let s,a;us.subVectors(n,i),cs.subVectors(o,i),Ya.subVectors(t,i);const f=us.dot(Ya),h=cs.dot(Ya);if(f<=0&&h<=0)return r.copy(i);Za.subVectors(t,n);const l=us.dot(Za),u=cs.dot(Za);if(l>=0&&u<=l)return r.copy(n);const c=f*u-l*h;if(c<=0&&f>=0&&l<=0)return s=f/(f-l),r.copy(i).addScaledVector(us,s);Ka.subVectors(t,o);const d=us.dot(Ka),y=cs.dot(Ka);if(y>=0&&d<=y)return r.copy(o);const p=d*h-f*y;if(p<=0&&h>=0&&y<=0)return a=h/(h-y),r.copy(i).addScaledVector(cs,a);const m=l*y-d*u;if(m<=0&&u-l>=0&&d-y>=0)return Hu.subVectors(o,n),a=(u-l)/(u-l+(d-y)),r.copy(n).addScaledVector(Hu,a);const g=1/(m+p+c);return s=p*g,a=c*g,r.copy(i).addScaledVector(us,s).addScaledVector(cs,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let kf=0;class zn extends Xi{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:kf++}),this.uuid=Dn(),this.name="",this.type="Material",this.blending=ws,this.side=oi,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Qc,this.blendDst=ed,this.blendEquation=vs,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=fl,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=cf,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Oa,this.stencilZFail=Oa,this.stencilZPass=Oa,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const r in t){const i=t[r];if(i===void 0){console.warn("THREE.Material: '"+r+"' parameter is undefined.");continue}const n=this[r];if(n===void 0){console.warn("THREE."+this.type+": '"+r+"' is not a property of this material.");continue}n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[r]=i}}toJSON(t){const r=t===void 0||typeof t=="string";r&&(t={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==ws&&(i.blending=this.blending),this.side!==oi&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(i.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function n(o){const s=[];for(const a in o){const f=o[a];delete f.metadata,s.push(f)}return s}if(r){const o=n(t.textures),s=n(t.images);o.length>0&&(i.textures=o),s.length>0&&(i.images=s)}return i}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const r=t.clippingPlanes;let i=null;if(r!==null){const n=r.length;i=new Array(n);for(let o=0;o!==n;++o)i[o]=r[o].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}}class xi extends zn{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ht(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=td,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Ir=new Ve,Wo=new Qt;class Yr{constructor(t,r,i=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=r,this.count=t!==void 0?t.length/r:0,this.normalized=i,this.usage=vl,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,r,i){t*=this.itemSize,i*=r.itemSize;for(let n=0,o=this.itemSize;n<o;n++)this.array[t+n]=r.array[i+n];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let r=0,i=this.count;r<i;r++)Wo.fromBufferAttribute(this,r),Wo.applyMatrix3(t),this.setXY(r,Wo.x,Wo.y);else if(this.itemSize===3)for(let r=0,i=this.count;r<i;r++)Ir.fromBufferAttribute(this,r),Ir.applyMatrix3(t),this.setXYZ(r,Ir.x,Ir.y,Ir.z);return this}applyMatrix4(t){for(let r=0,i=this.count;r<i;r++)Ir.fromBufferAttribute(this,r),Ir.applyMatrix4(t),this.setXYZ(r,Ir.x,Ir.y,Ir.z);return this}applyNormalMatrix(t){for(let r=0,i=this.count;r<i;r++)Ir.fromBufferAttribute(this,r),Ir.applyNormalMatrix(t),this.setXYZ(r,Ir.x,Ir.y,Ir.z);return this}transformDirection(t){for(let r=0,i=this.count;r<i;r++)Ir.fromBufferAttribute(this,r),Ir.transformDirection(t),this.setXYZ(r,Ir.x,Ir.y,Ir.z);return this}set(t,r=0){return this.array.set(t,r),this}getX(t){let r=this.array[t*this.itemSize];return this.normalized&&(r=ii(r,this.array)),r}setX(t,r){return this.normalized&&(r=vr(r,this.array)),this.array[t*this.itemSize]=r,this}getY(t){let r=this.array[t*this.itemSize+1];return this.normalized&&(r=ii(r,this.array)),r}setY(t,r){return this.normalized&&(r=vr(r,this.array)),this.array[t*this.itemSize+1]=r,this}getZ(t){let r=this.array[t*this.itemSize+2];return this.normalized&&(r=ii(r,this.array)),r}setZ(t,r){return this.normalized&&(r=vr(r,this.array)),this.array[t*this.itemSize+2]=r,this}getW(t){let r=this.array[t*this.itemSize+3];return this.normalized&&(r=ii(r,this.array)),r}setW(t,r){return this.normalized&&(r=vr(r,this.array)),this.array[t*this.itemSize+3]=r,this}setXY(t,r,i){return t*=this.itemSize,this.normalized&&(r=vr(r,this.array),i=vr(i,this.array)),this.array[t+0]=r,this.array[t+1]=i,this}setXYZ(t,r,i,n){return t*=this.itemSize,this.normalized&&(r=vr(r,this.array),i=vr(i,this.array),n=vr(n,this.array)),this.array[t+0]=r,this.array[t+1]=i,this.array[t+2]=n,this}setXYZW(t,r,i,n,o){return t*=this.itemSize,this.normalized&&(r=vr(r,this.array),i=vr(i,this.array),n=vr(n,this.array),o=vr(o,this.array)),this.array[t+0]=r,this.array[t+1]=i,this.array[t+2]=n,this.array[t+3]=o,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==vl&&(t.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(t.updateRange=this.updateRange),t}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class pd extends Yr{constructor(t,r,i){super(new Uint16Array(t),r,i)}}class md extends Yr{constructor(t,r,i){super(new Uint32Array(t),r,i)}}class kn extends Yr{constructor(t,r,i){super(new Float32Array(t),r,i)}}let Of=0;const xn=new or,$a=new Cr,ds=new Ve,fn=new Os,Ks=new Os,zr=new Ve;class En extends Xi{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Of++}),this.uuid=Dn(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(ld(t)?md:pd)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,r){return this.attributes[t]=r,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,r,i=0){this.groups.push({start:t,count:r,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,r){this.drawRange.start=t,this.drawRange.count=r}applyMatrix4(t){const r=this.attributes.position;r!==void 0&&(r.applyMatrix4(t),r.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const o=new pn().getNormalMatrix(t);i.applyNormalMatrix(o),i.needsUpdate=!0}const n=this.attributes.tangent;return n!==void 0&&(n.transformDirection(t),n.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return xn.makeRotationFromQuaternion(t),this.applyMatrix4(xn),this}rotateX(t){return xn.makeRotationX(t),this.applyMatrix4(xn),this}rotateY(t){return xn.makeRotationY(t),this.applyMatrix4(xn),this}rotateZ(t){return xn.makeRotationZ(t),this.applyMatrix4(xn),this}translate(t,r,i){return xn.makeTranslation(t,r,i),this.applyMatrix4(xn),this}scale(t,r,i){return xn.makeScale(t,r,i),this.applyMatrix4(xn),this}lookAt(t){return $a.lookAt(t),$a.updateMatrix(),this.applyMatrix4($a.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ds).negate(),this.translate(ds.x,ds.y,ds.z),this}setFromPoints(t){const r=[];for(let i=0,n=t.length;i<n;i++){const o=t[i];r.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new kn(r,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Os);const t=this.attributes.position,r=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Ve(-1/0,-1/0,-1/0),new Ve(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),r)for(let i=0,n=r.length;i<n;i++){const o=r[i];fn.setFromBufferAttribute(o),this.morphTargetsRelative?(zr.addVectors(this.boundingBox.min,fn.min),this.boundingBox.expandByPoint(zr),zr.addVectors(this.boundingBox.max,fn.max),this.boundingBox.expandByPoint(zr)):(this.boundingBox.expandByPoint(fn.min),this.boundingBox.expandByPoint(fn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Is);const t=this.attributes.position,r=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Ve,1/0);return}if(t){const i=this.boundingSphere.center;if(fn.setFromBufferAttribute(t),r)for(let o=0,s=r.length;o<s;o++){const a=r[o];Ks.setFromBufferAttribute(a),this.morphTargetsRelative?(zr.addVectors(fn.min,Ks.min),fn.expandByPoint(zr),zr.addVectors(fn.max,Ks.max),fn.expandByPoint(zr)):(fn.expandByPoint(Ks.min),fn.expandByPoint(Ks.max))}fn.getCenter(i);let n=0;for(let o=0,s=t.count;o<s;o++)zr.fromBufferAttribute(t,o),n=Math.max(n,i.distanceToSquared(zr));if(r)for(let o=0,s=r.length;o<s;o++){const a=r[o],f=this.morphTargetsRelative;for(let h=0,l=a.count;h<l;h++)zr.fromBufferAttribute(a,h),f&&(ds.fromBufferAttribute(t,h),zr.add(ds)),n=Math.max(n,i.distanceToSquared(zr))}this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,r=this.attributes;if(t===null||r.position===void 0||r.normal===void 0||r.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.array,n=r.position.array,o=r.normal.array,s=r.uv.array,a=n.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Yr(new Float32Array(4*a),4));const f=this.getAttribute("tangent").array,h=[],l=[];for(let k=0;k<a;k++)h[k]=new Ve,l[k]=new Ve;const u=new Ve,c=new Ve,d=new Ve,y=new Qt,p=new Qt,m=new Qt,g=new Ve,v=new Ve;function x(k,P,F){u.fromArray(n,k*3),c.fromArray(n,P*3),d.fromArray(n,F*3),y.fromArray(s,k*2),p.fromArray(s,P*2),m.fromArray(s,F*2),c.sub(u),d.sub(u),p.sub(y),m.sub(y);const I=1/(p.x*m.y-m.x*p.y);isFinite(I)&&(g.copy(c).multiplyScalar(m.y).addScaledVector(d,-p.y).multiplyScalar(I),v.copy(d).multiplyScalar(p.x).addScaledVector(c,-m.x).multiplyScalar(I),h[k].add(g),h[P].add(g),h[F].add(g),l[k].add(v),l[P].add(v),l[F].add(v))}let T=this.groups;T.length===0&&(T=[{start:0,count:i.length}]);for(let k=0,P=T.length;k<P;++k){const F=T[k],I=F.start,B=F.count;for(let H=I,G=I+B;H<G;H+=3)x(i[H+0],i[H+1],i[H+2])}const w=new Ve,b=new Ve,C=new Ve,A=new Ve;function M(k){C.fromArray(o,k*3),A.copy(C);const P=h[k];w.copy(P),w.sub(C.multiplyScalar(C.dot(P))).normalize(),b.crossVectors(A,P);const I=b.dot(l[k])<0?-1:1;f[k*4]=w.x,f[k*4+1]=w.y,f[k*4+2]=w.z,f[k*4+3]=I}for(let k=0,P=T.length;k<P;++k){const F=T[k],I=F.start,B=F.count;for(let H=I,G=I+B;H<G;H+=3)M(i[H+0]),M(i[H+1]),M(i[H+2])}}computeVertexNormals(){const t=this.index,r=this.getAttribute("position");if(r!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Yr(new Float32Array(r.count*3),3),this.setAttribute("normal",i);else for(let c=0,d=i.count;c<d;c++)i.setXYZ(c,0,0,0);const n=new Ve,o=new Ve,s=new Ve,a=new Ve,f=new Ve,h=new Ve,l=new Ve,u=new Ve;if(t)for(let c=0,d=t.count;c<d;c+=3){const y=t.getX(c+0),p=t.getX(c+1),m=t.getX(c+2);n.fromBufferAttribute(r,y),o.fromBufferAttribute(r,p),s.fromBufferAttribute(r,m),l.subVectors(s,o),u.subVectors(n,o),l.cross(u),a.fromBufferAttribute(i,y),f.fromBufferAttribute(i,p),h.fromBufferAttribute(i,m),a.add(l),f.add(l),h.add(l),i.setXYZ(y,a.x,a.y,a.z),i.setXYZ(p,f.x,f.y,f.z),i.setXYZ(m,h.x,h.y,h.z)}else for(let c=0,d=r.count;c<d;c+=3)n.fromBufferAttribute(r,c+0),o.fromBufferAttribute(r,c+1),s.fromBufferAttribute(r,c+2),l.subVectors(s,o),u.subVectors(n,o),l.cross(u),i.setXYZ(c+0,l.x,l.y,l.z),i.setXYZ(c+1,l.x,l.y,l.z),i.setXYZ(c+2,l.x,l.y,l.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const t=this.attributes.normal;for(let r=0,i=t.count;r<i;r++)zr.fromBufferAttribute(t,r),zr.normalize(),t.setXYZ(r,zr.x,zr.y,zr.z)}toNonIndexed(){function t(a,f){const h=a.array,l=a.itemSize,u=a.normalized,c=new h.constructor(f.length*l);let d=0,y=0;for(let p=0,m=f.length;p<m;p++){a.isInterleavedBufferAttribute?d=f[p]*a.data.stride+a.offset:d=f[p]*l;for(let g=0;g<l;g++)c[y++]=h[d++]}return new Yr(c,l,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const r=new En,i=this.index.array,n=this.attributes;for(const a in n){const f=n[a],h=t(f,i);r.setAttribute(a,h)}const o=this.morphAttributes;for(const a in o){const f=[],h=o[a];for(let l=0,u=h.length;l<u;l++){const c=h[l],d=t(c,i);f.push(d)}r.morphAttributes[a]=f}r.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let a=0,f=s.length;a<f;a++){const h=s[a];r.addGroup(h.start,h.count,h.materialIndex)}return r}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const f=this.parameters;for(const h in f)f[h]!==void 0&&(t[h]=f[h]);return t}t.data={attributes:{}};const r=this.index;r!==null&&(t.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});const i=this.attributes;for(const f in i){const h=i[f];t.data.attributes[f]=h.toJSON(t.data)}const n={};let o=!1;for(const f in this.morphAttributes){const h=this.morphAttributes[f],l=[];for(let u=0,c=h.length;u<c;u++){const d=h[u];l.push(d.toJSON(t.data))}l.length>0&&(n[f]=l,o=!0)}o&&(t.data.morphAttributes=n,t.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return a!==null&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const r={};this.name=t.name;const i=t.index;i!==null&&this.setIndex(i.clone(r));const n=t.attributes;for(const h in n){const l=n[h];this.setAttribute(h,l.clone(r))}const o=t.morphAttributes;for(const h in o){const l=[],u=o[h];for(let c=0,d=u.length;c<d;c++)l.push(u[c].clone(r));this.morphAttributes[h]=l}this.morphTargetsRelative=t.morphTargetsRelative;const s=t.groups;for(let h=0,l=s.length;h<l;h++){const u=s[h];this.addGroup(u.start,u.count,u.materialIndex)}const a=t.boundingBox;a!==null&&(this.boundingBox=a.clone());const f=t.boundingSphere;return f!==null&&(this.boundingSphere=f.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,t.parameters!==void 0&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const Wu=new or,hs=new Dl,Ja=new Is,$s=new Ve,Js=new Ve,Qs=new Ve,Qa=new Ve,qo=new Ve,Xo=new Qt,Yo=new Qt,Zo=new Qt,el=new Ve,Ko=new Ve;class ln extends Cr{constructor(t=new En,r=new xi){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=r,this.updateMorphTargets()}copy(t,r){return super.copy(t,r),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const r=this.geometry.morphAttributes,i=Object.keys(r);if(i.length>0){const n=r[i[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=n.length;o<s;o++){const a=n[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(t,r){const i=this.geometry,n=i.attributes.position,o=i.morphAttributes.position,s=i.morphTargetsRelative;r.fromBufferAttribute(n,t);const a=this.morphTargetInfluences;if(o&&a){qo.set(0,0,0);for(let f=0,h=o.length;f<h;f++){const l=a[f],u=o[f];l!==0&&(Qa.fromBufferAttribute(u,t),s?qo.addScaledVector(Qa,l):qo.addScaledVector(Qa.sub(r),l))}r.add(qo)}return this.isSkinnedMesh&&this.boneTransform(t,r),r}raycast(t,r){const i=this.geometry,n=this.material,o=this.matrixWorld;if(n===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),Ja.copy(i.boundingSphere),Ja.applyMatrix4(o),t.ray.intersectsSphere(Ja)===!1)||(Wu.copy(o).invert(),hs.copy(t.ray).applyMatrix4(Wu),i.boundingBox!==null&&hs.intersectsBox(i.boundingBox)===!1))return;let s;const a=i.index,f=i.attributes.position,h=i.attributes.uv,l=i.attributes.uv2,u=i.groups,c=i.drawRange;if(a!==null)if(Array.isArray(n))for(let d=0,y=u.length;d<y;d++){const p=u[d],m=n[p.materialIndex],g=Math.max(p.start,c.start),v=Math.min(a.count,Math.min(p.start+p.count,c.start+c.count));for(let x=g,T=v;x<T;x+=3){const w=a.getX(x),b=a.getX(x+1),C=a.getX(x+2);s=$o(this,m,t,hs,h,l,w,b,C),s&&(s.faceIndex=Math.floor(x/3),s.face.materialIndex=p.materialIndex,r.push(s))}}else{const d=Math.max(0,c.start),y=Math.min(a.count,c.start+c.count);for(let p=d,m=y;p<m;p+=3){const g=a.getX(p),v=a.getX(p+1),x=a.getX(p+2);s=$o(this,n,t,hs,h,l,g,v,x),s&&(s.faceIndex=Math.floor(p/3),r.push(s))}}else if(f!==void 0)if(Array.isArray(n))for(let d=0,y=u.length;d<y;d++){const p=u[d],m=n[p.materialIndex],g=Math.max(p.start,c.start),v=Math.min(f.count,Math.min(p.start+p.count,c.start+c.count));for(let x=g,T=v;x<T;x+=3){const w=x,b=x+1,C=x+2;s=$o(this,m,t,hs,h,l,w,b,C),s&&(s.faceIndex=Math.floor(x/3),s.face.materialIndex=p.materialIndex,r.push(s))}}else{const d=Math.max(0,c.start),y=Math.min(f.count,c.start+c.count);for(let p=d,m=y;p<m;p+=3){const g=p,v=p+1,x=p+2;s=$o(this,n,t,hs,h,l,g,v,x),s&&(s.faceIndex=Math.floor(p/3),r.push(s))}}}}function If(S,t,r,i,n,o,s,a){let f;if(t.side===mn?f=i.intersectTriangle(s,o,n,!0,a):f=i.intersectTriangle(n,o,s,t.side===oi,a),f===null)return null;Ko.copy(a),Ko.applyMatrix4(S.matrixWorld);const h=r.ray.origin.distanceTo(Ko);return h<r.near||h>r.far?null:{distance:h,point:Ko.clone(),object:S}}function $o(S,t,r,i,n,o,s,a,f){S.getVertexPosition(s,$s),S.getVertexPosition(a,Js),S.getVertexPosition(f,Qs);const h=If(S,t,r,i,$s,Js,Qs,el);if(h){n&&(Xo.fromBufferAttribute(n,s),Yo.fromBufferAttribute(n,a),Zo.fromBufferAttribute(n,f),h.uv=ri.getUV(el,$s,Js,Qs,Xo,Yo,Zo,new Qt)),o&&(Xo.fromBufferAttribute(o,s),Yo.fromBufferAttribute(o,a),Zo.fromBufferAttribute(o,f),h.uv2=ri.getUV(el,$s,Js,Qs,Xo,Yo,Zo,new Qt));const l={a:s,b:a,c:f,normal:new Ve,materialIndex:0};ri.getNormal($s,Js,Qs,l.normal),h.face=l}return h}class yo extends En{constructor(t=1,r=1,i=1,n=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:r,depth:i,widthSegments:n,heightSegments:o,depthSegments:s};const a=this;n=Math.floor(n),o=Math.floor(o),s=Math.floor(s);const f=[],h=[],l=[],u=[];let c=0,d=0;y("z","y","x",-1,-1,i,r,t,s,o,0),y("z","y","x",1,-1,i,r,-t,s,o,1),y("x","z","y",1,1,t,i,r,n,s,2),y("x","z","y",1,-1,t,i,-r,n,s,3),y("x","y","z",1,-1,t,r,i,n,o,4),y("x","y","z",-1,-1,t,r,-i,n,o,5),this.setIndex(f),this.setAttribute("position",new kn(h,3)),this.setAttribute("normal",new kn(l,3)),this.setAttribute("uv",new kn(u,2));function y(p,m,g,v,x,T,w,b,C,A,M){const k=T/C,P=w/A,F=T/2,I=w/2,B=b/2,H=C+1,G=A+1;let W=0,Q=0;const ne=new Ve;for(let U=0;U<G;U++){const D=U*P-I;for(let O=0;O<H;O++){const V=O*k-F;ne[p]=V*v,ne[m]=D*x,ne[g]=B,h.push(ne.x,ne.y,ne.z),ne[p]=0,ne[m]=0,ne[g]=b>0?1:-1,l.push(ne.x,ne.y,ne.z),u.push(O/C),u.push(1-U/A),W+=1}}for(let U=0;U<A;U++)for(let D=0;D<C;D++){const O=c+D+H*U,V=c+D+H*(U+1),Z=c+(D+1)+H*(U+1),ie=c+(D+1)+H*U;f.push(O,V,ie),f.push(V,Z,ie),Q+=6}a.addGroup(d,Q,M),d+=Q,c+=W}}static fromJSON(t){return new yo(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Rs(S){const t={};for(const r in S){t[r]={};for(const i in S[r]){const n=S[r][i];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture||n.isQuaternion)?t[r][i]=n.clone():Array.isArray(n)?t[r][i]=n.slice():t[r][i]=n}}return t}function en(S){const t={};for(let r=0;r<S.length;r++){const i=Rs(S[r]);for(const n in i)t[n]=i[n]}return t}function Nf(S){const t=[];for(let r=0;r<S.length;r++)t.push(S[r].clone());return t}function gd(S){return S.getRenderTarget()===null&&S.outputEncoding===pr?Un:ho}const yd={clone:Rs,merge:en};var Ff=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Uf=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class tn extends zn{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Ff,this.fragmentShader=Uf,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Rs(t.uniforms),this.uniformsGroups=Nf(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const r=super.toJSON(t);r.glslVersion=this.glslVersion,r.uniforms={};for(const n in this.uniforms){const s=this.uniforms[n].value;s&&s.isTexture?r.uniforms[n]={type:"t",value:s.toJSON(t).uuid}:s&&s.isColor?r.uniforms[n]={type:"c",value:s.getHex()}:s&&s.isVector2?r.uniforms[n]={type:"v2",value:s.toArray()}:s&&s.isVector3?r.uniforms[n]={type:"v3",value:s.toArray()}:s&&s.isVector4?r.uniforms[n]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?r.uniforms[n]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?r.uniforms[n]={type:"m4",value:s.toArray()}:r.uniforms[n]={value:s}}Object.keys(this.defines).length>0&&(r.defines=this.defines),r.vertexShader=this.vertexShader,r.fragmentShader=this.fragmentShader;const i={};for(const n in this.extensions)this.extensions[n]===!0&&(i[n]=!0);return Object.keys(i).length>0&&(r.extensions=i),r}}let vd=class extends Cr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new or,this.projectionMatrix=new or,this.projectionMatrixInverse=new or}copy(t,r){return super.copy(t,r),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const r=this.matrixWorld.elements;return t.set(-r[8],-r[9],-r[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,r){super.updateWorldMatrix(t,r),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}};class rn extends vd{constructor(t=50,r=1,i=.1,n=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=i,this.far=n,this.focus=10,this.aspect=r,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,r){return super.copy(t,r),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const r=.5*this.getFilmHeight()/t;this.fov=fo*2*Math.atan(r),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(oo*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return fo*2*Math.atan(Math.tan(oo*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,r,i,n,o,s){this.aspect=t/r,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=r,this.view.offsetX=i,this.view.offsetY=n,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let r=t*Math.tan(oo*.5*this.fov)/this.zoom,i=2*r,n=this.aspect*i,o=-.5*n;const s=this.view;if(this.view!==null&&this.view.enabled){const f=s.fullWidth,h=s.fullHeight;o+=s.offsetX*n/f,r-=s.offsetY*i/h,n*=s.width/f,i*=s.height/h}const a=this.filmOffset;a!==0&&(o+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+n,r,r-i,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const r=super.toJSON(t);return r.object.fov=this.fov,r.object.zoom=this.zoom,r.object.near=this.near,r.object.far=this.far,r.object.focus=this.focus,r.object.aspect=this.aspect,this.view!==null&&(r.object.view=Object.assign({},this.view)),r.object.filmGauge=this.filmGauge,r.object.filmOffset=this.filmOffset,r}}const fs=-90,ps=1;class Bf extends Cr{constructor(t,r,i){super(),this.type="CubeCamera",this.renderTarget=i;const n=new rn(fs,ps,t,r);n.layers=this.layers,n.up.set(0,1,0),n.lookAt(1,0,0),this.add(n);const o=new rn(fs,ps,t,r);o.layers=this.layers,o.up.set(0,1,0),o.lookAt(-1,0,0),this.add(o);const s=new rn(fs,ps,t,r);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(0,1,0),this.add(s);const a=new rn(fs,ps,t,r);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const f=new rn(fs,ps,t,r);f.layers=this.layers,f.up.set(0,1,0),f.lookAt(0,0,1),this.add(f);const h=new rn(fs,ps,t,r);h.layers=this.layers,h.up.set(0,1,0),h.lookAt(0,0,-1),this.add(h)}update(t,r){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[n,o,s,a,f,h]=this.children,l=t.getRenderTarget(),u=t.toneMapping,c=t.xr.enabled;t.toneMapping=si,t.xr.enabled=!1;const d=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0),t.render(r,n),t.setRenderTarget(i,1),t.render(r,o),t.setRenderTarget(i,2),t.render(r,s),t.setRenderTarget(i,3),t.render(r,a),t.setRenderTarget(i,4),t.render(r,f),i.texture.generateMipmaps=d,t.setRenderTarget(i,5),t.render(r,h),t.setRenderTarget(l),t.toneMapping=u,t.xr.enabled=c,i.texture.needsPMREMUpdate=!0}}class bd extends Xr{constructor(t,r,i,n,o,s,a,f,h,l){t=t!==void 0?t:[],r=r!==void 0?r:js,super(t,r,i,n,o,s,a,f,h,l),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class Gf extends Si{constructor(t=1,r={}){super(t,t,r),this.isWebGLCubeRenderTarget=!0;const i={width:t,height:t,depth:1},n=[i,i,i,i,i,i];this.texture=new bd(n,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:an}fromEquirectangularTexture(t,r){this.texture.type=r.type,this.texture.encoding=r.encoding,this.texture.generateMipmaps=r.generateMipmaps,this.texture.minFilter=r.minFilter,this.texture.magFilter=r.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},n=new yo(5,5,5),o=new tn({name:"CubemapFromEquirect",uniforms:Rs(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:mn,blending:wi});o.uniforms.tEquirect.value=r;const s=new ln(n,o),a=r.minFilter;return r.minFilter===zi&&(r.minFilter=an),new Bf(1,10,this).update(t,s),r.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(t,r,i,n){const o=t.getRenderTarget();for(let s=0;s<6;s++)t.setRenderTarget(this,s),t.clear(r,i,n);t.setRenderTarget(o)}}const tl=new Ve,zf=new Ve,Vf=new pn;class Di{constructor(t=new Ve(1,0,0),r=0){this.isPlane=!0,this.normal=t,this.constant=r}set(t,r){return this.normal.copy(t),this.constant=r,this}setComponents(t,r,i,n){return this.normal.set(t,r,i),this.constant=n,this}setFromNormalAndCoplanarPoint(t,r){return this.normal.copy(t),this.constant=-r.dot(this.normal),this}setFromCoplanarPoints(t,r,i){const n=tl.subVectors(i,r).cross(zf.subVectors(t,r)).normalize();return this.setFromNormalAndCoplanarPoint(n,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,r){return r.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,r){const i=t.delta(tl),n=this.normal.dot(i);if(n===0)return this.distanceToPoint(t.start)===0?r.copy(t.start):null;const o=-(t.start.dot(this.normal)+this.constant)/n;return o<0||o>1?null:r.copy(i).multiplyScalar(o).add(t.start)}intersectsLine(t){const r=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return r<0&&i>0||i<0&&r>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,r){const i=r||Vf.getNormalMatrix(t),n=this.coplanarPoint(tl).applyMatrix4(t),o=this.normal.applyMatrix3(i).normalize();return this.constant=-n.dot(o),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}const ms=new Is,Jo=new Ve;class kl{constructor(t=new Di,r=new Di,i=new Di,n=new Di,o=new Di,s=new Di){this.planes=[t,r,i,n,o,s]}set(t,r,i,n,o,s){const a=this.planes;return a[0].copy(t),a[1].copy(r),a[2].copy(i),a[3].copy(n),a[4].copy(o),a[5].copy(s),this}copy(t){const r=this.planes;for(let i=0;i<6;i++)r[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t){const r=this.planes,i=t.elements,n=i[0],o=i[1],s=i[2],a=i[3],f=i[4],h=i[5],l=i[6],u=i[7],c=i[8],d=i[9],y=i[10],p=i[11],m=i[12],g=i[13],v=i[14],x=i[15];return r[0].setComponents(a-n,u-f,p-c,x-m).normalize(),r[1].setComponents(a+n,u+f,p+c,x+m).normalize(),r[2].setComponents(a+o,u+h,p+d,x+g).normalize(),r[3].setComponents(a-o,u-h,p-d,x-g).normalize(),r[4].setComponents(a-s,u-l,p-y,x-v).normalize(),r[5].setComponents(a+s,u+l,p+y,x+v).normalize(),this}intersectsObject(t){const r=t.geometry;return r.boundingSphere===null&&r.computeBoundingSphere(),ms.copy(r.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(ms)}intersectsSprite(t){return ms.center.set(0,0,0),ms.radius=.7071067811865476,ms.applyMatrix4(t.matrixWorld),this.intersectsSphere(ms)}intersectsSphere(t){const r=this.planes,i=t.center,n=-t.radius;for(let o=0;o<6;o++)if(r[o].distanceToPoint(i)<n)return!1;return!0}intersectsBox(t){const r=this.planes;for(let i=0;i<6;i++){const n=r[i];if(Jo.x=n.normal.x>0?t.max.x:t.min.x,Jo.y=n.normal.y>0?t.max.y:t.min.y,Jo.z=n.normal.z>0?t.max.z:t.min.z,n.distanceToPoint(Jo)<0)return!1}return!0}containsPoint(t){const r=this.planes;for(let i=0;i<6;i++)if(r[i].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function _d(){let S=null,t=!1,r=null,i=null;function n(o,s){r(o,s),i=S.requestAnimationFrame(n)}return{start:function(){t!==!0&&r!==null&&(i=S.requestAnimationFrame(n),t=!0)},stop:function(){S.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(o){r=o},setContext:function(o){S=o}}}function Hf(S,t){const r=t.isWebGL2,i=new WeakMap;function n(h,l){const u=h.array,c=h.usage,d=S.createBuffer();S.bindBuffer(l,d),S.bufferData(l,u,c),h.onUploadCallback();let y;if(u instanceof Float32Array)y=5126;else if(u instanceof Uint16Array)if(h.isFloat16BufferAttribute)if(r)y=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else y=5123;else if(u instanceof Int16Array)y=5122;else if(u instanceof Uint32Array)y=5125;else if(u instanceof Int32Array)y=5124;else if(u instanceof Int8Array)y=5120;else if(u instanceof Uint8Array)y=5121;else if(u instanceof Uint8ClampedArray)y=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:d,type:y,bytesPerElement:u.BYTES_PER_ELEMENT,version:h.version}}function o(h,l,u){const c=l.array,d=l.updateRange;S.bindBuffer(u,h),d.count===-1?S.bufferSubData(u,0,c):(r?S.bufferSubData(u,d.offset*c.BYTES_PER_ELEMENT,c,d.offset,d.count):S.bufferSubData(u,d.offset*c.BYTES_PER_ELEMENT,c.subarray(d.offset,d.offset+d.count)),d.count=-1),l.onUploadCallback()}function s(h){return h.isInterleavedBufferAttribute&&(h=h.data),i.get(h)}function a(h){h.isInterleavedBufferAttribute&&(h=h.data);const l=i.get(h);l&&(S.deleteBuffer(l.buffer),i.delete(h))}function f(h,l){if(h.isGLBufferAttribute){const c=i.get(h);(!c||c.version<h.version)&&i.set(h,{buffer:h.buffer,type:h.type,bytesPerElement:h.elementSize,version:h.version});return}h.isInterleavedBufferAttribute&&(h=h.data);const u=i.get(h);u===void 0?i.set(h,n(h,l)):u.version<h.version&&(o(u.buffer,h,l),u.version=h.version)}return{get:s,remove:a,update:f}}class ya extends En{constructor(t=1,r=1,i=1,n=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:r,widthSegments:i,heightSegments:n};const o=t/2,s=r/2,a=Math.floor(i),f=Math.floor(n),h=a+1,l=f+1,u=t/a,c=r/f,d=[],y=[],p=[],m=[];for(let g=0;g<l;g++){const v=g*c-s;for(let x=0;x<h;x++){const T=x*u-o;y.push(T,-v,0),p.push(0,0,1),m.push(x/a),m.push(1-g/f)}}for(let g=0;g<f;g++)for(let v=0;v<a;v++){const x=v+h*g,T=v+h*(g+1),w=v+1+h*(g+1),b=v+1+h*g;d.push(x,T,b),d.push(T,w,b)}this.setIndex(d),this.setAttribute("position",new kn(y,3)),this.setAttribute("normal",new kn(p,3)),this.setAttribute("uv",new kn(m,2))}static fromJSON(t){return new ya(t.width,t.height,t.widthSegments,t.heightSegments)}}var Wf=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,qf=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Xf=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Yf=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Zf=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Kf=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,$f="vec3 transformed = vec3( position );",Jf=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Qf=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,ep=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,tp=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,rp=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,np=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,ip=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,sp=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,op=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,ap=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,lp=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,up=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,cp=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,dp=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,hp=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,fp=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,pp=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,mp=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,gp=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,yp="gl_FragColor = linearToOutputTexel( gl_FragColor );",vp=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,bp=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,_p=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,xp=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,wp=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Sp=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Mp=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Tp=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Ep=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,jp=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Cp=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Ap=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Lp=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Pp=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Rp=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Dp=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,kp=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,Op=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Ip=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Np=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Fp=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Up=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,Bp=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Gp=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,zp=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Vp=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Hp=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Wp=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,qp=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Xp=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Yp=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Zp=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Kp=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,$p=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Jp=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Qp=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,em=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,tm=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,rm=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,nm=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,im=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,sm=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,om=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,am=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,lm=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,um=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,cm=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,dm=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,hm=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,fm=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,pm=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,mm=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,gm=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,ym=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,vm=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,bm=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,_m=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,xm=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,wm=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Sm=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Mm=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Tm=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Em=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,jm=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,Cm=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Am=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Lm=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Pm=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Rm=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Dm=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,km=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,Om=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,Im=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,Nm=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,Fm=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,Um=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,Bm=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,Gm=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,zm=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Vm=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Hm=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Wm=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,qm=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Xm=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Ym=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Zm=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Km=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,$m=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Jm=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Qm=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,eg=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,tg=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,rg=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,ng=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,ig=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sg=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,og=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ag=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,lg=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ug=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,cg=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,dg=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,hg=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fg=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,pg=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,mg=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,gg=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,yg=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,vg=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,bg=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_g=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,xg=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,wg=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,nr={alphamap_fragment:Wf,alphamap_pars_fragment:qf,alphatest_fragment:Xf,alphatest_pars_fragment:Yf,aomap_fragment:Zf,aomap_pars_fragment:Kf,begin_vertex:$f,beginnormal_vertex:Jf,bsdfs:Qf,iridescence_fragment:ep,bumpmap_pars_fragment:tp,clipping_planes_fragment:rp,clipping_planes_pars_fragment:np,clipping_planes_pars_vertex:ip,clipping_planes_vertex:sp,color_fragment:op,color_pars_fragment:ap,color_pars_vertex:lp,color_vertex:up,common:cp,cube_uv_reflection_fragment:dp,defaultnormal_vertex:hp,displacementmap_pars_vertex:fp,displacementmap_vertex:pp,emissivemap_fragment:mp,emissivemap_pars_fragment:gp,encodings_fragment:yp,encodings_pars_fragment:vp,envmap_fragment:bp,envmap_common_pars_fragment:_p,envmap_pars_fragment:xp,envmap_pars_vertex:wp,envmap_physical_pars_fragment:kp,envmap_vertex:Sp,fog_vertex:Mp,fog_pars_vertex:Tp,fog_fragment:Ep,fog_pars_fragment:jp,gradientmap_pars_fragment:Cp,lightmap_fragment:Ap,lightmap_pars_fragment:Lp,lights_lambert_fragment:Pp,lights_lambert_pars_fragment:Rp,lights_pars_begin:Dp,lights_toon_fragment:Op,lights_toon_pars_fragment:Ip,lights_phong_fragment:Np,lights_phong_pars_fragment:Fp,lights_physical_fragment:Up,lights_physical_pars_fragment:Bp,lights_fragment_begin:Gp,lights_fragment_maps:zp,lights_fragment_end:Vp,logdepthbuf_fragment:Hp,logdepthbuf_pars_fragment:Wp,logdepthbuf_pars_vertex:qp,logdepthbuf_vertex:Xp,map_fragment:Yp,map_pars_fragment:Zp,map_particle_fragment:Kp,map_particle_pars_fragment:$p,metalnessmap_fragment:Jp,metalnessmap_pars_fragment:Qp,morphcolor_vertex:em,morphnormal_vertex:tm,morphtarget_pars_vertex:rm,morphtarget_vertex:nm,normal_fragment_begin:im,normal_fragment_maps:sm,normal_pars_fragment:om,normal_pars_vertex:am,normal_vertex:lm,normalmap_pars_fragment:um,clearcoat_normal_fragment_begin:cm,clearcoat_normal_fragment_maps:dm,clearcoat_pars_fragment:hm,iridescence_pars_fragment:fm,output_fragment:pm,packing:mm,premultiplied_alpha_fragment:gm,project_vertex:ym,dithering_fragment:vm,dithering_pars_fragment:bm,roughnessmap_fragment:_m,roughnessmap_pars_fragment:xm,shadowmap_pars_fragment:wm,shadowmap_pars_vertex:Sm,shadowmap_vertex:Mm,shadowmask_pars_fragment:Tm,skinbase_vertex:Em,skinning_pars_vertex:jm,skinning_vertex:Cm,skinnormal_vertex:Am,specularmap_fragment:Lm,specularmap_pars_fragment:Pm,tonemapping_fragment:Rm,tonemapping_pars_fragment:Dm,transmission_fragment:km,transmission_pars_fragment:Om,uv_pars_fragment:Im,uv_pars_vertex:Nm,uv_vertex:Fm,uv2_pars_fragment:Um,uv2_pars_vertex:Bm,uv2_vertex:Gm,worldpos_vertex:zm,background_vert:Vm,background_frag:Hm,backgroundCube_vert:Wm,backgroundCube_frag:qm,cube_vert:Xm,cube_frag:Ym,depth_vert:Zm,depth_frag:Km,distanceRGBA_vert:$m,distanceRGBA_frag:Jm,equirect_vert:Qm,equirect_frag:eg,linedashed_vert:tg,linedashed_frag:rg,meshbasic_vert:ng,meshbasic_frag:ig,meshlambert_vert:sg,meshlambert_frag:og,meshmatcap_vert:ag,meshmatcap_frag:lg,meshnormal_vert:ug,meshnormal_frag:cg,meshphong_vert:dg,meshphong_frag:hg,meshphysical_vert:fg,meshphysical_frag:pg,meshtoon_vert:mg,meshtoon_frag:gg,points_vert:yg,points_frag:vg,shadow_vert:bg,shadow_frag:_g,sprite_vert:xg,sprite_frag:wg},Rt={common:{diffuse:{value:new ht(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new pn},uv2Transform:{value:new pn},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Qt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ht(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ht(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new pn}},sprite:{diffuse:{value:new ht(16777215)},opacity:{value:1},center:{value:new Qt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new pn}}},Bn={basic:{uniforms:en([Rt.common,Rt.specularmap,Rt.envmap,Rt.aomap,Rt.lightmap,Rt.fog]),vertexShader:nr.meshbasic_vert,fragmentShader:nr.meshbasic_frag},lambert:{uniforms:en([Rt.common,Rt.specularmap,Rt.envmap,Rt.aomap,Rt.lightmap,Rt.emissivemap,Rt.bumpmap,Rt.normalmap,Rt.displacementmap,Rt.fog,Rt.lights,{emissive:{value:new ht(0)}}]),vertexShader:nr.meshlambert_vert,fragmentShader:nr.meshlambert_frag},phong:{uniforms:en([Rt.common,Rt.specularmap,Rt.envmap,Rt.aomap,Rt.lightmap,Rt.emissivemap,Rt.bumpmap,Rt.normalmap,Rt.displacementmap,Rt.fog,Rt.lights,{emissive:{value:new ht(0)},specular:{value:new ht(1118481)},shininess:{value:30}}]),vertexShader:nr.meshphong_vert,fragmentShader:nr.meshphong_frag},standard:{uniforms:en([Rt.common,Rt.envmap,Rt.aomap,Rt.lightmap,Rt.emissivemap,Rt.bumpmap,Rt.normalmap,Rt.displacementmap,Rt.roughnessmap,Rt.metalnessmap,Rt.fog,Rt.lights,{emissive:{value:new ht(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:nr.meshphysical_vert,fragmentShader:nr.meshphysical_frag},toon:{uniforms:en([Rt.common,Rt.aomap,Rt.lightmap,Rt.emissivemap,Rt.bumpmap,Rt.normalmap,Rt.displacementmap,Rt.gradientmap,Rt.fog,Rt.lights,{emissive:{value:new ht(0)}}]),vertexShader:nr.meshtoon_vert,fragmentShader:nr.meshtoon_frag},matcap:{uniforms:en([Rt.common,Rt.bumpmap,Rt.normalmap,Rt.displacementmap,Rt.fog,{matcap:{value:null}}]),vertexShader:nr.meshmatcap_vert,fragmentShader:nr.meshmatcap_frag},points:{uniforms:en([Rt.points,Rt.fog]),vertexShader:nr.points_vert,fragmentShader:nr.points_frag},dashed:{uniforms:en([Rt.common,Rt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:nr.linedashed_vert,fragmentShader:nr.linedashed_frag},depth:{uniforms:en([Rt.common,Rt.displacementmap]),vertexShader:nr.depth_vert,fragmentShader:nr.depth_frag},normal:{uniforms:en([Rt.common,Rt.bumpmap,Rt.normalmap,Rt.displacementmap,{opacity:{value:1}}]),vertexShader:nr.meshnormal_vert,fragmentShader:nr.meshnormal_frag},sprite:{uniforms:en([Rt.sprite,Rt.fog]),vertexShader:nr.sprite_vert,fragmentShader:nr.sprite_frag},background:{uniforms:{uvTransform:{value:new pn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:nr.background_vert,fragmentShader:nr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:nr.backgroundCube_vert,fragmentShader:nr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:nr.cube_vert,fragmentShader:nr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:nr.equirect_vert,fragmentShader:nr.equirect_frag},distanceRGBA:{uniforms:en([Rt.common,Rt.displacementmap,{referencePosition:{value:new Ve},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:nr.distanceRGBA_vert,fragmentShader:nr.distanceRGBA_frag},shadow:{uniforms:en([Rt.lights,Rt.fog,{color:{value:new ht(0)},opacity:{value:1}}]),vertexShader:nr.shadow_vert,fragmentShader:nr.shadow_frag}};Bn.physical={uniforms:en([Bn.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Qt(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new ht(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Qt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new ht(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new ht(1,1,1)},specularColorMap:{value:null}}]),vertexShader:nr.meshphysical_vert,fragmentShader:nr.meshphysical_frag};const Qo={r:0,b:0,g:0};function Sg(S,t,r,i,n,o,s){const a=new ht(0);let f=o===!0?0:1,h,l,u=null,c=0,d=null;function y(m,g){let v=!1,x=g.isScene===!0?g.background:null;x&&x.isTexture&&(x=(g.backgroundBlurriness>0?r:t).get(x));const T=S.xr,w=T.getSession&&T.getSession();w&&w.environmentBlendMode==="additive"&&(x=null),x===null?p(a,f):x&&x.isColor&&(p(x,1),v=!0),(S.autoClear||v)&&S.clear(S.autoClearColor,S.autoClearDepth,S.autoClearStencil),x&&(x.isCubeTexture||x.mapping===ma)?(l===void 0&&(l=new ln(new yo(1,1,1),new tn({name:"BackgroundCubeMaterial",uniforms:Rs(Bn.backgroundCube.uniforms),vertexShader:Bn.backgroundCube.vertexShader,fragmentShader:Bn.backgroundCube.fragmentShader,side:mn,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(b,C,A){this.matrixWorld.copyPosition(A.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(l)),l.material.uniforms.envMap.value=x,l.material.uniforms.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,l.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,l.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,l.material.toneMapped=x.encoding!==pr,(u!==x||c!==x.version||d!==S.toneMapping)&&(l.material.needsUpdate=!0,u=x,c=x.version,d=S.toneMapping),l.layers.enableAll(),m.unshift(l,l.geometry,l.material,0,0,null)):x&&x.isTexture&&(h===void 0&&(h=new ln(new ya(2,2),new tn({name:"BackgroundMaterial",uniforms:Rs(Bn.background.uniforms),vertexShader:Bn.background.vertexShader,fragmentShader:Bn.background.fragmentShader,side:oi,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(h)),h.material.uniforms.t2D.value=x,h.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,h.material.toneMapped=x.encoding!==pr,x.matrixAutoUpdate===!0&&x.updateMatrix(),h.material.uniforms.uvTransform.value.copy(x.matrix),(u!==x||c!==x.version||d!==S.toneMapping)&&(h.material.needsUpdate=!0,u=x,c=x.version,d=S.toneMapping),h.layers.enableAll(),m.unshift(h,h.geometry,h.material,0,0,null))}function p(m,g){m.getRGB(Qo,gd(S)),i.buffers.color.setClear(Qo.r,Qo.g,Qo.b,g,s)}return{getClearColor:function(){return a},setClearColor:function(m,g=1){a.set(m),f=g,p(a,f)},getClearAlpha:function(){return f},setClearAlpha:function(m){f=m,p(a,f)},render:y}}function Mg(S,t,r,i){const n=S.getParameter(34921),o=i.isWebGL2?null:t.get("OES_vertex_array_object"),s=i.isWebGL2||o!==null,a={},f=m(null);let h=f,l=!1;function u(B,H,G,W,Q){let ne=!1;if(s){const U=p(W,G,H);h!==U&&(h=U,d(h.object)),ne=g(B,W,G,Q),ne&&v(B,W,G,Q)}else{const U=H.wireframe===!0;(h.geometry!==W.id||h.program!==G.id||h.wireframe!==U)&&(h.geometry=W.id,h.program=G.id,h.wireframe=U,ne=!0)}Q!==null&&r.update(Q,34963),(ne||l)&&(l=!1,A(B,H,G,W),Q!==null&&S.bindBuffer(34963,r.get(Q).buffer))}function c(){return i.isWebGL2?S.createVertexArray():o.createVertexArrayOES()}function d(B){return i.isWebGL2?S.bindVertexArray(B):o.bindVertexArrayOES(B)}function y(B){return i.isWebGL2?S.deleteVertexArray(B):o.deleteVertexArrayOES(B)}function p(B,H,G){const W=G.wireframe===!0;let Q=a[B.id];Q===void 0&&(Q={},a[B.id]=Q);let ne=Q[H.id];ne===void 0&&(ne={},Q[H.id]=ne);let U=ne[W];return U===void 0&&(U=m(c()),ne[W]=U),U}function m(B){const H=[],G=[],W=[];for(let Q=0;Q<n;Q++)H[Q]=0,G[Q]=0,W[Q]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:H,enabledAttributes:G,attributeDivisors:W,object:B,attributes:{},index:null}}function g(B,H,G,W){const Q=h.attributes,ne=H.attributes;let U=0;const D=G.getAttributes();for(const O in D)if(D[O].location>=0){const Z=Q[O];let ie=ne[O];if(ie===void 0&&(O==="instanceMatrix"&&B.instanceMatrix&&(ie=B.instanceMatrix),O==="instanceColor"&&B.instanceColor&&(ie=B.instanceColor)),Z===void 0||Z.attribute!==ie||ie&&Z.data!==ie.data)return!0;U++}return h.attributesNum!==U||h.index!==W}function v(B,H,G,W){const Q={},ne=H.attributes;let U=0;const D=G.getAttributes();for(const O in D)if(D[O].location>=0){let Z=ne[O];Z===void 0&&(O==="instanceMatrix"&&B.instanceMatrix&&(Z=B.instanceMatrix),O==="instanceColor"&&B.instanceColor&&(Z=B.instanceColor));const ie={};ie.attribute=Z,Z&&Z.data&&(ie.data=Z.data),Q[O]=ie,U++}h.attributes=Q,h.attributesNum=U,h.index=W}function x(){const B=h.newAttributes;for(let H=0,G=B.length;H<G;H++)B[H]=0}function T(B){w(B,0)}function w(B,H){const G=h.newAttributes,W=h.enabledAttributes,Q=h.attributeDivisors;G[B]=1,W[B]===0&&(S.enableVertexAttribArray(B),W[B]=1),Q[B]!==H&&((i.isWebGL2?S:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](B,H),Q[B]=H)}function b(){const B=h.newAttributes,H=h.enabledAttributes;for(let G=0,W=H.length;G<W;G++)H[G]!==B[G]&&(S.disableVertexAttribArray(G),H[G]=0)}function C(B,H,G,W,Q,ne){i.isWebGL2===!0&&(G===5124||G===5125)?S.vertexAttribIPointer(B,H,G,Q,ne):S.vertexAttribPointer(B,H,G,W,Q,ne)}function A(B,H,G,W){if(i.isWebGL2===!1&&(B.isInstancedMesh||W.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;x();const Q=W.attributes,ne=G.getAttributes(),U=H.defaultAttributeValues;for(const D in ne){const O=ne[D];if(O.location>=0){let V=Q[D];if(V===void 0&&(D==="instanceMatrix"&&B.instanceMatrix&&(V=B.instanceMatrix),D==="instanceColor"&&B.instanceColor&&(V=B.instanceColor)),V!==void 0){const Z=V.normalized,ie=V.itemSize,re=r.get(V);if(re===void 0)continue;const ge=re.buffer,ye=re.type,he=re.bytesPerElement;if(V.isInterleavedBufferAttribute){const pe=V.data,we=pe.stride,oe=V.offset;if(pe.isInstancedInterleavedBuffer){for(let fe=0;fe<O.locationSize;fe++)w(O.location+fe,pe.meshPerAttribute);B.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=pe.meshPerAttribute*pe.count)}else for(let fe=0;fe<O.locationSize;fe++)T(O.location+fe);S.bindBuffer(34962,ge);for(let fe=0;fe<O.locationSize;fe++)C(O.location+fe,ie/O.locationSize,ye,Z,we*he,(oe+ie/O.locationSize*fe)*he)}else{if(V.isInstancedBufferAttribute){for(let pe=0;pe<O.locationSize;pe++)w(O.location+pe,V.meshPerAttribute);B.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=V.meshPerAttribute*V.count)}else for(let pe=0;pe<O.locationSize;pe++)T(O.location+pe);S.bindBuffer(34962,ge);for(let pe=0;pe<O.locationSize;pe++)C(O.location+pe,ie/O.locationSize,ye,Z,ie*he,ie/O.locationSize*pe*he)}}else if(U!==void 0){const Z=U[D];if(Z!==void 0)switch(Z.length){case 2:S.vertexAttrib2fv(O.location,Z);break;case 3:S.vertexAttrib3fv(O.location,Z);break;case 4:S.vertexAttrib4fv(O.location,Z);break;default:S.vertexAttrib1fv(O.location,Z)}}}}b()}function M(){F();for(const B in a){const H=a[B];for(const G in H){const W=H[G];for(const Q in W)y(W[Q].object),delete W[Q];delete H[G]}delete a[B]}}function k(B){if(a[B.id]===void 0)return;const H=a[B.id];for(const G in H){const W=H[G];for(const Q in W)y(W[Q].object),delete W[Q];delete H[G]}delete a[B.id]}function P(B){for(const H in a){const G=a[H];if(G[B.id]===void 0)continue;const W=G[B.id];for(const Q in W)y(W[Q].object),delete W[Q];delete G[B.id]}}function F(){I(),l=!0,h!==f&&(h=f,d(h.object))}function I(){f.geometry=null,f.program=null,f.wireframe=!1}return{setup:u,reset:F,resetDefaultState:I,dispose:M,releaseStatesOfGeometry:k,releaseStatesOfProgram:P,initAttributes:x,enableAttribute:T,disableUnusedAttributes:b}}function Tg(S,t,r,i){const n=i.isWebGL2;let o;function s(h){o=h}function a(h,l){S.drawArrays(o,h,l),r.update(l,o,1)}function f(h,l,u){if(u===0)return;let c,d;if(n)c=S,d="drawArraysInstanced";else if(c=t.get("ANGLE_instanced_arrays"),d="drawArraysInstancedANGLE",c===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}c[d](o,h,l,u),r.update(l,o,u)}this.setMode=s,this.render=a,this.renderInstances=f}function Eg(S,t,r){let i;function n(){if(i!==void 0)return i;if(t.has("EXT_texture_filter_anisotropic")===!0){const C=t.get("EXT_texture_filter_anisotropic");i=S.getParameter(C.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function o(C){if(C==="highp"){if(S.getShaderPrecisionFormat(35633,36338).precision>0&&S.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";C="mediump"}return C==="mediump"&&S.getShaderPrecisionFormat(35633,36337).precision>0&&S.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const s=typeof WebGL2RenderingContext<"u"&&S instanceof WebGL2RenderingContext;let a=r.precision!==void 0?r.precision:"highp";const f=o(a);f!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",f,"instead."),a=f);const h=s||t.has("WEBGL_draw_buffers"),l=r.logarithmicDepthBuffer===!0,u=S.getParameter(34930),c=S.getParameter(35660),d=S.getParameter(3379),y=S.getParameter(34076),p=S.getParameter(34921),m=S.getParameter(36347),g=S.getParameter(36348),v=S.getParameter(36349),x=c>0,T=s||t.has("OES_texture_float"),w=x&&T,b=s?S.getParameter(36183):0;return{isWebGL2:s,drawBuffers:h,getMaxAnisotropy:n,getMaxPrecision:o,precision:a,logarithmicDepthBuffer:l,maxTextures:u,maxVertexTextures:c,maxTextureSize:d,maxCubemapSize:y,maxAttributes:p,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:x,floatFragmentTextures:T,floatVertexTextures:w,maxSamples:b}}function jg(S){const t=this;let r=null,i=0,n=!1,o=!1;const s=new Di,a=new pn,f={value:null,needsUpdate:!1};this.uniform=f,this.numPlanes=0,this.numIntersection=0,this.init=function(u,c){const d=u.length!==0||c||i!==0||n;return n=c,i=u.length,d},this.beginShadows=function(){o=!0,l(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(u,c){r=l(u,c,0)},this.setState=function(u,c,d){const y=u.clippingPlanes,p=u.clipIntersection,m=u.clipShadows,g=S.get(u);if(!n||y===null||y.length===0||o&&!m)o?l(null):h();else{const v=o?0:i,x=v*4;let T=g.clippingState||null;f.value=T,T=l(y,c,x,d);for(let w=0;w!==x;++w)T[w]=r[w];g.clippingState=T,this.numIntersection=p?this.numPlanes:0,this.numPlanes+=v}};function h(){f.value!==r&&(f.value=r,f.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function l(u,c,d,y){const p=u!==null?u.length:0;let m=null;if(p!==0){if(m=f.value,y!==!0||m===null){const g=d+p*4,v=c.matrixWorldInverse;a.getNormalMatrix(v),(m===null||m.length<g)&&(m=new Float32Array(g));for(let x=0,T=d;x!==p;++x,T+=4)s.copy(u[x]).applyMatrix4(v,a),s.normal.toArray(m,T),m[T+3]=s.constant}f.value=m,f.needsUpdate=!0}return t.numPlanes=p,t.numIntersection=0,m}}function Cg(S){let t=new WeakMap;function r(s,a){return a===pl?s.mapping=js:a===ml&&(s.mapping=Cs),s}function i(s){if(s&&s.isTexture&&s.isRenderTargetTexture===!1){const a=s.mapping;if(a===pl||a===ml)if(t.has(s)){const f=t.get(s).texture;return r(f,s.mapping)}else{const f=s.image;if(f&&f.height>0){const h=new Gf(f.height/2);return h.fromEquirectangularTexture(S,s),t.set(s,h),s.addEventListener("dispose",n),r(h.texture,s.mapping)}else return null}}return s}function n(s){const a=s.target;a.removeEventListener("dispose",n);const f=t.get(a);f!==void 0&&(t.delete(a),f.dispose())}function o(){t=new WeakMap}return{get:i,dispose:o}}class vo extends vd{constructor(t=-1,r=1,i=1,n=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=r,this.top=i,this.bottom=n,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(t,r){return super.copy(t,r),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,r,i,n,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=r,this.view.offsetX=i,this.view.offsetY=n,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),r=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2;let o=i-t,s=i+t,a=n+r,f=n-r;if(this.view!==null&&this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,l=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=h*this.view.offsetX,s=o+h*this.view.width,a-=l*this.view.offsetY,f=a-l*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,f,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const r=super.toJSON(t);return r.object.zoom=this.zoom,r.object.left=this.left,r.object.right=this.right,r.object.top=this.top,r.object.bottom=this.bottom,r.object.near=this.near,r.object.far=this.far,this.view!==null&&(r.object.view=Object.assign({},this.view)),r}}const bs=4,qu=[.125,.215,.35,.446,.526,.582],Oi=20,rl=new vo,Xu=new ht;let nl=null;const ki=(1+Math.sqrt(5))/2,gs=1/ki,Yu=[new Ve(1,1,1),new Ve(-1,1,1),new Ve(1,1,-1),new Ve(-1,1,-1),new Ve(0,ki,gs),new Ve(0,ki,-gs),new Ve(gs,0,ki),new Ve(-gs,0,ki),new Ve(ki,gs,0),new Ve(-ki,gs,0)];class Zu{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,r=0,i=.1,n=100){nl=this._renderer.getRenderTarget(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(t,i,n,o),r>0&&this._blur(o,0,0,r),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(t,r=null){return this._fromTexture(t,r)}fromCubemap(t,r=null){return this._fromTexture(t,r)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Ju(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=$u(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(nl),t.scissorTest=!1,ea(t,0,0,t.width,t.height)}_fromTexture(t,r){t.mapping===js||t.mapping===Cs?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),nl=this._renderer.getRenderTarget();const i=r||this._allocateTargets();return this._textureToCubeUV(t,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),r=4*this._cubeSize,i={magFilter:an,minFilter:an,generateMipmaps:!1,type:uo,format:Tn,encoding:Hi,depthBuffer:!1},n=Ku(t,r,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==r){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Ku(t,r,i);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Ag(o)),this._blurMaterial=Lg(o,t,r)}return n}_compileMaterial(t){const r=new ln(this._lodPlanes[0],t);this._renderer.compile(r,rl)}_sceneToCubeUV(t,r,i,n){const a=new rn(90,1,r,i),f=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],l=this._renderer,u=l.autoClear,c=l.toneMapping;l.getClearColor(Xu),l.toneMapping=si,l.autoClear=!1;const d=new xi({name:"PMREM.Background",side:mn,depthWrite:!1,depthTest:!1}),y=new ln(new yo,d);let p=!1;const m=t.background;m?m.isColor&&(d.color.copy(m),t.background=null,p=!0):(d.color.copy(Xu),p=!0);for(let g=0;g<6;g++){const v=g%3;v===0?(a.up.set(0,f[g],0),a.lookAt(h[g],0,0)):v===1?(a.up.set(0,0,f[g]),a.lookAt(0,h[g],0)):(a.up.set(0,f[g],0),a.lookAt(0,0,h[g]));const x=this._cubeSize;ea(n,v*x,g>2?x:0,x,x),l.setRenderTarget(n),p&&l.render(y,a),l.render(t,a)}y.geometry.dispose(),y.material.dispose(),l.toneMapping=c,l.autoClear=u,t.background=m}_textureToCubeUV(t,r){const i=this._renderer,n=t.mapping===js||t.mapping===Cs;n?(this._cubemapMaterial===null&&(this._cubemapMaterial=Ju()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=$u());const o=n?this._cubemapMaterial:this._equirectMaterial,s=new ln(this._lodPlanes[0],o),a=o.uniforms;a.envMap.value=t;const f=this._cubeSize;ea(r,0,0,3*f,2*f),i.setRenderTarget(r),i.render(s,rl)}_applyPMREM(t){const r=this._renderer,i=r.autoClear;r.autoClear=!1;for(let n=1;n<this._lodPlanes.length;n++){const o=Math.sqrt(this._sigmas[n]*this._sigmas[n]-this._sigmas[n-1]*this._sigmas[n-1]),s=Yu[(n-1)%Yu.length];this._blur(t,n-1,n,o,s)}r.autoClear=i}_blur(t,r,i,n,o){const s=this._pingPongRenderTarget;this._halfBlur(t,s,r,i,n,"latitudinal",o),this._halfBlur(s,t,i,i,n,"longitudinal",o)}_halfBlur(t,r,i,n,o,s,a){const f=this._renderer,h=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const l=3,u=new ln(this._lodPlanes[n],h),c=h.uniforms,d=this._sizeLods[i]-1,y=isFinite(o)?Math.PI/(2*d):2*Math.PI/(2*Oi-1),p=o/y,m=isFinite(o)?1+Math.floor(l*p):Oi;m>Oi&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${Oi}`);const g=[];let v=0;for(let C=0;C<Oi;++C){const A=C/p,M=Math.exp(-A*A/2);g.push(M),C===0?v+=M:C<m&&(v+=2*M)}for(let C=0;C<g.length;C++)g[C]=g[C]/v;c.envMap.value=t.texture,c.samples.value=m,c.weights.value=g,c.latitudinal.value=s==="latitudinal",a&&(c.poleAxis.value=a);const{_lodMax:x}=this;c.dTheta.value=y,c.mipInt.value=x-i;const T=this._sizeLods[n],w=3*T*(n>x-bs?n-x+bs:0),b=4*(this._cubeSize-T);ea(r,w,b,3*T,2*T),f.setRenderTarget(r),f.render(u,rl)}}function Ag(S){const t=[],r=[],i=[];let n=S;const o=S-bs+1+qu.length;for(let s=0;s<o;s++){const a=Math.pow(2,n);r.push(a);let f=1/a;s>S-bs?f=qu[s-S+bs-1]:s===0&&(f=0),i.push(f);const h=1/(a-2),l=-h,u=1+h,c=[l,l,u,l,u,u,l,l,u,u,l,u],d=6,y=6,p=3,m=2,g=1,v=new Float32Array(p*y*d),x=new Float32Array(m*y*d),T=new Float32Array(g*y*d);for(let b=0;b<d;b++){const C=b%3*2/3-1,A=b>2?0:-1,M=[C,A,0,C+2/3,A,0,C+2/3,A+1,0,C,A,0,C+2/3,A+1,0,C,A+1,0];v.set(M,p*y*b),x.set(c,m*y*b);const k=[b,b,b,b,b,b];T.set(k,g*y*b)}const w=new En;w.setAttribute("position",new Yr(v,p)),w.setAttribute("uv",new Yr(x,m)),w.setAttribute("faceIndex",new Yr(T,g)),t.push(w),n>bs&&n--}return{lodPlanes:t,sizeLods:r,sigmas:i}}function Ku(S,t,r){const i=new Si(S,t,r);return i.texture.mapping=ma,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function ea(S,t,r,i,n){S.viewport.set(t,r,i,n),S.scissor.set(t,r,i,n)}function Lg(S,t,r){const i=new Float32Array(Oi),n=new Ve(0,1,0);return new tn({name:"SphericalGaussianBlur",defines:{n:Oi,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/r,CUBEUV_MAX_MIP:`${S}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n}},vertexShader:Ol(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:wi,depthTest:!1,depthWrite:!1})}function $u(){return new tn({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Ol(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:wi,depthTest:!1,depthWrite:!1})}function Ju(){return new tn({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Ol(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:wi,depthTest:!1,depthWrite:!1})}function Ol(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Pg(S){let t=new WeakMap,r=null;function i(a){if(a&&a.isTexture){const f=a.mapping,h=f===pl||f===ml,l=f===js||f===Cs;if(h||l)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let u=t.get(a);return r===null&&(r=new Zu(S)),u=h?r.fromEquirectangular(a,u):r.fromCubemap(a,u),t.set(a,u),u.texture}else{if(t.has(a))return t.get(a).texture;{const u=a.image;if(h&&u&&u.height>0||l&&u&&n(u)){r===null&&(r=new Zu(S));const c=h?r.fromEquirectangular(a):r.fromCubemap(a);return t.set(a,c),a.addEventListener("dispose",o),c.texture}else return null}}}return a}function n(a){let f=0;const h=6;for(let l=0;l<h;l++)a[l]!==void 0&&f++;return f===h}function o(a){const f=a.target;f.removeEventListener("dispose",o);const h=t.get(f);h!==void 0&&(t.delete(f),h.dispose())}function s(){t=new WeakMap,r!==null&&(r.dispose(),r=null)}return{get:i,dispose:s}}function Rg(S){const t={};function r(i){if(t[i]!==void 0)return t[i];let n;switch(i){case"WEBGL_depth_texture":n=S.getExtension("WEBGL_depth_texture")||S.getExtension("MOZ_WEBGL_depth_texture")||S.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=S.getExtension("EXT_texture_filter_anisotropic")||S.getExtension("MOZ_EXT_texture_filter_anisotropic")||S.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=S.getExtension("WEBGL_compressed_texture_s3tc")||S.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||S.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=S.getExtension("WEBGL_compressed_texture_pvrtc")||S.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=S.getExtension(i)}return t[i]=n,n}return{has:function(i){return r(i)!==null},init:function(i){i.isWebGL2?r("EXT_color_buffer_float"):(r("WEBGL_depth_texture"),r("OES_texture_float"),r("OES_texture_half_float"),r("OES_texture_half_float_linear"),r("OES_standard_derivatives"),r("OES_element_index_uint"),r("OES_vertex_array_object"),r("ANGLE_instanced_arrays")),r("OES_texture_float_linear"),r("EXT_color_buffer_half_float"),r("WEBGL_multisampled_render_to_texture")},get:function(i){const n=r(i);return n===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),n}}}function Dg(S,t,r,i){const n={},o=new WeakMap;function s(u){const c=u.target;c.index!==null&&t.remove(c.index);for(const y in c.attributes)t.remove(c.attributes[y]);c.removeEventListener("dispose",s),delete n[c.id];const d=o.get(c);d&&(t.remove(d),o.delete(c)),i.releaseStatesOfGeometry(c),c.isInstancedBufferGeometry===!0&&delete c._maxInstanceCount,r.memory.geometries--}function a(u,c){return n[c.id]===!0||(c.addEventListener("dispose",s),n[c.id]=!0,r.memory.geometries++),c}function f(u){const c=u.attributes;for(const y in c)t.update(c[y],34962);const d=u.morphAttributes;for(const y in d){const p=d[y];for(let m=0,g=p.length;m<g;m++)t.update(p[m],34962)}}function h(u){const c=[],d=u.index,y=u.attributes.position;let p=0;if(d!==null){const v=d.array;p=d.version;for(let x=0,T=v.length;x<T;x+=3){const w=v[x+0],b=v[x+1],C=v[x+2];c.push(w,b,b,C,C,w)}}else{const v=y.array;p=y.version;for(let x=0,T=v.length/3-1;x<T;x+=3){const w=x+0,b=x+1,C=x+2;c.push(w,b,b,C,C,w)}}const m=new(ld(c)?md:pd)(c,1);m.version=p;const g=o.get(u);g&&t.remove(g),o.set(u,m)}function l(u){const c=o.get(u);if(c){const d=u.index;d!==null&&c.version<d.version&&h(u)}else h(u);return o.get(u)}return{get:a,update:f,getWireframeAttribute:l}}function kg(S,t,r,i){const n=i.isWebGL2;let o;function s(c){o=c}let a,f;function h(c){a=c.type,f=c.bytesPerElement}function l(c,d){S.drawElements(o,d,a,c*f),r.update(d,o,1)}function u(c,d,y){if(y===0)return;let p,m;if(n)p=S,m="drawElementsInstanced";else if(p=t.get("ANGLE_instanced_arrays"),m="drawElementsInstancedANGLE",p===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}p[m](o,d,a,c*f,y),r.update(d,o,y)}this.setMode=s,this.setIndex=h,this.render=l,this.renderInstances=u}function Og(S){const t={geometries:0,textures:0},r={frame:0,calls:0,triangles:0,points:0,lines:0};function i(o,s,a){switch(r.calls++,s){case 4:r.triangles+=a*(o/3);break;case 1:r.lines+=a*(o/2);break;case 3:r.lines+=a*(o-1);break;case 2:r.lines+=a*o;break;case 0:r.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function n(){r.frame++,r.calls=0,r.triangles=0,r.points=0,r.lines=0}return{memory:t,render:r,programs:null,autoReset:!0,reset:n,update:i}}function Ig(S,t){return S[0]-t[0]}function Ng(S,t){return Math.abs(t[1])-Math.abs(S[1])}function Fg(S,t,r){const i={},n=new Float32Array(8),o=new WeakMap,s=new br,a=[];for(let h=0;h<8;h++)a[h]=[h,0];function f(h,l,u,c){const d=h.morphTargetInfluences;if(t.isWebGL2===!0){const p=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,m=p!==void 0?p.length:0;let g=o.get(l);if(g===void 0||g.count!==m){let G=function(){B.dispose(),o.delete(l),l.removeEventListener("dispose",G)};var y=G;g!==void 0&&g.texture.dispose();const T=l.morphAttributes.position!==void 0,w=l.morphAttributes.normal!==void 0,b=l.morphAttributes.color!==void 0,C=l.morphAttributes.position||[],A=l.morphAttributes.normal||[],M=l.morphAttributes.color||[];let k=0;T===!0&&(k=1),w===!0&&(k=2),b===!0&&(k=3);let P=l.attributes.position.count*k,F=1;P>t.maxTextureSize&&(F=Math.ceil(P/t.maxTextureSize),P=t.maxTextureSize);const I=new Float32Array(P*F*4*m),B=new hd(I,P,F,m);B.type=_i,B.needsUpdate=!0;const H=k*4;for(let W=0;W<m;W++){const Q=C[W],ne=A[W],U=M[W],D=P*F*4*W;for(let O=0;O<Q.count;O++){const V=O*H;T===!0&&(s.fromBufferAttribute(Q,O),I[D+V+0]=s.x,I[D+V+1]=s.y,I[D+V+2]=s.z,I[D+V+3]=0),w===!0&&(s.fromBufferAttribute(ne,O),I[D+V+4]=s.x,I[D+V+5]=s.y,I[D+V+6]=s.z,I[D+V+7]=0),b===!0&&(s.fromBufferAttribute(U,O),I[D+V+8]=s.x,I[D+V+9]=s.y,I[D+V+10]=s.z,I[D+V+11]=U.itemSize===4?s.w:1)}}g={count:m,texture:B,size:new Qt(P,F)},o.set(l,g),l.addEventListener("dispose",G)}let v=0;for(let T=0;T<d.length;T++)v+=d[T];const x=l.morphTargetsRelative?1:1-v;c.getUniforms().setValue(S,"morphTargetBaseInfluence",x),c.getUniforms().setValue(S,"morphTargetInfluences",d),c.getUniforms().setValue(S,"morphTargetsTexture",g.texture,r),c.getUniforms().setValue(S,"morphTargetsTextureSize",g.size)}else{const p=d===void 0?0:d.length;let m=i[l.id];if(m===void 0||m.length!==p){m=[];for(let w=0;w<p;w++)m[w]=[w,0];i[l.id]=m}for(let w=0;w<p;w++){const b=m[w];b[0]=w,b[1]=d[w]}m.sort(Ng);for(let w=0;w<8;w++)w<p&&m[w][1]?(a[w][0]=m[w][0],a[w][1]=m[w][1]):(a[w][0]=Number.MAX_SAFE_INTEGER,a[w][1]=0);a.sort(Ig);const g=l.morphAttributes.position,v=l.morphAttributes.normal;let x=0;for(let w=0;w<8;w++){const b=a[w],C=b[0],A=b[1];C!==Number.MAX_SAFE_INTEGER&&A?(g&&l.getAttribute("morphTarget"+w)!==g[C]&&l.setAttribute("morphTarget"+w,g[C]),v&&l.getAttribute("morphNormal"+w)!==v[C]&&l.setAttribute("morphNormal"+w,v[C]),n[w]=A,x+=A):(g&&l.hasAttribute("morphTarget"+w)===!0&&l.deleteAttribute("morphTarget"+w),v&&l.hasAttribute("morphNormal"+w)===!0&&l.deleteAttribute("morphNormal"+w),n[w]=0)}const T=l.morphTargetsRelative?1:1-x;c.getUniforms().setValue(S,"morphTargetBaseInfluence",T),c.getUniforms().setValue(S,"morphTargetInfluences",n)}}return{update:f}}function Ug(S,t,r,i){let n=new WeakMap;function o(f){const h=i.render.frame,l=f.geometry,u=t.get(f,l);return n.get(u)!==h&&(t.update(u),n.set(u,h)),f.isInstancedMesh&&(f.hasEventListener("dispose",a)===!1&&f.addEventListener("dispose",a),r.update(f.instanceMatrix,34962),f.instanceColor!==null&&r.update(f.instanceColor,34962)),u}function s(){n=new WeakMap}function a(f){const h=f.target;h.removeEventListener("dispose",a),r.remove(h.instanceMatrix),h.instanceColor!==null&&r.remove(h.instanceColor)}return{update:o,dispose:s}}const xd=new Xr,wd=new hd,Sd=new Ef,Md=new bd,Qu=[],ec=[],tc=new Float32Array(16),rc=new Float32Array(9),nc=new Float32Array(4);function Ns(S,t,r){const i=S[0];if(i<=0||i>0)return S;const n=t*r;let o=Qu[n];if(o===void 0&&(o=new Float32Array(n),Qu[n]=o),t!==0){i.toArray(o,0);for(let s=1,a=0;s!==t;++s)a+=r,S[s].toArray(o,a)}return o}function Br(S,t){if(S.length!==t.length)return!1;for(let r=0,i=S.length;r<i;r++)if(S[r]!==t[r])return!1;return!0}function Gr(S,t){for(let r=0,i=t.length;r<i;r++)S[r]=t[r]}function va(S,t){let r=ec[t];r===void 0&&(r=new Int32Array(t),ec[t]=r);for(let i=0;i!==t;++i)r[i]=S.allocateTextureUnit();return r}function Bg(S,t){const r=this.cache;r[0]!==t&&(S.uniform1f(this.addr,t),r[0]=t)}function Gg(S,t){const r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y)&&(S.uniform2f(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(Br(r,t))return;S.uniform2fv(this.addr,t),Gr(r,t)}}function zg(S,t){const r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(S.uniform3f(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else if(t.r!==void 0)(r[0]!==t.r||r[1]!==t.g||r[2]!==t.b)&&(S.uniform3f(this.addr,t.r,t.g,t.b),r[0]=t.r,r[1]=t.g,r[2]=t.b);else{if(Br(r,t))return;S.uniform3fv(this.addr,t),Gr(r,t)}}function Vg(S,t){const r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(S.uniform4f(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(Br(r,t))return;S.uniform4fv(this.addr,t),Gr(r,t)}}function Hg(S,t){const r=this.cache,i=t.elements;if(i===void 0){if(Br(r,t))return;S.uniformMatrix2fv(this.addr,!1,t),Gr(r,t)}else{if(Br(r,i))return;nc.set(i),S.uniformMatrix2fv(this.addr,!1,nc),Gr(r,i)}}function Wg(S,t){const r=this.cache,i=t.elements;if(i===void 0){if(Br(r,t))return;S.uniformMatrix3fv(this.addr,!1,t),Gr(r,t)}else{if(Br(r,i))return;rc.set(i),S.uniformMatrix3fv(this.addr,!1,rc),Gr(r,i)}}function qg(S,t){const r=this.cache,i=t.elements;if(i===void 0){if(Br(r,t))return;S.uniformMatrix4fv(this.addr,!1,t),Gr(r,t)}else{if(Br(r,i))return;tc.set(i),S.uniformMatrix4fv(this.addr,!1,tc),Gr(r,i)}}function Xg(S,t){const r=this.cache;r[0]!==t&&(S.uniform1i(this.addr,t),r[0]=t)}function Yg(S,t){const r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y)&&(S.uniform2i(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(Br(r,t))return;S.uniform2iv(this.addr,t),Gr(r,t)}}function Zg(S,t){const r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(S.uniform3i(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else{if(Br(r,t))return;S.uniform3iv(this.addr,t),Gr(r,t)}}function Kg(S,t){const r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(S.uniform4i(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(Br(r,t))return;S.uniform4iv(this.addr,t),Gr(r,t)}}function $g(S,t){const r=this.cache;r[0]!==t&&(S.uniform1ui(this.addr,t),r[0]=t)}function Jg(S,t){const r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y)&&(S.uniform2ui(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(Br(r,t))return;S.uniform2uiv(this.addr,t),Gr(r,t)}}function Qg(S,t){const r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(S.uniform3ui(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else{if(Br(r,t))return;S.uniform3uiv(this.addr,t),Gr(r,t)}}function ey(S,t){const r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(S.uniform4ui(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(Br(r,t))return;S.uniform4uiv(this.addr,t),Gr(r,t)}}function ty(S,t,r){const i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(S.uniform1i(this.addr,n),i[0]=n),r.setTexture2D(t||xd,n)}function ry(S,t,r){const i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(S.uniform1i(this.addr,n),i[0]=n),r.setTexture3D(t||Sd,n)}function ny(S,t,r){const i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(S.uniform1i(this.addr,n),i[0]=n),r.setTextureCube(t||Md,n)}function iy(S,t,r){const i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(S.uniform1i(this.addr,n),i[0]=n),r.setTexture2DArray(t||wd,n)}function sy(S){switch(S){case 5126:return Bg;case 35664:return Gg;case 35665:return zg;case 35666:return Vg;case 35674:return Hg;case 35675:return Wg;case 35676:return qg;case 5124:case 35670:return Xg;case 35667:case 35671:return Yg;case 35668:case 35672:return Zg;case 35669:case 35673:return Kg;case 5125:return $g;case 36294:return Jg;case 36295:return Qg;case 36296:return ey;case 35678:case 36198:case 36298:case 36306:case 35682:return ty;case 35679:case 36299:case 36307:return ry;case 35680:case 36300:case 36308:case 36293:return ny;case 36289:case 36303:case 36311:case 36292:return iy}}function oy(S,t){S.uniform1fv(this.addr,t)}function ay(S,t){const r=Ns(t,this.size,2);S.uniform2fv(this.addr,r)}function ly(S,t){const r=Ns(t,this.size,3);S.uniform3fv(this.addr,r)}function uy(S,t){const r=Ns(t,this.size,4);S.uniform4fv(this.addr,r)}function cy(S,t){const r=Ns(t,this.size,4);S.uniformMatrix2fv(this.addr,!1,r)}function dy(S,t){const r=Ns(t,this.size,9);S.uniformMatrix3fv(this.addr,!1,r)}function hy(S,t){const r=Ns(t,this.size,16);S.uniformMatrix4fv(this.addr,!1,r)}function fy(S,t){S.uniform1iv(this.addr,t)}function py(S,t){S.uniform2iv(this.addr,t)}function my(S,t){S.uniform3iv(this.addr,t)}function gy(S,t){S.uniform4iv(this.addr,t)}function yy(S,t){S.uniform1uiv(this.addr,t)}function vy(S,t){S.uniform2uiv(this.addr,t)}function by(S,t){S.uniform3uiv(this.addr,t)}function _y(S,t){S.uniform4uiv(this.addr,t)}function xy(S,t,r){const i=this.cache,n=t.length,o=va(r,n);Br(i,o)||(S.uniform1iv(this.addr,o),Gr(i,o));for(let s=0;s!==n;++s)r.setTexture2D(t[s]||xd,o[s])}function wy(S,t,r){const i=this.cache,n=t.length,o=va(r,n);Br(i,o)||(S.uniform1iv(this.addr,o),Gr(i,o));for(let s=0;s!==n;++s)r.setTexture3D(t[s]||Sd,o[s])}function Sy(S,t,r){const i=this.cache,n=t.length,o=va(r,n);Br(i,o)||(S.uniform1iv(this.addr,o),Gr(i,o));for(let s=0;s!==n;++s)r.setTextureCube(t[s]||Md,o[s])}function My(S,t,r){const i=this.cache,n=t.length,o=va(r,n);Br(i,o)||(S.uniform1iv(this.addr,o),Gr(i,o));for(let s=0;s!==n;++s)r.setTexture2DArray(t[s]||wd,o[s])}function Ty(S){switch(S){case 5126:return oy;case 35664:return ay;case 35665:return ly;case 35666:return uy;case 35674:return cy;case 35675:return dy;case 35676:return hy;case 5124:case 35670:return fy;case 35667:case 35671:return py;case 35668:case 35672:return my;case 35669:case 35673:return gy;case 5125:return yy;case 36294:return vy;case 36295:return by;case 36296:return _y;case 35678:case 36198:case 36298:case 36306:case 35682:return xy;case 35679:case 36299:case 36307:return wy;case 35680:case 36300:case 36308:case 36293:return Sy;case 36289:case 36303:case 36311:case 36292:return My}}class Ey{constructor(t,r,i){this.id=t,this.addr=i,this.cache=[],this.setValue=sy(r.type)}}class jy{constructor(t,r,i){this.id=t,this.addr=i,this.cache=[],this.size=r.size,this.setValue=Ty(r.type)}}class Cy{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,r,i){const n=this.seq;for(let o=0,s=n.length;o!==s;++o){const a=n[o];a.setValue(t,r[a.id],i)}}}const il=/(\w+)(\])?(\[|\.)?/g;function ic(S,t){S.seq.push(t),S.map[t.id]=t}function Ay(S,t,r){const i=S.name,n=i.length;for(il.lastIndex=0;;){const o=il.exec(i),s=il.lastIndex;let a=o[1];const f=o[2]==="]",h=o[3];if(f&&(a=a|0),h===void 0||h==="["&&s+2===n){ic(r,h===void 0?new Ey(a,S,t):new jy(a,S,t));break}else{let u=r.map[a];u===void 0&&(u=new Cy(a),ic(r,u)),r=u}}}class ua{constructor(t,r){this.seq=[],this.map={};const i=t.getProgramParameter(r,35718);for(let n=0;n<i;++n){const o=t.getActiveUniform(r,n),s=t.getUniformLocation(r,o.name);Ay(o,s,this)}}setValue(t,r,i,n){const o=this.map[r];o!==void 0&&o.setValue(t,i,n)}setOptional(t,r,i){const n=r[i];n!==void 0&&this.setValue(t,i,n)}static upload(t,r,i,n){for(let o=0,s=r.length;o!==s;++o){const a=r[o],f=i[a.id];f.needsUpdate!==!1&&a.setValue(t,f.value,n)}}static seqWithValue(t,r){const i=[];for(let n=0,o=t.length;n!==o;++n){const s=t[n];s.id in r&&i.push(s)}return i}}function sc(S,t,r){const i=S.createShader(t);return S.shaderSource(i,r),S.compileShader(i),i}let Ly=0;function Py(S,t){const r=S.split(`
`),i=[],n=Math.max(t-6,0),o=Math.min(t+6,r.length);for(let s=n;s<o;s++){const a=s+1;i.push(`${a===t?">":" "} ${a}: ${r[s]}`)}return i.join(`
`)}function Ry(S){switch(S){case Hi:return["Linear","( value )"];case pr:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",S),["Linear","( value )"]}}function oc(S,t,r){const i=S.getShaderParameter(t,35713),n=S.getShaderInfoLog(t).trim();if(i&&n==="")return"";const o=/ERROR: 0:(\d+)/.exec(n);if(o){const s=parseInt(o[1]);return r.toUpperCase()+`

`+n+`

`+Py(S.getShaderSource(t),s)}else return n}function Dy(S,t){const r=Ry(t);return"vec4 "+S+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function ky(S,t){let r;switch(t){case Fh:r="Linear";break;case Uh:r="Reinhard";break;case Bh:r="OptimizedCineon";break;case Gh:r="ACESFilmic";break;case zh:r="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),r="Linear"}return"vec3 "+S+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function Oy(S){return[S.extensionDerivatives||S.envMapCubeUVHeight||S.bumpMap||S.tangentSpaceNormalMap||S.clearcoatNormalMap||S.flatShading||S.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(S.extensionFragDepth||S.logarithmicDepthBuffer)&&S.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",S.extensionDrawBuffers&&S.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(S.extensionShaderTextureLOD||S.envMap||S.transmission)&&S.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(so).join(`
`)}function Iy(S){const t=[];for(const r in S){const i=S[r];i!==!1&&t.push("#define "+r+" "+i)}return t.join(`
`)}function Ny(S,t){const r={},i=S.getProgramParameter(t,35721);for(let n=0;n<i;n++){const o=S.getActiveAttrib(t,n),s=o.name;let a=1;o.type===35674&&(a=2),o.type===35675&&(a=3),o.type===35676&&(a=4),r[s]={type:o.type,location:S.getAttribLocation(t,s),locationSize:a}}return r}function so(S){return S!==""}function ac(S,t){const r=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return S.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,r).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function lc(S,t){return S.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const Fy=/^[ \t]*#include +<([\w\d./]+)>/gm;function xl(S){return S.replace(Fy,Uy)}function Uy(S,t){const r=nr[t];if(r===void 0)throw new Error("Can not resolve #include <"+t+">");return xl(r)}const By=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function uc(S){return S.replace(By,Gy)}function Gy(S,t,r,i){let n="";for(let o=parseInt(t);o<parseInt(r);o++)n+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return n}function cc(S){let t="precision "+S.precision+` float;
precision `+S.precision+" int;";return S.precision==="highp"?t+=`
#define HIGH_PRECISION`:S.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:S.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function zy(S){let t="SHADOWMAP_TYPE_BASIC";return S.shadowMapType===$c?t="SHADOWMAP_TYPE_PCF":S.shadowMapType===Jc?t="SHADOWMAP_TYPE_PCF_SOFT":S.shadowMapType===io&&(t="SHADOWMAP_TYPE_VSM"),t}function Vy(S){let t="ENVMAP_TYPE_CUBE";if(S.envMap)switch(S.envMapMode){case js:case Cs:t="ENVMAP_TYPE_CUBE";break;case ma:t="ENVMAP_TYPE_CUBE_UV";break}return t}function Hy(S){let t="ENVMAP_MODE_REFLECTION";if(S.envMap)switch(S.envMapMode){case Cs:t="ENVMAP_MODE_REFRACTION";break}return t}function Wy(S){let t="ENVMAP_BLENDING_NONE";if(S.envMap)switch(S.combine){case td:t="ENVMAP_BLENDING_MULTIPLY";break;case Ih:t="ENVMAP_BLENDING_MIX";break;case Nh:t="ENVMAP_BLENDING_ADD";break}return t}function qy(S){const t=S.envMapCubeUVHeight;if(t===null)return null;const r=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,r),7*16)),texelHeight:i,maxMip:r}}function Xy(S,t,r,i){const n=S.getContext(),o=r.defines;let s=r.vertexShader,a=r.fragmentShader;const f=zy(r),h=Vy(r),l=Hy(r),u=Wy(r),c=qy(r),d=r.isWebGL2?"":Oy(r),y=Iy(o),p=n.createProgram();let m,g,v=r.glslVersion?"#version "+r.glslVersion+`
`:"";r.isRawShaderMaterial?(m=[y].filter(so).join(`
`),m.length>0&&(m+=`
`),g=[d,y].filter(so).join(`
`),g.length>0&&(g+=`
`)):(m=[cc(r),"#define SHADER_NAME "+r.shaderName,y,r.instancing?"#define USE_INSTANCING":"",r.instancingColor?"#define USE_INSTANCING_COLOR":"",r.supportsVertexTextures?"#define VERTEX_TEXTURES":"",r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+l:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularColorMap?"#define USE_SPECULARCOLORMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.sheenColorMap?"#define USE_SHEENCOLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&r.flatShading===!1?"#define USE_MORPHNORMALS":"",r.morphColors&&r.isWebGL2?"#define USE_MORPHCOLORS":"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+r.morphTextureStride:"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_COUNT "+r.morphTargetsCount:"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+f:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(so).join(`
`),g=[d,cc(r),"#define SHADER_NAME "+r.shaderName,y,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+h:"",r.envMap?"#define "+l:"",r.envMap?"#define "+u:"",c?"#define CUBEUV_TEXEL_WIDTH "+c.texelWidth:"",c?"#define CUBEUV_TEXEL_HEIGHT "+c.texelHeight:"",c?"#define CUBEUV_MAX_MIP "+c.maxMip+".0":"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoat?"#define USE_CLEARCOAT":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescence?"#define USE_IRIDESCENCE":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularColorMap?"#define USE_SPECULARCOLORMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaTest?"#define USE_ALPHATEST":"",r.sheen?"#define USE_SHEEN":"",r.sheenColorMap?"#define USE_SHEENCOLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors||r.instancingColor?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+f:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",r.toneMapping!==si?"#define TONE_MAPPING":"",r.toneMapping!==si?nr.tonemapping_pars_fragment:"",r.toneMapping!==si?ky("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.opaque?"#define OPAQUE":"",nr.encodings_pars_fragment,Dy("linearToOutputTexel",r.outputEncoding),r.useDepthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",`
`].filter(so).join(`
`)),s=xl(s),s=ac(s,r),s=lc(s,r),a=xl(a),a=ac(a,r),a=lc(a,r),s=uc(s),a=uc(a),r.isWebGL2&&r.isRawShaderMaterial!==!0&&(v=`#version 300 es
`,m=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+m,g=["#define varying in",r.glslVersion===ku?"":"layout(location = 0) out highp vec4 pc_fragColor;",r.glslVersion===ku?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const x=v+m+s,T=v+g+a,w=sc(n,35633,x),b=sc(n,35632,T);if(n.attachShader(p,w),n.attachShader(p,b),r.index0AttributeName!==void 0?n.bindAttribLocation(p,0,r.index0AttributeName):r.morphTargets===!0&&n.bindAttribLocation(p,0,"position"),n.linkProgram(p),S.debug.checkShaderErrors){const M=n.getProgramInfoLog(p).trim(),k=n.getShaderInfoLog(w).trim(),P=n.getShaderInfoLog(b).trim();let F=!0,I=!0;if(n.getProgramParameter(p,35714)===!1){F=!1;const B=oc(n,w,"vertex"),H=oc(n,b,"fragment");console.error("THREE.WebGLProgram: Shader Error "+n.getError()+" - VALIDATE_STATUS "+n.getProgramParameter(p,35715)+`

Program Info Log: `+M+`
`+B+`
`+H)}else M!==""?console.warn("THREE.WebGLProgram: Program Info Log:",M):(k===""||P==="")&&(I=!1);I&&(this.diagnostics={runnable:F,programLog:M,vertexShader:{log:k,prefix:m},fragmentShader:{log:P,prefix:g}})}n.deleteShader(w),n.deleteShader(b);let C;this.getUniforms=function(){return C===void 0&&(C=new ua(n,p)),C};let A;return this.getAttributes=function(){return A===void 0&&(A=Ny(n,p)),A},this.destroy=function(){i.releaseStatesOfProgram(this),n.deleteProgram(p),this.program=void 0},this.name=r.shaderName,this.id=Ly++,this.cacheKey=t,this.usedTimes=1,this.program=p,this.vertexShader=w,this.fragmentShader=b,this}let Yy=0;class Zy{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const r=t.vertexShader,i=t.fragmentShader,n=this._getShaderStage(r),o=this._getShaderStage(i),s=this._getShaderCacheForMaterial(t);return s.has(n)===!1&&(s.add(n),n.usedTimes++),s.has(o)===!1&&(s.add(o),o.usedTimes++),this}remove(t){const r=this.materialCache.get(t);for(const i of r)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const r=this.materialCache;let i=r.get(t);return i===void 0&&(i=new Set,r.set(t,i)),i}_getShaderStage(t){const r=this.shaderCache;let i=r.get(t);return i===void 0&&(i=new Ky(t),r.set(t,i)),i}}class Ky{constructor(t){this.id=Yy++,this.code=t,this.usedTimes=0}}function $y(S,t,r,i,n,o,s){const a=new fd,f=new Zy,h=[],l=n.isWebGL2,u=n.logarithmicDepthBuffer,c=n.vertexTextures;let d=n.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function p(A,M,k,P,F){const I=P.fog,B=F.geometry,H=A.isMeshStandardMaterial?P.environment:null,G=(A.isMeshStandardMaterial?r:t).get(A.envMap||H),W=G&&G.mapping===ma?G.image.height:null,Q=y[A.type];A.precision!==null&&(d=n.getMaxPrecision(A.precision),d!==A.precision&&console.warn("THREE.WebGLProgram.getParameters:",A.precision,"not supported, using",d,"instead."));const ne=B.morphAttributes.position||B.morphAttributes.normal||B.morphAttributes.color,U=ne!==void 0?ne.length:0;let D=0;B.morphAttributes.position!==void 0&&(D=1),B.morphAttributes.normal!==void 0&&(D=2),B.morphAttributes.color!==void 0&&(D=3);let O,V,Z,ie;if(Q){const we=Bn[Q];O=we.vertexShader,V=we.fragmentShader}else O=A.vertexShader,V=A.fragmentShader,f.update(A),Z=f.getVertexShaderID(A),ie=f.getFragmentShaderID(A);const re=S.getRenderTarget(),ge=A.alphaTest>0,ye=A.clearcoat>0,he=A.iridescence>0;return{isWebGL2:l,shaderID:Q,shaderName:A.type,vertexShader:O,fragmentShader:V,defines:A.defines,customVertexShaderID:Z,customFragmentShaderID:ie,isRawShaderMaterial:A.isRawShaderMaterial===!0,glslVersion:A.glslVersion,precision:d,instancing:F.isInstancedMesh===!0,instancingColor:F.isInstancedMesh===!0&&F.instanceColor!==null,supportsVertexTextures:c,outputEncoding:re===null?S.outputEncoding:re.isXRRenderTarget===!0?re.texture.encoding:Hi,map:!!A.map,matcap:!!A.matcap,envMap:!!G,envMapMode:G&&G.mapping,envMapCubeUVHeight:W,lightMap:!!A.lightMap,aoMap:!!A.aoMap,emissiveMap:!!A.emissiveMap,bumpMap:!!A.bumpMap,normalMap:!!A.normalMap,objectSpaceNormalMap:A.normalMapType===uf,tangentSpaceNormalMap:A.normalMapType===od,decodeVideoTexture:!!A.map&&A.map.isVideoTexture===!0&&A.map.encoding===pr,clearcoat:ye,clearcoatMap:ye&&!!A.clearcoatMap,clearcoatRoughnessMap:ye&&!!A.clearcoatRoughnessMap,clearcoatNormalMap:ye&&!!A.clearcoatNormalMap,iridescence:he,iridescenceMap:he&&!!A.iridescenceMap,iridescenceThicknessMap:he&&!!A.iridescenceThicknessMap,displacementMap:!!A.displacementMap,roughnessMap:!!A.roughnessMap,metalnessMap:!!A.metalnessMap,specularMap:!!A.specularMap,specularIntensityMap:!!A.specularIntensityMap,specularColorMap:!!A.specularColorMap,opaque:A.transparent===!1&&A.blending===ws,alphaMap:!!A.alphaMap,alphaTest:ge,gradientMap:!!A.gradientMap,sheen:A.sheen>0,sheenColorMap:!!A.sheenColorMap,sheenRoughnessMap:!!A.sheenRoughnessMap,transmission:A.transmission>0,transmissionMap:!!A.transmissionMap,thicknessMap:!!A.thicknessMap,combine:A.combine,vertexTangents:!!A.normalMap&&!!B.attributes.tangent,vertexColors:A.vertexColors,vertexAlphas:A.vertexColors===!0&&!!B.attributes.color&&B.attributes.color.itemSize===4,vertexUvs:!!A.map||!!A.bumpMap||!!A.normalMap||!!A.specularMap||!!A.alphaMap||!!A.emissiveMap||!!A.roughnessMap||!!A.metalnessMap||!!A.clearcoatMap||!!A.clearcoatRoughnessMap||!!A.clearcoatNormalMap||!!A.iridescenceMap||!!A.iridescenceThicknessMap||!!A.displacementMap||!!A.transmissionMap||!!A.thicknessMap||!!A.specularIntensityMap||!!A.specularColorMap||!!A.sheenColorMap||!!A.sheenRoughnessMap,uvsVertexOnly:!(A.map||A.bumpMap||A.normalMap||A.specularMap||A.alphaMap||A.emissiveMap||A.roughnessMap||A.metalnessMap||A.clearcoatNormalMap||A.iridescenceMap||A.iridescenceThicknessMap||A.transmission>0||A.transmissionMap||A.thicknessMap||A.specularIntensityMap||A.specularColorMap||A.sheen>0||A.sheenColorMap||A.sheenRoughnessMap)&&!!A.displacementMap,fog:!!I,useFog:A.fog===!0,fogExp2:I&&I.isFogExp2,flatShading:!!A.flatShading,sizeAttenuation:A.sizeAttenuation,logarithmicDepthBuffer:u,skinning:F.isSkinnedMesh===!0,morphTargets:B.morphAttributes.position!==void 0,morphNormals:B.morphAttributes.normal!==void 0,morphColors:B.morphAttributes.color!==void 0,morphTargetsCount:U,morphTextureStride:D,numDirLights:M.directional.length,numPointLights:M.point.length,numSpotLights:M.spot.length,numSpotLightMaps:M.spotLightMap.length,numRectAreaLights:M.rectArea.length,numHemiLights:M.hemi.length,numDirLightShadows:M.directionalShadowMap.length,numPointLightShadows:M.pointShadowMap.length,numSpotLightShadows:M.spotShadowMap.length,numSpotLightShadowsWithMaps:M.numSpotLightShadowsWithMaps,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:A.dithering,shadowMapEnabled:S.shadowMap.enabled&&k.length>0,shadowMapType:S.shadowMap.type,toneMapping:A.toneMapped?S.toneMapping:si,physicallyCorrectLights:S.physicallyCorrectLights,premultipliedAlpha:A.premultipliedAlpha,doubleSided:A.side===ni,flipSided:A.side===mn,useDepthPacking:!!A.depthPacking,depthPacking:A.depthPacking||0,index0AttributeName:A.index0AttributeName,extensionDerivatives:A.extensions&&A.extensions.derivatives,extensionFragDepth:A.extensions&&A.extensions.fragDepth,extensionDrawBuffers:A.extensions&&A.extensions.drawBuffers,extensionShaderTextureLOD:A.extensions&&A.extensions.shaderTextureLOD,rendererExtensionFragDepth:l||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:l||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:l||i.has("EXT_shader_texture_lod"),customProgramCacheKey:A.customProgramCacheKey()}}function m(A){const M=[];if(A.shaderID?M.push(A.shaderID):(M.push(A.customVertexShaderID),M.push(A.customFragmentShaderID)),A.defines!==void 0)for(const k in A.defines)M.push(k),M.push(A.defines[k]);return A.isRawShaderMaterial===!1&&(g(M,A),v(M,A),M.push(S.outputEncoding)),M.push(A.customProgramCacheKey),M.join()}function g(A,M){A.push(M.precision),A.push(M.outputEncoding),A.push(M.envMapMode),A.push(M.envMapCubeUVHeight),A.push(M.combine),A.push(M.vertexUvs),A.push(M.fogExp2),A.push(M.sizeAttenuation),A.push(M.morphTargetsCount),A.push(M.morphAttributeCount),A.push(M.numDirLights),A.push(M.numPointLights),A.push(M.numSpotLights),A.push(M.numSpotLightMaps),A.push(M.numHemiLights),A.push(M.numRectAreaLights),A.push(M.numDirLightShadows),A.push(M.numPointLightShadows),A.push(M.numSpotLightShadows),A.push(M.numSpotLightShadowsWithMaps),A.push(M.shadowMapType),A.push(M.toneMapping),A.push(M.numClippingPlanes),A.push(M.numClipIntersection),A.push(M.depthPacking)}function v(A,M){a.disableAll(),M.isWebGL2&&a.enable(0),M.supportsVertexTextures&&a.enable(1),M.instancing&&a.enable(2),M.instancingColor&&a.enable(3),M.map&&a.enable(4),M.matcap&&a.enable(5),M.envMap&&a.enable(6),M.lightMap&&a.enable(7),M.aoMap&&a.enable(8),M.emissiveMap&&a.enable(9),M.bumpMap&&a.enable(10),M.normalMap&&a.enable(11),M.objectSpaceNormalMap&&a.enable(12),M.tangentSpaceNormalMap&&a.enable(13),M.clearcoat&&a.enable(14),M.clearcoatMap&&a.enable(15),M.clearcoatRoughnessMap&&a.enable(16),M.clearcoatNormalMap&&a.enable(17),M.iridescence&&a.enable(18),M.iridescenceMap&&a.enable(19),M.iridescenceThicknessMap&&a.enable(20),M.displacementMap&&a.enable(21),M.specularMap&&a.enable(22),M.roughnessMap&&a.enable(23),M.metalnessMap&&a.enable(24),M.gradientMap&&a.enable(25),M.alphaMap&&a.enable(26),M.alphaTest&&a.enable(27),M.vertexColors&&a.enable(28),M.vertexAlphas&&a.enable(29),M.vertexUvs&&a.enable(30),M.vertexTangents&&a.enable(31),M.uvsVertexOnly&&a.enable(32),A.push(a.mask),a.disableAll(),M.fog&&a.enable(0),M.useFog&&a.enable(1),M.flatShading&&a.enable(2),M.logarithmicDepthBuffer&&a.enable(3),M.skinning&&a.enable(4),M.morphTargets&&a.enable(5),M.morphNormals&&a.enable(6),M.morphColors&&a.enable(7),M.premultipliedAlpha&&a.enable(8),M.shadowMapEnabled&&a.enable(9),M.physicallyCorrectLights&&a.enable(10),M.doubleSided&&a.enable(11),M.flipSided&&a.enable(12),M.useDepthPacking&&a.enable(13),M.dithering&&a.enable(14),M.specularIntensityMap&&a.enable(15),M.specularColorMap&&a.enable(16),M.transmission&&a.enable(17),M.transmissionMap&&a.enable(18),M.thicknessMap&&a.enable(19),M.sheen&&a.enable(20),M.sheenColorMap&&a.enable(21),M.sheenRoughnessMap&&a.enable(22),M.decodeVideoTexture&&a.enable(23),M.opaque&&a.enable(24),A.push(a.mask)}function x(A){const M=y[A.type];let k;if(M){const P=Bn[M];k=yd.clone(P.uniforms)}else k=A.uniforms;return k}function T(A,M){let k;for(let P=0,F=h.length;P<F;P++){const I=h[P];if(I.cacheKey===M){k=I,++k.usedTimes;break}}return k===void 0&&(k=new Xy(S,M,A,o),h.push(k)),k}function w(A){if(--A.usedTimes===0){const M=h.indexOf(A);h[M]=h[h.length-1],h.pop(),A.destroy()}}function b(A){f.remove(A)}function C(){f.dispose()}return{getParameters:p,getProgramCacheKey:m,getUniforms:x,acquireProgram:T,releaseProgram:w,releaseShaderCache:b,programs:h,dispose:C}}function Jy(){let S=new WeakMap;function t(o){let s=S.get(o);return s===void 0&&(s={},S.set(o,s)),s}function r(o){S.delete(o)}function i(o,s,a){S.get(o)[s]=a}function n(){S=new WeakMap}return{get:t,remove:r,update:i,dispose:n}}function Qy(S,t){return S.groupOrder!==t.groupOrder?S.groupOrder-t.groupOrder:S.renderOrder!==t.renderOrder?S.renderOrder-t.renderOrder:S.material.id!==t.material.id?S.material.id-t.material.id:S.z!==t.z?S.z-t.z:S.id-t.id}function dc(S,t){return S.groupOrder!==t.groupOrder?S.groupOrder-t.groupOrder:S.renderOrder!==t.renderOrder?S.renderOrder-t.renderOrder:S.z!==t.z?t.z-S.z:S.id-t.id}function hc(){const S=[];let t=0;const r=[],i=[],n=[];function o(){t=0,r.length=0,i.length=0,n.length=0}function s(u,c,d,y,p,m){let g=S[t];return g===void 0?(g={id:u.id,object:u,geometry:c,material:d,groupOrder:y,renderOrder:u.renderOrder,z:p,group:m},S[t]=g):(g.id=u.id,g.object=u,g.geometry=c,g.material=d,g.groupOrder=y,g.renderOrder=u.renderOrder,g.z=p,g.group=m),t++,g}function a(u,c,d,y,p,m){const g=s(u,c,d,y,p,m);d.transmission>0?i.push(g):d.transparent===!0?n.push(g):r.push(g)}function f(u,c,d,y,p,m){const g=s(u,c,d,y,p,m);d.transmission>0?i.unshift(g):d.transparent===!0?n.unshift(g):r.unshift(g)}function h(u,c){r.length>1&&r.sort(u||Qy),i.length>1&&i.sort(c||dc),n.length>1&&n.sort(c||dc)}function l(){for(let u=t,c=S.length;u<c;u++){const d=S[u];if(d.id===null)break;d.id=null,d.object=null,d.geometry=null,d.material=null,d.group=null}}return{opaque:r,transmissive:i,transparent:n,init:o,push:a,unshift:f,finish:l,sort:h}}function e0(){let S=new WeakMap;function t(i,n){const o=S.get(i);let s;return o===void 0?(s=new hc,S.set(i,[s])):n>=o.length?(s=new hc,o.push(s)):s=o[n],s}function r(){S=new WeakMap}return{get:t,dispose:r}}function t0(){const S={};return{get:function(t){if(S[t.id]!==void 0)return S[t.id];let r;switch(t.type){case"DirectionalLight":r={direction:new Ve,color:new ht};break;case"SpotLight":r={position:new Ve,direction:new Ve,color:new ht,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new Ve,color:new ht,distance:0,decay:0};break;case"HemisphereLight":r={direction:new Ve,skyColor:new ht,groundColor:new ht};break;case"RectAreaLight":r={color:new ht,position:new Ve,halfWidth:new Ve,halfHeight:new Ve};break}return S[t.id]=r,r}}}function r0(){const S={};return{get:function(t){if(S[t.id]!==void 0)return S[t.id];let r;switch(t.type){case"DirectionalLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Qt};break;case"SpotLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Qt};break;case"PointLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Qt,shadowCameraNear:1,shadowCameraFar:1e3};break}return S[t.id]=r,r}}}let n0=0;function i0(S,t){return(t.castShadow?2:0)-(S.castShadow?2:0)+(t.map?1:0)-(S.map?1:0)}function s0(S,t){const r=new t0,i=r0(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let l=0;l<9;l++)n.probe.push(new Ve);const o=new Ve,s=new or,a=new or;function f(l,u){let c=0,d=0,y=0;for(let P=0;P<9;P++)n.probe[P].set(0,0,0);let p=0,m=0,g=0,v=0,x=0,T=0,w=0,b=0,C=0,A=0;l.sort(i0);const M=u!==!0?Math.PI:1;for(let P=0,F=l.length;P<F;P++){const I=l[P],B=I.color,H=I.intensity,G=I.distance,W=I.shadow&&I.shadow.map?I.shadow.map.texture:null;if(I.isAmbientLight)c+=B.r*H*M,d+=B.g*H*M,y+=B.b*H*M;else if(I.isLightProbe)for(let Q=0;Q<9;Q++)n.probe[Q].addScaledVector(I.sh.coefficients[Q],H);else if(I.isDirectionalLight){const Q=r.get(I);if(Q.color.copy(I.color).multiplyScalar(I.intensity*M),I.castShadow){const ne=I.shadow,U=i.get(I);U.shadowBias=ne.bias,U.shadowNormalBias=ne.normalBias,U.shadowRadius=ne.radius,U.shadowMapSize=ne.mapSize,n.directionalShadow[p]=U,n.directionalShadowMap[p]=W,n.directionalShadowMatrix[p]=I.shadow.matrix,T++}n.directional[p]=Q,p++}else if(I.isSpotLight){const Q=r.get(I);Q.position.setFromMatrixPosition(I.matrixWorld),Q.color.copy(B).multiplyScalar(H*M),Q.distance=G,Q.coneCos=Math.cos(I.angle),Q.penumbraCos=Math.cos(I.angle*(1-I.penumbra)),Q.decay=I.decay,n.spot[g]=Q;const ne=I.shadow;if(I.map&&(n.spotLightMap[C]=I.map,C++,ne.updateMatrices(I),I.castShadow&&A++),n.spotLightMatrix[g]=ne.matrix,I.castShadow){const U=i.get(I);U.shadowBias=ne.bias,U.shadowNormalBias=ne.normalBias,U.shadowRadius=ne.radius,U.shadowMapSize=ne.mapSize,n.spotShadow[g]=U,n.spotShadowMap[g]=W,b++}g++}else if(I.isRectAreaLight){const Q=r.get(I);Q.color.copy(B).multiplyScalar(H),Q.halfWidth.set(I.width*.5,0,0),Q.halfHeight.set(0,I.height*.5,0),n.rectArea[v]=Q,v++}else if(I.isPointLight){const Q=r.get(I);if(Q.color.copy(I.color).multiplyScalar(I.intensity*M),Q.distance=I.distance,Q.decay=I.decay,I.castShadow){const ne=I.shadow,U=i.get(I);U.shadowBias=ne.bias,U.shadowNormalBias=ne.normalBias,U.shadowRadius=ne.radius,U.shadowMapSize=ne.mapSize,U.shadowCameraNear=ne.camera.near,U.shadowCameraFar=ne.camera.far,n.pointShadow[m]=U,n.pointShadowMap[m]=W,n.pointShadowMatrix[m]=I.shadow.matrix,w++}n.point[m]=Q,m++}else if(I.isHemisphereLight){const Q=r.get(I);Q.skyColor.copy(I.color).multiplyScalar(H*M),Q.groundColor.copy(I.groundColor).multiplyScalar(H*M),n.hemi[x]=Q,x++}}v>0&&(t.isWebGL2||S.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Rt.LTC_FLOAT_1,n.rectAreaLTC2=Rt.LTC_FLOAT_2):S.has("OES_texture_half_float_linear")===!0?(n.rectAreaLTC1=Rt.LTC_HALF_1,n.rectAreaLTC2=Rt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),n.ambient[0]=c,n.ambient[1]=d,n.ambient[2]=y;const k=n.hash;(k.directionalLength!==p||k.pointLength!==m||k.spotLength!==g||k.rectAreaLength!==v||k.hemiLength!==x||k.numDirectionalShadows!==T||k.numPointShadows!==w||k.numSpotShadows!==b||k.numSpotMaps!==C)&&(n.directional.length=p,n.spot.length=g,n.rectArea.length=v,n.point.length=m,n.hemi.length=x,n.directionalShadow.length=T,n.directionalShadowMap.length=T,n.pointShadow.length=w,n.pointShadowMap.length=w,n.spotShadow.length=b,n.spotShadowMap.length=b,n.directionalShadowMatrix.length=T,n.pointShadowMatrix.length=w,n.spotLightMatrix.length=b+C-A,n.spotLightMap.length=C,n.numSpotLightShadowsWithMaps=A,k.directionalLength=p,k.pointLength=m,k.spotLength=g,k.rectAreaLength=v,k.hemiLength=x,k.numDirectionalShadows=T,k.numPointShadows=w,k.numSpotShadows=b,k.numSpotMaps=C,n.version=n0++)}function h(l,u){let c=0,d=0,y=0,p=0,m=0;const g=u.matrixWorldInverse;for(let v=0,x=l.length;v<x;v++){const T=l[v];if(T.isDirectionalLight){const w=n.directional[c];w.direction.setFromMatrixPosition(T.matrixWorld),o.setFromMatrixPosition(T.target.matrixWorld),w.direction.sub(o),w.direction.transformDirection(g),c++}else if(T.isSpotLight){const w=n.spot[y];w.position.setFromMatrixPosition(T.matrixWorld),w.position.applyMatrix4(g),w.direction.setFromMatrixPosition(T.matrixWorld),o.setFromMatrixPosition(T.target.matrixWorld),w.direction.sub(o),w.direction.transformDirection(g),y++}else if(T.isRectAreaLight){const w=n.rectArea[p];w.position.setFromMatrixPosition(T.matrixWorld),w.position.applyMatrix4(g),a.identity(),s.copy(T.matrixWorld),s.premultiply(g),a.extractRotation(s),w.halfWidth.set(T.width*.5,0,0),w.halfHeight.set(0,T.height*.5,0),w.halfWidth.applyMatrix4(a),w.halfHeight.applyMatrix4(a),p++}else if(T.isPointLight){const w=n.point[d];w.position.setFromMatrixPosition(T.matrixWorld),w.position.applyMatrix4(g),d++}else if(T.isHemisphereLight){const w=n.hemi[m];w.direction.setFromMatrixPosition(T.matrixWorld),w.direction.transformDirection(g),m++}}}return{setup:f,setupView:h,state:n}}function fc(S,t){const r=new s0(S,t),i=[],n=[];function o(){i.length=0,n.length=0}function s(u){i.push(u)}function a(u){n.push(u)}function f(u){r.setup(i,u)}function h(u){r.setupView(i,u)}return{init:o,state:{lightsArray:i,shadowsArray:n,lights:r},setupLights:f,setupLightsView:h,pushLight:s,pushShadow:a}}function o0(S,t){let r=new WeakMap;function i(o,s=0){const a=r.get(o);let f;return a===void 0?(f=new fc(S,t),r.set(o,[f])):s>=a.length?(f=new fc(S,t),a.push(f)):f=a[s],f}function n(){r=new WeakMap}return{get:i,dispose:n}}class a0 extends zn{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=af,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class l0 extends zn{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Ve,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}const u0=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,c0=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function d0(S,t,r){let i=new kl;const n=new Qt,o=new Qt,s=new br,a=new a0({depthPacking:lf}),f=new l0,h={},l=r.maxTextureSize,u={[oi]:mn,[mn]:oi,[ni]:ni},c=new tn({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Qt},radius:{value:4}},vertexShader:u0,fragmentShader:c0}),d=c.clone();d.defines.HORIZONTAL_PASS=1;const y=new En;y.setAttribute("position",new Yr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const p=new ln(y,c),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=$c,this.render=function(T,w,b){if(m.enabled===!1||m.autoUpdate===!1&&m.needsUpdate===!1||T.length===0)return;const C=S.getRenderTarget(),A=S.getActiveCubeFace(),M=S.getActiveMipmapLevel(),k=S.state;k.setBlending(wi),k.buffers.color.setClear(1,1,1,1),k.buffers.depth.setTest(!0),k.setScissorTest(!1);for(let P=0,F=T.length;P<F;P++){const I=T[P],B=I.shadow;if(B===void 0){console.warn("THREE.WebGLShadowMap:",I,"has no shadow.");continue}if(B.autoUpdate===!1&&B.needsUpdate===!1)continue;n.copy(B.mapSize);const H=B.getFrameExtents();if(n.multiply(H),o.copy(B.mapSize),(n.x>l||n.y>l)&&(n.x>l&&(o.x=Math.floor(l/H.x),n.x=o.x*H.x,B.mapSize.x=o.x),n.y>l&&(o.y=Math.floor(l/H.y),n.y=o.y*H.y,B.mapSize.y=o.y)),B.map===null){const W=this.type!==io?{minFilter:Nr,magFilter:Nr}:{};B.map=new Si(n.x,n.y,W),B.map.texture.name=I.name+".shadowMap",B.camera.updateProjectionMatrix()}S.setRenderTarget(B.map),S.clear();const G=B.getViewportCount();for(let W=0;W<G;W++){const Q=B.getViewport(W);s.set(o.x*Q.x,o.y*Q.y,o.x*Q.z,o.y*Q.w),k.viewport(s),B.updateMatrices(I,W),i=B.getFrustum(),x(w,b,B.camera,I,this.type)}B.isPointLightShadow!==!0&&this.type===io&&g(B,b),B.needsUpdate=!1}m.needsUpdate=!1,S.setRenderTarget(C,A,M)};function g(T,w){const b=t.update(p);c.defines.VSM_SAMPLES!==T.blurSamples&&(c.defines.VSM_SAMPLES=T.blurSamples,d.defines.VSM_SAMPLES=T.blurSamples,c.needsUpdate=!0,d.needsUpdate=!0),T.mapPass===null&&(T.mapPass=new Si(n.x,n.y)),c.uniforms.shadow_pass.value=T.map.texture,c.uniforms.resolution.value=T.mapSize,c.uniforms.radius.value=T.radius,S.setRenderTarget(T.mapPass),S.clear(),S.renderBufferDirect(w,null,b,c,p,null),d.uniforms.shadow_pass.value=T.mapPass.texture,d.uniforms.resolution.value=T.mapSize,d.uniforms.radius.value=T.radius,S.setRenderTarget(T.map),S.clear(),S.renderBufferDirect(w,null,b,d,p,null)}function v(T,w,b,C,A,M){let k=null;const P=b.isPointLight===!0?T.customDistanceMaterial:T.customDepthMaterial;if(P!==void 0)k=P;else if(k=b.isPointLight===!0?f:a,S.localClippingEnabled&&w.clipShadows===!0&&Array.isArray(w.clippingPlanes)&&w.clippingPlanes.length!==0||w.displacementMap&&w.displacementScale!==0||w.alphaMap&&w.alphaTest>0||w.map&&w.alphaTest>0){const F=k.uuid,I=w.uuid;let B=h[F];B===void 0&&(B={},h[F]=B);let H=B[I];H===void 0&&(H=k.clone(),B[I]=H),k=H}return k.visible=w.visible,k.wireframe=w.wireframe,M===io?k.side=w.shadowSide!==null?w.shadowSide:w.side:k.side=w.shadowSide!==null?w.shadowSide:u[w.side],k.alphaMap=w.alphaMap,k.alphaTest=w.alphaTest,k.map=w.map,k.clipShadows=w.clipShadows,k.clippingPlanes=w.clippingPlanes,k.clipIntersection=w.clipIntersection,k.displacementMap=w.displacementMap,k.displacementScale=w.displacementScale,k.displacementBias=w.displacementBias,k.wireframeLinewidth=w.wireframeLinewidth,k.linewidth=w.linewidth,b.isPointLight===!0&&k.isMeshDistanceMaterial===!0&&(k.referencePosition.setFromMatrixPosition(b.matrixWorld),k.nearDistance=C,k.farDistance=A),k}function x(T,w,b,C,A){if(T.visible===!1)return;if(T.layers.test(w.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&A===io)&&(!T.frustumCulled||i.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,T.matrixWorld);const P=t.update(T),F=T.material;if(Array.isArray(F)){const I=P.groups;for(let B=0,H=I.length;B<H;B++){const G=I[B],W=F[G.materialIndex];if(W&&W.visible){const Q=v(T,W,C,b.near,b.far,A);S.renderBufferDirect(b,null,P,Q,T,G)}}}else if(F.visible){const I=v(T,F,C,b.near,b.far,A);S.renderBufferDirect(b,null,P,I,T,null)}}const k=T.children;for(let P=0,F=k.length;P<F;P++)x(k[P],w,b,C,A)}}function h0(S,t,r){const i=r.isWebGL2;function n(){let Ee=!1;const Ke=new br;let ot=null;const ut=new br(0,0,0,0);return{setMask:function(_t){ot!==_t&&!Ee&&(S.colorMask(_t,_t,_t,_t),ot=_t)},setLocked:function(_t){Ee=_t},setClear:function(_t,jt,$t,ar,fr){fr===!0&&(_t*=ar,jt*=ar,$t*=ar),Ke.set(_t,jt,$t,ar),ut.equals(Ke)===!1&&(S.clearColor(_t,jt,$t,ar),ut.copy(Ke))},reset:function(){Ee=!1,ot=null,ut.set(-1,0,0,0)}}}function o(){let Ee=!1,Ke=null,ot=null,ut=null;return{setTest:function(_t){_t?ge(2929):ye(2929)},setMask:function(_t){Ke!==_t&&!Ee&&(S.depthMask(_t),Ke=_t)},setFunc:function(_t){if(ot!==_t){switch(_t){case Ah:S.depthFunc(512);break;case Lh:S.depthFunc(519);break;case Ph:S.depthFunc(513);break;case fl:S.depthFunc(515);break;case Rh:S.depthFunc(514);break;case Dh:S.depthFunc(518);break;case kh:S.depthFunc(516);break;case Oh:S.depthFunc(517);break;default:S.depthFunc(515)}ot=_t}},setLocked:function(_t){Ee=_t},setClear:function(_t){ut!==_t&&(S.clearDepth(_t),ut=_t)},reset:function(){Ee=!1,Ke=null,ot=null,ut=null}}}function s(){let Ee=!1,Ke=null,ot=null,ut=null,_t=null,jt=null,$t=null,ar=null,fr=null;return{setTest:function(Ut){Ee||(Ut?ge(2960):ye(2960))},setMask:function(Ut){Ke!==Ut&&!Ee&&(S.stencilMask(Ut),Ke=Ut)},setFunc:function(Ut,er,Yt){(ot!==Ut||ut!==er||_t!==Yt)&&(S.stencilFunc(Ut,er,Yt),ot=Ut,ut=er,_t=Yt)},setOp:function(Ut,er,Yt){(jt!==Ut||$t!==er||ar!==Yt)&&(S.stencilOp(Ut,er,Yt),jt=Ut,$t=er,ar=Yt)},setLocked:function(Ut){Ee=Ut},setClear:function(Ut){fr!==Ut&&(S.clearStencil(Ut),fr=Ut)},reset:function(){Ee=!1,Ke=null,ot=null,ut=null,_t=null,jt=null,$t=null,ar=null,fr=null}}}const a=new n,f=new o,h=new s,l=new WeakMap,u=new WeakMap;let c={},d={},y=new WeakMap,p=[],m=null,g=!1,v=null,x=null,T=null,w=null,b=null,C=null,A=null,M=!1,k=null,P=null,F=null,I=null,B=null;const H=S.getParameter(35661);let G=!1,W=0;const Q=S.getParameter(7938);Q.indexOf("WebGL")!==-1?(W=parseFloat(/^WebGL (\d)/.exec(Q)[1]),G=W>=1):Q.indexOf("OpenGL ES")!==-1&&(W=parseFloat(/^OpenGL ES (\d)/.exec(Q)[1]),G=W>=2);let ne=null,U={};const D=S.getParameter(3088),O=S.getParameter(2978),V=new br().fromArray(D),Z=new br().fromArray(O);function ie(Ee,Ke,ot){const ut=new Uint8Array(4),_t=S.createTexture();S.bindTexture(Ee,_t),S.texParameteri(Ee,10241,9728),S.texParameteri(Ee,10240,9728);for(let jt=0;jt<ot;jt++)S.texImage2D(Ke+jt,0,6408,1,1,0,6408,5121,ut);return _t}const re={};re[3553]=ie(3553,3553,1),re[34067]=ie(34067,34069,6),a.setClear(0,0,0,1),f.setClear(1),h.setClear(0),ge(2929),f.setFunc(fl),Ae(!1),De(ru),ge(2884),Ce(wi);function ge(Ee){c[Ee]!==!0&&(S.enable(Ee),c[Ee]=!0)}function ye(Ee){c[Ee]!==!1&&(S.disable(Ee),c[Ee]=!1)}function he(Ee,Ke){return d[Ee]!==Ke?(S.bindFramebuffer(Ee,Ke),d[Ee]=Ke,i&&(Ee===36009&&(d[36160]=Ke),Ee===36160&&(d[36009]=Ke)),!0):!1}function pe(Ee,Ke){let ot=p,ut=!1;if(Ee)if(ot=y.get(Ke),ot===void 0&&(ot=[],y.set(Ke,ot)),Ee.isWebGLMultipleRenderTargets){const _t=Ee.texture;if(ot.length!==_t.length||ot[0]!==36064){for(let jt=0,$t=_t.length;jt<$t;jt++)ot[jt]=36064+jt;ot.length=_t.length,ut=!0}}else ot[0]!==36064&&(ot[0]=36064,ut=!0);else ot[0]!==1029&&(ot[0]=1029,ut=!0);ut&&(r.isWebGL2?S.drawBuffers(ot):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(ot))}function we(Ee){return m!==Ee?(S.useProgram(Ee),m=Ee,!0):!1}const oe={[vs]:32774,[vh]:32778,[bh]:32779};if(i)oe[ou]=32775,oe[au]=32776;else{const Ee=t.get("EXT_blend_minmax");Ee!==null&&(oe[ou]=Ee.MIN_EXT,oe[au]=Ee.MAX_EXT)}const fe={[_h]:0,[xh]:1,[wh]:768,[Qc]:770,[Ch]:776,[Eh]:774,[Mh]:772,[Sh]:769,[ed]:771,[jh]:775,[Th]:773};function Ce(Ee,Ke,ot,ut,_t,jt,$t,ar){if(Ee===wi){g===!0&&(ye(3042),g=!1);return}if(g===!1&&(ge(3042),g=!0),Ee!==yh){if(Ee!==v||ar!==M){if((x!==vs||b!==vs)&&(S.blendEquation(32774),x=vs,b=vs),ar)switch(Ee){case ws:S.blendFuncSeparate(1,771,1,771);break;case nu:S.blendFunc(1,1);break;case iu:S.blendFuncSeparate(0,769,0,1);break;case su:S.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ee);break}else switch(Ee){case ws:S.blendFuncSeparate(770,771,1,771);break;case nu:S.blendFunc(770,1);break;case iu:S.blendFuncSeparate(0,769,0,1);break;case su:S.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ee);break}T=null,w=null,C=null,A=null,v=Ee,M=ar}return}_t=_t||Ke,jt=jt||ot,$t=$t||ut,(Ke!==x||_t!==b)&&(S.blendEquationSeparate(oe[Ke],oe[_t]),x=Ke,b=_t),(ot!==T||ut!==w||jt!==C||$t!==A)&&(S.blendFuncSeparate(fe[ot],fe[ut],fe[jt],fe[$t]),T=ot,w=ut,C=jt,A=$t),v=Ee,M=!1}function Fe(Ee,Ke){Ee.side===ni?ye(2884):ge(2884);let ot=Ee.side===mn;Ke&&(ot=!ot),Ae(ot),Ee.blending===ws&&Ee.transparent===!1?Ce(wi):Ce(Ee.blending,Ee.blendEquation,Ee.blendSrc,Ee.blendDst,Ee.blendEquationAlpha,Ee.blendSrcAlpha,Ee.blendDstAlpha,Ee.premultipliedAlpha),f.setFunc(Ee.depthFunc),f.setTest(Ee.depthTest),f.setMask(Ee.depthWrite),a.setMask(Ee.colorWrite);const ut=Ee.stencilWrite;h.setTest(ut),ut&&(h.setMask(Ee.stencilWriteMask),h.setFunc(Ee.stencilFunc,Ee.stencilRef,Ee.stencilFuncMask),h.setOp(Ee.stencilFail,Ee.stencilZFail,Ee.stencilZPass)),st(Ee.polygonOffset,Ee.polygonOffsetFactor,Ee.polygonOffsetUnits),Ee.alphaToCoverage===!0?ge(32926):ye(32926)}function Ae(Ee){k!==Ee&&(Ee?S.frontFace(2304):S.frontFace(2305),k=Ee)}function De(Ee){Ee!==mh?(ge(2884),Ee!==P&&(Ee===ru?S.cullFace(1029):Ee===gh?S.cullFace(1028):S.cullFace(1032))):ye(2884),P=Ee}function Be(Ee){Ee!==F&&(G&&S.lineWidth(Ee),F=Ee)}function st(Ee,Ke,ot){Ee?(ge(32823),(I!==Ke||B!==ot)&&(S.polygonOffset(Ke,ot),I=Ke,B=ot)):ye(32823)}function qe(Ee){Ee?ge(3089):ye(3089)}function Et(Ee){Ee===void 0&&(Ee=33984+H-1),ne!==Ee&&(S.activeTexture(Ee),ne=Ee)}function de(Ee,Ke,ot){ot===void 0&&(ne===null?ot=33984+H-1:ot=ne);let ut=U[ot];ut===void 0&&(ut={type:void 0,texture:void 0},U[ot]=ut),(ut.type!==Ee||ut.texture!==Ke)&&(ne!==ot&&(S.activeTexture(ot),ne=ot),S.bindTexture(Ee,Ke||re[Ee]),ut.type=Ee,ut.texture=Ke)}function le(){const Ee=U[ne];Ee!==void 0&&Ee.type!==void 0&&(S.bindTexture(Ee.type,null),Ee.type=void 0,Ee.texture=void 0)}function Ue(){try{S.compressedTexImage2D.apply(S,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}}function Ze(){try{S.compressedTexImage3D.apply(S,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}}function Me(){try{S.texSubImage2D.apply(S,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}}function ze(){try{S.texSubImage3D.apply(S,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}}function Re(){try{S.compressedTexSubImage2D.apply(S,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}}function q(){try{S.compressedTexSubImage3D.apply(S,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}}function te(){try{S.texStorage2D.apply(S,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}}function ee(){try{S.texStorage3D.apply(S,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}}function ae(){try{S.texImage2D.apply(S,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}}function Se(){try{S.texImage3D.apply(S,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}}function Le(Ee){V.equals(Ee)===!1&&(S.scissor(Ee.x,Ee.y,Ee.z,Ee.w),V.copy(Ee))}function Ne(Ee){Z.equals(Ee)===!1&&(S.viewport(Ee.x,Ee.y,Ee.z,Ee.w),Z.copy(Ee))}function at(Ee,Ke){let ot=u.get(Ke);ot===void 0&&(ot=new WeakMap,u.set(Ke,ot));let ut=ot.get(Ee);ut===void 0&&(ut=S.getUniformBlockIndex(Ke,Ee.name),ot.set(Ee,ut))}function ft(Ee,Ke){const ut=u.get(Ke).get(Ee);l.get(Ke)!==ut&&(S.uniformBlockBinding(Ke,ut,Ee.__bindingPointIndex),l.set(Ke,ut))}function bt(){S.disable(3042),S.disable(2884),S.disable(2929),S.disable(32823),S.disable(3089),S.disable(2960),S.disable(32926),S.blendEquation(32774),S.blendFunc(1,0),S.blendFuncSeparate(1,0,1,0),S.colorMask(!0,!0,!0,!0),S.clearColor(0,0,0,0),S.depthMask(!0),S.depthFunc(513),S.clearDepth(1),S.stencilMask(4294967295),S.stencilFunc(519,0,4294967295),S.stencilOp(7680,7680,7680),S.clearStencil(0),S.cullFace(1029),S.frontFace(2305),S.polygonOffset(0,0),S.activeTexture(33984),S.bindFramebuffer(36160,null),i===!0&&(S.bindFramebuffer(36009,null),S.bindFramebuffer(36008,null)),S.useProgram(null),S.lineWidth(1),S.scissor(0,0,S.canvas.width,S.canvas.height),S.viewport(0,0,S.canvas.width,S.canvas.height),c={},ne=null,U={},d={},y=new WeakMap,p=[],m=null,g=!1,v=null,x=null,T=null,w=null,b=null,C=null,A=null,M=!1,k=null,P=null,F=null,I=null,B=null,V.set(0,0,S.canvas.width,S.canvas.height),Z.set(0,0,S.canvas.width,S.canvas.height),a.reset(),f.reset(),h.reset()}return{buffers:{color:a,depth:f,stencil:h},enable:ge,disable:ye,bindFramebuffer:he,drawBuffers:pe,useProgram:we,setBlending:Ce,setMaterial:Fe,setFlipSided:Ae,setCullFace:De,setLineWidth:Be,setPolygonOffset:st,setScissorTest:qe,activeTexture:Et,bindTexture:de,unbindTexture:le,compressedTexImage2D:Ue,compressedTexImage3D:Ze,texImage2D:ae,texImage3D:Se,updateUBOMapping:at,uniformBlockBinding:ft,texStorage2D:te,texStorage3D:ee,texSubImage2D:Me,texSubImage3D:ze,compressedTexSubImage2D:Re,compressedTexSubImage3D:q,scissor:Le,viewport:Ne,reset:bt}}function f0(S,t,r,i,n,o,s){const a=n.isWebGL2,f=n.maxTextures,h=n.maxCubemapSize,l=n.maxTextureSize,u=n.maxSamples,c=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,d=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),y=new WeakMap;let p;const m=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(de,le){return g?new OffscreenCanvas(de,le):po("canvas")}function x(de,le,Ue,Ze){let Me=1;if((de.width>Ze||de.height>Ze)&&(Me=Ze/Math.max(de.width,de.height)),Me<1||le===!0)if(typeof HTMLImageElement<"u"&&de instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&de instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&de instanceof ImageBitmap){const ze=le?ha:Math.floor,Re=ze(Me*de.width),q=ze(Me*de.height);p===void 0&&(p=v(Re,q));const te=Ue?v(Re,q):p;return te.width=Re,te.height=q,te.getContext("2d").drawImage(de,0,0,Re,q),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+de.width+"x"+de.height+") to ("+Re+"x"+q+")."),te}else return"data"in de&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+de.width+"x"+de.height+")."),de;return de}function T(de){return _l(de.width)&&_l(de.height)}function w(de){return a?!1:de.wrapS!==Mn||de.wrapT!==Mn||de.minFilter!==Nr&&de.minFilter!==an}function b(de,le){return de.generateMipmaps&&le&&de.minFilter!==Nr&&de.minFilter!==an}function C(de){S.generateMipmap(de)}function A(de,le,Ue,Ze,Me=!1){if(a===!1)return le;if(de!==null){if(S[de]!==void 0)return S[de];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+de+"'")}let ze=le;return le===6403&&(Ue===5126&&(ze=33326),Ue===5131&&(ze=33325),Ue===5121&&(ze=33321)),le===33319&&(Ue===5126&&(ze=33328),Ue===5131&&(ze=33327),Ue===5121&&(ze=33323)),le===6408&&(Ue===5126&&(ze=34836),Ue===5131&&(ze=34842),Ue===5121&&(ze=Ze===pr&&Me===!1?35907:32856),Ue===32819&&(ze=32854),Ue===32820&&(ze=32855)),(ze===33325||ze===33326||ze===33327||ze===33328||ze===34842||ze===34836)&&t.get("EXT_color_buffer_float"),ze}function M(de,le,Ue){return b(de,Ue)===!0||de.isFramebufferTexture&&de.minFilter!==Nr&&de.minFilter!==an?Math.log2(Math.max(le.width,le.height))+1:de.mipmaps!==void 0&&de.mipmaps.length>0?de.mipmaps.length:de.isCompressedTexture&&Array.isArray(de.image)?le.mipmaps.length:1}function k(de){return de===Nr||de===gl||de===aa?9728:9729}function P(de){const le=de.target;le.removeEventListener("dispose",P),I(le),le.isVideoTexture&&y.delete(le)}function F(de){const le=de.target;le.removeEventListener("dispose",F),H(le)}function I(de){const le=i.get(de);if(le.__webglInit===void 0)return;const Ue=de.source,Ze=m.get(Ue);if(Ze){const Me=Ze[le.__cacheKey];Me.usedTimes--,Me.usedTimes===0&&B(de),Object.keys(Ze).length===0&&m.delete(Ue)}i.remove(de)}function B(de){const le=i.get(de);S.deleteTexture(le.__webglTexture);const Ue=de.source,Ze=m.get(Ue);delete Ze[le.__cacheKey],s.memory.textures--}function H(de){const le=de.texture,Ue=i.get(de),Ze=i.get(le);if(Ze.__webglTexture!==void 0&&(S.deleteTexture(Ze.__webglTexture),s.memory.textures--),de.depthTexture&&de.depthTexture.dispose(),de.isWebGLCubeRenderTarget)for(let Me=0;Me<6;Me++)S.deleteFramebuffer(Ue.__webglFramebuffer[Me]),Ue.__webglDepthbuffer&&S.deleteRenderbuffer(Ue.__webglDepthbuffer[Me]);else{if(S.deleteFramebuffer(Ue.__webglFramebuffer),Ue.__webglDepthbuffer&&S.deleteRenderbuffer(Ue.__webglDepthbuffer),Ue.__webglMultisampledFramebuffer&&S.deleteFramebuffer(Ue.__webglMultisampledFramebuffer),Ue.__webglColorRenderbuffer)for(let Me=0;Me<Ue.__webglColorRenderbuffer.length;Me++)Ue.__webglColorRenderbuffer[Me]&&S.deleteRenderbuffer(Ue.__webglColorRenderbuffer[Me]);Ue.__webglDepthRenderbuffer&&S.deleteRenderbuffer(Ue.__webglDepthRenderbuffer)}if(de.isWebGLMultipleRenderTargets)for(let Me=0,ze=le.length;Me<ze;Me++){const Re=i.get(le[Me]);Re.__webglTexture&&(S.deleteTexture(Re.__webglTexture),s.memory.textures--),i.remove(le[Me])}i.remove(le),i.remove(de)}let G=0;function W(){G=0}function Q(){const de=G;return de>=f&&console.warn("THREE.WebGLTextures: Trying to use "+de+" texture units while this GPU supports only "+f),G+=1,de}function ne(de){const le=[];return le.push(de.wrapS),le.push(de.wrapT),le.push(de.wrapR||0),le.push(de.magFilter),le.push(de.minFilter),le.push(de.anisotropy),le.push(de.internalFormat),le.push(de.format),le.push(de.type),le.push(de.generateMipmaps),le.push(de.premultiplyAlpha),le.push(de.flipY),le.push(de.unpackAlignment),le.push(de.encoding),le.join()}function U(de,le){const Ue=i.get(de);if(de.isVideoTexture&&qe(de),de.isRenderTargetTexture===!1&&de.version>0&&Ue.__version!==de.version){const Ze=de.image;if(Ze===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ze.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ye(Ue,de,le);return}}r.bindTexture(3553,Ue.__webglTexture,33984+le)}function D(de,le){const Ue=i.get(de);if(de.version>0&&Ue.__version!==de.version){ye(Ue,de,le);return}r.bindTexture(35866,Ue.__webglTexture,33984+le)}function O(de,le){const Ue=i.get(de);if(de.version>0&&Ue.__version!==de.version){ye(Ue,de,le);return}r.bindTexture(32879,Ue.__webglTexture,33984+le)}function V(de,le){const Ue=i.get(de);if(de.version>0&&Ue.__version!==de.version){he(Ue,de,le);return}r.bindTexture(34067,Ue.__webglTexture,33984+le)}const Z={[As]:10497,[Mn]:33071,[da]:33648},ie={[Nr]:9728,[gl]:9984,[aa]:9986,[an]:9729,[nd]:9985,[zi]:9987};function re(de,le,Ue){if(Ue?(S.texParameteri(de,10242,Z[le.wrapS]),S.texParameteri(de,10243,Z[le.wrapT]),(de===32879||de===35866)&&S.texParameteri(de,32882,Z[le.wrapR]),S.texParameteri(de,10240,ie[le.magFilter]),S.texParameteri(de,10241,ie[le.minFilter])):(S.texParameteri(de,10242,33071),S.texParameteri(de,10243,33071),(de===32879||de===35866)&&S.texParameteri(de,32882,33071),(le.wrapS!==Mn||le.wrapT!==Mn)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),S.texParameteri(de,10240,k(le.magFilter)),S.texParameteri(de,10241,k(le.minFilter)),le.minFilter!==Nr&&le.minFilter!==an&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),t.has("EXT_texture_filter_anisotropic")===!0){const Ze=t.get("EXT_texture_filter_anisotropic");if(le.magFilter===Nr||le.minFilter!==aa&&le.minFilter!==zi||le.type===_i&&t.has("OES_texture_float_linear")===!1||a===!1&&le.type===uo&&t.has("OES_texture_half_float_linear")===!1)return;(le.anisotropy>1||i.get(le).__currentAnisotropy)&&(S.texParameterf(de,Ze.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(le.anisotropy,n.getMaxAnisotropy())),i.get(le).__currentAnisotropy=le.anisotropy)}}function ge(de,le){let Ue=!1;de.__webglInit===void 0&&(de.__webglInit=!0,le.addEventListener("dispose",P));const Ze=le.source;let Me=m.get(Ze);Me===void 0&&(Me={},m.set(Ze,Me));const ze=ne(le);if(ze!==de.__cacheKey){Me[ze]===void 0&&(Me[ze]={texture:S.createTexture(),usedTimes:0},s.memory.textures++,Ue=!0),Me[ze].usedTimes++;const Re=Me[de.__cacheKey];Re!==void 0&&(Me[de.__cacheKey].usedTimes--,Re.usedTimes===0&&B(le)),de.__cacheKey=ze,de.__webglTexture=Me[ze].texture}return Ue}function ye(de,le,Ue){let Ze=3553;(le.isDataArrayTexture||le.isCompressedArrayTexture)&&(Ze=35866),le.isData3DTexture&&(Ze=32879);const Me=ge(de,le),ze=le.source;r.bindTexture(Ze,de.__webglTexture,33984+Ue);const Re=i.get(ze);if(ze.version!==Re.__version||Me===!0){r.activeTexture(33984+Ue),S.pixelStorei(37440,le.flipY),S.pixelStorei(37441,le.premultiplyAlpha),S.pixelStorei(3317,le.unpackAlignment),S.pixelStorei(37443,0);const q=w(le)&&T(le.image)===!1;let te=x(le.image,q,!1,l);te=Et(le,te);const ee=T(te)||a,ae=o.convert(le.format,le.encoding);let Se=o.convert(le.type),Le=A(le.internalFormat,ae,Se,le.encoding,le.isVideoTexture);re(Ze,le,ee);let Ne;const at=le.mipmaps,ft=a&&le.isVideoTexture!==!0,bt=Re.__version===void 0||Me===!0,Ee=M(le,te,ee);if(le.isDepthTexture)Le=6402,a?le.type===_i?Le=36012:le.type===Ii?Le=33190:le.type===Ss?Le=35056:Le=33189:le.type===_i&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),le.format===Bi&&Le===6402&&le.type!==id&&le.type!==Ii&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),le.type=Ii,Se=o.convert(le.type)),le.format===Ls&&Le===6402&&(Le=34041,le.type!==Ss&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),le.type=Ss,Se=o.convert(le.type))),bt&&(ft?r.texStorage2D(3553,1,Le,te.width,te.height):r.texImage2D(3553,0,Le,te.width,te.height,0,ae,Se,null));else if(le.isDataTexture)if(at.length>0&&ee){ft&&bt&&r.texStorage2D(3553,Ee,Le,at[0].width,at[0].height);for(let Ke=0,ot=at.length;Ke<ot;Ke++)Ne=at[Ke],ft?r.texSubImage2D(3553,Ke,0,0,Ne.width,Ne.height,ae,Se,Ne.data):r.texImage2D(3553,Ke,Le,Ne.width,Ne.height,0,ae,Se,Ne.data);le.generateMipmaps=!1}else ft?(bt&&r.texStorage2D(3553,Ee,Le,te.width,te.height),r.texSubImage2D(3553,0,0,0,te.width,te.height,ae,Se,te.data)):r.texImage2D(3553,0,Le,te.width,te.height,0,ae,Se,te.data);else if(le.isCompressedTexture)if(le.isCompressedArrayTexture){ft&&bt&&r.texStorage3D(35866,Ee,Le,at[0].width,at[0].height,te.depth);for(let Ke=0,ot=at.length;Ke<ot;Ke++)Ne=at[Ke],le.format!==Tn?ae!==null?ft?r.compressedTexSubImage3D(35866,Ke,0,0,0,Ne.width,Ne.height,te.depth,ae,Ne.data,0,0):r.compressedTexImage3D(35866,Ke,Le,Ne.width,Ne.height,te.depth,0,Ne.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ft?r.texSubImage3D(35866,Ke,0,0,0,Ne.width,Ne.height,te.depth,ae,Se,Ne.data):r.texImage3D(35866,Ke,Le,Ne.width,Ne.height,te.depth,0,ae,Se,Ne.data)}else{ft&&bt&&r.texStorage2D(3553,Ee,Le,at[0].width,at[0].height);for(let Ke=0,ot=at.length;Ke<ot;Ke++)Ne=at[Ke],le.format!==Tn?ae!==null?ft?r.compressedTexSubImage2D(3553,Ke,0,0,Ne.width,Ne.height,ae,Ne.data):r.compressedTexImage2D(3553,Ke,Le,Ne.width,Ne.height,0,Ne.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ft?r.texSubImage2D(3553,Ke,0,0,Ne.width,Ne.height,ae,Se,Ne.data):r.texImage2D(3553,Ke,Le,Ne.width,Ne.height,0,ae,Se,Ne.data)}else if(le.isDataArrayTexture)ft?(bt&&r.texStorage3D(35866,Ee,Le,te.width,te.height,te.depth),r.texSubImage3D(35866,0,0,0,0,te.width,te.height,te.depth,ae,Se,te.data)):r.texImage3D(35866,0,Le,te.width,te.height,te.depth,0,ae,Se,te.data);else if(le.isData3DTexture)ft?(bt&&r.texStorage3D(32879,Ee,Le,te.width,te.height,te.depth),r.texSubImage3D(32879,0,0,0,0,te.width,te.height,te.depth,ae,Se,te.data)):r.texImage3D(32879,0,Le,te.width,te.height,te.depth,0,ae,Se,te.data);else if(le.isFramebufferTexture){if(bt)if(ft)r.texStorage2D(3553,Ee,Le,te.width,te.height);else{let Ke=te.width,ot=te.height;for(let ut=0;ut<Ee;ut++)r.texImage2D(3553,ut,Le,Ke,ot,0,ae,Se,null),Ke>>=1,ot>>=1}}else if(at.length>0&&ee){ft&&bt&&r.texStorage2D(3553,Ee,Le,at[0].width,at[0].height);for(let Ke=0,ot=at.length;Ke<ot;Ke++)Ne=at[Ke],ft?r.texSubImage2D(3553,Ke,0,0,ae,Se,Ne):r.texImage2D(3553,Ke,Le,ae,Se,Ne);le.generateMipmaps=!1}else ft?(bt&&r.texStorage2D(3553,Ee,Le,te.width,te.height),r.texSubImage2D(3553,0,0,0,ae,Se,te)):r.texImage2D(3553,0,Le,ae,Se,te);b(le,ee)&&C(Ze),Re.__version=ze.version,le.onUpdate&&le.onUpdate(le)}de.__version=le.version}function he(de,le,Ue){if(le.image.length!==6)return;const Ze=ge(de,le),Me=le.source;r.bindTexture(34067,de.__webglTexture,33984+Ue);const ze=i.get(Me);if(Me.version!==ze.__version||Ze===!0){r.activeTexture(33984+Ue),S.pixelStorei(37440,le.flipY),S.pixelStorei(37441,le.premultiplyAlpha),S.pixelStorei(3317,le.unpackAlignment),S.pixelStorei(37443,0);const Re=le.isCompressedTexture||le.image[0].isCompressedTexture,q=le.image[0]&&le.image[0].isDataTexture,te=[];for(let Ke=0;Ke<6;Ke++)!Re&&!q?te[Ke]=x(le.image[Ke],!1,!0,h):te[Ke]=q?le.image[Ke].image:le.image[Ke],te[Ke]=Et(le,te[Ke]);const ee=te[0],ae=T(ee)||a,Se=o.convert(le.format,le.encoding),Le=o.convert(le.type),Ne=A(le.internalFormat,Se,Le,le.encoding),at=a&&le.isVideoTexture!==!0,ft=ze.__version===void 0||Ze===!0;let bt=M(le,ee,ae);re(34067,le,ae);let Ee;if(Re){at&&ft&&r.texStorage2D(34067,bt,Ne,ee.width,ee.height);for(let Ke=0;Ke<6;Ke++){Ee=te[Ke].mipmaps;for(let ot=0;ot<Ee.length;ot++){const ut=Ee[ot];le.format!==Tn?Se!==null?at?r.compressedTexSubImage2D(34069+Ke,ot,0,0,ut.width,ut.height,Se,ut.data):r.compressedTexImage2D(34069+Ke,ot,Ne,ut.width,ut.height,0,ut.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):at?r.texSubImage2D(34069+Ke,ot,0,0,ut.width,ut.height,Se,Le,ut.data):r.texImage2D(34069+Ke,ot,Ne,ut.width,ut.height,0,Se,Le,ut.data)}}}else{Ee=le.mipmaps,at&&ft&&(Ee.length>0&&bt++,r.texStorage2D(34067,bt,Ne,te[0].width,te[0].height));for(let Ke=0;Ke<6;Ke++)if(q){at?r.texSubImage2D(34069+Ke,0,0,0,te[Ke].width,te[Ke].height,Se,Le,te[Ke].data):r.texImage2D(34069+Ke,0,Ne,te[Ke].width,te[Ke].height,0,Se,Le,te[Ke].data);for(let ot=0;ot<Ee.length;ot++){const _t=Ee[ot].image[Ke].image;at?r.texSubImage2D(34069+Ke,ot+1,0,0,_t.width,_t.height,Se,Le,_t.data):r.texImage2D(34069+Ke,ot+1,Ne,_t.width,_t.height,0,Se,Le,_t.data)}}else{at?r.texSubImage2D(34069+Ke,0,0,0,Se,Le,te[Ke]):r.texImage2D(34069+Ke,0,Ne,Se,Le,te[Ke]);for(let ot=0;ot<Ee.length;ot++){const ut=Ee[ot];at?r.texSubImage2D(34069+Ke,ot+1,0,0,Se,Le,ut.image[Ke]):r.texImage2D(34069+Ke,ot+1,Ne,Se,Le,ut.image[Ke])}}}b(le,ae)&&C(34067),ze.__version=Me.version,le.onUpdate&&le.onUpdate(le)}de.__version=le.version}function pe(de,le,Ue,Ze,Me){const ze=o.convert(Ue.format,Ue.encoding),Re=o.convert(Ue.type),q=A(Ue.internalFormat,ze,Re,Ue.encoding);i.get(le).__hasExternalTextures||(Me===32879||Me===35866?r.texImage3D(Me,0,q,le.width,le.height,le.depth,0,ze,Re,null):r.texImage2D(Me,0,q,le.width,le.height,0,ze,Re,null)),r.bindFramebuffer(36160,de),st(le)?c.framebufferTexture2DMultisampleEXT(36160,Ze,Me,i.get(Ue).__webglTexture,0,Be(le)):(Me===3553||Me>=34069&&Me<=34074)&&S.framebufferTexture2D(36160,Ze,Me,i.get(Ue).__webglTexture,0),r.bindFramebuffer(36160,null)}function we(de,le,Ue){if(S.bindRenderbuffer(36161,de),le.depthBuffer&&!le.stencilBuffer){let Ze=33189;if(Ue||st(le)){const Me=le.depthTexture;Me&&Me.isDepthTexture&&(Me.type===_i?Ze=36012:Me.type===Ii&&(Ze=33190));const ze=Be(le);st(le)?c.renderbufferStorageMultisampleEXT(36161,ze,Ze,le.width,le.height):S.renderbufferStorageMultisample(36161,ze,Ze,le.width,le.height)}else S.renderbufferStorage(36161,Ze,le.width,le.height);S.framebufferRenderbuffer(36160,36096,36161,de)}else if(le.depthBuffer&&le.stencilBuffer){const Ze=Be(le);Ue&&st(le)===!1?S.renderbufferStorageMultisample(36161,Ze,35056,le.width,le.height):st(le)?c.renderbufferStorageMultisampleEXT(36161,Ze,35056,le.width,le.height):S.renderbufferStorage(36161,34041,le.width,le.height),S.framebufferRenderbuffer(36160,33306,36161,de)}else{const Ze=le.isWebGLMultipleRenderTargets===!0?le.texture:[le.texture];for(let Me=0;Me<Ze.length;Me++){const ze=Ze[Me],Re=o.convert(ze.format,ze.encoding),q=o.convert(ze.type),te=A(ze.internalFormat,Re,q,ze.encoding),ee=Be(le);Ue&&st(le)===!1?S.renderbufferStorageMultisample(36161,ee,te,le.width,le.height):st(le)?c.renderbufferStorageMultisampleEXT(36161,ee,te,le.width,le.height):S.renderbufferStorage(36161,te,le.width,le.height)}}S.bindRenderbuffer(36161,null)}function oe(de,le){if(le&&le.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(36160,de),!(le.depthTexture&&le.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(le.depthTexture).__webglTexture||le.depthTexture.image.width!==le.width||le.depthTexture.image.height!==le.height)&&(le.depthTexture.image.width=le.width,le.depthTexture.image.height=le.height,le.depthTexture.needsUpdate=!0),U(le.depthTexture,0);const Ze=i.get(le.depthTexture).__webglTexture,Me=Be(le);if(le.depthTexture.format===Bi)st(le)?c.framebufferTexture2DMultisampleEXT(36160,36096,3553,Ze,0,Me):S.framebufferTexture2D(36160,36096,3553,Ze,0);else if(le.depthTexture.format===Ls)st(le)?c.framebufferTexture2DMultisampleEXT(36160,33306,3553,Ze,0,Me):S.framebufferTexture2D(36160,33306,3553,Ze,0);else throw new Error("Unknown depthTexture format")}function fe(de){const le=i.get(de),Ue=de.isWebGLCubeRenderTarget===!0;if(de.depthTexture&&!le.__autoAllocateDepthBuffer){if(Ue)throw new Error("target.depthTexture not supported in Cube render targets");oe(le.__webglFramebuffer,de)}else if(Ue){le.__webglDepthbuffer=[];for(let Ze=0;Ze<6;Ze++)r.bindFramebuffer(36160,le.__webglFramebuffer[Ze]),le.__webglDepthbuffer[Ze]=S.createRenderbuffer(),we(le.__webglDepthbuffer[Ze],de,!1)}else r.bindFramebuffer(36160,le.__webglFramebuffer),le.__webglDepthbuffer=S.createRenderbuffer(),we(le.__webglDepthbuffer,de,!1);r.bindFramebuffer(36160,null)}function Ce(de,le,Ue){const Ze=i.get(de);le!==void 0&&pe(Ze.__webglFramebuffer,de,de.texture,36064,3553),Ue!==void 0&&fe(de)}function Fe(de){const le=de.texture,Ue=i.get(de),Ze=i.get(le);de.addEventListener("dispose",F),de.isWebGLMultipleRenderTargets!==!0&&(Ze.__webglTexture===void 0&&(Ze.__webglTexture=S.createTexture()),Ze.__version=le.version,s.memory.textures++);const Me=de.isWebGLCubeRenderTarget===!0,ze=de.isWebGLMultipleRenderTargets===!0,Re=T(de)||a;if(Me){Ue.__webglFramebuffer=[];for(let q=0;q<6;q++)Ue.__webglFramebuffer[q]=S.createFramebuffer()}else{if(Ue.__webglFramebuffer=S.createFramebuffer(),ze)if(n.drawBuffers){const q=de.texture;for(let te=0,ee=q.length;te<ee;te++){const ae=i.get(q[te]);ae.__webglTexture===void 0&&(ae.__webglTexture=S.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&de.samples>0&&st(de)===!1){const q=ze?le:[le];Ue.__webglMultisampledFramebuffer=S.createFramebuffer(),Ue.__webglColorRenderbuffer=[],r.bindFramebuffer(36160,Ue.__webglMultisampledFramebuffer);for(let te=0;te<q.length;te++){const ee=q[te];Ue.__webglColorRenderbuffer[te]=S.createRenderbuffer(),S.bindRenderbuffer(36161,Ue.__webglColorRenderbuffer[te]);const ae=o.convert(ee.format,ee.encoding),Se=o.convert(ee.type),Le=A(ee.internalFormat,ae,Se,ee.encoding,de.isXRRenderTarget===!0),Ne=Be(de);S.renderbufferStorageMultisample(36161,Ne,Le,de.width,de.height),S.framebufferRenderbuffer(36160,36064+te,36161,Ue.__webglColorRenderbuffer[te])}S.bindRenderbuffer(36161,null),de.depthBuffer&&(Ue.__webglDepthRenderbuffer=S.createRenderbuffer(),we(Ue.__webglDepthRenderbuffer,de,!0)),r.bindFramebuffer(36160,null)}}if(Me){r.bindTexture(34067,Ze.__webglTexture),re(34067,le,Re);for(let q=0;q<6;q++)pe(Ue.__webglFramebuffer[q],de,le,36064,34069+q);b(le,Re)&&C(34067),r.unbindTexture()}else if(ze){const q=de.texture;for(let te=0,ee=q.length;te<ee;te++){const ae=q[te],Se=i.get(ae);r.bindTexture(3553,Se.__webglTexture),re(3553,ae,Re),pe(Ue.__webglFramebuffer,de,ae,36064+te,3553),b(ae,Re)&&C(3553)}r.unbindTexture()}else{let q=3553;(de.isWebGL3DRenderTarget||de.isWebGLArrayRenderTarget)&&(a?q=de.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),r.bindTexture(q,Ze.__webglTexture),re(q,le,Re),pe(Ue.__webglFramebuffer,de,le,36064,q),b(le,Re)&&C(q),r.unbindTexture()}de.depthBuffer&&fe(de)}function Ae(de){const le=T(de)||a,Ue=de.isWebGLMultipleRenderTargets===!0?de.texture:[de.texture];for(let Ze=0,Me=Ue.length;Ze<Me;Ze++){const ze=Ue[Ze];if(b(ze,le)){const Re=de.isWebGLCubeRenderTarget?34067:3553,q=i.get(ze).__webglTexture;r.bindTexture(Re,q),C(Re),r.unbindTexture()}}}function De(de){if(a&&de.samples>0&&st(de)===!1){const le=de.isWebGLMultipleRenderTargets?de.texture:[de.texture],Ue=de.width,Ze=de.height;let Me=16384;const ze=[],Re=de.stencilBuffer?33306:36096,q=i.get(de),te=de.isWebGLMultipleRenderTargets===!0;if(te)for(let ee=0;ee<le.length;ee++)r.bindFramebuffer(36160,q.__webglMultisampledFramebuffer),S.framebufferRenderbuffer(36160,36064+ee,36161,null),r.bindFramebuffer(36160,q.__webglFramebuffer),S.framebufferTexture2D(36009,36064+ee,3553,null,0);r.bindFramebuffer(36008,q.__webglMultisampledFramebuffer),r.bindFramebuffer(36009,q.__webglFramebuffer);for(let ee=0;ee<le.length;ee++){ze.push(36064+ee),de.depthBuffer&&ze.push(Re);const ae=q.__ignoreDepthValues!==void 0?q.__ignoreDepthValues:!1;if(ae===!1&&(de.depthBuffer&&(Me|=256),de.stencilBuffer&&(Me|=1024)),te&&S.framebufferRenderbuffer(36008,36064,36161,q.__webglColorRenderbuffer[ee]),ae===!0&&(S.invalidateFramebuffer(36008,[Re]),S.invalidateFramebuffer(36009,[Re])),te){const Se=i.get(le[ee]).__webglTexture;S.framebufferTexture2D(36009,36064,3553,Se,0)}S.blitFramebuffer(0,0,Ue,Ze,0,0,Ue,Ze,Me,9728),d&&S.invalidateFramebuffer(36008,ze)}if(r.bindFramebuffer(36008,null),r.bindFramebuffer(36009,null),te)for(let ee=0;ee<le.length;ee++){r.bindFramebuffer(36160,q.__webglMultisampledFramebuffer),S.framebufferRenderbuffer(36160,36064+ee,36161,q.__webglColorRenderbuffer[ee]);const ae=i.get(le[ee]).__webglTexture;r.bindFramebuffer(36160,q.__webglFramebuffer),S.framebufferTexture2D(36009,36064+ee,3553,ae,0)}r.bindFramebuffer(36009,q.__webglMultisampledFramebuffer)}}function Be(de){return Math.min(u,de.samples)}function st(de){const le=i.get(de);return a&&de.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&le.__useRenderToTexture!==!1}function qe(de){const le=s.render.frame;y.get(de)!==le&&(y.set(de,le),de.update())}function Et(de,le){const Ue=de.encoding,Ze=de.format,Me=de.type;return de.isCompressedTexture===!0||de.isVideoTexture===!0||de.format===bl||Ue!==Hi&&(Ue===pr?a===!1?t.has("EXT_sRGB")===!0&&Ze===Tn?(de.format=bl,de.minFilter=an,de.generateMipmaps=!1):le=cd.sRGBToLinear(le):(Ze!==Tn||Me!==Vi)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Ue)),le}this.allocateTextureUnit=Q,this.resetTextureUnits=W,this.setTexture2D=U,this.setTexture2DArray=D,this.setTexture3D=O,this.setTextureCube=V,this.rebindTextures=Ce,this.setupRenderTarget=Fe,this.updateRenderTargetMipmap=Ae,this.updateMultisampleRenderTarget=De,this.setupDepthRenderbuffer=fe,this.setupFrameBufferTexture=pe,this.useMultisampledRTT=st}function p0(S,t,r){const i=r.isWebGL2;function n(o,s=null){let a;if(o===Vi)return 5121;if(o===qh)return 32819;if(o===Xh)return 32820;if(o===Vh)return 5120;if(o===Hh)return 5122;if(o===id)return 5123;if(o===Wh)return 5124;if(o===Ii)return 5125;if(o===_i)return 5126;if(o===uo)return i?5131:(a=t.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(o===Yh)return 6406;if(o===Tn)return 6408;if(o===Zh)return 6409;if(o===Kh)return 6410;if(o===Bi)return 6402;if(o===Ls)return 34041;if(o===bl)return a=t.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(o===$h)return 6403;if(o===Jh)return 36244;if(o===Qh)return 33319;if(o===ef)return 33320;if(o===tf)return 36249;if(o===Aa||o===La||o===Pa||o===Ra)if(s===pr)if(a=t.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(o===Aa)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(o===La)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(o===Pa)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(o===Ra)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=t.get("WEBGL_compressed_texture_s3tc"),a!==null){if(o===Aa)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===La)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===Pa)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===Ra)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===lu||o===uu||o===cu||o===du)if(a=t.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(o===lu)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===uu)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===cu)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===du)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===rf)return a=t.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(o===hu||o===fu)if(a=t.get("WEBGL_compressed_texture_etc"),a!==null){if(o===hu)return s===pr?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(o===fu)return s===pr?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(o===pu||o===mu||o===gu||o===yu||o===vu||o===bu||o===_u||o===xu||o===wu||o===Su||o===Mu||o===Tu||o===Eu||o===ju)if(a=t.get("WEBGL_compressed_texture_astc"),a!==null){if(o===pu)return s===pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(o===mu)return s===pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(o===gu)return s===pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(o===yu)return s===pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(o===vu)return s===pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(o===bu)return s===pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(o===_u)return s===pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(o===xu)return s===pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(o===wu)return s===pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(o===Su)return s===pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(o===Mu)return s===pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(o===Tu)return s===pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(o===Eu)return s===pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(o===ju)return s===pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(o===Da)if(a=t.get("EXT_texture_compression_bptc"),a!==null){if(o===Da)return s===pr?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(o===nf||o===Cu||o===Au||o===Lu)if(a=t.get("EXT_texture_compression_rgtc"),a!==null){if(o===Da)return a.COMPRESSED_RED_RGTC1_EXT;if(o===Cu)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(o===Au)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(o===Lu)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return o===Ss?i?34042:(a=t.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):S[o]!==void 0?S[o]:null}return{convert:n}}class m0 extends rn{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class Ni extends Cr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const g0={type:"move"};class sl{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ni,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ni,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ve,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ve),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ni,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ve,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ve),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const r=this._hand;if(r)for(const i of t.hand.values())this._getHandJoint(r,i)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,r,i){let n=null,o=null,s=null;const a=this._targetRay,f=this._grip,h=this._hand;if(t&&r.session.visibilityState!=="visible-blurred"){if(h&&t.hand){s=!0;for(const p of t.hand.values()){const m=r.getJointPose(p,i),g=this._getHandJoint(h,p);m!==null&&(g.matrix.fromArray(m.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.jointRadius=m.radius),g.visible=m!==null}const l=h.joints["index-finger-tip"],u=h.joints["thumb-tip"],c=l.position.distanceTo(u.position),d=.02,y=.005;h.inputState.pinching&&c>d+y?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!h.inputState.pinching&&c<=d-y&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else f!==null&&t.gripSpace&&(o=r.getPose(t.gripSpace,i),o!==null&&(f.matrix.fromArray(o.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),o.linearVelocity?(f.hasLinearVelocity=!0,f.linearVelocity.copy(o.linearVelocity)):f.hasLinearVelocity=!1,o.angularVelocity?(f.hasAngularVelocity=!0,f.angularVelocity.copy(o.angularVelocity)):f.hasAngularVelocity=!1));a!==null&&(n=r.getPose(t.targetRaySpace,i),n===null&&o!==null&&(n=o),n!==null&&(a.matrix.fromArray(n.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),n.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(n.linearVelocity)):a.hasLinearVelocity=!1,n.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(n.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(g0)))}return a!==null&&(a.visible=n!==null),f!==null&&(f.visible=o!==null),h!==null&&(h.visible=s!==null),this}_getHandJoint(t,r){if(t.joints[r.jointName]===void 0){const i=new Ni;i.matrixAutoUpdate=!1,i.visible=!1,t.joints[r.jointName]=i,t.add(i)}return t.joints[r.jointName]}}class y0 extends Xr{constructor(t,r,i,n,o,s,a,f,h,l){if(l=l!==void 0?l:Bi,l!==Bi&&l!==Ls)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&l===Bi&&(i=Ii),i===void 0&&l===Ls&&(i=Ss),super(null,n,o,s,a,f,l,i,h),this.isDepthTexture=!0,this.image={width:t,height:r},this.magFilter=a!==void 0?a:Nr,this.minFilter=f!==void 0?f:Nr,this.flipY=!1,this.generateMipmaps=!1}}class v0 extends Xi{constructor(t,r){super();const i=this;let n=null,o=1,s=null,a="local-floor",f=1,h=null,l=null,u=null,c=null,d=null,y=null;const p=r.getContextAttributes();let m=null,g=null;const v=[],x=[],T=new Set,w=new Map,b=new rn;b.layers.enable(1),b.viewport=new br;const C=new rn;C.layers.enable(2),C.viewport=new br;const A=[b,C],M=new m0;M.layers.enable(1),M.layers.enable(2);let k=null,P=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(O){let V=v[O];return V===void 0&&(V=new sl,v[O]=V),V.getTargetRaySpace()},this.getControllerGrip=function(O){let V=v[O];return V===void 0&&(V=new sl,v[O]=V),V.getGripSpace()},this.getHand=function(O){let V=v[O];return V===void 0&&(V=new sl,v[O]=V),V.getHandSpace()};function F(O){const V=x.indexOf(O.inputSource);if(V===-1)return;const Z=v[V];Z!==void 0&&Z.dispatchEvent({type:O.type,data:O.inputSource})}function I(){n.removeEventListener("select",F),n.removeEventListener("selectstart",F),n.removeEventListener("selectend",F),n.removeEventListener("squeeze",F),n.removeEventListener("squeezestart",F),n.removeEventListener("squeezeend",F),n.removeEventListener("end",I),n.removeEventListener("inputsourceschange",B);for(let O=0;O<v.length;O++){const V=x[O];V!==null&&(x[O]=null,v[O].disconnect(V))}k=null,P=null,t.setRenderTarget(m),d=null,c=null,u=null,n=null,g=null,D.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(O){o=O,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(O){a=O,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||s},this.setReferenceSpace=function(O){h=O},this.getBaseLayer=function(){return c!==null?c:d},this.getBinding=function(){return u},this.getFrame=function(){return y},this.getSession=function(){return n},this.setSession=async function(O){if(n=O,n!==null){if(m=t.getRenderTarget(),n.addEventListener("select",F),n.addEventListener("selectstart",F),n.addEventListener("selectend",F),n.addEventListener("squeeze",F),n.addEventListener("squeezestart",F),n.addEventListener("squeezeend",F),n.addEventListener("end",I),n.addEventListener("inputsourceschange",B),p.xrCompatible!==!0&&await r.makeXRCompatible(),n.renderState.layers===void 0||t.capabilities.isWebGL2===!1){const V={antialias:n.renderState.layers===void 0?p.antialias:!0,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:o};d=new XRWebGLLayer(n,r,V),n.updateRenderState({baseLayer:d}),g=new Si(d.framebufferWidth,d.framebufferHeight,{format:Tn,type:Vi,encoding:t.outputEncoding,stencilBuffer:p.stencil})}else{let V=null,Z=null,ie=null;p.depth&&(ie=p.stencil?35056:33190,V=p.stencil?Ls:Bi,Z=p.stencil?Ss:Ii);const re={colorFormat:32856,depthFormat:ie,scaleFactor:o};u=new XRWebGLBinding(n,r),c=u.createProjectionLayer(re),n.updateRenderState({layers:[c]}),g=new Si(c.textureWidth,c.textureHeight,{format:Tn,type:Vi,depthTexture:new y0(c.textureWidth,c.textureHeight,Z,void 0,void 0,void 0,void 0,void 0,void 0,V),stencilBuffer:p.stencil,encoding:t.outputEncoding,samples:p.antialias?4:0});const ge=t.properties.get(g);ge.__ignoreDepthValues=c.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(f),h=null,s=await n.requestReferenceSpace(a),D.setContext(n),D.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function B(O){for(let V=0;V<O.removed.length;V++){const Z=O.removed[V],ie=x.indexOf(Z);ie>=0&&(x[ie]=null,v[ie].disconnect(Z))}for(let V=0;V<O.added.length;V++){const Z=O.added[V];let ie=x.indexOf(Z);if(ie===-1){for(let ge=0;ge<v.length;ge++)if(ge>=x.length){x.push(Z),ie=ge;break}else if(x[ge]===null){x[ge]=Z,ie=ge;break}if(ie===-1)break}const re=v[ie];re&&re.connect(Z)}}const H=new Ve,G=new Ve;function W(O,V,Z){H.setFromMatrixPosition(V.matrixWorld),G.setFromMatrixPosition(Z.matrixWorld);const ie=H.distanceTo(G),re=V.projectionMatrix.elements,ge=Z.projectionMatrix.elements,ye=re[14]/(re[10]-1),he=re[14]/(re[10]+1),pe=(re[9]+1)/re[5],we=(re[9]-1)/re[5],oe=(re[8]-1)/re[0],fe=(ge[8]+1)/ge[0],Ce=ye*oe,Fe=ye*fe,Ae=ie/(-oe+fe),De=Ae*-oe;V.matrixWorld.decompose(O.position,O.quaternion,O.scale),O.translateX(De),O.translateZ(Ae),O.matrixWorld.compose(O.position,O.quaternion,O.scale),O.matrixWorldInverse.copy(O.matrixWorld).invert();const Be=ye+Ae,st=he+Ae,qe=Ce-De,Et=Fe+(ie-De),de=pe*he/st*Be,le=we*he/st*Be;O.projectionMatrix.makePerspective(qe,Et,de,le,Be,st)}function Q(O,V){V===null?O.matrixWorld.copy(O.matrix):O.matrixWorld.multiplyMatrices(V.matrixWorld,O.matrix),O.matrixWorldInverse.copy(O.matrixWorld).invert()}this.updateCamera=function(O){if(n===null)return;M.near=C.near=b.near=O.near,M.far=C.far=b.far=O.far,(k!==M.near||P!==M.far)&&(n.updateRenderState({depthNear:M.near,depthFar:M.far}),k=M.near,P=M.far);const V=O.parent,Z=M.cameras;Q(M,V);for(let re=0;re<Z.length;re++)Q(Z[re],V);M.matrixWorld.decompose(M.position,M.quaternion,M.scale),O.matrix.copy(M.matrix),O.matrix.decompose(O.position,O.quaternion,O.scale);const ie=O.children;for(let re=0,ge=ie.length;re<ge;re++)ie[re].updateMatrixWorld(!0);Z.length===2?W(M,b,C):M.projectionMatrix.copy(b.projectionMatrix)},this.getCamera=function(){return M},this.getFoveation=function(){if(!(c===null&&d===null))return f},this.setFoveation=function(O){f=O,c!==null&&(c.fixedFoveation=O),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=O)},this.getPlanes=function(){return T};let ne=null;function U(O,V){if(l=V.getViewerPose(h||s),y=V,l!==null){const Z=l.views;d!==null&&(t.setRenderTargetFramebuffer(g,d.framebuffer),t.setRenderTarget(g));let ie=!1;Z.length!==M.cameras.length&&(M.cameras.length=0,ie=!0);for(let re=0;re<Z.length;re++){const ge=Z[re];let ye=null;if(d!==null)ye=d.getViewport(ge);else{const pe=u.getViewSubImage(c,ge);ye=pe.viewport,re===0&&(t.setRenderTargetTextures(g,pe.colorTexture,c.ignoreDepthValues?void 0:pe.depthStencilTexture),t.setRenderTarget(g))}let he=A[re];he===void 0&&(he=new rn,he.layers.enable(re),he.viewport=new br,A[re]=he),he.matrix.fromArray(ge.transform.matrix),he.projectionMatrix.fromArray(ge.projectionMatrix),he.viewport.set(ye.x,ye.y,ye.width,ye.height),re===0&&M.matrix.copy(he.matrix),ie===!0&&M.cameras.push(he)}}for(let Z=0;Z<v.length;Z++){const ie=x[Z],re=v[Z];ie!==null&&re!==void 0&&re.update(ie,V,h||s)}if(ne&&ne(O,V),V.detectedPlanes){i.dispatchEvent({type:"planesdetected",data:V.detectedPlanes});let Z=null;for(const ie of T)V.detectedPlanes.has(ie)||(Z===null&&(Z=[]),Z.push(ie));if(Z!==null)for(const ie of Z)T.delete(ie),w.delete(ie),i.dispatchEvent({type:"planeremoved",data:ie});for(const ie of V.detectedPlanes)if(!T.has(ie))T.add(ie),w.set(ie,V.lastChangedTime),i.dispatchEvent({type:"planeadded",data:ie});else{const re=w.get(ie);ie.lastChangedTime>re&&(w.set(ie,ie.lastChangedTime),i.dispatchEvent({type:"planechanged",data:ie}))}}y=null}const D=new _d;D.setAnimationLoop(U),this.setAnimationLoop=function(O){ne=O},this.dispose=function(){}}}function b0(S,t){function r(p,m){m.color.getRGB(p.fogColor.value,gd(S)),m.isFog?(p.fogNear.value=m.near,p.fogFar.value=m.far):m.isFogExp2&&(p.fogDensity.value=m.density)}function i(p,m,g,v,x){m.isMeshBasicMaterial||m.isMeshLambertMaterial?n(p,m):m.isMeshToonMaterial?(n(p,m),l(p,m)):m.isMeshPhongMaterial?(n(p,m),h(p,m)):m.isMeshStandardMaterial?(n(p,m),u(p,m),m.isMeshPhysicalMaterial&&c(p,m,x)):m.isMeshMatcapMaterial?(n(p,m),d(p,m)):m.isMeshDepthMaterial?n(p,m):m.isMeshDistanceMaterial?(n(p,m),y(p,m)):m.isMeshNormalMaterial?n(p,m):m.isLineBasicMaterial?(o(p,m),m.isLineDashedMaterial&&s(p,m)):m.isPointsMaterial?a(p,m,g,v):m.isSpriteMaterial?f(p,m):m.isShadowMaterial?(p.color.value.copy(m.color),p.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function n(p,m){p.opacity.value=m.opacity,m.color&&p.diffuse.value.copy(m.color),m.emissive&&p.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(p.map.value=m.map),m.alphaMap&&(p.alphaMap.value=m.alphaMap),m.bumpMap&&(p.bumpMap.value=m.bumpMap,p.bumpScale.value=m.bumpScale,m.side===mn&&(p.bumpScale.value*=-1)),m.displacementMap&&(p.displacementMap.value=m.displacementMap,p.displacementScale.value=m.displacementScale,p.displacementBias.value=m.displacementBias),m.emissiveMap&&(p.emissiveMap.value=m.emissiveMap),m.normalMap&&(p.normalMap.value=m.normalMap,p.normalScale.value.copy(m.normalScale),m.side===mn&&p.normalScale.value.negate()),m.specularMap&&(p.specularMap.value=m.specularMap),m.alphaTest>0&&(p.alphaTest.value=m.alphaTest);const g=t.get(m).envMap;if(g&&(p.envMap.value=g,p.flipEnvMap.value=g.isCubeTexture&&g.isRenderTargetTexture===!1?-1:1,p.reflectivity.value=m.reflectivity,p.ior.value=m.ior,p.refractionRatio.value=m.refractionRatio),m.lightMap){p.lightMap.value=m.lightMap;const T=S.physicallyCorrectLights!==!0?Math.PI:1;p.lightMapIntensity.value=m.lightMapIntensity*T}m.aoMap&&(p.aoMap.value=m.aoMap,p.aoMapIntensity.value=m.aoMapIntensity);let v;m.map?v=m.map:m.specularMap?v=m.specularMap:m.displacementMap?v=m.displacementMap:m.normalMap?v=m.normalMap:m.bumpMap?v=m.bumpMap:m.roughnessMap?v=m.roughnessMap:m.metalnessMap?v=m.metalnessMap:m.alphaMap?v=m.alphaMap:m.emissiveMap?v=m.emissiveMap:m.clearcoatMap?v=m.clearcoatMap:m.clearcoatNormalMap?v=m.clearcoatNormalMap:m.clearcoatRoughnessMap?v=m.clearcoatRoughnessMap:m.iridescenceMap?v=m.iridescenceMap:m.iridescenceThicknessMap?v=m.iridescenceThicknessMap:m.specularIntensityMap?v=m.specularIntensityMap:m.specularColorMap?v=m.specularColorMap:m.transmissionMap?v=m.transmissionMap:m.thicknessMap?v=m.thicknessMap:m.sheenColorMap?v=m.sheenColorMap:m.sheenRoughnessMap&&(v=m.sheenRoughnessMap),v!==void 0&&(v.isWebGLRenderTarget&&(v=v.texture),v.matrixAutoUpdate===!0&&v.updateMatrix(),p.uvTransform.value.copy(v.matrix));let x;m.aoMap?x=m.aoMap:m.lightMap&&(x=m.lightMap),x!==void 0&&(x.isWebGLRenderTarget&&(x=x.texture),x.matrixAutoUpdate===!0&&x.updateMatrix(),p.uv2Transform.value.copy(x.matrix))}function o(p,m){p.diffuse.value.copy(m.color),p.opacity.value=m.opacity}function s(p,m){p.dashSize.value=m.dashSize,p.totalSize.value=m.dashSize+m.gapSize,p.scale.value=m.scale}function a(p,m,g,v){p.diffuse.value.copy(m.color),p.opacity.value=m.opacity,p.size.value=m.size*g,p.scale.value=v*.5,m.map&&(p.map.value=m.map),m.alphaMap&&(p.alphaMap.value=m.alphaMap),m.alphaTest>0&&(p.alphaTest.value=m.alphaTest);let x;m.map?x=m.map:m.alphaMap&&(x=m.alphaMap),x!==void 0&&(x.matrixAutoUpdate===!0&&x.updateMatrix(),p.uvTransform.value.copy(x.matrix))}function f(p,m){p.diffuse.value.copy(m.color),p.opacity.value=m.opacity,p.rotation.value=m.rotation,m.map&&(p.map.value=m.map),m.alphaMap&&(p.alphaMap.value=m.alphaMap),m.alphaTest>0&&(p.alphaTest.value=m.alphaTest);let g;m.map?g=m.map:m.alphaMap&&(g=m.alphaMap),g!==void 0&&(g.matrixAutoUpdate===!0&&g.updateMatrix(),p.uvTransform.value.copy(g.matrix))}function h(p,m){p.specular.value.copy(m.specular),p.shininess.value=Math.max(m.shininess,1e-4)}function l(p,m){m.gradientMap&&(p.gradientMap.value=m.gradientMap)}function u(p,m){p.roughness.value=m.roughness,p.metalness.value=m.metalness,m.roughnessMap&&(p.roughnessMap.value=m.roughnessMap),m.metalnessMap&&(p.metalnessMap.value=m.metalnessMap),t.get(m).envMap&&(p.envMapIntensity.value=m.envMapIntensity)}function c(p,m,g){p.ior.value=m.ior,m.sheen>0&&(p.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),p.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(p.sheenColorMap.value=m.sheenColorMap),m.sheenRoughnessMap&&(p.sheenRoughnessMap.value=m.sheenRoughnessMap)),m.clearcoat>0&&(p.clearcoat.value=m.clearcoat,p.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(p.clearcoatMap.value=m.clearcoatMap),m.clearcoatRoughnessMap&&(p.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap),m.clearcoatNormalMap&&(p.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),p.clearcoatNormalMap.value=m.clearcoatNormalMap,m.side===mn&&p.clearcoatNormalScale.value.negate())),m.iridescence>0&&(p.iridescence.value=m.iridescence,p.iridescenceIOR.value=m.iridescenceIOR,p.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],p.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(p.iridescenceMap.value=m.iridescenceMap),m.iridescenceThicknessMap&&(p.iridescenceThicknessMap.value=m.iridescenceThicknessMap)),m.transmission>0&&(p.transmission.value=m.transmission,p.transmissionSamplerMap.value=g.texture,p.transmissionSamplerSize.value.set(g.width,g.height),m.transmissionMap&&(p.transmissionMap.value=m.transmissionMap),p.thickness.value=m.thickness,m.thicknessMap&&(p.thicknessMap.value=m.thicknessMap),p.attenuationDistance.value=m.attenuationDistance,p.attenuationColor.value.copy(m.attenuationColor)),p.specularIntensity.value=m.specularIntensity,p.specularColor.value.copy(m.specularColor),m.specularIntensityMap&&(p.specularIntensityMap.value=m.specularIntensityMap),m.specularColorMap&&(p.specularColorMap.value=m.specularColorMap)}function d(p,m){m.matcap&&(p.matcap.value=m.matcap)}function y(p,m){p.referencePosition.value.copy(m.referencePosition),p.nearDistance.value=m.nearDistance,p.farDistance.value=m.farDistance}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function _0(S,t,r,i){let n={},o={},s=[];const a=r.isWebGL2?S.getParameter(35375):0;function f(v,x){const T=x.program;i.uniformBlockBinding(v,T)}function h(v,x){let T=n[v.id];T===void 0&&(y(v),T=l(v),n[v.id]=T,v.addEventListener("dispose",m));const w=x.program;i.updateUBOMapping(v,w);const b=t.render.frame;o[v.id]!==b&&(c(v),o[v.id]=b)}function l(v){const x=u();v.__bindingPointIndex=x;const T=S.createBuffer(),w=v.__size,b=v.usage;return S.bindBuffer(35345,T),S.bufferData(35345,w,b),S.bindBuffer(35345,null),S.bindBufferBase(35345,x,T),T}function u(){for(let v=0;v<a;v++)if(s.indexOf(v)===-1)return s.push(v),v;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function c(v){const x=n[v.id],T=v.uniforms,w=v.__cache;S.bindBuffer(35345,x);for(let b=0,C=T.length;b<C;b++){const A=T[b];if(d(A,b,w)===!0){const M=A.__offset,k=Array.isArray(A.value)?A.value:[A.value];let P=0;for(let F=0;F<k.length;F++){const I=k[F],B=p(I);typeof I=="number"?(A.__data[0]=I,S.bufferSubData(35345,M+P,A.__data)):I.isMatrix3?(A.__data[0]=I.elements[0],A.__data[1]=I.elements[1],A.__data[2]=I.elements[2],A.__data[3]=I.elements[0],A.__data[4]=I.elements[3],A.__data[5]=I.elements[4],A.__data[6]=I.elements[5],A.__data[7]=I.elements[0],A.__data[8]=I.elements[6],A.__data[9]=I.elements[7],A.__data[10]=I.elements[8],A.__data[11]=I.elements[0]):(I.toArray(A.__data,P),P+=B.storage/Float32Array.BYTES_PER_ELEMENT)}S.bufferSubData(35345,M,A.__data)}}S.bindBuffer(35345,null)}function d(v,x,T){const w=v.value;if(T[x]===void 0){if(typeof w=="number")T[x]=w;else{const b=Array.isArray(w)?w:[w],C=[];for(let A=0;A<b.length;A++)C.push(b[A].clone());T[x]=C}return!0}else if(typeof w=="number"){if(T[x]!==w)return T[x]=w,!0}else{const b=Array.isArray(T[x])?T[x]:[T[x]],C=Array.isArray(w)?w:[w];for(let A=0;A<b.length;A++){const M=b[A];if(M.equals(C[A])===!1)return M.copy(C[A]),!0}}return!1}function y(v){const x=v.uniforms;let T=0;const w=16;let b=0;for(let C=0,A=x.length;C<A;C++){const M=x[C],k={boundary:0,storage:0},P=Array.isArray(M.value)?M.value:[M.value];for(let F=0,I=P.length;F<I;F++){const B=P[F],H=p(B);k.boundary+=H.boundary,k.storage+=H.storage}if(M.__data=new Float32Array(k.storage/Float32Array.BYTES_PER_ELEMENT),M.__offset=T,C>0){b=T%w;const F=w-b;b!==0&&F-k.boundary<0&&(T+=w-b,M.__offset=T)}T+=k.storage}return b=T%w,b>0&&(T+=w-b),v.__size=T,v.__cache={},this}function p(v){const x={boundary:0,storage:0};return typeof v=="number"?(x.boundary=4,x.storage=4):v.isVector2?(x.boundary=8,x.storage=8):v.isVector3||v.isColor?(x.boundary=16,x.storage=12):v.isVector4?(x.boundary=16,x.storage=16):v.isMatrix3?(x.boundary=48,x.storage=48):v.isMatrix4?(x.boundary=64,x.storage=64):v.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",v),x}function m(v){const x=v.target;x.removeEventListener("dispose",m);const T=s.indexOf(x.__bindingPointIndex);s.splice(T,1),S.deleteBuffer(n[x.id]),delete n[x.id],delete o[x.id]}function g(){for(const v in n)S.deleteBuffer(n[v]);s=[],n={},o={}}return{bind:f,update:h,dispose:g}}function x0(){const S=po("canvas");return S.style.display="block",S}function Td(S={}){this.isWebGLRenderer=!0;const t=S.canvas!==void 0?S.canvas:x0(),r=S.context!==void 0?S.context:null,i=S.depth!==void 0?S.depth:!0,n=S.stencil!==void 0?S.stencil:!0,o=S.antialias!==void 0?S.antialias:!1,s=S.premultipliedAlpha!==void 0?S.premultipliedAlpha:!0,a=S.preserveDrawingBuffer!==void 0?S.preserveDrawingBuffer:!1,f=S.powerPreference!==void 0?S.powerPreference:"default",h=S.failIfMajorPerformanceCaveat!==void 0?S.failIfMajorPerformanceCaveat:!1;let l;r!==null?l=r.getContextAttributes().alpha:l=S.alpha!==void 0?S.alpha:!1;let u=null,c=null;const d=[],y=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Hi,this.physicallyCorrectLights=!1,this.toneMapping=si,this.toneMappingExposure=1;const p=this;let m=!1,g=0,v=0,x=null,T=-1,w=null;const b=new br,C=new br;let A=null,M=t.width,k=t.height,P=1,F=null,I=null;const B=new br(0,0,M,k),H=new br(0,0,M,k);let G=!1;const W=new kl;let Q=!1,ne=!1,U=null;const D=new or,O=new Qt,V=new Ve,Z={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ie(){return x===null?P:1}let re=r;function ge(Te,nt){for(let gt=0;gt<Te.length;gt++){const Je=Te[gt],yt=t.getContext(Je,nt);if(yt!==null)return yt}return null}try{const Te={alpha:!0,depth:i,stencil:n,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:a,powerPreference:f,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Pl}`),t.addEventListener("webglcontextlost",Le,!1),t.addEventListener("webglcontextrestored",Ne,!1),t.addEventListener("webglcontextcreationerror",at,!1),re===null){const nt=["webgl2","webgl","experimental-webgl"];if(p.isWebGL1Renderer===!0&&nt.shift(),re=ge(nt,Te),re===null)throw ge(nt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}re.getShaderPrecisionFormat===void 0&&(re.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Te){throw console.error("THREE.WebGLRenderer: "+Te.message),Te}let ye,he,pe,we,oe,fe,Ce,Fe,Ae,De,Be,st,qe,Et,de,le,Ue,Ze,Me,ze,Re,q,te,ee;function ae(){ye=new Rg(re),he=new Eg(re,ye,S),ye.init(he),q=new p0(re,ye,he),pe=new h0(re,ye,he),we=new Og,oe=new Jy,fe=new f0(re,ye,pe,oe,he,q,we),Ce=new Cg(p),Fe=new Pg(p),Ae=new Hf(re,he),te=new Mg(re,ye,Ae,he),De=new Dg(re,Ae,we,te),Be=new Ug(re,De,Ae,we),Me=new Fg(re,he,fe),le=new jg(oe),st=new $y(p,Ce,Fe,ye,he,te,le),qe=new b0(p,oe),Et=new e0,de=new o0(ye,he),Ze=new Sg(p,Ce,Fe,pe,Be,l,s),Ue=new d0(p,Be,he),ee=new _0(re,we,he,pe),ze=new Tg(re,ye,we,he),Re=new kg(re,ye,we,he),we.programs=st.programs,p.capabilities=he,p.extensions=ye,p.properties=oe,p.renderLists=Et,p.shadowMap=Ue,p.state=pe,p.info=we}ae();const Se=new v0(p,re);this.xr=Se,this.getContext=function(){return re},this.getContextAttributes=function(){return re.getContextAttributes()},this.forceContextLoss=function(){const Te=ye.get("WEBGL_lose_context");Te&&Te.loseContext()},this.forceContextRestore=function(){const Te=ye.get("WEBGL_lose_context");Te&&Te.restoreContext()},this.getPixelRatio=function(){return P},this.setPixelRatio=function(Te){Te!==void 0&&(P=Te,this.setSize(M,k,!1))},this.getSize=function(Te){return Te.set(M,k)},this.setSize=function(Te,nt,gt){if(Se.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}M=Te,k=nt,t.width=Math.floor(Te*P),t.height=Math.floor(nt*P),gt!==!1&&(t.style.width=Te+"px",t.style.height=nt+"px"),this.setViewport(0,0,Te,nt)},this.getDrawingBufferSize=function(Te){return Te.set(M*P,k*P).floor()},this.setDrawingBufferSize=function(Te,nt,gt){M=Te,k=nt,P=gt,t.width=Math.floor(Te*gt),t.height=Math.floor(nt*gt),this.setViewport(0,0,Te,nt)},this.getCurrentViewport=function(Te){return Te.copy(b)},this.getViewport=function(Te){return Te.copy(B)},this.setViewport=function(Te,nt,gt,Je){Te.isVector4?B.set(Te.x,Te.y,Te.z,Te.w):B.set(Te,nt,gt,Je),pe.viewport(b.copy(B).multiplyScalar(P).floor())},this.getScissor=function(Te){return Te.copy(H)},this.setScissor=function(Te,nt,gt,Je){Te.isVector4?H.set(Te.x,Te.y,Te.z,Te.w):H.set(Te,nt,gt,Je),pe.scissor(C.copy(H).multiplyScalar(P).floor())},this.getScissorTest=function(){return G},this.setScissorTest=function(Te){pe.setScissorTest(G=Te)},this.setOpaqueSort=function(Te){F=Te},this.setTransparentSort=function(Te){I=Te},this.getClearColor=function(Te){return Te.copy(Ze.getClearColor())},this.setClearColor=function(){Ze.setClearColor.apply(Ze,arguments)},this.getClearAlpha=function(){return Ze.getClearAlpha()},this.setClearAlpha=function(){Ze.setClearAlpha.apply(Ze,arguments)},this.clear=function(Te=!0,nt=!0,gt=!0){let Je=0;Te&&(Je|=16384),nt&&(Je|=256),gt&&(Je|=1024),re.clear(Je)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Le,!1),t.removeEventListener("webglcontextrestored",Ne,!1),t.removeEventListener("webglcontextcreationerror",at,!1),Et.dispose(),de.dispose(),oe.dispose(),Ce.dispose(),Fe.dispose(),Be.dispose(),te.dispose(),ee.dispose(),st.dispose(),Se.dispose(),Se.removeEventListener("sessionstart",ut),Se.removeEventListener("sessionend",_t),U&&(U.dispose(),U=null),jt.stop()};function Le(Te){Te.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function Ne(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1;const Te=we.autoReset,nt=Ue.enabled,gt=Ue.autoUpdate,Je=Ue.needsUpdate,yt=Ue.type;ae(),we.autoReset=Te,Ue.enabled=nt,Ue.autoUpdate=gt,Ue.needsUpdate=Je,Ue.type=yt}function at(Te){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Te.statusMessage)}function ft(Te){const nt=Te.target;nt.removeEventListener("dispose",ft),bt(nt)}function bt(Te){Ee(Te),oe.remove(Te)}function Ee(Te){const nt=oe.get(Te).programs;nt!==void 0&&(nt.forEach(function(gt){st.releaseProgram(gt)}),Te.isShaderMaterial&&st.releaseShaderCache(Te))}this.renderBufferDirect=function(Te,nt,gt,Je,yt,Vt){nt===null&&(nt=Z);const xe=yt.isMesh&&yt.matrixWorld.determinant()<0,lt=Ar(Te,nt,gt,Je,yt);pe.setMaterial(Je,xe);let xt=gt.index,ct=1;Je.wireframe===!0&&(xt=De.getWireframeAttribute(gt),ct=2);const Dt=gt.drawRange,et=gt.attributes.position;let Ht=Dt.start*ct,Mt=(Dt.start+Dt.count)*ct;Vt!==null&&(Ht=Math.max(Ht,Vt.start*ct),Mt=Math.min(Mt,(Vt.start+Vt.count)*ct)),xt!==null?(Ht=Math.max(Ht,0),Mt=Math.min(Mt,xt.count)):et!=null&&(Ht=Math.max(Ht,0),Mt=Math.min(Mt,et.count));const Kt=Mt-Ht;if(Kt<0||Kt===1/0)return;te.setup(yt,Je,lt,gt,xt);let Ct,Jt=ze;if(xt!==null&&(Ct=Ae.get(xt),Jt=Re,Jt.setIndex(Ct)),yt.isMesh)Je.wireframe===!0?(pe.setLineWidth(Je.wireframeLinewidth*ie()),Jt.setMode(1)):Jt.setMode(4);else if(yt.isLine){let Wt=Je.linewidth;Wt===void 0&&(Wt=1),pe.setLineWidth(Wt*ie()),yt.isLineSegments?Jt.setMode(1):yt.isLineLoop?Jt.setMode(2):Jt.setMode(3)}else yt.isPoints?Jt.setMode(0):yt.isSprite&&Jt.setMode(4);if(yt.isInstancedMesh)Jt.renderInstances(Ht,Kt,yt.count);else if(gt.isInstancedBufferGeometry){const Wt=gt._maxInstanceCount!==void 0?gt._maxInstanceCount:1/0,gr=Math.min(gt.instanceCount,Wt);Jt.renderInstances(Ht,Kt,gr)}else Jt.render(Ht,Kt)},this.compile=function(Te,nt){function gt(Je,yt,Vt){Je.transparent===!0&&Je.side===ni&&Je.forceSinglePass===!1?(Je.side=mn,Je.needsUpdate=!0,Yt(Je,yt,Vt),Je.side=oi,Je.needsUpdate=!0,Yt(Je,yt,Vt),Je.side=ni):Yt(Je,yt,Vt)}c=de.get(Te),c.init(),y.push(c),Te.traverseVisible(function(Je){Je.isLight&&Je.layers.test(nt.layers)&&(c.pushLight(Je),Je.castShadow&&c.pushShadow(Je))}),c.setupLights(p.physicallyCorrectLights),Te.traverse(function(Je){const yt=Je.material;if(yt)if(Array.isArray(yt))for(let Vt=0;Vt<yt.length;Vt++){const xe=yt[Vt];gt(xe,Te,Je)}else gt(yt,Te,Je)}),y.pop(),c=null};let Ke=null;function ot(Te){Ke&&Ke(Te)}function ut(){jt.stop()}function _t(){jt.start()}const jt=new _d;jt.setAnimationLoop(ot),typeof self<"u"&&jt.setContext(self),this.setAnimationLoop=function(Te){Ke=Te,Se.setAnimationLoop(Te),Te===null?jt.stop():jt.start()},Se.addEventListener("sessionstart",ut),Se.addEventListener("sessionend",_t),this.render=function(Te,nt){if(nt!==void 0&&nt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(m===!0)return;Te.matrixWorldAutoUpdate===!0&&Te.updateMatrixWorld(),nt.parent===null&&nt.matrixWorldAutoUpdate===!0&&nt.updateMatrixWorld(),Se.enabled===!0&&Se.isPresenting===!0&&(Se.cameraAutoUpdate===!0&&Se.updateCamera(nt),nt=Se.getCamera()),Te.isScene===!0&&Te.onBeforeRender(p,Te,nt,x),c=de.get(Te,y.length),c.init(),y.push(c),D.multiplyMatrices(nt.projectionMatrix,nt.matrixWorldInverse),W.setFromProjectionMatrix(D),ne=this.localClippingEnabled,Q=le.init(this.clippingPlanes,ne),u=Et.get(Te,d.length),u.init(),d.push(u),$t(Te,nt,0,p.sortObjects),u.finish(),p.sortObjects===!0&&u.sort(F,I),Q===!0&&le.beginShadows();const gt=c.state.shadowsArray;if(Ue.render(gt,Te,nt),Q===!0&&le.endShadows(),this.info.autoReset===!0&&this.info.reset(),Ze.render(u,Te),c.setupLights(p.physicallyCorrectLights),nt.isArrayCamera){const Je=nt.cameras;for(let yt=0,Vt=Je.length;yt<Vt;yt++){const xe=Je[yt];ar(u,Te,xe,xe.viewport)}}else ar(u,Te,nt);x!==null&&(fe.updateMultisampleRenderTarget(x),fe.updateRenderTargetMipmap(x)),Te.isScene===!0&&Te.onAfterRender(p,Te,nt),te.resetDefaultState(),T=-1,w=null,y.pop(),y.length>0?c=y[y.length-1]:c=null,d.pop(),d.length>0?u=d[d.length-1]:u=null};function $t(Te,nt,gt,Je){if(Te.visible===!1)return;if(Te.layers.test(nt.layers)){if(Te.isGroup)gt=Te.renderOrder;else if(Te.isLOD)Te.autoUpdate===!0&&Te.update(nt);else if(Te.isLight)c.pushLight(Te),Te.castShadow&&c.pushShadow(Te);else if(Te.isSprite){if(!Te.frustumCulled||W.intersectsSprite(Te)){Je&&V.setFromMatrixPosition(Te.matrixWorld).applyMatrix4(D);const xe=Be.update(Te),lt=Te.material;lt.visible&&u.push(Te,xe,lt,gt,V.z,null)}}else if((Te.isMesh||Te.isLine||Te.isPoints)&&(Te.isSkinnedMesh&&Te.skeleton.frame!==we.render.frame&&(Te.skeleton.update(),Te.skeleton.frame=we.render.frame),!Te.frustumCulled||W.intersectsObject(Te))){Je&&V.setFromMatrixPosition(Te.matrixWorld).applyMatrix4(D);const xe=Be.update(Te),lt=Te.material;if(Array.isArray(lt)){const xt=xe.groups;for(let ct=0,Dt=xt.length;ct<Dt;ct++){const et=xt[ct],Ht=lt[et.materialIndex];Ht&&Ht.visible&&u.push(Te,xe,Ht,gt,V.z,et)}}else lt.visible&&u.push(Te,xe,lt,gt,V.z,null)}}const Vt=Te.children;for(let xe=0,lt=Vt.length;xe<lt;xe++)$t(Vt[xe],nt,gt,Je)}function ar(Te,nt,gt,Je){const yt=Te.opaque,Vt=Te.transmissive,xe=Te.transparent;c.setupLightsView(gt),Q===!0&&le.setGlobalState(p.clippingPlanes,gt),Vt.length>0&&fr(yt,nt,gt),Je&&pe.viewport(b.copy(Je)),yt.length>0&&Ut(yt,nt,gt),Vt.length>0&&Ut(Vt,nt,gt),xe.length>0&&Ut(xe,nt,gt),pe.buffers.depth.setTest(!0),pe.buffers.depth.setMask(!0),pe.buffers.color.setMask(!0),pe.setPolygonOffset(!1)}function fr(Te,nt,gt){const Je=he.isWebGL2;U===null&&(U=new Si(1,1,{generateMipmaps:!0,type:ye.has("EXT_color_buffer_half_float")?uo:Vi,minFilter:zi,samples:Je&&o===!0?4:0})),p.getDrawingBufferSize(O),Je?U.setSize(O.x,O.y):U.setSize(ha(O.x),ha(O.y));const yt=p.getRenderTarget();p.setRenderTarget(U),p.clear();const Vt=p.toneMapping;p.toneMapping=si,Ut(Te,nt,gt),p.toneMapping=Vt,fe.updateMultisampleRenderTarget(U),fe.updateRenderTargetMipmap(U),p.setRenderTarget(yt)}function Ut(Te,nt,gt){const Je=nt.isScene===!0?nt.overrideMaterial:null;for(let yt=0,Vt=Te.length;yt<Vt;yt++){const xe=Te[yt],lt=xe.object,xt=xe.geometry,ct=Je===null?xe.material:Je,Dt=xe.group;lt.layers.test(gt.layers)&&er(lt,nt,gt,xt,ct,Dt)}}function er(Te,nt,gt,Je,yt,Vt){Te.onBeforeRender(p,nt,gt,Je,yt,Vt),Te.modelViewMatrix.multiplyMatrices(gt.matrixWorldInverse,Te.matrixWorld),Te.normalMatrix.getNormalMatrix(Te.modelViewMatrix),yt.onBeforeRender(p,nt,gt,Je,Te,Vt),yt.transparent===!0&&yt.side===ni&&yt.forceSinglePass===!1?(yt.side=mn,yt.needsUpdate=!0,p.renderBufferDirect(gt,nt,Je,yt,Te,Vt),yt.side=oi,yt.needsUpdate=!0,p.renderBufferDirect(gt,nt,Je,yt,Te,Vt),yt.side=ni):p.renderBufferDirect(gt,nt,Je,yt,Te,Vt),Te.onAfterRender(p,nt,gt,Je,yt,Vt)}function Yt(Te,nt,gt){nt.isScene!==!0&&(nt=Z);const Je=oe.get(Te),yt=c.state.lights,Vt=c.state.shadowsArray,xe=yt.state.version,lt=st.getParameters(Te,yt.state,Vt,nt,gt),xt=st.getProgramCacheKey(lt);let ct=Je.programs;Je.environment=Te.isMeshStandardMaterial?nt.environment:null,Je.fog=nt.fog,Je.envMap=(Te.isMeshStandardMaterial?Fe:Ce).get(Te.envMap||Je.environment),ct===void 0&&(Te.addEventListener("dispose",ft),ct=new Map,Je.programs=ct);let Dt=ct.get(xt);if(Dt!==void 0){if(Je.currentProgram===Dt&&Je.lightsStateVersion===xe)return _r(Te,lt),Dt}else lt.uniforms=st.getUniforms(Te),Te.onBuild(gt,lt,p),Te.onBeforeCompile(lt,p),Dt=st.acquireProgram(lt,xt),ct.set(xt,Dt),Je.uniforms=lt.uniforms;const et=Je.uniforms;(!Te.isShaderMaterial&&!Te.isRawShaderMaterial||Te.clipping===!0)&&(et.clippingPlanes=le.uniform),_r(Te,lt),Je.needsLights=Pr(Te),Je.lightsStateVersion=xe,Je.needsLights&&(et.ambientLightColor.value=yt.state.ambient,et.lightProbe.value=yt.state.probe,et.directionalLights.value=yt.state.directional,et.directionalLightShadows.value=yt.state.directionalShadow,et.spotLights.value=yt.state.spot,et.spotLightShadows.value=yt.state.spotShadow,et.rectAreaLights.value=yt.state.rectArea,et.ltc_1.value=yt.state.rectAreaLTC1,et.ltc_2.value=yt.state.rectAreaLTC2,et.pointLights.value=yt.state.point,et.pointLightShadows.value=yt.state.pointShadow,et.hemisphereLights.value=yt.state.hemi,et.directionalShadowMap.value=yt.state.directionalShadowMap,et.directionalShadowMatrix.value=yt.state.directionalShadowMatrix,et.spotShadowMap.value=yt.state.spotShadowMap,et.spotLightMatrix.value=yt.state.spotLightMatrix,et.spotLightMap.value=yt.state.spotLightMap,et.pointShadowMap.value=yt.state.pointShadowMap,et.pointShadowMatrix.value=yt.state.pointShadowMatrix);const Ht=Dt.getUniforms(),Mt=ua.seqWithValue(Ht.seq,et);return Je.currentProgram=Dt,Je.uniformsList=Mt,Dt}function _r(Te,nt){const gt=oe.get(Te);gt.outputEncoding=nt.outputEncoding,gt.instancing=nt.instancing,gt.skinning=nt.skinning,gt.morphTargets=nt.morphTargets,gt.morphNormals=nt.morphNormals,gt.morphColors=nt.morphColors,gt.morphTargetsCount=nt.morphTargetsCount,gt.numClippingPlanes=nt.numClippingPlanes,gt.numIntersection=nt.numClipIntersection,gt.vertexAlphas=nt.vertexAlphas,gt.vertexTangents=nt.vertexTangents,gt.toneMapping=nt.toneMapping}function Ar(Te,nt,gt,Je,yt){nt.isScene!==!0&&(nt=Z),fe.resetTextureUnits();const Vt=nt.fog,xe=Je.isMeshStandardMaterial?nt.environment:null,lt=x===null?p.outputEncoding:x.isXRRenderTarget===!0?x.texture.encoding:Hi,xt=(Je.isMeshStandardMaterial?Fe:Ce).get(Je.envMap||xe),ct=Je.vertexColors===!0&&!!gt.attributes.color&&gt.attributes.color.itemSize===4,Dt=!!Je.normalMap&&!!gt.attributes.tangent,et=!!gt.morphAttributes.position,Ht=!!gt.morphAttributes.normal,Mt=!!gt.morphAttributes.color,Kt=Je.toneMapped?p.toneMapping:si,Ct=gt.morphAttributes.position||gt.morphAttributes.normal||gt.morphAttributes.color,Jt=Ct!==void 0?Ct.length:0,Wt=oe.get(Je),gr=c.state.lights;if(Q===!0&&(ne===!0||Te!==w)){const Dr=Te===w&&Je.id===T;le.setState(Je,Te,Dr)}let tr=!1;Je.version===Wt.__version?(Wt.needsLights&&Wt.lightsStateVersion!==gr.state.version||Wt.outputEncoding!==lt||yt.isInstancedMesh&&Wt.instancing===!1||!yt.isInstancedMesh&&Wt.instancing===!0||yt.isSkinnedMesh&&Wt.skinning===!1||!yt.isSkinnedMesh&&Wt.skinning===!0||Wt.envMap!==xt||Je.fog===!0&&Wt.fog!==Vt||Wt.numClippingPlanes!==void 0&&(Wt.numClippingPlanes!==le.numPlanes||Wt.numIntersection!==le.numIntersection)||Wt.vertexAlphas!==ct||Wt.vertexTangents!==Dt||Wt.morphTargets!==et||Wt.morphNormals!==Ht||Wt.morphColors!==Mt||Wt.toneMapping!==Kt||he.isWebGL2===!0&&Wt.morphTargetsCount!==Jt)&&(tr=!0):(tr=!0,Wt.__version=Je.version);let Rr=Wt.currentProgram;tr===!0&&(Rr=Yt(Je,nt,yt));let Or=!1,Fr=!1,cr=!1;const xr=Rr.getUniforms(),Mr=Wt.uniforms;if(pe.useProgram(Rr.program)&&(Or=!0,Fr=!0,cr=!0),Je.id!==T&&(T=Je.id,Fr=!0),Or||w!==Te){if(xr.setValue(re,"projectionMatrix",Te.projectionMatrix),he.logarithmicDepthBuffer&&xr.setValue(re,"logDepthBufFC",2/(Math.log(Te.far+1)/Math.LN2)),w!==Te&&(w=Te,Fr=!0,cr=!0),Je.isShaderMaterial||Je.isMeshPhongMaterial||Je.isMeshToonMaterial||Je.isMeshStandardMaterial||Je.envMap){const Dr=xr.map.cameraPosition;Dr!==void 0&&Dr.setValue(re,V.setFromMatrixPosition(Te.matrixWorld))}(Je.isMeshPhongMaterial||Je.isMeshToonMaterial||Je.isMeshLambertMaterial||Je.isMeshBasicMaterial||Je.isMeshStandardMaterial||Je.isShaderMaterial)&&xr.setValue(re,"isOrthographic",Te.isOrthographicCamera===!0),(Je.isMeshPhongMaterial||Je.isMeshToonMaterial||Je.isMeshLambertMaterial||Je.isMeshBasicMaterial||Je.isMeshStandardMaterial||Je.isShaderMaterial||Je.isShadowMaterial||yt.isSkinnedMesh)&&xr.setValue(re,"viewMatrix",Te.matrixWorldInverse)}if(yt.isSkinnedMesh){xr.setOptional(re,yt,"bindMatrix"),xr.setOptional(re,yt,"bindMatrixInverse");const Dr=yt.skeleton;Dr&&(he.floatVertexTextures?(Dr.boneTexture===null&&Dr.computeBoneTexture(),xr.setValue(re,"boneTexture",Dr.boneTexture,fe),xr.setValue(re,"boneTextureSize",Dr.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Vr=gt.morphAttributes;if((Vr.position!==void 0||Vr.normal!==void 0||Vr.color!==void 0&&he.isWebGL2===!0)&&Me.update(yt,gt,Je,Rr),(Fr||Wt.receiveShadow!==yt.receiveShadow)&&(Wt.receiveShadow=yt.receiveShadow,xr.setValue(re,"receiveShadow",yt.receiveShadow)),Je.isMeshGouraudMaterial&&Je.envMap!==null&&(Mr.envMap.value=xt,Mr.flipEnvMap.value=xt.isCubeTexture&&xt.isRenderTargetTexture===!1?-1:1),Fr&&(xr.setValue(re,"toneMappingExposure",p.toneMappingExposure),Wt.needsLights&&hr(Mr,cr),Vt&&Je.fog===!0&&qe.refreshFogUniforms(Mr,Vt),qe.refreshMaterialUniforms(Mr,Je,P,k,U),ua.upload(re,Wt.uniformsList,Mr,fe)),Je.isShaderMaterial&&Je.uniformsNeedUpdate===!0&&(ua.upload(re,Wt.uniformsList,Mr,fe),Je.uniformsNeedUpdate=!1),Je.isSpriteMaterial&&xr.setValue(re,"center",yt.center),xr.setValue(re,"modelViewMatrix",yt.modelViewMatrix),xr.setValue(re,"normalMatrix",yt.normalMatrix),xr.setValue(re,"modelMatrix",yt.matrixWorld),Je.isShaderMaterial||Je.isRawShaderMaterial){const Dr=Je.uniformsGroups;for(let ai=0,Zi=Dr.length;ai<Zi;ai++)if(he.isWebGL2){const qn=Dr[ai];ee.update(qn,Rr),ee.bind(qn,Rr)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Rr}function hr(Te,nt){Te.ambientLightColor.needsUpdate=nt,Te.lightProbe.needsUpdate=nt,Te.directionalLights.needsUpdate=nt,Te.directionalLightShadows.needsUpdate=nt,Te.pointLights.needsUpdate=nt,Te.pointLightShadows.needsUpdate=nt,Te.spotLights.needsUpdate=nt,Te.spotLightShadows.needsUpdate=nt,Te.rectAreaLights.needsUpdate=nt,Te.hemisphereLights.needsUpdate=nt}function Pr(Te){return Te.isMeshLambertMaterial||Te.isMeshToonMaterial||Te.isMeshPhongMaterial||Te.isMeshStandardMaterial||Te.isShadowMaterial||Te.isShaderMaterial&&Te.lights===!0}this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return v},this.getRenderTarget=function(){return x},this.setRenderTargetTextures=function(Te,nt,gt){oe.get(Te.texture).__webglTexture=nt,oe.get(Te.depthTexture).__webglTexture=gt;const Je=oe.get(Te);Je.__hasExternalTextures=!0,Je.__hasExternalTextures&&(Je.__autoAllocateDepthBuffer=gt===void 0,Je.__autoAllocateDepthBuffer||ye.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Je.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Te,nt){const gt=oe.get(Te);gt.__webglFramebuffer=nt,gt.__useDefaultFramebuffer=nt===void 0},this.setRenderTarget=function(Te,nt=0,gt=0){x=Te,g=nt,v=gt;let Je=!0,yt=null,Vt=!1,xe=!1;if(Te){const xt=oe.get(Te);xt.__useDefaultFramebuffer!==void 0?(pe.bindFramebuffer(36160,null),Je=!1):xt.__webglFramebuffer===void 0?fe.setupRenderTarget(Te):xt.__hasExternalTextures&&fe.rebindTextures(Te,oe.get(Te.texture).__webglTexture,oe.get(Te.depthTexture).__webglTexture);const ct=Te.texture;(ct.isData3DTexture||ct.isDataArrayTexture||ct.isCompressedArrayTexture)&&(xe=!0);const Dt=oe.get(Te).__webglFramebuffer;Te.isWebGLCubeRenderTarget?(yt=Dt[nt],Vt=!0):he.isWebGL2&&Te.samples>0&&fe.useMultisampledRTT(Te)===!1?yt=oe.get(Te).__webglMultisampledFramebuffer:yt=Dt,b.copy(Te.viewport),C.copy(Te.scissor),A=Te.scissorTest}else b.copy(B).multiplyScalar(P).floor(),C.copy(H).multiplyScalar(P).floor(),A=G;if(pe.bindFramebuffer(36160,yt)&&he.drawBuffers&&Je&&pe.drawBuffers(Te,yt),pe.viewport(b),pe.scissor(C),pe.setScissorTest(A),Vt){const xt=oe.get(Te.texture);re.framebufferTexture2D(36160,36064,34069+nt,xt.__webglTexture,gt)}else if(xe){const xt=oe.get(Te.texture),ct=nt||0;re.framebufferTextureLayer(36160,36064,xt.__webglTexture,gt||0,ct)}T=-1},this.readRenderTargetPixels=function(Te,nt,gt,Je,yt,Vt,xe){if(!(Te&&Te.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let lt=oe.get(Te).__webglFramebuffer;if(Te.isWebGLCubeRenderTarget&&xe!==void 0&&(lt=lt[xe]),lt){pe.bindFramebuffer(36160,lt);try{const xt=Te.texture,ct=xt.format,Dt=xt.type;if(ct!==Tn&&q.convert(ct)!==re.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const et=Dt===uo&&(ye.has("EXT_color_buffer_half_float")||he.isWebGL2&&ye.has("EXT_color_buffer_float"));if(Dt!==Vi&&q.convert(Dt)!==re.getParameter(35738)&&!(Dt===_i&&(he.isWebGL2||ye.has("OES_texture_float")||ye.has("WEBGL_color_buffer_float")))&&!et){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}nt>=0&&nt<=Te.width-Je&&gt>=0&&gt<=Te.height-yt&&re.readPixels(nt,gt,Je,yt,q.convert(ct),q.convert(Dt),Vt)}finally{const xt=x!==null?oe.get(x).__webglFramebuffer:null;pe.bindFramebuffer(36160,xt)}}},this.copyFramebufferToTexture=function(Te,nt,gt=0){const Je=Math.pow(2,-gt),yt=Math.floor(nt.image.width*Je),Vt=Math.floor(nt.image.height*Je);fe.setTexture2D(nt,0),re.copyTexSubImage2D(3553,gt,0,0,Te.x,Te.y,yt,Vt),pe.unbindTexture()},this.copyTextureToTexture=function(Te,nt,gt,Je=0){const yt=nt.image.width,Vt=nt.image.height,xe=q.convert(gt.format),lt=q.convert(gt.type);fe.setTexture2D(gt,0),re.pixelStorei(37440,gt.flipY),re.pixelStorei(37441,gt.premultiplyAlpha),re.pixelStorei(3317,gt.unpackAlignment),nt.isDataTexture?re.texSubImage2D(3553,Je,Te.x,Te.y,yt,Vt,xe,lt,nt.image.data):nt.isCompressedTexture?re.compressedTexSubImage2D(3553,Je,Te.x,Te.y,nt.mipmaps[0].width,nt.mipmaps[0].height,xe,nt.mipmaps[0].data):re.texSubImage2D(3553,Je,Te.x,Te.y,xe,lt,nt.image),Je===0&&gt.generateMipmaps&&re.generateMipmap(3553),pe.unbindTexture()},this.copyTextureToTexture3D=function(Te,nt,gt,Je,yt=0){if(p.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Vt=Te.max.x-Te.min.x+1,xe=Te.max.y-Te.min.y+1,lt=Te.max.z-Te.min.z+1,xt=q.convert(Je.format),ct=q.convert(Je.type);let Dt;if(Je.isData3DTexture)fe.setTexture3D(Je,0),Dt=32879;else if(Je.isDataArrayTexture)fe.setTexture2DArray(Je,0),Dt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}re.pixelStorei(37440,Je.flipY),re.pixelStorei(37441,Je.premultiplyAlpha),re.pixelStorei(3317,Je.unpackAlignment);const et=re.getParameter(3314),Ht=re.getParameter(32878),Mt=re.getParameter(3316),Kt=re.getParameter(3315),Ct=re.getParameter(32877),Jt=gt.isCompressedTexture?gt.mipmaps[0]:gt.image;re.pixelStorei(3314,Jt.width),re.pixelStorei(32878,Jt.height),re.pixelStorei(3316,Te.min.x),re.pixelStorei(3315,Te.min.y),re.pixelStorei(32877,Te.min.z),gt.isDataTexture||gt.isData3DTexture?re.texSubImage3D(Dt,yt,nt.x,nt.y,nt.z,Vt,xe,lt,xt,ct,Jt.data):gt.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),re.compressedTexSubImage3D(Dt,yt,nt.x,nt.y,nt.z,Vt,xe,lt,xt,Jt.data)):re.texSubImage3D(Dt,yt,nt.x,nt.y,nt.z,Vt,xe,lt,xt,ct,Jt),re.pixelStorei(3314,et),re.pixelStorei(32878,Ht),re.pixelStorei(3316,Mt),re.pixelStorei(3315,Kt),re.pixelStorei(32877,Ct),yt===0&&Je.generateMipmaps&&re.generateMipmap(Dt),pe.unbindTexture()},this.initTexture=function(Te){Te.isCubeTexture?fe.setTextureCube(Te,0):Te.isData3DTexture?fe.setTexture3D(Te,0):Te.isDataArrayTexture||Te.isCompressedArrayTexture?fe.setTexture2DArray(Te,0):fe.setTexture2D(Te,0),pe.unbindTexture()},this.resetState=function(){g=0,v=0,x=null,pe.reset(),te.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class w0 extends Td{}w0.prototype.isWebGL1Renderer=!0;class S0 extends Cr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,r){return super.copy(t,r),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const r=super.toJSON(t);return this.fog!==null&&(r.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(r.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(r.object.backgroundIntensity=this.backgroundIntensity),r}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(t){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=t}}class M0{constructor(t,r){this.isInterleavedBuffer=!0,this.array=t,this.stride=r,this.count=t!==void 0?t.length/r:0,this.usage=vl,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Dn()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,r,i){t*=this.stride,i*=r.stride;for(let n=0,o=this.stride;n<o;n++)this.array[t+n]=r.array[i+n];return this}set(t,r=0){return this.array.set(t,r),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Dn()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const r=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(r,this.stride);return i.setUsage(this.usage),i}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Dn()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Qr=new Ve;class Il{constructor(t,r,i,n=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=r,this.offset=i,this.normalized=n}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let r=0,i=this.data.count;r<i;r++)Qr.fromBufferAttribute(this,r),Qr.applyMatrix4(t),this.setXYZ(r,Qr.x,Qr.y,Qr.z);return this}applyNormalMatrix(t){for(let r=0,i=this.count;r<i;r++)Qr.fromBufferAttribute(this,r),Qr.applyNormalMatrix(t),this.setXYZ(r,Qr.x,Qr.y,Qr.z);return this}transformDirection(t){for(let r=0,i=this.count;r<i;r++)Qr.fromBufferAttribute(this,r),Qr.transformDirection(t),this.setXYZ(r,Qr.x,Qr.y,Qr.z);return this}setX(t,r){return this.normalized&&(r=vr(r,this.array)),this.data.array[t*this.data.stride+this.offset]=r,this}setY(t,r){return this.normalized&&(r=vr(r,this.array)),this.data.array[t*this.data.stride+this.offset+1]=r,this}setZ(t,r){return this.normalized&&(r=vr(r,this.array)),this.data.array[t*this.data.stride+this.offset+2]=r,this}setW(t,r){return this.normalized&&(r=vr(r,this.array)),this.data.array[t*this.data.stride+this.offset+3]=r,this}getX(t){let r=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(r=ii(r,this.array)),r}getY(t){let r=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(r=ii(r,this.array)),r}getZ(t){let r=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(r=ii(r,this.array)),r}getW(t){let r=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(r=ii(r,this.array)),r}setXY(t,r,i){return t=t*this.data.stride+this.offset,this.normalized&&(r=vr(r,this.array),i=vr(i,this.array)),this.data.array[t+0]=r,this.data.array[t+1]=i,this}setXYZ(t,r,i,n){return t=t*this.data.stride+this.offset,this.normalized&&(r=vr(r,this.array),i=vr(i,this.array),n=vr(n,this.array)),this.data.array[t+0]=r,this.data.array[t+1]=i,this.data.array[t+2]=n,this}setXYZW(t,r,i,n,o){return t=t*this.data.stride+this.offset,this.normalized&&(r=vr(r,this.array),i=vr(i,this.array),n=vr(n,this.array),o=vr(o,this.array)),this.data.array[t+0]=r,this.data.array[t+1]=i,this.data.array[t+2]=n,this.data.array[t+3]=o,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const r=[];for(let i=0;i<this.count;i++){const n=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)r.push(this.data.array[n+o])}return new Yr(new this.array.constructor(r),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Il(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const r=[];for(let i=0;i<this.count;i++){const n=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)r.push(this.data.array[n+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:r,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const pc=new Ve,mc=new br,gc=new br,T0=new Ve,yc=new or;class E0 extends ln{constructor(t,r){super(t,r),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new or,this.bindMatrixInverse=new or}copy(t,r){return super.copy(t,r),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}bind(t,r){this.skeleton=t,r===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),r=this.matrixWorld),this.bindMatrix.copy(r),this.bindMatrixInverse.copy(r).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new br,r=this.geometry.attributes.skinWeight;for(let i=0,n=r.count;i<n;i++){t.fromBufferAttribute(r,i);const o=1/t.manhattanLength();o!==1/0?t.multiplyScalar(o):t.set(1,0,0,0),r.setXYZW(i,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(t,r){const i=this.skeleton,n=this.geometry;mc.fromBufferAttribute(n.attributes.skinIndex,t),gc.fromBufferAttribute(n.attributes.skinWeight,t),pc.copy(r).applyMatrix4(this.bindMatrix),r.set(0,0,0);for(let o=0;o<4;o++){const s=gc.getComponent(o);if(s!==0){const a=mc.getComponent(o);yc.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),r.addScaledVector(T0.copy(pc).applyMatrix4(yc),s)}}return r.applyMatrix4(this.bindMatrixInverse)}}class Ed extends Cr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class j0 extends Xr{constructor(t=null,r=1,i=1,n,o,s,a,f,h=Nr,l=Nr,u,c){super(null,s,a,f,h,l,n,o,u,c),this.isDataTexture=!0,this.image={data:t,width:r,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const vc=new or,C0=new or;class Nl{constructor(t=[],r=[]){this.uuid=Dn(),this.bones=t.slice(0),this.boneInverses=r,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const t=this.bones,r=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),r.length===0)this.calculateInverses();else if(t.length!==r.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,n=this.bones.length;i<n;i++)this.boneInverses.push(new or)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,r=this.bones.length;t<r;t++){const i=new or;this.bones[t]&&i.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];i&&i.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const t=this.bones,r=this.boneInverses,i=this.boneMatrices,n=this.boneTexture;for(let o=0,s=t.length;o<s;o++){const a=t[o]?t[o].matrixWorld:C0;vc.multiplyMatrices(a,r[o]),vc.toArray(i,o*16)}n!==null&&(n.needsUpdate=!0)}clone(){return new Nl(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=ad(t),t=Math.max(t,4);const r=new Float32Array(t*t*4);r.set(this.boneMatrices);const i=new j0(r,t,t,Tn,_i);return i.needsUpdate=!0,this.boneMatrices=r,this.boneTexture=i,this.boneTextureSize=t,this}getBoneByName(t){for(let r=0,i=this.bones.length;r<i;r++){const n=this.bones[r];if(n.name===t)return n}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,r){this.uuid=t.uuid;for(let i=0,n=t.bones.length;i<n;i++){const o=t.bones[i];let s=r[o];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),s=new Ed),this.bones.push(s),this.boneInverses.push(new or().fromArray(t.boneInverses[i]))}return this.init(),this}toJSON(){const t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const r=this.bones,i=this.boneInverses;for(let n=0,o=r.length;n<o;n++){const s=r[n];t.bones.push(s.uuid);const a=i[n];t.boneInverses.push(a.toArray())}return t}}class bc extends Yr{constructor(t,r,i,n=1){super(t,r,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const _c=new or,xc=new or,ta=[],A0=new or,eo=new ln;class L0 extends ln{constructor(t,r,i){super(t,r),this.isInstancedMesh=!0,this.instanceMatrix=new bc(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1;for(let n=0;n<i;n++)this.setMatrixAt(n,A0)}copy(t,r){return super.copy(t,r),this.instanceMatrix.copy(t.instanceMatrix),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this}getColorAt(t,r){r.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,r){r.fromArray(this.instanceMatrix.array,t*16)}raycast(t,r){const i=this.matrixWorld,n=this.count;if(eo.geometry=this.geometry,eo.material=this.material,eo.material!==void 0)for(let o=0;o<n;o++){this.getMatrixAt(o,_c),xc.multiplyMatrices(i,_c),eo.matrixWorld=xc,eo.raycast(t,ta);for(let s=0,a=ta.length;s<a;s++){const f=ta[s];f.instanceId=o,f.object=this,r.push(f)}ta.length=0}}setColorAt(t,r){this.instanceColor===null&&(this.instanceColor=new bc(new Float32Array(this.instanceMatrix.count*3),3)),r.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,r){r.toArray(this.instanceMatrix.array,t*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class jd extends zn{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ht(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const wc=new Ve,Sc=new Ve,Mc=new or,ol=new Dl,ra=new Is;class Fl extends Cr{constructor(t=new En,r=new jd){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=r,this.updateMorphTargets()}copy(t,r){return super.copy(t,r),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.index===null){const r=t.attributes.position,i=[0];for(let n=1,o=r.count;n<o;n++)wc.fromBufferAttribute(r,n-1),Sc.fromBufferAttribute(r,n),i[n]=i[n-1],i[n]+=wc.distanceTo(Sc);t.setAttribute("lineDistance",new kn(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,r){const i=this.geometry,n=this.matrixWorld,o=t.params.Line.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),ra.copy(i.boundingSphere),ra.applyMatrix4(n),ra.radius+=o,t.ray.intersectsSphere(ra)===!1)return;Mc.copy(n).invert(),ol.copy(t.ray).applyMatrix4(Mc);const a=o/((this.scale.x+this.scale.y+this.scale.z)/3),f=a*a,h=new Ve,l=new Ve,u=new Ve,c=new Ve,d=this.isLineSegments?2:1,y=i.index,m=i.attributes.position;if(y!==null){const g=Math.max(0,s.start),v=Math.min(y.count,s.start+s.count);for(let x=g,T=v-1;x<T;x+=d){const w=y.getX(x),b=y.getX(x+1);if(h.fromBufferAttribute(m,w),l.fromBufferAttribute(m,b),ol.distanceSqToSegment(h,l,c,u)>f)continue;c.applyMatrix4(this.matrixWorld);const A=t.ray.origin.distanceTo(c);A<t.near||A>t.far||r.push({distance:A,point:u.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,s.start),v=Math.min(m.count,s.start+s.count);for(let x=g,T=v-1;x<T;x+=d){if(h.fromBufferAttribute(m,x),l.fromBufferAttribute(m,x+1),ol.distanceSqToSegment(h,l,c,u)>f)continue;c.applyMatrix4(this.matrixWorld);const b=t.ray.origin.distanceTo(c);b<t.near||b>t.far||r.push({distance:b,point:u.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const r=this.geometry.morphAttributes,i=Object.keys(r);if(i.length>0){const n=r[i[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=n.length;o<s;o++){const a=n[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}}const Tc=new Ve,Ec=new Ve;class P0 extends Fl{constructor(t,r){super(t,r),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.index===null){const r=t.attributes.position,i=[];for(let n=0,o=r.count;n<o;n+=2)Tc.fromBufferAttribute(r,n),Ec.fromBufferAttribute(r,n+1),i[n]=n===0?0:i[n-1],i[n+1]=i[n]+Tc.distanceTo(Ec);t.setAttribute("lineDistance",new kn(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class R0 extends Fl{constructor(t,r){super(t,r),this.isLineLoop=!0,this.type="LineLoop"}}class Cd extends zn{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ht(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const jc=new or,wl=new Dl,na=new Is,ia=new Ve;class D0 extends Cr{constructor(t=new En,r=new Cd){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=r,this.updateMorphTargets()}copy(t,r){return super.copy(t,r),this.material=t.material,this.geometry=t.geometry,this}raycast(t,r){const i=this.geometry,n=this.matrixWorld,o=t.params.Points.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),na.copy(i.boundingSphere),na.applyMatrix4(n),na.radius+=o,t.ray.intersectsSphere(na)===!1)return;jc.copy(n).invert(),wl.copy(t.ray).applyMatrix4(jc);const a=o/((this.scale.x+this.scale.y+this.scale.z)/3),f=a*a,h=i.index,u=i.attributes.position;if(h!==null){const c=Math.max(0,s.start),d=Math.min(h.count,s.start+s.count);for(let y=c,p=d;y<p;y++){const m=h.getX(y);ia.fromBufferAttribute(u,m),Cc(ia,m,f,n,t,r,this)}}else{const c=Math.max(0,s.start),d=Math.min(u.count,s.start+s.count);for(let y=c,p=d;y<p;y++)ia.fromBufferAttribute(u,y),Cc(ia,y,f,n,t,r,this)}}updateMorphTargets(){const r=this.geometry.morphAttributes,i=Object.keys(r);if(i.length>0){const n=r[i[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=n.length;o<s;o++){const a=n[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}}function Cc(S,t,r,i,n,o,s){const a=wl.distanceSqToPoint(S);if(a<r){const f=new Ve;wl.closestPointToPoint(S,f),f.applyMatrix4(i);const h=n.ray.origin.distanceTo(f);if(h<n.near||h>n.far)return;o.push({distance:h,distanceToRay:Math.sqrt(a),point:f,index:t,face:null,object:s})}}class Ul extends zn{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ht(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=od,this.normalScale=new Qt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Yi extends Ul{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Qt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Kr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(r){this.ior=(1+.4*r)/(1-.4*r)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ht(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ht(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ht(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(t)}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}function yi(S,t,r){return Ad(S)?new S.constructor(S.subarray(t,r!==void 0?r:S.length)):S.slice(t,r)}function sa(S,t,r){return!S||!r&&S.constructor===t?S:typeof t.BYTES_PER_ELEMENT=="number"?new t(S):Array.prototype.slice.call(S)}function Ad(S){return ArrayBuffer.isView(S)&&!(S instanceof DataView)}function k0(S){function t(n,o){return S[n]-S[o]}const r=S.length,i=new Array(r);for(let n=0;n!==r;++n)i[n]=n;return i.sort(t),i}function Ac(S,t,r){const i=S.length,n=new S.constructor(i);for(let o=0,s=0;s!==i;++o){const a=r[o]*t;for(let f=0;f!==t;++f)n[s++]=S[a+f]}return n}function Ld(S,t,r,i){let n=1,o=S[0];for(;o!==void 0&&o[i]===void 0;)o=S[n++];if(o===void 0)return;let s=o[i];if(s!==void 0)if(Array.isArray(s))do s=o[i],s!==void 0&&(t.push(o.time),r.push.apply(r,s)),o=S[n++];while(o!==void 0);else if(s.toArray!==void 0)do s=o[i],s!==void 0&&(t.push(o.time),s.toArray(r,r.length)),o=S[n++];while(o!==void 0);else do s=o[i],s!==void 0&&(t.push(o.time),r.push(s)),o=S[n++];while(o!==void 0)}class bo{constructor(t,r,i,n){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=n!==void 0?n:new r.constructor(i),this.sampleValues=r,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){const r=this.parameterPositions;let i=this._cachedIndex,n=r[i],o=r[i-1];e:{t:{let s;r:{n:if(!(t<n)){for(let a=i+2;;){if(n===void 0){if(t<o)break n;return i=r.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(o=n,n=r[++i],t<n)break t}s=r.length;break r}if(!(t>=o)){const a=r[1];t<a&&(i=2,o=a);for(let f=i-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===f)break;if(n=o,o=r[--i-1],t>=o)break t}s=i,i=0;break r}break e}for(;i<s;){const a=i+s>>>1;t<r[a]?s=a:i=a+1}if(n=r[i],o=r[i-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===void 0)return i=r.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,o,n)}return this.interpolate_(i,o,t,n)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const r=this.resultBuffer,i=this.sampleValues,n=this.valueSize,o=t*n;for(let s=0;s!==n;++s)r[s]=i[o+s];return r}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class O0 extends bo{constructor(t,r,i,n){super(t,r,i,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Pu,endingEnd:Pu}}intervalChanged_(t,r,i){const n=this.parameterPositions;let o=t-2,s=t+1,a=n[o],f=n[s];if(a===void 0)switch(this.getSettings_().endingStart){case Ru:o=t,a=2*r-i;break;case Du:o=n.length-2,a=r+n[o]-n[o+1];break;default:o=t,a=i}if(f===void 0)switch(this.getSettings_().endingEnd){case Ru:s=t,f=2*i-r;break;case Du:s=1,f=i+n[1]-n[0];break;default:s=t-1,f=r}const h=(i-r)*.5,l=this.valueSize;this._weightPrev=h/(r-a),this._weightNext=h/(f-i),this._offsetPrev=o*l,this._offsetNext=s*l}interpolate_(t,r,i,n){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,f=t*a,h=f-a,l=this._offsetPrev,u=this._offsetNext,c=this._weightPrev,d=this._weightNext,y=(i-r)/(n-r),p=y*y,m=p*y,g=-c*m+2*c*p-c*y,v=(1+c)*m+(-1.5-2*c)*p+(-.5+c)*y+1,x=(-1-d)*m+(1.5+d)*p+.5*y,T=d*m-d*p;for(let w=0;w!==a;++w)o[w]=g*s[l+w]+v*s[h+w]+x*s[f+w]+T*s[u+w];return o}}class I0 extends bo{constructor(t,r,i,n){super(t,r,i,n)}interpolate_(t,r,i,n){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,f=t*a,h=f-a,l=(i-r)/(n-r),u=1-l;for(let c=0;c!==a;++c)o[c]=s[h+c]*u+s[f+c]*l;return o}}class N0 extends bo{constructor(t,r,i,n){super(t,r,i,n)}interpolate_(t){return this.copySampleValue_(t-1)}}class Wn{constructor(t,r,i,n){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(r===void 0||r.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=sa(r,this.TimeBufferType),this.values=sa(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}static toJSON(t){const r=t.constructor;let i;if(r.toJSON!==this.toJSON)i=r.toJSON(t);else{i={name:t.name,times:sa(t.times,Array),values:sa(t.values,Array)};const n=t.getInterpolation();n!==t.DefaultInterpolation&&(i.interpolation=n)}return i.type=t.ValueTypeName,i}InterpolantFactoryMethodDiscrete(t){return new N0(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new I0(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new O0(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let r;switch(t){case co:r=this.InterpolantFactoryMethodDiscrete;break;case Ps:r=this.InterpolantFactoryMethodLinear;break;case ka:r=this.InterpolantFactoryMethodSmooth;break}if(r===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=r,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return co;case this.InterpolantFactoryMethodLinear:return Ps;case this.InterpolantFactoryMethodSmooth:return ka}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const r=this.times;for(let i=0,n=r.length;i!==n;++i)r[i]+=t}return this}scale(t){if(t!==1){const r=this.times;for(let i=0,n=r.length;i!==n;++i)r[i]*=t}return this}trim(t,r){const i=this.times,n=i.length;let o=0,s=n-1;for(;o!==n&&i[o]<t;)++o;for(;s!==-1&&i[s]>r;)--s;if(++s,o!==0||s!==n){o>=s&&(s=Math.max(s,1),o=s-1);const a=this.getValueSize();this.times=yi(i,o,s),this.values=yi(this.values,o*a,s*a)}return this}validate(){let t=!0;const r=this.getValueSize();r-Math.floor(r)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const i=this.times,n=this.values,o=i.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let s=null;for(let a=0;a!==o;a++){const f=i[a];if(typeof f=="number"&&isNaN(f)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,f),t=!1;break}if(s!==null&&s>f){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,f,s),t=!1;break}s=f}if(n!==void 0&&Ad(n))for(let a=0,f=n.length;a!==f;++a){const h=n[a];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,h),t=!1;break}}return t}optimize(){const t=yi(this.times),r=yi(this.values),i=this.getValueSize(),n=this.getInterpolation()===ka,o=t.length-1;let s=1;for(let a=1;a<o;++a){let f=!1;const h=t[a],l=t[a+1];if(h!==l&&(a!==1||h!==t[0]))if(n)f=!0;else{const u=a*i,c=u-i,d=u+i;for(let y=0;y!==i;++y){const p=r[u+y];if(p!==r[c+y]||p!==r[d+y]){f=!0;break}}}if(f){if(a!==s){t[s]=t[a];const u=a*i,c=s*i;for(let d=0;d!==i;++d)r[c+d]=r[u+d]}++s}}if(o>0){t[s]=t[o];for(let a=o*i,f=s*i,h=0;h!==i;++h)r[f+h]=r[a+h];++s}return s!==t.length?(this.times=yi(t,0,s),this.values=yi(r,0,s*i)):(this.times=t,this.values=r),this}clone(){const t=yi(this.times,0),r=yi(this.values,0),i=this.constructor,n=new i(this.name,t,r);return n.createInterpolant=this.createInterpolant,n}}Wn.prototype.TimeBufferType=Float32Array;Wn.prototype.ValueBufferType=Float32Array;Wn.prototype.DefaultInterpolation=Ps;class Fs extends Wn{}Fs.prototype.ValueTypeName="bool";Fs.prototype.ValueBufferType=Array;Fs.prototype.DefaultInterpolation=co;Fs.prototype.InterpolantFactoryMethodLinear=void 0;Fs.prototype.InterpolantFactoryMethodSmooth=void 0;class Pd extends Wn{}Pd.prototype.ValueTypeName="color";class mo extends Wn{}mo.prototype.ValueTypeName="number";class F0 extends bo{constructor(t,r,i,n){super(t,r,i,n)}interpolate_(t,r,i,n){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,f=(i-r)/(n-r);let h=t*a;for(let l=h+a;h!==l;h+=4)Hn.slerpFlat(o,0,s,h-a,s,h,f);return o}}class Wi extends Wn{InterpolantFactoryMethodLinear(t){return new F0(this.times,this.values,this.getValueSize(),t)}}Wi.prototype.ValueTypeName="quaternion";Wi.prototype.DefaultInterpolation=Ps;Wi.prototype.InterpolantFactoryMethodSmooth=void 0;class Us extends Wn{}Us.prototype.ValueTypeName="string";Us.prototype.ValueBufferType=Array;Us.prototype.DefaultInterpolation=co;Us.prototype.InterpolantFactoryMethodLinear=void 0;Us.prototype.InterpolantFactoryMethodSmooth=void 0;class go extends Wn{}go.prototype.ValueTypeName="vector";class U0{constructor(t,r=-1,i,n=sf){this.name=t,this.tracks=i,this.duration=r,this.blendMode=n,this.uuid=Dn(),this.duration<0&&this.resetDuration()}static parse(t){const r=[],i=t.tracks,n=1/(t.fps||1);for(let s=0,a=i.length;s!==a;++s)r.push(G0(i[s]).scale(n));const o=new this(t.name,t.duration,r,t.blendMode);return o.uuid=t.uuid,o}static toJSON(t){const r=[],i=t.tracks,n={name:t.name,duration:t.duration,tracks:r,uuid:t.uuid,blendMode:t.blendMode};for(let o=0,s=i.length;o!==s;++o)r.push(Wn.toJSON(i[o]));return n}static CreateFromMorphTargetSequence(t,r,i,n){const o=r.length,s=[];for(let a=0;a<o;a++){let f=[],h=[];f.push((a+o-1)%o,a,(a+1)%o),h.push(0,1,0);const l=k0(f);f=Ac(f,1,l),h=Ac(h,1,l),!n&&f[0]===0&&(f.push(o),h.push(h[0])),s.push(new mo(".morphTargetInfluences["+r[a].name+"]",f,h).scale(1/i))}return new this(t,-1,s)}static findByName(t,r){let i=t;if(!Array.isArray(t)){const n=t;i=n.geometry&&n.geometry.animations||n.animations}for(let n=0;n<i.length;n++)if(i[n].name===r)return i[n];return null}static CreateClipsFromMorphTargetSequences(t,r,i){const n={},o=/^([\w-]*?)([\d]+)$/;for(let a=0,f=t.length;a<f;a++){const h=t[a],l=h.name.match(o);if(l&&l.length>1){const u=l[1];let c=n[u];c||(n[u]=c=[]),c.push(h)}}const s=[];for(const a in n)s.push(this.CreateFromMorphTargetSequence(a,n[a],r,i));return s}static parseAnimation(t,r){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(u,c,d,y,p){if(d.length!==0){const m=[],g=[];Ld(d,m,g,y),m.length!==0&&p.push(new u(c,m,g))}},n=[],o=t.name||"default",s=t.fps||30,a=t.blendMode;let f=t.length||-1;const h=t.hierarchy||[];for(let u=0;u<h.length;u++){const c=h[u].keys;if(!(!c||c.length===0))if(c[0].morphTargets){const d={};let y;for(y=0;y<c.length;y++)if(c[y].morphTargets)for(let p=0;p<c[y].morphTargets.length;p++)d[c[y].morphTargets[p]]=-1;for(const p in d){const m=[],g=[];for(let v=0;v!==c[y].morphTargets.length;++v){const x=c[y];m.push(x.time),g.push(x.morphTarget===p?1:0)}n.push(new mo(".morphTargetInfluence["+p+"]",m,g))}f=d.length*s}else{const d=".bones["+r[u].name+"]";i(go,d+".position",c,"pos",n),i(Wi,d+".quaternion",c,"rot",n),i(go,d+".scale",c,"scl",n)}}return n.length===0?null:new this(o,f,n,a)}resetDuration(){const t=this.tracks;let r=0;for(let i=0,n=t.length;i!==n;++i){const o=this.tracks[i];r=Math.max(r,o.times[o.times.length-1])}return this.duration=r,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let r=0;r<this.tracks.length;r++)t=t&&this.tracks[r].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let r=0;r<this.tracks.length;r++)t.push(this.tracks[r].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function B0(S){switch(S.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return mo;case"vector":case"vector2":case"vector3":case"vector4":return go;case"color":return Pd;case"quaternion":return Wi;case"bool":case"boolean":return Fs;case"string":return Us}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+S)}function G0(S){if(S.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=B0(S.type);if(S.times===void 0){const r=[],i=[];Ld(S.keys,r,i,"value"),S.times=r,S.values=i}return t.parse!==void 0?t.parse(S):new t(S.name,S.times,S.values,S.interpolation)}const Ds={enabled:!1,files:{},add:function(S,t){this.enabled!==!1&&(this.files[S]=t)},get:function(S){if(this.enabled!==!1)return this.files[S]},remove:function(S){delete this.files[S]},clear:function(){this.files={}}};class z0{constructor(t,r,i){const n=this;let o=!1,s=0,a=0,f;const h=[];this.onStart=void 0,this.onLoad=t,this.onProgress=r,this.onError=i,this.itemStart=function(l){a++,o===!1&&n.onStart!==void 0&&n.onStart(l,s,a),o=!0},this.itemEnd=function(l){s++,n.onProgress!==void 0&&n.onProgress(l,s,a),s===a&&(o=!1,n.onLoad!==void 0&&n.onLoad())},this.itemError=function(l){n.onError!==void 0&&n.onError(l)},this.resolveURL=function(l){return f?f(l):l},this.setURLModifier=function(l){return f=l,this},this.addHandler=function(l,u){return h.push(l,u),this},this.removeHandler=function(l){const u=h.indexOf(l);return u!==-1&&h.splice(u,2),this},this.getHandler=function(l){for(let u=0,c=h.length;u<c;u+=2){const d=h[u],y=h[u+1];if(d.global&&(d.lastIndex=0),d.test(l))return y}return null}}}const V0=new z0;class Bs{constructor(t){this.manager=t!==void 0?t:V0,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,r){const i=this;return new Promise(function(n,o){i.load(t,n,r,o)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const ti={};class H0 extends Error{constructor(t,r){super(t),this.response=r}}class fa extends Bs{constructor(t){super(t)}load(t,r,i,n){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const o=Ds.get(t);if(o!==void 0)return this.manager.itemStart(t),setTimeout(()=>{r&&r(o),this.manager.itemEnd(t)},0),o;if(ti[t]!==void 0){ti[t].push({onLoad:r,onProgress:i,onError:n});return}ti[t]=[],ti[t].push({onLoad:r,onProgress:i,onError:n});const s=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,f=this.responseType;fetch(s).then(h=>{if(h.status===200||h.status===0){if(h.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||h.body===void 0||h.body.getReader===void 0)return h;const l=ti[t],u=h.body.getReader(),c=h.headers.get("Content-Length")||h.headers.get("X-File-Size"),d=c?parseInt(c):0,y=d!==0;let p=0;const m=new ReadableStream({start(g){v();function v(){u.read().then(({done:x,value:T})=>{if(x)g.close();else{p+=T.byteLength;const w=new ProgressEvent("progress",{lengthComputable:y,loaded:p,total:d});for(let b=0,C=l.length;b<C;b++){const A=l[b];A.onProgress&&A.onProgress(w)}g.enqueue(T),v()}})}}});return new Response(m)}else throw new H0(`fetch for "${h.url}" responded with ${h.status}: ${h.statusText}`,h)}).then(h=>{switch(f){case"arraybuffer":return h.arrayBuffer();case"blob":return h.blob();case"document":return h.text().then(l=>new DOMParser().parseFromString(l,a));case"json":return h.json();default:if(a===void 0)return h.text();{const u=/charset="?([^;"\s]*)"?/i.exec(a),c=u&&u[1]?u[1].toLowerCase():void 0,d=new TextDecoder(c);return h.arrayBuffer().then(y=>d.decode(y))}}}).then(h=>{Ds.add(t,h);const l=ti[t];delete ti[t];for(let u=0,c=l.length;u<c;u++){const d=l[u];d.onLoad&&d.onLoad(h)}}).catch(h=>{const l=ti[t];if(l===void 0)throw this.manager.itemError(t),h;delete ti[t];for(let u=0,c=l.length;u<c;u++){const d=l[u];d.onError&&d.onError(h)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class W0 extends Bs{constructor(t){super(t)}load(t,r,i,n){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const o=this,s=Ds.get(t);if(s!==void 0)return o.manager.itemStart(t),setTimeout(function(){r&&r(s),o.manager.itemEnd(t)},0),s;const a=po("img");function f(){l(),Ds.add(t,this),r&&r(this),o.manager.itemEnd(t)}function h(u){l(),n&&n(u),o.manager.itemError(t),o.manager.itemEnd(t)}function l(){a.removeEventListener("load",f,!1),a.removeEventListener("error",h,!1)}return a.addEventListener("load",f,!1),a.addEventListener("error",h,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),o.manager.itemStart(t),a.src=t,a}}class Rd extends Bs{constructor(t){super(t)}load(t,r,i,n){const o=new Xr,s=new W0(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(t,function(a){o.image=a,o.needsUpdate=!0,r!==void 0&&r(o)},i,n),o}}class ba extends Cr{constructor(t,r=1){super(),this.isLight=!0,this.type="Light",this.color=new ht(t),this.intensity=r}dispose(){}copy(t,r){return super.copy(t,r),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const r=super.toJSON(t);return r.object.color=this.color.getHex(),r.object.intensity=this.intensity,this.groundColor!==void 0&&(r.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(r.object.distance=this.distance),this.angle!==void 0&&(r.object.angle=this.angle),this.decay!==void 0&&(r.object.decay=this.decay),this.penumbra!==void 0&&(r.object.penumbra=this.penumbra),this.shadow!==void 0&&(r.object.shadow=this.shadow.toJSON()),r}}const al=new or,Lc=new Ve,Pc=new Ve;class Bl{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Qt(512,512),this.map=null,this.mapPass=null,this.matrix=new or,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new kl,this._frameExtents=new Qt(1,1),this._viewportCount=1,this._viewports=[new br(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const r=this.camera,i=this.matrix;Lc.setFromMatrixPosition(t.matrixWorld),r.position.copy(Lc),Pc.setFromMatrixPosition(t.target.matrixWorld),r.lookAt(Pc),r.updateMatrixWorld(),al.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(al),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(al)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class q0 extends Bl{constructor(){super(new rn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const r=this.camera,i=fo*2*t.angle*this.focus,n=this.mapSize.width/this.mapSize.height,o=t.distance||r.far;(i!==r.fov||n!==r.aspect||o!==r.far)&&(r.fov=i,r.aspect=n,r.far=o,r.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class X0 extends ba{constructor(t,r,i=0,n=Math.PI/3,o=0,s=2){super(t,r),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Cr.DEFAULT_UP),this.updateMatrix(),this.target=new Cr,this.distance=i,this.angle=n,this.penumbra=o,this.decay=s,this.map=null,this.shadow=new q0}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,r){return super.copy(t,r),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const Rc=new or,to=new Ve,ll=new Ve;class Y0 extends Bl{constructor(){super(new rn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Qt(4,2),this._viewportCount=6,this._viewports=[new br(2,1,1,1),new br(0,1,1,1),new br(3,1,1,1),new br(1,1,1,1),new br(3,0,1,1),new br(1,0,1,1)],this._cubeDirections=[new Ve(1,0,0),new Ve(-1,0,0),new Ve(0,0,1),new Ve(0,0,-1),new Ve(0,1,0),new Ve(0,-1,0)],this._cubeUps=[new Ve(0,1,0),new Ve(0,1,0),new Ve(0,1,0),new Ve(0,1,0),new Ve(0,0,1),new Ve(0,0,-1)]}updateMatrices(t,r=0){const i=this.camera,n=this.matrix,o=t.distance||i.far;o!==i.far&&(i.far=o,i.updateProjectionMatrix()),to.setFromMatrixPosition(t.matrixWorld),i.position.copy(to),ll.copy(i.position),ll.add(this._cubeDirections[r]),i.up.copy(this._cubeUps[r]),i.lookAt(ll),i.updateMatrixWorld(),n.makeTranslation(-to.x,-to.y,-to.z),Rc.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Rc)}}class Z0 extends ba{constructor(t,r,i=0,n=2){super(t,r),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=n,this.shadow=new Y0}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,r){return super.copy(t,r),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class K0 extends Bl{constructor(){super(new vo(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Dd extends ba{constructor(t,r){super(t,r),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Cr.DEFAULT_UP),this.updateMatrix(),this.target=new Cr,this.shadow=new K0}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class $0 extends ba{constructor(t,r){super(t,r),this.isAmbientLight=!0,this.type="AmbientLight"}}class Sl{static decodeText(t){if(typeof TextDecoder<"u")return new TextDecoder().decode(t);let r="";for(let i=0,n=t.length;i<n;i++)r+=String.fromCharCode(t[i]);try{return decodeURIComponent(escape(r))}catch{return r}}static extractUrlBase(t){const r=t.lastIndexOf("/");return r===-1?"./":t.slice(0,r+1)}static resolveURL(t,r){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(r)&&/^\//.test(t)&&(r=r.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:r+t)}}class J0 extends Bs{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,r,i,n){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const o=this,s=Ds.get(t);if(s!==void 0)return o.manager.itemStart(t),setTimeout(function(){r&&r(s),o.manager.itemEnd(t)},0),s;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(t,a).then(function(f){return f.blob()}).then(function(f){return createImageBitmap(f,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(f){Ds.add(t,f),r&&r(f),o.manager.itemEnd(t)}).catch(function(f){n&&n(f),o.manager.itemError(t),o.manager.itemEnd(t)}),o.manager.itemStart(t)}}class kd{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Dc(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const r=Dc();t=(r-this.oldTime)/1e3,this.oldTime=r,this.elapsedTime+=t}return t}}function Dc(){return(typeof performance>"u"?Date:performance).now()}const Gl="\\[\\]\\.:\\/",Q0=new RegExp("["+Gl+"]","g"),zl="[^"+Gl+"]",ev="[^"+Gl.replace("\\.","")+"]",tv=/((?:WC+[\/:])*)/.source.replace("WC",zl),rv=/(WCOD+)?/.source.replace("WCOD",ev),nv=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",zl),iv=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",zl),sv=new RegExp("^"+tv+rv+nv+iv+"$"),ov=["material","materials","bones","map"];class av{constructor(t,r,i){const n=i||mr.parseTrackName(r);this._targetGroup=t,this._bindings=t.subscribe_(r,n)}getValue(t,r){this.bind();const i=this._targetGroup.nCachedObjects_,n=this._bindings[i];n!==void 0&&n.getValue(t,r)}setValue(t,r){const i=this._bindings;for(let n=this._targetGroup.nCachedObjects_,o=i.length;n!==o;++n)i[n].setValue(t,r)}bind(){const t=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=t.length;r!==i;++r)t[r].bind()}unbind(){const t=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=t.length;r!==i;++r)t[r].unbind()}}class mr{constructor(t,r,i){this.path=r,this.parsedPath=i||mr.parseTrackName(r),this.node=mr.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,r,i){return t&&t.isAnimationObjectGroup?new mr.Composite(t,r,i):new mr(t,r,i)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Q0,"")}static parseTrackName(t){const r=sv.exec(t);if(r===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const i={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]},n=i.nodeName&&i.nodeName.lastIndexOf(".");if(n!==void 0&&n!==-1){const o=i.nodeName.substring(n+1);ov.indexOf(o)!==-1&&(i.nodeName=i.nodeName.substring(0,n),i.objectName=o)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i}static findNode(t,r){if(r===void 0||r===""||r==="."||r===-1||r===t.name||r===t.uuid)return t;if(t.skeleton){const i=t.skeleton.getBoneByName(r);if(i!==void 0)return i}if(t.children){const i=function(o){for(let s=0;s<o.length;s++){const a=o[s];if(a.name===r||a.uuid===r)return a;const f=i(a.children);if(f)return f}return null},n=i(t.children);if(n)return n}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,r){t[r]=this.targetObject[this.propertyName]}_getValue_array(t,r){const i=this.resolvedProperty;for(let n=0,o=i.length;n!==o;++n)t[r++]=i[n]}_getValue_arrayElement(t,r){t[r]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,r){this.resolvedProperty.toArray(t,r)}_setValue_direct(t,r){this.targetObject[this.propertyName]=t[r]}_setValue_direct_setNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,r){const i=this.resolvedProperty;for(let n=0,o=i.length;n!==o;++n)i[n]=t[r++]}_setValue_array_setNeedsUpdate(t,r){const i=this.resolvedProperty;for(let n=0,o=i.length;n!==o;++n)i[n]=t[r++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,r){const i=this.resolvedProperty;for(let n=0,o=i.length;n!==o;++n)i[n]=t[r++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,r){this.resolvedProperty[this.propertyIndex]=t[r]}_setValue_arrayElement_setNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,r){this.resolvedProperty.fromArray(t,r)}_setValue_fromArray_setNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,r){this.bind(),this.getValue(t,r)}_setValue_unbound(t,r){this.bind(),this.setValue(t,r)}bind(){let t=this.node;const r=this.parsedPath,i=r.objectName,n=r.propertyName;let o=r.propertyIndex;if(t||(t=mr.findNode(this.rootNode,r.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let h=r.objectIndex;switch(i){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let l=0;l<t.length;l++)if(t[l].name===h){h=l;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[i]}if(h!==void 0){if(t[h]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[h]}}const s=t[n];if(s===void 0){const h=r.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+n+" but it wasn't found.",t);return}let a=this.Versioning.None;this.targetObject=t,t.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let f=this.BindingType.Direct;if(o!==void 0){if(n==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[o]!==void 0&&(o=t.morphTargetDictionary[o])}f=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=o}else s.fromArray!==void 0&&s.toArray!==void 0?(f=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(f=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=n;this.getValue=this.GetterByBindingType[f],this.setValue=this.SetterByBindingTypeAndVersioning[f][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}mr.Composite=av;mr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};mr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};mr.prototype.GetterByBindingType=[mr.prototype._getValue_direct,mr.prototype._getValue_array,mr.prototype._getValue_arrayElement,mr.prototype._getValue_toArray];mr.prototype.SetterByBindingTypeAndVersioning=[[mr.prototype._setValue_direct,mr.prototype._setValue_direct_setNeedsUpdate,mr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[mr.prototype._setValue_array,mr.prototype._setValue_array_setNeedsUpdate,mr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[mr.prototype._setValue_arrayElement,mr.prototype._setValue_arrayElement_setNeedsUpdate,mr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[mr.prototype._setValue_fromArray,mr.prototype._setValue_fromArray_setNeedsUpdate,mr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class kc{constructor(t=1,r=0,i=0){return this.radius=t,this.phi=r,this.theta=i,this}set(t,r,i){return this.radius=t,this.phi=r,this.theta=i,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,r,i){return this.radius=Math.sqrt(t*t+r*r+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,i),this.phi=Math.acos(Kr(r/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Pl}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Pl);const Oc={type:"change"},ul={type:"start"},Ic={type:"end"};class lv extends Xi{constructor(t,r){super(),this.object=t,this.domElement=r,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Ve,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:ts.ROTATE,MIDDLE:ts.DOLLY,RIGHT:ts.PAN},this.touches={ONE:rs.ROTATE,TWO:rs.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(q){q.addEventListener("keydown",Et),this._domElementKeyEvents=q},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(Oc),i.update(),o=n.NONE},this.update=function(){const q=new Ve,te=new Hn().setFromUnitVectors(t.up,new Ve(0,1,0)),ee=te.clone().invert(),ae=new Ve,Se=new Hn,Le=2*Math.PI;return function(){const at=i.object.position;q.copy(at).sub(i.target),q.applyQuaternion(te),a.setFromVector3(q),i.autoRotate&&o===n.NONE&&M(C()),i.enableDamping?(a.theta+=f.theta*i.dampingFactor,a.phi+=f.phi*i.dampingFactor):(a.theta+=f.theta,a.phi+=f.phi);let ft=i.minAzimuthAngle,bt=i.maxAzimuthAngle;return isFinite(ft)&&isFinite(bt)&&(ft<-Math.PI?ft+=Le:ft>Math.PI&&(ft-=Le),bt<-Math.PI?bt+=Le:bt>Math.PI&&(bt-=Le),ft<=bt?a.theta=Math.max(ft,Math.min(bt,a.theta)):a.theta=a.theta>(ft+bt)/2?Math.max(ft,a.theta):Math.min(bt,a.theta)),a.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=h,a.radius=Math.max(i.minDistance,Math.min(i.maxDistance,a.radius)),i.enableDamping===!0?i.target.addScaledVector(l,i.dampingFactor):i.target.add(l),q.setFromSpherical(a),q.applyQuaternion(ee),at.copy(i.target).add(q),i.object.lookAt(i.target),i.enableDamping===!0?(f.theta*=1-i.dampingFactor,f.phi*=1-i.dampingFactor,l.multiplyScalar(1-i.dampingFactor)):(f.set(0,0,0),l.set(0,0,0)),h=1,u||ae.distanceToSquared(i.object.position)>s||8*(1-Se.dot(i.object.quaternion))>s?(i.dispatchEvent(Oc),ae.copy(i.object.position),Se.copy(i.object.quaternion),u=!1,!0):!1}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",Ue),i.domElement.removeEventListener("pointerdown",Ce),i.domElement.removeEventListener("pointercancel",De),i.domElement.removeEventListener("wheel",qe),i.domElement.removeEventListener("pointermove",Fe),i.domElement.removeEventListener("pointerup",Ae),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",Et)};const i=this,n={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let o=n.NONE;const s=1e-6,a=new kc,f=new kc;let h=1;const l=new Ve;let u=!1;const c=new Qt,d=new Qt,y=new Qt,p=new Qt,m=new Qt,g=new Qt,v=new Qt,x=new Qt,T=new Qt,w=[],b={};function C(){return 2*Math.PI/60/60*i.autoRotateSpeed}function A(){return Math.pow(.95,i.zoomSpeed)}function M(q){f.theta-=q}function k(q){f.phi-=q}const P=function(){const q=new Ve;return function(ee,ae){q.setFromMatrixColumn(ae,0),q.multiplyScalar(-ee),l.add(q)}}(),F=function(){const q=new Ve;return function(ee,ae){i.screenSpacePanning===!0?q.setFromMatrixColumn(ae,1):(q.setFromMatrixColumn(ae,0),q.crossVectors(i.object.up,q)),q.multiplyScalar(ee),l.add(q)}}(),I=function(){const q=new Ve;return function(ee,ae){const Se=i.domElement;if(i.object.isPerspectiveCamera){const Le=i.object.position;q.copy(Le).sub(i.target);let Ne=q.length();Ne*=Math.tan(i.object.fov/2*Math.PI/180),P(2*ee*Ne/Se.clientHeight,i.object.matrix),F(2*ae*Ne/Se.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(P(ee*(i.object.right-i.object.left)/i.object.zoom/Se.clientWidth,i.object.matrix),F(ae*(i.object.top-i.object.bottom)/i.object.zoom/Se.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function B(q){i.object.isPerspectiveCamera?h/=q:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*q)),i.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function H(q){i.object.isPerspectiveCamera?h*=q:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/q)),i.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function G(q){c.set(q.clientX,q.clientY)}function W(q){v.set(q.clientX,q.clientY)}function Q(q){p.set(q.clientX,q.clientY)}function ne(q){d.set(q.clientX,q.clientY),y.subVectors(d,c).multiplyScalar(i.rotateSpeed);const te=i.domElement;M(2*Math.PI*y.x/te.clientHeight),k(2*Math.PI*y.y/te.clientHeight),c.copy(d),i.update()}function U(q){x.set(q.clientX,q.clientY),T.subVectors(x,v),T.y>0?B(A()):T.y<0&&H(A()),v.copy(x),i.update()}function D(q){m.set(q.clientX,q.clientY),g.subVectors(m,p).multiplyScalar(i.panSpeed),I(g.x,g.y),p.copy(m),i.update()}function O(q){q.deltaY<0?H(A()):q.deltaY>0&&B(A()),i.update()}function V(q){let te=!1;switch(q.code){case i.keys.UP:q.ctrlKey||q.metaKey||q.shiftKey?k(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):I(0,i.keyPanSpeed),te=!0;break;case i.keys.BOTTOM:q.ctrlKey||q.metaKey||q.shiftKey?k(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):I(0,-i.keyPanSpeed),te=!0;break;case i.keys.LEFT:q.ctrlKey||q.metaKey||q.shiftKey?M(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):I(i.keyPanSpeed,0),te=!0;break;case i.keys.RIGHT:q.ctrlKey||q.metaKey||q.shiftKey?M(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):I(-i.keyPanSpeed,0),te=!0;break}te&&(q.preventDefault(),i.update())}function Z(){if(w.length===1)c.set(w[0].pageX,w[0].pageY);else{const q=.5*(w[0].pageX+w[1].pageX),te=.5*(w[0].pageY+w[1].pageY);c.set(q,te)}}function ie(){if(w.length===1)p.set(w[0].pageX,w[0].pageY);else{const q=.5*(w[0].pageX+w[1].pageX),te=.5*(w[0].pageY+w[1].pageY);p.set(q,te)}}function re(){const q=w[0].pageX-w[1].pageX,te=w[0].pageY-w[1].pageY,ee=Math.sqrt(q*q+te*te);v.set(0,ee)}function ge(){i.enableZoom&&re(),i.enablePan&&ie()}function ye(){i.enableZoom&&re(),i.enableRotate&&Z()}function he(q){if(w.length==1)d.set(q.pageX,q.pageY);else{const ee=Re(q),ae=.5*(q.pageX+ee.x),Se=.5*(q.pageY+ee.y);d.set(ae,Se)}y.subVectors(d,c).multiplyScalar(i.rotateSpeed);const te=i.domElement;M(2*Math.PI*y.x/te.clientHeight),k(2*Math.PI*y.y/te.clientHeight),c.copy(d)}function pe(q){if(w.length===1)m.set(q.pageX,q.pageY);else{const te=Re(q),ee=.5*(q.pageX+te.x),ae=.5*(q.pageY+te.y);m.set(ee,ae)}g.subVectors(m,p).multiplyScalar(i.panSpeed),I(g.x,g.y),p.copy(m)}function we(q){const te=Re(q),ee=q.pageX-te.x,ae=q.pageY-te.y,Se=Math.sqrt(ee*ee+ae*ae);x.set(0,Se),T.set(0,Math.pow(x.y/v.y,i.zoomSpeed)),B(T.y),v.copy(x)}function oe(q){i.enableZoom&&we(q),i.enablePan&&pe(q)}function fe(q){i.enableZoom&&we(q),i.enableRotate&&he(q)}function Ce(q){i.enabled!==!1&&(w.length===0&&(i.domElement.setPointerCapture(q.pointerId),i.domElement.addEventListener("pointermove",Fe),i.domElement.addEventListener("pointerup",Ae)),Ze(q),q.pointerType==="touch"?de(q):Be(q))}function Fe(q){i.enabled!==!1&&(q.pointerType==="touch"?le(q):st(q))}function Ae(q){Me(q),w.length===0&&(i.domElement.releasePointerCapture(q.pointerId),i.domElement.removeEventListener("pointermove",Fe),i.domElement.removeEventListener("pointerup",Ae)),i.dispatchEvent(Ic),o=n.NONE}function De(q){Me(q)}function Be(q){let te;switch(q.button){case 0:te=i.mouseButtons.LEFT;break;case 1:te=i.mouseButtons.MIDDLE;break;case 2:te=i.mouseButtons.RIGHT;break;default:te=-1}switch(te){case ts.DOLLY:if(i.enableZoom===!1)return;W(q),o=n.DOLLY;break;case ts.ROTATE:if(q.ctrlKey||q.metaKey||q.shiftKey){if(i.enablePan===!1)return;Q(q),o=n.PAN}else{if(i.enableRotate===!1)return;G(q),o=n.ROTATE}break;case ts.PAN:if(q.ctrlKey||q.metaKey||q.shiftKey){if(i.enableRotate===!1)return;G(q),o=n.ROTATE}else{if(i.enablePan===!1)return;Q(q),o=n.PAN}break;default:o=n.NONE}o!==n.NONE&&i.dispatchEvent(ul)}function st(q){switch(o){case n.ROTATE:if(i.enableRotate===!1)return;ne(q);break;case n.DOLLY:if(i.enableZoom===!1)return;U(q);break;case n.PAN:if(i.enablePan===!1)return;D(q);break}}function qe(q){i.enabled===!1||i.enableZoom===!1||o!==n.NONE||(q.preventDefault(),i.dispatchEvent(ul),O(q),i.dispatchEvent(Ic))}function Et(q){i.enabled===!1||i.enablePan===!1||V(q)}function de(q){switch(ze(q),w.length){case 1:switch(i.touches.ONE){case rs.ROTATE:if(i.enableRotate===!1)return;Z(),o=n.TOUCH_ROTATE;break;case rs.PAN:if(i.enablePan===!1)return;ie(),o=n.TOUCH_PAN;break;default:o=n.NONE}break;case 2:switch(i.touches.TWO){case rs.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;ge(),o=n.TOUCH_DOLLY_PAN;break;case rs.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;ye(),o=n.TOUCH_DOLLY_ROTATE;break;default:o=n.NONE}break;default:o=n.NONE}o!==n.NONE&&i.dispatchEvent(ul)}function le(q){switch(ze(q),o){case n.TOUCH_ROTATE:if(i.enableRotate===!1)return;he(q),i.update();break;case n.TOUCH_PAN:if(i.enablePan===!1)return;pe(q),i.update();break;case n.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;oe(q),i.update();break;case n.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;fe(q),i.update();break;default:o=n.NONE}}function Ue(q){i.enabled!==!1&&q.preventDefault()}function Ze(q){w.push(q)}function Me(q){delete b[q.pointerId];for(let te=0;te<w.length;te++)if(w[te].pointerId==q.pointerId){w.splice(te,1);return}}function ze(q){let te=b[q.pointerId];te===void 0&&(te=new Qt,b[q.pointerId]=te),te.set(q.pageX,q.pageY)}function Re(q){const te=q.pointerId===w[0].pointerId?w[1]:w[0];return b[te.pointerId]}i.domElement.addEventListener("contextmenu",Ue),i.domElement.addEventListener("pointerdown",Ce),i.domElement.addEventListener("pointercancel",De),i.domElement.addEventListener("wheel",qe,{passive:!1}),this.update()}}class uv{constructor(){this.experience=new Vn,this.sizes=this.experience.sizes,this.scene=this.experience.scene,this.canvas=this.experience.canvas,this.createPerspectiveCamera(),this.createOrthographicCamera(),this.setOrbitControls()}createPerspectiveCamera(){this.perspectiveCamera=new rn(35,this.sizes.aspect,.1,1e3),this.scene.add(this.perspectiveCamera),this.perspectiveCamera.position.z=4.24}createOrthographicCamera(){this.orthographicCamera=new vo(-this.sizes.aspect*this.sizes.frustrum/2,this.sizes.aspect*this.sizes.frustrum/2,this.sizes.frustrum/2,-this.sizes.frustrum/2,-100,100),this.scene.add(this.orthographicCamera)}setOrbitControls(){this.controls=new lv(this.perspectiveCamera,this.canvas),this.controls.enableDamping=!0,this.controls.enableZoom=!0}resize(){this.perspectiveCamera.aspect=this.sizes.aspect,this.perspectiveCamera.updateProjectionMatrix(),this.orthographicCamera.left=-this.sizes.aspect*this.sizes.frustrum/2,this.orthographicCamera.right=this.sizes.aspect*this.sizes.frustrum/2,this.orthographicCamera.top=this.sizes.frustrum/2,this.orthographicCamera.bottom=-this.sizes.frustrum/2,this.orthographicCamera.updateProjectionMatrix()}update(){this.controls.update()}}class _a{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const cv=new vo(-1,1,1,-1,0,1),Vl=new En;Vl.setAttribute("position",new kn([-1,3,0,-1,-1,0,3,-1,0],3));Vl.setAttribute("uv",new kn([0,2,0,0,2,0],2));class dv{constructor(t){this._mesh=new ln(Vl,t)}dispose(){this._mesh.geometry.dispose()}render(t){t.render(this._mesh,cv)}get material(){return this._mesh.material}set material(t){this._mesh.material=t}}class hv extends _a{constructor(t,r,i,n,o){super(),this.scene=t,this.camera=r,this.overrideMaterial=i,this.clearColor=n,this.clearAlpha=o!==void 0?o:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new ht}render(t,r,i){const n=t.autoClear;t.autoClear=!1;let o,s;this.overrideMaterial!==void 0&&(s=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(t.getClearColor(this._oldClearColor),o=t.getClearAlpha(),t.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:i),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),this.clearColor&&t.setClearColor(this._oldClearColor,o),this.overrideMaterial!==void 0&&(this.scene.overrideMaterial=s),t.autoClear=n}}class fv extends _a{constructor(t,r){super(),this.textureID=r!==void 0?r:"tDiffuse",t instanceof tn?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=yd.clone(t.uniforms),this.material=new tn({defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.fsQuad=new dv(this.material)}render(t,r,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this.fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(r),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this.fsQuad.render(t))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}const pv={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			gl_FragColor = texture2D( tDiffuse, vUv );
			gl_FragColor.a *= opacity;


		}`};class Nc extends _a{constructor(t,r){super(),this.scene=t,this.camera=r,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(t,r,i){const n=t.getContext(),o=t.state;o.buffers.color.setMask(!1),o.buffers.depth.setMask(!1),o.buffers.color.setLocked(!0),o.buffers.depth.setLocked(!0);let s,a;this.inverse?(s=0,a=1):(s=1,a=0),o.buffers.stencil.setTest(!0),o.buffers.stencil.setOp(n.REPLACE,n.REPLACE,n.REPLACE),o.buffers.stencil.setFunc(n.ALWAYS,s,4294967295),o.buffers.stencil.setClear(a),o.buffers.stencil.setLocked(!0),t.setRenderTarget(i),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(r),this.clear&&t.clear(),t.render(this.scene,this.camera),o.buffers.color.setLocked(!1),o.buffers.depth.setLocked(!1),o.buffers.stencil.setLocked(!1),o.buffers.stencil.setFunc(n.EQUAL,1,4294967295),o.buffers.stencil.setOp(n.KEEP,n.KEEP,n.KEEP),o.buffers.stencil.setLocked(!0)}}class mv extends _a{constructor(){super(),this.needsSwap=!1}render(t){t.state.buffers.stencil.setLocked(!1),t.state.buffers.stencil.setTest(!1)}}class gv{constructor(t,r){if(this.renderer=t,r===void 0){const i=t.getSize(new Qt);this._pixelRatio=t.getPixelRatio(),this._width=i.width,this._height=i.height,r=new Si(this._width*this._pixelRatio,this._height*this._pixelRatio),r.texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=r.width,this._height=r.height;this.renderTarget1=r,this.renderTarget2=r.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new fv(pv),this.clock=new kd}swapBuffers(){const t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t}addPass(t){this.passes.push(t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(t,r){this.passes.splice(r,0,t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(t){const r=this.passes.indexOf(t);r!==-1&&this.passes.splice(r,1)}isLastEnabledPass(t){for(let r=t+1;r<this.passes.length;r++)if(this.passes[r].enabled)return!1;return!0}render(t){t===void 0&&(t=this.clock.getDelta());const r=this.renderer.getRenderTarget();let i=!1;for(let n=0,o=this.passes.length;n<o;n++){const s=this.passes[n];if(s.enabled!==!1){if(s.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(n),s.render(this.renderer,this.writeBuffer,this.readBuffer,t,i),s.needsSwap){if(i){const a=this.renderer.getContext(),f=this.renderer.state.buffers.stencil;f.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),f.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}Nc!==void 0&&(s instanceof Nc?i=!0:s instanceof mv&&(i=!1))}}this.renderer.setRenderTarget(r)}reset(t){if(t===void 0){const r=this.renderer.getSize(new Qt);this._pixelRatio=this.renderer.getPixelRatio(),this._width=r.width,this._height=r.height,t=this.renderTarget1.clone(),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(t,r){this._width=t,this._height=r;const i=this._width*this._pixelRatio,n=this._height*this._pixelRatio;this.renderTarget1.setSize(i,n),this.renderTarget2.setSize(i,n);for(let o=0;o<this.passes.length;o++)this.passes[o].setSize(i,n)}setPixelRatio(t){this._pixelRatio=t,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}new Ve,new ht(15658734),new ht(328965),new ht(16777215);const yv={uniforms:{uDirLightPos:{value:new Ve},uDirLightColor:{value:new ht(15658734)},uAmbientLightColor:{value:new ht(328965)},uBaseColor:{value:new ht(15658734)},uLineColor1:{value:new ht(8421504)},uLineColor2:{value:new ht(0)},uLineColor3:{value:new ht(0)},uLineColor4:{value:new ht(0)},uLineColor5:{value:new ht(0)}},vertexShader:`

		varying vec3 vNormal;

		void main() {

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			vNormal = normalize( normalMatrix * normal );

		}`,fragmentShader:`

		uniform vec3 uBaseColor;
		uniform vec3 uLineColor1;
		uniform vec3 uLineColor2;
		uniform vec3 uLineColor3;
		uniform vec3 uLineColor4;
		uniform vec3 uLineColor5;

		uniform vec3 uDirLightPos;
		uniform vec3 uDirLightColor;

		uniform vec3 uAmbientLightColor;

		varying vec3 vNormal;

		void main() {

			float camera = max( dot( normalize( vNormal ), vec3( 0.0, 0.0, 1.0 ) ), 100.000);
			float light = max( dot( normalize( vNormal ), uDirLightPos ),0.0);

	


	
			if ( (length(uAmbientLightColor + uDirLightColor * light)) > 0.0 && (length(uAmbientLightColor + uDirLightColor * light)) < 1.13) { //1.00
				
				gl_FragColor = vec4( uLineColor5, 1.0 ); //1.

			} 

			if ( (length(uAmbientLightColor + uDirLightColor * light)) > 1.13 && (length(uAmbientLightColor + uDirLightColor * light)) < 1.67) { //1.00
				
				gl_FragColor = vec4( uLineColor4, 1.0 ); //1.

			} 


			if ( (length(uAmbientLightColor + uDirLightColor * light)) > 1.67 && (length(uAmbientLightColor + uDirLightColor * light)) < 2.41 ) { //1.00

				gl_FragColor = vec4( uLineColor3, 1.0);

			} 

			if ( (length(uAmbientLightColor + uDirLightColor * light)) > 2.41 && (length(uAmbientLightColor + uDirLightColor * light)) < 2.52) { //0.50

				gl_FragColor = vec4( uLineColor2, 1.0 );

			} 

			if ( (length(uAmbientLightColor + uDirLightColor * light)) > 2.52 && (length(uAmbientLightColor + uDirLightColor * light)) < 2.90 ) { //0.50

				gl_FragColor = vec4( uLineColor1, 1.0 );

			} 

/*			else ( (length(uAmbientLightColor + uDirLightColor * light)) > 10.0 && (length(uAmbientLightColor + uDirLightColor * light)) < 25.0 ) { //0.50

				gl_FragColor = vec4( uBaseColor, 1.0 );

			}*/

		}`};new Ve,new ht(15658734),new ht(328965),new ht(16777215),new ht(0),new ht(0),new ht(0),new ht(0);new Ve,new ht(15658734),new ht(328965),new ht(16777215),new ht(0);const vv={uniforms:{uDirLightPos:{value:new Ve},uDirLightColor:{value:new ht(15658734)},uAmbientLightColor:{value:new ht(328965)},uBaseColor:{value:new ht(15658734)},uLineColor1:{value:new ht(8421504)},uLineColor2:{value:new ht(0)},uLineColor3:{value:new ht(0)},uLineColor4:{value:new ht(0)},uLineColor5:{value:new ht(0)}},vertexShader:`

		varying vec3 vNormal;

		void main() {

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			vNormal = normalize( normalMatrix * normal );

		}`,fragmentShader:`

		uniform vec3 uBaseColor;
		uniform vec3 uLineColor1;
		uniform vec3 uLineColor2;
		uniform vec3 uLineColor3;
		uniform vec3 uLineColor4;
		uniform vec3 uLineColor5;

		uniform vec3 uDirLightPos;
		uniform vec3 uDirLightColor;

		uniform vec3 uAmbientLightColor;

		varying vec3 vNormal;

		void main() {

			float camera = max( dot( normalize( vNormal ), vec3( 0.0, 0.0, 1.0 ) ), 100.000);
			float light = max( dot( normalize( vNormal ), uDirLightPos ),0.0);

	
			if ( (length(uAmbientLightColor + uDirLightColor * light)) < 2.90 ) { //0.50

				gl_FragColor = vec4( uLineColor1, 1.0 );

			} if ( (length(uAmbientLightColor + uDirLightColor * light)) < 2.52) { //0.50

				gl_FragColor = vec4( uLineColor2, 1.0 );

			} if ( (length(uAmbientLightColor + uDirLightColor * light)) < 2.41 ) { //1.00

				gl_FragColor = vec4( uLineColor3, 1.0);

			} if ( (length(uAmbientLightColor + uDirLightColor * light)) < 1.67) { //1.00
				
				gl_FragColor = vec4( uLineColor4, 1.0 ); //1.

			} if ( (length(uAmbientLightColor + uDirLightColor * light)) < 1.13) { //1.00
				
				gl_FragColor = vec4( uLineColor5, 1.0 ); //1.

			} 



		}`},bv={uniforms:{uDirLightPos:{value:new Ve},uDirLightColor:{value:new ht(15658734)},uAmbientLightColor:{value:new ht(328965)},uBaseColor:{value:new ht(15658734)},uLineColor1:{value:new ht(8421504)},uLineColor2:{value:new ht(0)},uLineColor3:{value:new ht(0)},uLineColor4:{value:new ht(0)},uLineColor5:{value:new ht(0)}},vertexShader:`

		varying vec3 vNormal;

		void main() {

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			vNormal = normalize( normalMatrix * normal );

		}`,fragmentShader:`

		uniform vec3 uBaseColor;
		uniform vec3 uLineColor1;
		uniform vec3 uLineColor2;
		uniform vec3 uLineColor3;
		uniform vec3 uLineColor4;
		uniform vec3 uLineColor5;

		uniform vec3 uDirLightPos;
		uniform vec3 uDirLightColor;

		uniform vec3 uAmbientLightColor;

		varying vec3 vNormal;

		void main() {

			float camera = max( dot( normalize( vNormal ), vec3( 0.0, 0.0, 1.0 ) ), 100.000);
			float light = max( dot( normalize( vNormal ), uDirLightPos ),0.0);

	
			if ( (length(uAmbientLightColor + uDirLightColor * light)) < 2.53 ) { //0.50

				gl_FragColor = vec4( uLineColor1, 1.0 );

			} if ( (length(uAmbientLightColor + uDirLightColor * light)) < 2.51) { //0.50

				gl_FragColor = vec4( uLineColor2, 1.0 );

			} if ( (length(uAmbientLightColor + uDirLightColor * light)) < 2.41 ) { //1.00

				gl_FragColor = vec4( uLineColor3, 1.0);

			} if ( (length(uAmbientLightColor + uDirLightColor * light)) < 1.87) { //1.00
				
				gl_FragColor = vec4( uLineColor4, 1.0 ); //1.

			} if ( (length(uAmbientLightColor + uDirLightColor * light)) < 1.37) { //1.00
				
				gl_FragColor = vec4( uLineColor5, 1.0 ); //1.

			} 



		}`},_v={uniforms:{uDirLightPos:{value:new Ve},uDirLightColor:{value:new ht(15658734)},uAmbientLightColor:{value:new ht(328965)},uBaseColor:{value:new ht(15658734)},uLineColor1:{value:new ht(8421504)},uLineColor2:{value:new ht(0)},uLineColor3:{value:new ht(0)},uLineColor4:{value:new ht(0)},uLineColor5:{value:new ht(0)}},vertexShader:`

		varying vec3 vNormal;

		void main() {

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			vNormal = normalize( normalMatrix * normal );

		}`,fragmentShader:`

		uniform vec3 uBaseColor;
		uniform vec3 uLineColor1;
		uniform vec3 uLineColor2;
		uniform vec3 uLineColor3;
		uniform vec3 uLineColor4;
		uniform vec3 uLineColor5;

		uniform vec3 uDirLightPos;
		uniform vec3 uDirLightColor;

		uniform vec3 uAmbientLightColor;

		varying vec3 vNormal;

		void main() {

			float camera = max( dot( normalize( vNormal ), vec3( 0.0, 0.0, 1.0 ) ), 100.000);
			float light = max( dot( normalize( vNormal ), uDirLightPos ),0.0);

	
			 if ( (length(uAmbientLightColor + uDirLightColor * light)) < 2.70) { //0.50

				gl_FragColor = vec4( uLineColor2, 1.0 );

			} if ( (length(uAmbientLightColor + uDirLightColor * light)) < 1.95 ) { //1.00

				gl_FragColor = vec4( uLineColor3, 1.0);
			}



		}`},xv={uniforms:{uDirLightPos:{value:new Ve},uDirLightColor:{value:new ht(15658734)},uAmbientLightColor:{value:new ht(328965)},uBaseColor:{value:new ht(15658734)},uLineColor1:{value:new ht(8421504)},uLineColor2:{value:new ht(0)},uLineColor3:{value:new ht(0)},uLineColor4:{value:new ht(0)},uLineColor5:{value:new ht(0)}},vertexShader:`

		varying vec3 vNormal;

		void main() {

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			vNormal = normalize( normalMatrix * normal );

		}`,fragmentShader:`

		uniform vec3 uBaseColor;
		uniform vec3 uLineColor1;
		uniform vec3 uLineColor2;
		uniform vec3 uLineColor3;
		uniform vec3 uLineColor4;
		uniform vec3 uLineColor5;

		uniform vec3 uDirLightPos;
		uniform vec3 uDirLightColor;

		uniform vec3 uAmbientLightColor;

		varying vec3 vNormal;

		void main() {

			float camera = max( dot( normalize( vNormal ), vec3( 0.0, 0.0, 1.0 ) ), 100.000);
			float light = max( dot( normalize( vNormal ), uDirLightPos ),0.0);

	
			 if ( (length(uAmbientLightColor + uDirLightColor * light)) < 2.70) { //0.50

				gl_FragColor = vec4( uLineColor2, 1.0 );

			} if ( (length(uAmbientLightColor + uDirLightColor * light)) < 1.78 ) { //1.00

				gl_FragColor = vec4( uLineColor3, 1.0);
			}



		}`},wv={uniforms:{uDirLightPos:{value:new Ve},uDirLightColor:{value:new ht(15658734)},uAmbientLightColor:{value:new ht(328965)},uBaseColor:{value:new ht(15658734)},uLineColor1:{value:new ht(8421504)},uLineColor2:{value:new ht(0)},uLineColor3:{value:new ht(0)},uLineColor4:{value:new ht(0)},uLineColor5:{value:new ht(0)}},vertexShader:`

		varying vec3 vNormal;

		void main() {

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			vNormal = normalize( normalMatrix * normal );

		}`,fragmentShader:`

		uniform vec3 uBaseColor;
		uniform vec3 uLineColor1;
		uniform vec3 uLineColor2;
		uniform vec3 uLineColor3;
		uniform vec3 uLineColor4;
		uniform vec3 uLineColor5;

		uniform vec3 uDirLightPos;
		uniform vec3 uDirLightColor;

		uniform vec3 uAmbientLightColor;

		varying vec3 vNormal;

		void main() {

			float camera = max( dot( normalize( vNormal ), vec3( 0.0, 0.0, 1.0 ) ), 100.000);
			float light = max( dot( normalize( vNormal ), uDirLightPos ),0.0);

			 if ( (length(uAmbientLightColor + uDirLightColor * light)) < 3.42) { //0.50

				gl_FragColor = vec4( uLineColor1, 1.0 );

			}  if ( (length(uAmbientLightColor + uDirLightColor * light)) < 2.48) { //0.50

				gl_FragColor = vec4( uLineColor2, 1.0 );

			} if ( (length(uAmbientLightColor + uDirLightColor * light)) < 1.71 ) { //1.00

				gl_FragColor = vec4( uLineColor3, 1.0);
			}



		}`};new Ve,new ht(15658734),new ht(328965),new ht(15658734),new ht(8421504),new ht(0),new ht(0),new ht(0),new ht(0),new ht(8421504),new ht(0),new ht(8421504),new ht(0);class Sv{constructor(){this.experience=new Vn,this.scene=this.experience.scene,this.resources=this.experience.resources,this.couronne=this.resources.items.couronne,this.actualCouronne=this.couronne.scene,this.couronneChildren={},this.nombreDenfant,this.gradientMap,this.sizes=this.experience.sizes,this.setModel()}setModel(){this.scene.add(this.actualCouronne),this.actualCouronne.scale.set(1.3,1.3,1.3),this.actualCouronne.position.x=-.35,this.actualCouronne.position.y=-.3,this.actualCouronne.children.forEach(t=>{this.couronneChildren[t.name.toLowerCase()]=t,this.nombreDenfant=this.couronneChildren.length}),this.setMaterial()}setMaterial(){console.log(this.couronneChildren),this.couronneColor(),this.jColor(),this.starColor(),this.pincesColor(),this.pColor(),this.pouffeColor()}couronneColor(){this.couronne=this.couronneChildren.couronne.children[0].material=new tn(yv),this.couronne.uniforms.uDirLightPos.value=new Ve(0,.13,.97),this.couronne.uniforms.uAmbientLightColor.value=new ht(16744448),this.couronne.uniforms.uLineColor1.value=new ht(15196618),this.couronne.uniforms.uLineColor2.value=new ht(14997935),this.couronne.uniforms.uLineColor3.value=new ht(15387223),this.couronne.uniforms.uLineColor4.value=new ht(13989213),this.couronne.uniforms.uLineColor5.value=new ht(9045253),this.pansements=this.couronneChildren.pansements.children[0].material=new tn(vv),this.pansements.uniforms.uDirLightPos.value=new Ve(0,.13,.97),this.pansements.uniforms.uAmbientLightColor.value=new ht(16744448),this.pansements.uniforms.uLineColor1.value=new ht(15196618),this.pansements.uniforms.uLineColor2.value=new ht(14997935),this.pansements.uniforms.uLineColor3.value=new ht(15387223),this.pansements.uniforms.uLineColor4.value=new ht(13989213),this.pansements.uniforms.uLineColor5.value=new ht(9045253)}jColor(){this.j=this.couronneChildren.lej.children[0].material=new tn(bv),this.j.uniforms.uDirLightPos.value=new Ve(0,.13,.97),this.j.uniforms.uAmbientLightColor.value=new ht(16744448),this.j.uniforms.uLineColor1.value=new ht(15068661),this.j.uniforms.uLineColor2.value=new ht(14018294),this.j.uniforms.uLineColor3.value=new ht(10339308),this.j.uniforms.uLineColor4.value=new ht(3491202),this.j.uniforms.uLineColor5.value=new ht(9045253)}starColor(){this.star=this.couronneChildren.etoiles.material=new tn(_v),this.star.uniforms.uDirLightPos.value=new Ve(0,.13,.97),this.star.uniforms.uAmbientLightColor.value=new ht(16744448),this.star.uniforms.uLineColor2.value=new ht(10040125),this.star.uniforms.uLineColor3.value=new ht(9045253)}pincesColor(){this.pinces=this.couronneChildren.pinces.material=new tn(xv),this.pinces.uniforms.uDirLightPos.value=new Ve(0,.13,.97),this.pinces.uniforms.uAmbientLightColor.value=new ht(16744448),this.pinces.uniforms.uLineColor2.value=new ht(9045253),this.pinces.uniforms.uLineColor3.value=new ht(2493711)}pColor(){this.p=this.couronneChildren.lep.material=new tn(wv),this.p.uniforms.uDirLightPos.value=new Ve(0,.13,.97),this.p.uniforms.uAmbientLightColor.value=new ht(16744448),this.p.uniforms.uLineColor1.value=new ht(10040125),this.p.uniforms.uLineColor2.value=new ht(9045253),this.p.uniforms.uLineColor3.value=new ht(2493711)}resize(){}update(){}}class Mv{constructor(){this.experience=new Vn,this.scene=this.experience.scene,this.resources=this.experience.resources,this.texture=this.resources.items.fondBleu,this.setSunlight(),this.setBackground()}setSunlight(){this.sunLight=new Dd("#ffffff",3),this.sunLight.castShadow=!0,this.sunLight.shadow.camera.far=20,this.sunLight.shadow.mapSize.set(1024,1024),this.sunLight.shadow.normalBias=.05,this.sunLight.position.set(1.5,7,3),this.scene.add(this.sunLight),this.ambientLight=new $0("#ffffff",1),this.scene.add(this.ambientLight)}setBackground(){this.geometry=new ya(12,7.8,36,22),this.material=new xi({map:this.texture}),this.plane=new ln(this.geometry,this.material),this.plane.position.z=-2.75,this.scene.add(this.plane),this.clock=new kd}update(){for(this.t=this.clock.getElapsedTime(),this.positionAttribute=this.plane.geometry.getAttribute("position"),this.vertex=new Ve,this.i=0;this.i<this.positionAttribute.count;this.i++)this.vertex.fromBufferAttribute(this.positionAttribute,this.i),this.wave1=.2*Math.sin(this.vertex.x*1+this.t*.1),this.wave2=.2*Math.sin(this.vertex.x*.5+this.t*.25),this.wave3=.4*Math.sin(this.vertex.y*2+this.t*.5),this.wave4=.1*Math.sin(this.vertex.y*.45+this.t*.1),this.waves=this.wave1+ +this.wave3+this.wave4,this.positionAttribute.setXYZ(this.i,this.vertex.x,this.vertex.y,this.waves);this.plane.geometry.attributes.position.needsUpdate=!0}}class Tv{constructor(){this.experience=new Vn,this.sizes=this.experience.sizes,this.scene=this.experience.scene,this.canvas=this.experience.canvas,this.camera=this.experience.camera,this.renderer=this.experience.renderer,this.resources=this.experience.resources,this.resources.on("ready",()=>{this.couronne=new Sv,this.environnement=new Mv})}resize(){}update(){this.room&&this.room.update(),this.environnement&&this.environnement.update()}}class Ev{constructor(){this.experience=new Vn,this.sizes=this.experience.sizes,this.scene=this.experience.scene,this.canvas=this.experience.canvas,this.camera=this.experience.camera,this.setRenderer()}setRenderer(){this.renderer=new Td({canvas:this.canvas,antialias:!0}),this.renderer.physicallyCorrectLights=!0,this.renderer.toneMappingExposure=1.75,this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=Jc,this.renderer.setSize(this.sizes.width,this.sizes.height),this.renderer.setPixelRatio(this.sizes.pixelRatio),this.composerCreate()}composerCreate(){this.composer=new gv(this.renderer),this.renderPass=new hv(this.scene,this.camera.perspectiveCamera),this.composer.addPass(this.renderPass),this.shaderEffect(),this.outLineEffect()}outLineEffect(){}shaderEffect(){}resize(){this.renderer.setSize(this.sizes.width,this.sizes.height),this.renderer.setPixelRatio(this.sizes.pixelRatio)}update(){this.renderer.render(this.scene,this.camera.perspectiveCamera),typeof this.composer<"u"&&(this.renderer.render(this.scene,this.camera.perspectiveCamera),this.composer.render())}}var ks={},jv={get exports(){return ks},set exports(S){ks=S}},Ms=typeof Reflect=="object"?Reflect:null,Fc=Ms&&typeof Ms.apply=="function"?Ms.apply:function(t,r,i){return Function.prototype.apply.call(t,r,i)},ca;Ms&&typeof Ms.ownKeys=="function"?ca=Ms.ownKeys:Object.getOwnPropertySymbols?ca=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:ca=function(t){return Object.getOwnPropertyNames(t)};function Cv(S){console&&console.warn&&console.warn(S)}var Od=Number.isNaN||function(t){return t!==t};function yr(){yr.init.call(this)}jv.exports=yr;ks.once=Rv;yr.EventEmitter=yr;yr.prototype._events=void 0;yr.prototype._eventsCount=0;yr.prototype._maxListeners=void 0;var Uc=10;function xa(S){if(typeof S!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof S)}Object.defineProperty(yr,"defaultMaxListeners",{enumerable:!0,get:function(){return Uc},set:function(S){if(typeof S!="number"||S<0||Od(S))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+S+".");Uc=S}});yr.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};yr.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Od(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function Id(S){return S._maxListeners===void 0?yr.defaultMaxListeners:S._maxListeners}yr.prototype.getMaxListeners=function(){return Id(this)};yr.prototype.emit=function(t){for(var r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);var n=t==="error",o=this._events;if(o!==void 0)n=n&&o.error===void 0;else if(!n)return!1;if(n){var s;if(r.length>0&&(s=r[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var f=o[t];if(f===void 0)return!1;if(typeof f=="function")Fc(f,this,r);else for(var h=f.length,l=Gd(f,h),i=0;i<h;++i)Fc(l[i],this,r);return!0};function Nd(S,t,r,i){var n,o,s;if(xa(r),o=S._events,o===void 0?(o=S._events=Object.create(null),S._eventsCount=0):(o.newListener!==void 0&&(S.emit("newListener",t,r.listener?r.listener:r),o=S._events),s=o[t]),s===void 0)s=o[t]=r,++S._eventsCount;else if(typeof s=="function"?s=o[t]=i?[r,s]:[s,r]:i?s.unshift(r):s.push(r),n=Id(S),n>0&&s.length>n&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=S,a.type=t,a.count=s.length,Cv(a)}return S}yr.prototype.addListener=function(t,r){return Nd(this,t,r,!1)};yr.prototype.on=yr.prototype.addListener;yr.prototype.prependListener=function(t,r){return Nd(this,t,r,!0)};function Av(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Fd(S,t,r){var i={fired:!1,wrapFn:void 0,target:S,type:t,listener:r},n=Av.bind(i);return n.listener=r,i.wrapFn=n,n}yr.prototype.once=function(t,r){return xa(r),this.on(t,Fd(this,t,r)),this};yr.prototype.prependOnceListener=function(t,r){return xa(r),this.prependListener(t,Fd(this,t,r)),this};yr.prototype.removeListener=function(t,r){var i,n,o,s,a;if(xa(r),n=this._events,n===void 0)return this;if(i=n[t],i===void 0)return this;if(i===r||i.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,i.listener||r));else if(typeof i!="function"){for(o=-1,s=i.length-1;s>=0;s--)if(i[s]===r||i[s].listener===r){a=i[s].listener,o=s;break}if(o<0)return this;o===0?i.shift():Lv(i,o),i.length===1&&(n[t]=i[0]),n.removeListener!==void 0&&this.emit("removeListener",t,a||r)}return this};yr.prototype.off=yr.prototype.removeListener;yr.prototype.removeAllListeners=function(t){var r,i,n;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[t]),this;if(arguments.length===0){var o=Object.keys(i),s;for(n=0;n<o.length;++n)s=o[n],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=i[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(n=r.length-1;n>=0;n--)this.removeListener(t,r[n]);return this};function Ud(S,t,r){var i=S._events;if(i===void 0)return[];var n=i[t];return n===void 0?[]:typeof n=="function"?r?[n.listener||n]:[n]:r?Pv(n):Gd(n,n.length)}yr.prototype.listeners=function(t){return Ud(this,t,!0)};yr.prototype.rawListeners=function(t){return Ud(this,t,!1)};yr.listenerCount=function(S,t){return typeof S.listenerCount=="function"?S.listenerCount(t):Bd.call(S,t)};yr.prototype.listenerCount=Bd;function Bd(S){var t=this._events;if(t!==void 0){var r=t[S];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}yr.prototype.eventNames=function(){return this._eventsCount>0?ca(this._events):[]};function Gd(S,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=S[i];return r}function Lv(S,t){for(;t+1<S.length;t++)S[t]=S[t+1];S.pop()}function Pv(S){for(var t=new Array(S.length),r=0;r<t.length;++r)t[r]=S[r].listener||S[r];return t}function Rv(S,t){return new Promise(function(r,i){function n(s){S.removeListener(t,o),i(s)}function o(){typeof S.removeListener=="function"&&S.removeListener("error",n),r([].slice.call(arguments))}zd(S,t,o,{once:!0}),t!=="error"&&Dv(S,n,{once:!0})})}function Dv(S,t,r){typeof S.on=="function"&&zd(S,"error",t,r)}function zd(S,t,r,i){if(typeof S.on=="function")i.once?S.once(t,r):S.on(t,r);else if(typeof S.addEventListener=="function")S.addEventListener(t,function n(o){i.once&&S.removeEventListener(t,n),r(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof S)}class kv extends ks.EventEmitter{constructor(){super(),this.width=window.innerWidth/6,this.height="400",this.aspect=this.width/this.height,this.pixelRatio=Math.min(window.devicePixelRatio,2),window.addEventListener("resize",()=>{this.width=window.innerWidth/6,this.height="400",this.aspect=this.width/this.height,this.pixelRatio=Math.min(window.devicePixelRatio,2),this.emit("resize")})}}class Ov extends ks.EventEmitter{constructor(){super(),this.start=Date.now(),this.current=this.start,this.elapsed=0,this.delta=16,this.update()}update(){const t=Date.now();this.delta=t-this.current,this.current=t,this.elapsed=this.current-this.start,this.emit("update"),window.requestAnimationFrame(()=>this.update())}}const cl=new WeakMap;class Iv extends Bs{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,r,i,n){const o=new fa(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,s=>{this.decodeDracoFile(s,r).catch(n)},i,n)}decodeDracoFile(t,r,i,n){const o={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:n||this.defaultAttributeTypes,useUniqueIDs:!!i};return this.decodeGeometry(t,o).then(r)}decodeGeometry(t,r){const i=JSON.stringify(r);if(cl.has(t)){const f=cl.get(t);if(f.key===i)return f.promise;if(t.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let n;const o=this.workerNextTaskID++,s=t.byteLength,a=this._getWorker(o,s).then(f=>(n=f,new Promise((h,l)=>{n._callbacks[o]={resolve:h,reject:l},n.postMessage({type:"decode",id:o,taskConfig:r,buffer:t},[t])}))).then(f=>this._createGeometry(f.geometry));return a.catch(()=>!0).then(()=>{n&&o&&this._releaseTask(n,o)}),cl.set(t,{key:i,promise:a}),a}_createGeometry(t){const r=new En;t.index&&r.setIndex(new Yr(t.index.array,1));for(let i=0;i<t.attributes.length;i++){const n=t.attributes[i],o=n.name,s=n.array,a=n.itemSize;r.setAttribute(o,new Yr(s,a))}return r}_loadLibrary(t,r){const i=new fa(this.manager);return i.setPath(this.decoderPath),i.setResponseType(r),i.setWithCredentials(this.withCredentials),new Promise((n,o)=>{i.load(t,n,void 0,o)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const t=typeof WebAssembly!="object"||this.decoderConfig.type==="js",r=[];return t?r.push(this._loadLibrary("draco_decoder.js","text")):(r.push(this._loadLibrary("draco_wasm_wrapper.js","text")),r.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(r).then(i=>{const n=i[0];t||(this.decoderConfig.wasmBinary=i[1]);const o=Nv.toString(),s=["/* draco decoder */",n,"","/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([s]))}),this.decoderPending}_getWorker(t,r){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const n=new Worker(this.workerSourceURL);n._callbacks={},n._taskCosts={},n._taskLoad=0,n.postMessage({type:"init",decoderConfig:this.decoderConfig}),n.onmessage=function(o){const s=o.data;switch(s.type){case"decode":n._callbacks[s.id].resolve(s);break;case"error":n._callbacks[s.id].reject(s);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+s.type+'"')}},this.workerPool.push(n)}else this.workerPool.sort(function(n,o){return n._taskLoad>o._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[t]=r,i._taskLoad+=r,i})}_releaseTask(t,r){t._taskLoad-=t._taskCosts[r],delete t._callbacks[r],delete t._taskCosts[r]}debug(){console.log("Task load: ",this.workerPool.map(t=>t._taskLoad))}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function Nv(){let S,t;onmessage=function(s){const a=s.data;switch(a.type){case"init":S=a.decoderConfig,t=new Promise(function(l){S.onModuleLoaded=function(u){l({draco:u})},DracoDecoderModule(S)});break;case"decode":const f=a.buffer,h=a.taskConfig;t.then(l=>{const u=l.draco,c=new u.Decoder,d=new u.DecoderBuffer;d.Init(new Int8Array(f),f.byteLength);try{const y=r(u,c,d,h),p=y.attributes.map(m=>m.array.buffer);y.index&&p.push(y.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:y},p)}catch(y){console.error(y),self.postMessage({type:"error",id:a.id,error:y.message})}finally{u.destroy(d),u.destroy(c)}});break}};function r(s,a,f,h){const l=h.attributeIDs,u=h.attributeTypes;let c,d;const y=a.GetEncodedGeometryType(f);if(y===s.TRIANGULAR_MESH)c=new s.Mesh,d=a.DecodeBufferToMesh(f,c);else if(y===s.POINT_CLOUD)c=new s.PointCloud,d=a.DecodeBufferToPointCloud(f,c);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!d.ok()||c.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+d.error_msg());const p={index:null,attributes:[]};for(const m in l){const g=self[u[m]];let v,x;if(h.useUniqueIDs)x=l[m],v=a.GetAttributeByUniqueId(c,x);else{if(x=a.GetAttributeId(c,s[l[m]]),x===-1)continue;v=a.GetAttribute(c,x)}p.attributes.push(n(s,a,c,m,g,v))}return y===s.TRIANGULAR_MESH&&(p.index=i(s,a,c)),s.destroy(c),p}function i(s,a,f){const l=f.num_faces()*3,u=l*4,c=s._malloc(u);a.GetTrianglesUInt32Array(f,u,c);const d=new Uint32Array(s.HEAPF32.buffer,c,l).slice();return s._free(c),{array:d,itemSize:1}}function n(s,a,f,h,l,u){const c=u.num_components(),y=f.num_points()*c,p=y*l.BYTES_PER_ELEMENT,m=o(s,l),g=s._malloc(p);a.GetAttributeDataArrayForAllPoints(f,u,m,p,g);const v=new l(s.HEAPF32.buffer,g,y).slice();return s._free(g),{name:h,array:v,itemSize:c}}function o(s,a){switch(a){case Float32Array:return s.DT_FLOAT32;case Int8Array:return s.DT_INT8;case Int16Array:return s.DT_INT16;case Int32Array:return s.DT_INT32;case Uint8Array:return s.DT_UINT8;case Uint16Array:return s.DT_UINT16;case Uint32Array:return s.DT_UINT32}}}function Bc(S,t){if(t===of)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),S;if(t===yl||t===sd){let r=S.getIndex();if(r===null){const s=[],a=S.getAttribute("position");if(a!==void 0){for(let f=0;f<a.count;f++)s.push(f);S.setIndex(s),r=S.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),S}const i=r.count-2,n=[];if(t===yl)for(let s=1;s<=i;s++)n.push(r.getX(0)),n.push(r.getX(s)),n.push(r.getX(s+1));else for(let s=0;s<i;s++)s%2===0?(n.push(r.getX(s)),n.push(r.getX(s+1)),n.push(r.getX(s+2))):(n.push(r.getX(s+2)),n.push(r.getX(s+1)),n.push(r.getX(s)));n.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=S.clone();return o.setIndex(n),o.clearGroups(),o}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),S}class Fv extends Bs{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(r){return new Vv(r)}),this.register(function(r){return new Kv(r)}),this.register(function(r){return new $v(r)}),this.register(function(r){return new Wv(r)}),this.register(function(r){return new qv(r)}),this.register(function(r){return new Xv(r)}),this.register(function(r){return new Yv(r)}),this.register(function(r){return new zv(r)}),this.register(function(r){return new Zv(r)}),this.register(function(r){return new Hv(r)}),this.register(function(r){return new Bv(r)}),this.register(function(r){return new Jv(r)}),this.register(function(r){return new Qv(r)})}load(t,r,i,n){const o=this;let s;this.resourcePath!==""?s=this.resourcePath:this.path!==""?s=this.path:s=Sl.extractUrlBase(t),this.manager.itemStart(t);const a=function(h){n?n(h):console.error(h),o.manager.itemError(t),o.manager.itemEnd(t)},f=new fa(this.manager);f.setPath(this.path),f.setResponseType("arraybuffer"),f.setRequestHeader(this.requestHeader),f.setWithCredentials(this.withCredentials),f.load(t,function(h){try{o.parse(h,s,function(l){r(l),o.manager.itemEnd(t)},a)}catch(l){a(l)}},i,a)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,r,i,n){let o;const s={},a={},f=new TextDecoder;if(typeof t=="string")o=JSON.parse(t);else if(t instanceof ArrayBuffer)if(f.decode(new Uint8Array(t,0,4))===Vd){try{s[dr.KHR_BINARY_GLTF]=new eb(t)}catch(u){n&&n(u);return}o=JSON.parse(s[dr.KHR_BINARY_GLTF].content)}else o=JSON.parse(f.decode(t));else o=t;if(o.asset===void 0||o.asset.version[0]<2){n&&n(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const h=new fb(o,{path:r||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});h.fileLoader.setRequestHeader(this.requestHeader);for(let l=0;l<this.pluginCallbacks.length;l++){const u=this.pluginCallbacks[l](h);a[u.name]=u,s[u.name]=!0}if(o.extensionsUsed)for(let l=0;l<o.extensionsUsed.length;++l){const u=o.extensionsUsed[l],c=o.extensionsRequired||[];switch(u){case dr.KHR_MATERIALS_UNLIT:s[u]=new Gv;break;case dr.KHR_DRACO_MESH_COMPRESSION:s[u]=new tb(o,this.dracoLoader);break;case dr.KHR_TEXTURE_TRANSFORM:s[u]=new rb;break;case dr.KHR_MESH_QUANTIZATION:s[u]=new nb;break;default:c.indexOf(u)>=0&&a[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}h.setExtensions(s),h.setPlugins(a),h.parse(i,n)}parseAsync(t,r){const i=this;return new Promise(function(n,o){i.parse(t,r,n,o)})}}function Uv(){let S={};return{get:function(t){return S[t]},add:function(t,r){S[t]=r},remove:function(t){delete S[t]},removeAll:function(){S={}}}}const dr={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Bv{constructor(t){this.parser=t,this.name=dr.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,r=this.parser.json.nodes||[];for(let i=0,n=r.length;i<n;i++){const o=r[i];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(t){const r=this.parser,i="light:"+t;let n=r.cache.get(i);if(n)return n;const o=r.json,f=((o.extensions&&o.extensions[this.name]||{}).lights||[])[t];let h;const l=new ht(16777215);f.color!==void 0&&l.fromArray(f.color);const u=f.range!==void 0?f.range:0;switch(f.type){case"directional":h=new Dd(l),h.target.position.set(0,0,-1),h.add(h.target);break;case"point":h=new Z0(l),h.distance=u;break;case"spot":h=new X0(l),h.distance=u,f.spot=f.spot||{},f.spot.innerConeAngle=f.spot.innerConeAngle!==void 0?f.spot.innerConeAngle:0,f.spot.outerConeAngle=f.spot.outerConeAngle!==void 0?f.spot.outerConeAngle:Math.PI/4,h.angle=f.spot.outerConeAngle,h.penumbra=1-f.spot.innerConeAngle/f.spot.outerConeAngle,h.target.position.set(0,0,-1),h.add(h.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+f.type)}return h.position.set(0,0,0),h.decay=2,bi(h,f),f.intensity!==void 0&&(h.intensity=f.intensity),h.name=r.createUniqueName(f.name||"light_"+t),n=Promise.resolve(h),r.cache.add(i,n),n}getDependency(t,r){if(t==="light")return this._loadLight(r)}createNodeAttachment(t){const r=this,i=this.parser,o=i.json.nodes[t],a=(o.extensions&&o.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(f){return i._getNodeRef(r.cache,a,f)})}}class Gv{constructor(){this.name=dr.KHR_MATERIALS_UNLIT}getMaterialType(){return xi}extendParams(t,r,i){const n=[];t.color=new ht(1,1,1),t.opacity=1;const o=r.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){const s=o.baseColorFactor;t.color.fromArray(s),t.opacity=s[3]}o.baseColorTexture!==void 0&&n.push(i.assignTexture(t,"map",o.baseColorTexture,pr))}return Promise.all(n)}}class zv{constructor(t){this.parser=t,this.name=dr.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,r){const n=this.parser.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const o=n.extensions[this.name].emissiveStrength;return o!==void 0&&(r.emissiveIntensity=o),Promise.resolve()}}class Vv{constructor(t){this.parser=t,this.name=dr.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Yi}extendMaterialParams(t,r){const i=this.parser,n=i.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const o=[],s=n.extensions[this.name];if(s.clearcoatFactor!==void 0&&(r.clearcoat=s.clearcoatFactor),s.clearcoatTexture!==void 0&&o.push(i.assignTexture(r,"clearcoatMap",s.clearcoatTexture)),s.clearcoatRoughnessFactor!==void 0&&(r.clearcoatRoughness=s.clearcoatRoughnessFactor),s.clearcoatRoughnessTexture!==void 0&&o.push(i.assignTexture(r,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),s.clearcoatNormalTexture!==void 0&&(o.push(i.assignTexture(r,"clearcoatNormalMap",s.clearcoatNormalTexture)),s.clearcoatNormalTexture.scale!==void 0)){const a=s.clearcoatNormalTexture.scale;r.clearcoatNormalScale=new Qt(a,a)}return Promise.all(o)}}class Hv{constructor(t){this.parser=t,this.name=dr.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Yi}extendMaterialParams(t,r){const i=this.parser,n=i.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const o=[],s=n.extensions[this.name];return s.iridescenceFactor!==void 0&&(r.iridescence=s.iridescenceFactor),s.iridescenceTexture!==void 0&&o.push(i.assignTexture(r,"iridescenceMap",s.iridescenceTexture)),s.iridescenceIor!==void 0&&(r.iridescenceIOR=s.iridescenceIor),r.iridescenceThicknessRange===void 0&&(r.iridescenceThicknessRange=[100,400]),s.iridescenceThicknessMinimum!==void 0&&(r.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),s.iridescenceThicknessMaximum!==void 0&&(r.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),s.iridescenceThicknessTexture!==void 0&&o.push(i.assignTexture(r,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(o)}}class Wv{constructor(t){this.parser=t,this.name=dr.KHR_MATERIALS_SHEEN}getMaterialType(t){const i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Yi}extendMaterialParams(t,r){const i=this.parser,n=i.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const o=[];r.sheenColor=new ht(0,0,0),r.sheenRoughness=0,r.sheen=1;const s=n.extensions[this.name];return s.sheenColorFactor!==void 0&&r.sheenColor.fromArray(s.sheenColorFactor),s.sheenRoughnessFactor!==void 0&&(r.sheenRoughness=s.sheenRoughnessFactor),s.sheenColorTexture!==void 0&&o.push(i.assignTexture(r,"sheenColorMap",s.sheenColorTexture,pr)),s.sheenRoughnessTexture!==void 0&&o.push(i.assignTexture(r,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(o)}}class qv{constructor(t){this.parser=t,this.name=dr.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Yi}extendMaterialParams(t,r){const i=this.parser,n=i.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const o=[],s=n.extensions[this.name];return s.transmissionFactor!==void 0&&(r.transmission=s.transmissionFactor),s.transmissionTexture!==void 0&&o.push(i.assignTexture(r,"transmissionMap",s.transmissionTexture)),Promise.all(o)}}class Xv{constructor(t){this.parser=t,this.name=dr.KHR_MATERIALS_VOLUME}getMaterialType(t){const i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Yi}extendMaterialParams(t,r){const i=this.parser,n=i.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const o=[],s=n.extensions[this.name];r.thickness=s.thicknessFactor!==void 0?s.thicknessFactor:0,s.thicknessTexture!==void 0&&o.push(i.assignTexture(r,"thicknessMap",s.thicknessTexture)),r.attenuationDistance=s.attenuationDistance||1/0;const a=s.attenuationColor||[1,1,1];return r.attenuationColor=new ht(a[0],a[1],a[2]),Promise.all(o)}}class Yv{constructor(t){this.parser=t,this.name=dr.KHR_MATERIALS_IOR}getMaterialType(t){const i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Yi}extendMaterialParams(t,r){const n=this.parser.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const o=n.extensions[this.name];return r.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}}class Zv{constructor(t){this.parser=t,this.name=dr.KHR_MATERIALS_SPECULAR}getMaterialType(t){const i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Yi}extendMaterialParams(t,r){const i=this.parser,n=i.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const o=[],s=n.extensions[this.name];r.specularIntensity=s.specularFactor!==void 0?s.specularFactor:1,s.specularTexture!==void 0&&o.push(i.assignTexture(r,"specularIntensityMap",s.specularTexture));const a=s.specularColorFactor||[1,1,1];return r.specularColor=new ht(a[0],a[1],a[2]),s.specularColorTexture!==void 0&&o.push(i.assignTexture(r,"specularColorMap",s.specularColorTexture,pr)),Promise.all(o)}}class Kv{constructor(t){this.parser=t,this.name=dr.KHR_TEXTURE_BASISU}loadTexture(t){const r=this.parser,i=r.json,n=i.textures[t];if(!n.extensions||!n.extensions[this.name])return null;const o=n.extensions[this.name],s=r.options.ktx2Loader;if(!s){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return r.loadTextureImage(t,o.source,s)}}class $v{constructor(t){this.parser=t,this.name=dr.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const r=this.name,i=this.parser,n=i.json,o=n.textures[t];if(!o.extensions||!o.extensions[r])return null;const s=o.extensions[r],a=n.images[s.source];let f=i.textureLoader;if(a.uri){const h=i.options.manager.getHandler(a.uri);h!==null&&(f=h)}return this.detectSupport().then(function(h){if(h)return i.loadTextureImage(t,s.source,f);if(n.extensionsRequired&&n.extensionsRequired.indexOf(r)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const r=new Image;r.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",r.onload=r.onerror=function(){t(r.height===1)}})),this.isSupported}}class Jv{constructor(t){this.name=dr.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const r=this.parser.json,i=r.bufferViews[t];if(i.extensions&&i.extensions[this.name]){const n=i.extensions[this.name],o=this.parser.getDependency("buffer",n.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(a){const f=n.byteOffset||0,h=n.byteLength||0,l=n.count,u=n.byteStride,c=new Uint8Array(a,f,h);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(l,u,c,n.mode,n.filter).then(function(d){return d.buffer}):s.ready.then(function(){const d=new ArrayBuffer(l*u);return s.decodeGltfBuffer(new Uint8Array(d),l,u,c,n.mode,n.filter),d})})}else return null}}class Qv{constructor(t){this.name=dr.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const r=this.parser.json,i=r.nodes[t];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const n=r.meshes[i.mesh];for(const h of n.primitives)if(h.mode!==Sn.TRIANGLES&&h.mode!==Sn.TRIANGLE_STRIP&&h.mode!==Sn.TRIANGLE_FAN&&h.mode!==void 0)return null;const s=i.extensions[this.name].attributes,a=[],f={};for(const h in s)a.push(this.parser.getDependency("accessor",s[h]).then(l=>(f[h]=l,f[h])));return a.length<1?null:(a.push(this.parser.createNodeMesh(t)),Promise.all(a).then(h=>{const l=h.pop(),u=l.isGroup?l.children:[l],c=h[0].count,d=[];for(const y of u){const p=new or,m=new Ve,g=new Hn,v=new Ve(1,1,1),x=new L0(y.geometry,y.material,c);for(let T=0;T<c;T++)f.TRANSLATION&&m.fromBufferAttribute(f.TRANSLATION,T),f.ROTATION&&g.fromBufferAttribute(f.ROTATION,T),f.SCALE&&v.fromBufferAttribute(f.SCALE,T),x.setMatrixAt(T,p.compose(m,g,v));for(const T in f)T!=="TRANSLATION"&&T!=="ROTATION"&&T!=="SCALE"&&y.geometry.setAttribute(T,f[T]);Cr.prototype.copy.call(x,y),x.frustumCulled=!1,this.parser.assignFinalMaterial(x),d.push(x)}return l.isGroup?(l.clear(),l.add(...d),l):d[0]}))}}const Vd="glTF",ro=12,Gc={JSON:1313821514,BIN:5130562};class eb{constructor(t){this.name=dr.KHR_BINARY_GLTF,this.content=null,this.body=null;const r=new DataView(t,0,ro),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(t.slice(0,4))),version:r.getUint32(4,!0),length:r.getUint32(8,!0)},this.header.magic!==Vd)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-ro,o=new DataView(t,ro);let s=0;for(;s<n;){const a=o.getUint32(s,!0);s+=4;const f=o.getUint32(s,!0);if(s+=4,f===Gc.JSON){const h=new Uint8Array(t,ro+s,a);this.content=i.decode(h)}else if(f===Gc.BIN){const h=ro+s;this.body=t.slice(h,h+a)}s+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class tb{constructor(t,r){if(!r)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=dr.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=r,this.dracoLoader.preload()}decodePrimitive(t,r){const i=this.json,n=this.dracoLoader,o=t.extensions[this.name].bufferView,s=t.extensions[this.name].attributes,a={},f={},h={};for(const l in s){const u=Ml[l]||l.toLowerCase();a[u]=s[l]}for(const l in t.attributes){const u=Ml[l]||l.toLowerCase();if(s[l]!==void 0){const c=i.accessors[t.attributes[l]],d=Ts[c.componentType];h[u]=d.name,f[u]=c.normalized===!0}}return r.getDependency("bufferView",o).then(function(l){return new Promise(function(u){n.decodeDracoFile(l,function(c){for(const d in c.attributes){const y=c.attributes[d],p=f[d];p!==void 0&&(y.normalized=p)}u(c)},a,h)})})}}class rb{constructor(){this.name=dr.KHR_TEXTURE_TRANSFORM}extendTexture(t,r){return r.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),r.offset===void 0&&r.rotation===void 0&&r.scale===void 0||(t=t.clone(),r.offset!==void 0&&t.offset.fromArray(r.offset),r.rotation!==void 0&&(t.rotation=r.rotation),r.scale!==void 0&&t.repeat.fromArray(r.scale),t.needsUpdate=!0),t}}class nb{constructor(){this.name=dr.KHR_MESH_QUANTIZATION}}class Hd extends bo{constructor(t,r,i,n){super(t,r,i,n)}copySampleValue_(t){const r=this.resultBuffer,i=this.sampleValues,n=this.valueSize,o=t*n*3+n;for(let s=0;s!==n;s++)r[s]=i[o+s];return r}interpolate_(t,r,i,n){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,f=a*2,h=a*3,l=n-r,u=(i-r)/l,c=u*u,d=c*u,y=t*h,p=y-h,m=-2*d+3*c,g=d-c,v=1-m,x=g-c+u;for(let T=0;T!==a;T++){const w=s[p+T+a],b=s[p+T+f]*l,C=s[y+T+a],A=s[y+T]*l;o[T]=v*w+x*b+m*C+g*A}return o}}const ib=new Hn;class sb extends Hd{interpolate_(t,r,i,n){const o=super.interpolate_(t,r,i,n);return ib.fromArray(o).normalize().toArray(o),o}}const Sn={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Ts={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},zc={9728:Nr,9729:an,9984:gl,9985:nd,9986:aa,9987:zi},Vc={33071:Mn,33648:da,10497:As},dl={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Ml={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},vi={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},ob={CUBICSPLINE:void 0,LINEAR:Ps,STEP:co},hl={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function ab(S){return S.DefaultMaterial===void 0&&(S.DefaultMaterial=new Ul({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:oi})),S.DefaultMaterial}function no(S,t,r){for(const i in r.extensions)S[i]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=r.extensions[i])}function bi(S,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(S.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function lb(S,t,r){let i=!1,n=!1,o=!1;for(let h=0,l=t.length;h<l;h++){const u=t[h];if(u.POSITION!==void 0&&(i=!0),u.NORMAL!==void 0&&(n=!0),u.COLOR_0!==void 0&&(o=!0),i&&n&&o)break}if(!i&&!n&&!o)return Promise.resolve(S);const s=[],a=[],f=[];for(let h=0,l=t.length;h<l;h++){const u=t[h];if(i){const c=u.POSITION!==void 0?r.getDependency("accessor",u.POSITION):S.attributes.position;s.push(c)}if(n){const c=u.NORMAL!==void 0?r.getDependency("accessor",u.NORMAL):S.attributes.normal;a.push(c)}if(o){const c=u.COLOR_0!==void 0?r.getDependency("accessor",u.COLOR_0):S.attributes.color;f.push(c)}}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(f)]).then(function(h){const l=h[0],u=h[1],c=h[2];return i&&(S.morphAttributes.position=l),n&&(S.morphAttributes.normal=u),o&&(S.morphAttributes.color=c),S.morphTargetsRelative=!0,S})}function ub(S,t){if(S.updateMorphTargets(),t.weights!==void 0)for(let r=0,i=t.weights.length;r<i;r++)S.morphTargetInfluences[r]=t.weights[r];if(t.extras&&Array.isArray(t.extras.targetNames)){const r=t.extras.targetNames;if(S.morphTargetInfluences.length===r.length){S.morphTargetDictionary={};for(let i=0,n=r.length;i<n;i++)S.morphTargetDictionary[r[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function cb(S){const t=S.extensions&&S.extensions[dr.KHR_DRACO_MESH_COMPRESSION];let r;return t?r="draco:"+t.bufferView+":"+t.indices+":"+Hc(t.attributes):r=S.indices+":"+Hc(S.attributes)+":"+S.mode,r}function Hc(S){let t="";const r=Object.keys(S).sort();for(let i=0,n=r.length;i<n;i++)t+=r[i]+":"+S[r[i]]+";";return t}function Tl(S){switch(S){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function db(S){return S.search(/\.jpe?g($|\?)/i)>0||S.search(/^data\:image\/jpeg/)===0?"image/jpeg":S.search(/\.webp($|\?)/i)>0||S.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const hb=new or;class fb{constructor(t={},r={}){this.json=t,this.extensions={},this.plugins={},this.options=r,this.cache=new Uv,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,n=!1,o=-1;typeof navigator<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,n=navigator.userAgent.indexOf("Firefox")>-1,o=n?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||n&&o<98?this.textureLoader=new Rd(this.options.manager):this.textureLoader=new J0(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new fa(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,r){const i=this,n=this.json,o=this.extensions;this.cache.removeAll(),this._invokeAll(function(s){return s._markDefs&&s._markDefs()}),Promise.all(this._invokeAll(function(s){return s.beforeRoot&&s.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(s){const a={scene:s[0][n.scene||0],scenes:s[0],animations:s[1],cameras:s[2],asset:n.asset,parser:i,userData:{}};no(o,a,n),bi(a,n),Promise.all(i._invokeAll(function(f){return f.afterRoot&&f.afterRoot(a)})).then(function(){t(a)})}).catch(r)}_markDefs(){const t=this.json.nodes||[],r=this.json.skins||[],i=this.json.meshes||[];for(let n=0,o=r.length;n<o;n++){const s=r[n].joints;for(let a=0,f=s.length;a<f;a++)t[s[a]].isBone=!0}for(let n=0,o=t.length;n<o;n++){const s=t[n];s.mesh!==void 0&&(this._addNodeRef(this.meshCache,s.mesh),s.skin!==void 0&&(i[s.mesh].isSkinnedMesh=!0)),s.camera!==void 0&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(t,r){r!==void 0&&(t.refs[r]===void 0&&(t.refs[r]=t.uses[r]=0),t.refs[r]++)}_getNodeRef(t,r,i){if(t.refs[r]<=1)return i;const n=i.clone(),o=(s,a)=>{const f=this.associations.get(s);f!=null&&this.associations.set(a,f);for(const[h,l]of s.children.entries())o(l,a.children[h])};return o(i,n),n.name+="_instance_"+t.uses[r]++,n}_invokeOne(t){const r=Object.values(this.plugins);r.push(this);for(let i=0;i<r.length;i++){const n=t(r[i]);if(n)return n}return null}_invokeAll(t){const r=Object.values(this.plugins);r.unshift(this);const i=[];for(let n=0;n<r.length;n++){const o=t(r[n]);o&&i.push(o)}return i}getDependency(t,r){const i=t+":"+r;let n=this.cache.get(i);if(!n){switch(t){case"scene":n=this.loadScene(r);break;case"node":n=this._invokeOne(function(o){return o.loadNode&&o.loadNode(r)});break;case"mesh":n=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(r)});break;case"accessor":n=this.loadAccessor(r);break;case"bufferView":n=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(r)});break;case"buffer":n=this.loadBuffer(r);break;case"material":n=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(r)});break;case"texture":n=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(r)});break;case"skin":n=this.loadSkin(r);break;case"animation":n=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(r)});break;case"camera":n=this.loadCamera(r);break;default:if(n=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(t,r)}),!n)throw new Error("Unknown type: "+t);break}this.cache.add(i,n)}return n}getDependencies(t){let r=this.cache.get(t);if(!r){const i=this,n=this.json[t+(t==="mesh"?"es":"s")]||[];r=Promise.all(n.map(function(o,s){return i.getDependency(t,s)})),this.cache.add(t,r)}return r}loadBuffer(t){const r=this.json.buffers[t],i=this.fileLoader;if(r.type&&r.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+r.type+" buffer type is not supported.");if(r.uri===void 0&&t===0)return Promise.resolve(this.extensions[dr.KHR_BINARY_GLTF].body);const n=this.options;return new Promise(function(o,s){i.load(Sl.resolveURL(r.uri,n.path),o,void 0,function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+r.uri+'".'))})})}loadBufferView(t){const r=this.json.bufferViews[t];return this.getDependency("buffer",r.buffer).then(function(i){const n=r.byteLength||0,o=r.byteOffset||0;return i.slice(o,o+n)})}loadAccessor(t){const r=this,i=this.json,n=this.json.accessors[t];if(n.bufferView===void 0&&n.sparse===void 0){const s=dl[n.type],a=Ts[n.componentType],f=n.normalized===!0,h=new a(n.count*s);return Promise.resolve(new Yr(h,s,f))}const o=[];return n.bufferView!==void 0?o.push(this.getDependency("bufferView",n.bufferView)):o.push(null),n.sparse!==void 0&&(o.push(this.getDependency("bufferView",n.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",n.sparse.values.bufferView))),Promise.all(o).then(function(s){const a=s[0],f=dl[n.type],h=Ts[n.componentType],l=h.BYTES_PER_ELEMENT,u=l*f,c=n.byteOffset||0,d=n.bufferView!==void 0?i.bufferViews[n.bufferView].byteStride:void 0,y=n.normalized===!0;let p,m;if(d&&d!==u){const g=Math.floor(c/d),v="InterleavedBuffer:"+n.bufferView+":"+n.componentType+":"+g+":"+n.count;let x=r.cache.get(v);x||(p=new h(a,g*d,n.count*d/l),x=new M0(p,d/l),r.cache.add(v,x)),m=new Il(x,f,c%d/l,y)}else a===null?p=new h(n.count*f):p=new h(a,c,n.count*f),m=new Yr(p,f,y);if(n.sparse!==void 0){const g=dl.SCALAR,v=Ts[n.sparse.indices.componentType],x=n.sparse.indices.byteOffset||0,T=n.sparse.values.byteOffset||0,w=new v(s[1],x,n.sparse.count*g),b=new h(s[2],T,n.sparse.count*f);a!==null&&(m=new Yr(m.array.slice(),m.itemSize,m.normalized));for(let C=0,A=w.length;C<A;C++){const M=w[C];if(m.setX(M,b[C*f]),f>=2&&m.setY(M,b[C*f+1]),f>=3&&m.setZ(M,b[C*f+2]),f>=4&&m.setW(M,b[C*f+3]),f>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return m})}loadTexture(t){const r=this.json,i=this.options,o=r.textures[t].source,s=r.images[o];let a=this.textureLoader;if(s.uri){const f=i.manager.getHandler(s.uri);f!==null&&(a=f)}return this.loadTextureImage(t,o,a)}loadTextureImage(t,r,i){const n=this,o=this.json,s=o.textures[t],a=o.images[r],f=(a.uri||a.bufferView)+":"+s.sampler;if(this.textureCache[f])return this.textureCache[f];const h=this.loadImageSource(r,i).then(function(l){l.flipY=!1,l.name=s.name||a.name||"";const c=(o.samplers||{})[s.sampler]||{};return l.magFilter=zc[c.magFilter]||an,l.minFilter=zc[c.minFilter]||zi,l.wrapS=Vc[c.wrapS]||As,l.wrapT=Vc[c.wrapT]||As,n.associations.set(l,{textures:t}),l}).catch(function(){return null});return this.textureCache[f]=h,h}loadImageSource(t,r){const i=this,n=this.json,o=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(u=>u.clone());const s=n.images[t],a=self.URL||self.webkitURL;let f=s.uri||"",h=!1;if(s.bufferView!==void 0)f=i.getDependency("bufferView",s.bufferView).then(function(u){h=!0;const c=new Blob([u],{type:s.mimeType});return f=a.createObjectURL(c),f});else if(s.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const l=Promise.resolve(f).then(function(u){return new Promise(function(c,d){let y=c;r.isImageBitmapLoader===!0&&(y=function(p){const m=new Xr(p);m.needsUpdate=!0,c(m)}),r.load(Sl.resolveURL(u,o.path),y,void 0,d)})}).then(function(u){return h===!0&&a.revokeObjectURL(f),u.userData.mimeType=s.mimeType||db(s.uri),u}).catch(function(u){throw console.error("THREE.GLTFLoader: Couldn't load texture",f),u});return this.sourceCache[t]=l,l}assignTexture(t,r,i,n){const o=this;return this.getDependency("texture",i.index).then(function(s){if(!s)return null;if(i.texCoord!==void 0&&i.texCoord!=0&&!(r==="aoMap"&&i.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+i.texCoord+" for texture "+r+" not yet supported."),o.extensions[dr.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[dr.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const f=o.associations.get(s);s=o.extensions[dr.KHR_TEXTURE_TRANSFORM].extendTexture(s,a),o.associations.set(s,f)}}return n!==void 0&&(s.encoding=n),t[r]=s,s})}assignFinalMaterial(t){const r=t.geometry;let i=t.material;const n=r.attributes.tangent===void 0,o=r.attributes.color!==void 0,s=r.attributes.normal===void 0;if(t.isPoints){const a="PointsMaterial:"+i.uuid;let f=this.cache.get(a);f||(f=new Cd,zn.prototype.copy.call(f,i),f.color.copy(i.color),f.map=i.map,f.sizeAttenuation=!1,this.cache.add(a,f)),i=f}else if(t.isLine){const a="LineBasicMaterial:"+i.uuid;let f=this.cache.get(a);f||(f=new jd,zn.prototype.copy.call(f,i),f.color.copy(i.color),this.cache.add(a,f)),i=f}if(n||o||s){let a="ClonedMaterial:"+i.uuid+":";n&&(a+="derivative-tangents:"),o&&(a+="vertex-colors:"),s&&(a+="flat-shading:");let f=this.cache.get(a);f||(f=i.clone(),o&&(f.vertexColors=!0),s&&(f.flatShading=!0),n&&(f.normalScale&&(f.normalScale.y*=-1),f.clearcoatNormalScale&&(f.clearcoatNormalScale.y*=-1)),this.cache.add(a,f),this.associations.set(f,this.associations.get(i))),i=f}i.aoMap&&r.attributes.uv2===void 0&&r.attributes.uv!==void 0&&r.setAttribute("uv2",r.attributes.uv),t.material=i}getMaterialType(){return Ul}loadMaterial(t){const r=this,i=this.json,n=this.extensions,o=i.materials[t];let s;const a={},f=o.extensions||{},h=[];if(f[dr.KHR_MATERIALS_UNLIT]){const u=n[dr.KHR_MATERIALS_UNLIT];s=u.getMaterialType(),h.push(u.extendParams(a,o,r))}else{const u=o.pbrMetallicRoughness||{};if(a.color=new ht(1,1,1),a.opacity=1,Array.isArray(u.baseColorFactor)){const c=u.baseColorFactor;a.color.fromArray(c),a.opacity=c[3]}u.baseColorTexture!==void 0&&h.push(r.assignTexture(a,"map",u.baseColorTexture,pr)),a.metalness=u.metallicFactor!==void 0?u.metallicFactor:1,a.roughness=u.roughnessFactor!==void 0?u.roughnessFactor:1,u.metallicRoughnessTexture!==void 0&&(h.push(r.assignTexture(a,"metalnessMap",u.metallicRoughnessTexture)),h.push(r.assignTexture(a,"roughnessMap",u.metallicRoughnessTexture))),s=this._invokeOne(function(c){return c.getMaterialType&&c.getMaterialType(t)}),h.push(Promise.all(this._invokeAll(function(c){return c.extendMaterialParams&&c.extendMaterialParams(t,a)})))}o.doubleSided===!0&&(a.side=ni);const l=o.alphaMode||hl.OPAQUE;if(l===hl.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,l===hl.MASK&&(a.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&s!==xi&&(h.push(r.assignTexture(a,"normalMap",o.normalTexture)),a.normalScale=new Qt(1,1),o.normalTexture.scale!==void 0)){const u=o.normalTexture.scale;a.normalScale.set(u,u)}return o.occlusionTexture!==void 0&&s!==xi&&(h.push(r.assignTexture(a,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&s!==xi&&(a.emissive=new ht().fromArray(o.emissiveFactor)),o.emissiveTexture!==void 0&&s!==xi&&h.push(r.assignTexture(a,"emissiveMap",o.emissiveTexture,pr)),Promise.all(h).then(function(){const u=new s(a);return o.name&&(u.name=o.name),bi(u,o),r.associations.set(u,{materials:t}),o.extensions&&no(n,u,o),u})}createUniqueName(t){const r=mr.sanitizeNodeName(t||"");let i=r;for(let n=1;this.nodeNamesUsed[i];++n)i=r+"_"+n;return this.nodeNamesUsed[i]=!0,i}loadGeometries(t){const r=this,i=this.extensions,n=this.primitiveCache;function o(a){return i[dr.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,r).then(function(f){return Wc(f,a,r)})}const s=[];for(let a=0,f=t.length;a<f;a++){const h=t[a],l=cb(h),u=n[l];if(u)s.push(u.promise);else{let c;h.extensions&&h.extensions[dr.KHR_DRACO_MESH_COMPRESSION]?c=o(h):c=Wc(new En,h,r),n[l]={primitive:h,promise:c},s.push(c)}}return Promise.all(s)}loadMesh(t){const r=this,i=this.json,n=this.extensions,o=i.meshes[t],s=o.primitives,a=[];for(let f=0,h=s.length;f<h;f++){const l=s[f].material===void 0?ab(this.cache):this.getDependency("material",s[f].material);a.push(l)}return a.push(r.loadGeometries(s)),Promise.all(a).then(function(f){const h=f.slice(0,f.length-1),l=f[f.length-1],u=[];for(let d=0,y=l.length;d<y;d++){const p=l[d],m=s[d];let g;const v=h[d];if(m.mode===Sn.TRIANGLES||m.mode===Sn.TRIANGLE_STRIP||m.mode===Sn.TRIANGLE_FAN||m.mode===void 0)g=o.isSkinnedMesh===!0?new E0(p,v):new ln(p,v),g.isSkinnedMesh===!0&&!g.geometry.attributes.skinWeight.normalized&&g.normalizeSkinWeights(),m.mode===Sn.TRIANGLE_STRIP?g.geometry=Bc(g.geometry,sd):m.mode===Sn.TRIANGLE_FAN&&(g.geometry=Bc(g.geometry,yl));else if(m.mode===Sn.LINES)g=new P0(p,v);else if(m.mode===Sn.LINE_STRIP)g=new Fl(p,v);else if(m.mode===Sn.LINE_LOOP)g=new R0(p,v);else if(m.mode===Sn.POINTS)g=new D0(p,v);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+m.mode);Object.keys(g.geometry.morphAttributes).length>0&&ub(g,o),g.name=r.createUniqueName(o.name||"mesh_"+t),bi(g,o),m.extensions&&no(n,g,m),r.assignFinalMaterial(g),u.push(g)}for(let d=0,y=u.length;d<y;d++)r.associations.set(u[d],{meshes:t,primitives:d});if(u.length===1)return u[0];const c=new Ni;r.associations.set(c,{meshes:t});for(let d=0,y=u.length;d<y;d++)c.add(u[d]);return c})}loadCamera(t){let r;const i=this.json.cameras[t],n=i[i.type];if(!n){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?r=new rn(Mf.radToDeg(n.yfov),n.aspectRatio||1,n.znear||1,n.zfar||2e6):i.type==="orthographic"&&(r=new vo(-n.xmag,n.xmag,n.ymag,-n.ymag,n.znear,n.zfar)),i.name&&(r.name=this.createUniqueName(i.name)),bi(r,i),Promise.resolve(r)}loadSkin(t){const r=this.json.skins[t],i=[];for(let n=0,o=r.joints.length;n<o;n++)i.push(this.getDependency("node",r.joints[n]));return r.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",r.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(n){const o=n.pop(),s=n,a=[],f=[];for(let h=0,l=s.length;h<l;h++){const u=s[h];if(u){a.push(u);const c=new or;o!==null&&c.fromArray(o.array,h*16),f.push(c)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',r.joints[h])}return new Nl(a,f)})}loadAnimation(t){const i=this.json.animations[t],n=[],o=[],s=[],a=[],f=[];for(let h=0,l=i.channels.length;h<l;h++){const u=i.channels[h],c=i.samplers[u.sampler],d=u.target,y=d.node,p=i.parameters!==void 0?i.parameters[c.input]:c.input,m=i.parameters!==void 0?i.parameters[c.output]:c.output;n.push(this.getDependency("node",y)),o.push(this.getDependency("accessor",p)),s.push(this.getDependency("accessor",m)),a.push(c),f.push(d)}return Promise.all([Promise.all(n),Promise.all(o),Promise.all(s),Promise.all(a),Promise.all(f)]).then(function(h){const l=h[0],u=h[1],c=h[2],d=h[3],y=h[4],p=[];for(let g=0,v=l.length;g<v;g++){const x=l[g],T=u[g],w=c[g],b=d[g],C=y[g];if(x===void 0)continue;x.updateMatrix();let A;switch(vi[C.path]){case vi.weights:A=mo;break;case vi.rotation:A=Wi;break;case vi.position:case vi.scale:default:A=go;break}const M=x.name?x.name:x.uuid,k=b.interpolation!==void 0?ob[b.interpolation]:Ps,P=[];vi[C.path]===vi.weights?x.traverse(function(I){I.morphTargetInfluences&&P.push(I.name?I.name:I.uuid)}):P.push(M);let F=w.array;if(w.normalized){const I=Tl(F.constructor),B=new Float32Array(F.length);for(let H=0,G=F.length;H<G;H++)B[H]=F[H]*I;F=B}for(let I=0,B=P.length;I<B;I++){const H=new A(P[I]+"."+vi[C.path],T.array,F,k);b.interpolation==="CUBICSPLINE"&&(H.createInterpolant=function(W){const Q=this instanceof Wi?sb:Hd;return new Q(this.times,this.values,this.getValueSize()/3,W)},H.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),p.push(H)}}const m=i.name?i.name:"animation_"+t;return new U0(m,void 0,p)})}createNodeMesh(t){const r=this.json,i=this,n=r.nodes[t];return n.mesh===void 0?null:i.getDependency("mesh",n.mesh).then(function(o){const s=i._getNodeRef(i.meshCache,n.mesh,o);return n.weights!==void 0&&s.traverse(function(a){if(a.isMesh)for(let f=0,h=n.weights.length;f<h;f++)a.morphTargetInfluences[f]=n.weights[f]}),s})}loadNode(t){const r=this.json,i=this.extensions,n=this,o=r.nodes[t],s=o.name?n.createUniqueName(o.name):"";return function(){const a=[],f=n._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(t)});f&&a.push(f),o.camera!==void 0&&a.push(n.getDependency("camera",o.camera).then(function(c){return n._getNodeRef(n.cameraCache,o.camera,c)})),n._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(t)}).forEach(function(c){a.push(c)});const h=[],l=o.children||[];for(let c=0,d=l.length;c<d;c++)h.push(n.getDependency("node",l[c]));const u=o.skin===void 0?Promise.resolve(null):n.getDependency("skin",o.skin);return Promise.all([Promise.all(a),Promise.all(h),u])}().then(function(a){const f=a[0],h=a[1],l=a[2];let u;if(o.isBone===!0?u=new Ed:f.length>1?u=new Ni:f.length===1?u=f[0]:u=new Cr,u!==f[0])for(let c=0,d=f.length;c<d;c++)u.add(f[c]);if(o.name&&(u.userData.name=o.name,u.name=s),bi(u,o),o.extensions&&no(i,u,o),o.matrix!==void 0){const c=new or;c.fromArray(o.matrix),u.applyMatrix4(c)}else o.translation!==void 0&&u.position.fromArray(o.translation),o.rotation!==void 0&&u.quaternion.fromArray(o.rotation),o.scale!==void 0&&u.scale.fromArray(o.scale);n.associations.has(u)||n.associations.set(u,{}),n.associations.get(u).nodes=t,l!==null&&u.traverse(function(c){c.isSkinnedMesh&&c.bind(l,hb)});for(let c=0,d=h.length;c<d;c++)u.add(h[c]);return u})}loadScene(t){const r=this.extensions,i=this.json.scenes[t],n=this,o=new Ni;i.name&&(o.name=n.createUniqueName(i.name)),bi(o,i),i.extensions&&no(r,o,i);const s=i.nodes||[],a=[];for(let f=0,h=s.length;f<h;f++)a.push(n.getDependency("node",s[f]));return Promise.all(a).then(function(f){for(let l=0,u=f.length;l<u;l++)o.add(f[l]);const h=l=>{const u=new Map;for(const[c,d]of n.associations)(c instanceof zn||c instanceof Xr)&&u.set(c,d);return l.traverse(c=>{const d=n.associations.get(c);d!=null&&u.set(c,d)}),u};return n.associations=h(o),o})}}function pb(S,t,r){const i=t.attributes,n=new Os;if(i.POSITION!==void 0){const a=r.json.accessors[i.POSITION],f=a.min,h=a.max;if(f!==void 0&&h!==void 0){if(n.set(new Ve(f[0],f[1],f[2]),new Ve(h[0],h[1],h[2])),a.normalized){const l=Tl(Ts[a.componentType]);n.min.multiplyScalar(l),n.max.multiplyScalar(l)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const o=t.targets;if(o!==void 0){const a=new Ve,f=new Ve;for(let h=0,l=o.length;h<l;h++){const u=o[h];if(u.POSITION!==void 0){const c=r.json.accessors[u.POSITION],d=c.min,y=c.max;if(d!==void 0&&y!==void 0){if(f.setX(Math.max(Math.abs(d[0]),Math.abs(y[0]))),f.setY(Math.max(Math.abs(d[1]),Math.abs(y[1]))),f.setZ(Math.max(Math.abs(d[2]),Math.abs(y[2]))),c.normalized){const p=Tl(Ts[c.componentType]);f.multiplyScalar(p)}a.max(f)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}n.expandByVector(a)}S.boundingBox=n;const s=new Is;n.getCenter(s.center),s.radius=n.min.distanceTo(n.max)/2,S.boundingSphere=s}function Wc(S,t,r){const i=t.attributes,n=[];function o(s,a){return r.getDependency("accessor",s).then(function(f){S.setAttribute(a,f)})}for(const s in i){const a=Ml[s]||s.toLowerCase();a in S.attributes||n.push(o(i[s],a))}if(t.indices!==void 0&&!S.index){const s=r.getDependency("accessor",t.indices).then(function(a){S.setIndex(a)});n.push(s)}return bi(S,t),pb(S,t,r),Promise.all(n).then(function(){return t.targets!==void 0?lb(S,t.targets,r):S})}class mb extends ks.EventEmitter{constructor(t){super(),this.experience=new Vn,this.renderer=this.experience.renderer,this.assets=t,this.items={},this.queue=this.assets.length,this.loaded=0,this.setLoaders(),this.startLoading()}setLoaders(){this.loaders={},this.loaders.textureLoader=new Rd,this.loaders.gltfLoader=new Fv,this.loaders.dracoLoader=new Iv,this.loaders.dracoLoader.setDecoderPath("/draco/"),this.loaders.gltfLoader.setDRACOLoader(this.loaders.dracoLoader)}startLoading(){for(const t of this.assets)t.type==="glbModel"?this.loaders.gltfLoader.load(t.path,r=>{this.singleAssetLoaded(t,r)}):t.type==="texture"&&(this.text={},this.text[t.name]=this.loaders.textureLoader.load(t.path),this.text[t.name].magFilter=Nr,this.text[t.name].minFilter=Nr,this.singleAssetLoaded(t,this.text[t.name]))}singleAssetLoaded(t,r){this.items[t.name]=r,this.loaded++,this.loaded===this.queue&&this.emit("ready")}}const gb=[{name:"couronne",type:"glbModel",path:"/Models/CouronneJP.glb"},{name:"gradientCouronne",type:"texture",path:"/Texture/gradientCouronne.png"},{name:"fondBleu",type:"texture",path:"/Texture/fondBleu.png"},{name:"pomme",type:"texture",path:"/Texture/pomme.png"}],lo=class{constructor(t){if(lo.instance)return lo.instance;lo.instance=this,this.canvas=t,this.sizes=new kv,this.scene=new S0,this.time=new Ov,this.camera=new uv,this.renderer=new Ev,this.resources=new mb(gb),this.world=new Tv,this.sizes.on("resize",()=>{this.resize()}),this.time.on("update",()=>{this.update()})}resize(){this.camera.resize(),this.world.resize(),this.renderer.resize()}update(){this.camera.update(),this.world.update(),this.renderer.update()}};let Vn=lo;$l(Vn,"instance");new Vn(document.querySelector(".experience-canvas"));(function(){function S(){for(var i=arguments.length,n=0;n<i;n++){var o=n<0||arguments.length<=n?void 0:arguments[n];o.nodeType===1||o.nodeType===11?this.appendChild(o):this.appendChild(document.createTextNode(String(o)))}}function t(){for(;this.lastChild;)this.removeChild(this.lastChild);arguments.length&&this.append.apply(this,arguments)}function r(){for(var i=this.parentNode,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];var a=o.length;if(i)for(a||i.removeChild(this);a--;){var f=o[a];typeof f!="object"?f=this.ownerDocument.createTextNode(f):f.parentNode&&f.parentNode.removeChild(f),a?i.insertBefore(this.previousSibling,f):i.replaceChild(f,this)}}typeof Element<"u"&&(Element.prototype.append||(Element.prototype.append=S,DocumentFragment.prototype.append=S),Element.prototype.replaceChildren||(Element.prototype.replaceChildren=t,DocumentFragment.prototype.replaceChildren=t),Element.prototype.replaceWith||(Element.prototype.replaceWith=r,DocumentFragment.prototype.replaceWith=r))})();function yb(S,t){if(!(S instanceof t))throw new TypeError("Cannot call a class as a function")}function qc(S,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(S,i.key,i)}}function Xc(S,t,r){return t&&qc(S.prototype,t),r&&qc(S,r),S}function vb(S,t,r){return t in S?Object.defineProperty(S,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):S[t]=r,S}function Yc(S,t){var r=Object.keys(S);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(S);t&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(S,n).enumerable})),r.push.apply(r,i)}return r}function Zc(S){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Yc(Object(r),!0).forEach(function(i){vb(S,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(r)):Yc(Object(r)).forEach(function(i){Object.defineProperty(S,i,Object.getOwnPropertyDescriptor(r,i))})}return S}function Wd(S,t){return _b(S)||wb(S,t)||qd(S,t)||Mb()}function nn(S){return bb(S)||xb(S)||qd(S)||Sb()}function bb(S){if(Array.isArray(S))return El(S)}function _b(S){if(Array.isArray(S))return S}function xb(S){if(typeof Symbol<"u"&&Symbol.iterator in Object(S))return Array.from(S)}function wb(S,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(S)))){var r=[],i=!0,n=!1,o=void 0;try{for(var s=S[Symbol.iterator](),a;!(i=(a=s.next()).done)&&(r.push(a.value),!(t&&r.length===t));i=!0);}catch(f){n=!0,o=f}finally{try{!i&&s.return!=null&&s.return()}finally{if(n)throw o}}return r}}function qd(S,t){if(S){if(typeof S=="string")return El(S,t);var r=Object.prototype.toString.call(S).slice(8,-1);if(r==="Object"&&S.constructor&&(r=S.constructor.name),r==="Map"||r==="Set")return Array.from(S);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return El(S,t)}}function El(S,t){(t==null||t>S.length)&&(t=S.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=S[r];return i}function Sb(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mb(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fi(S,t){return Object.getOwnPropertyNames(Object(S)).reduce(function(r,i){var n=Object.getOwnPropertyDescriptor(Object(S),i),o=Object.getOwnPropertyDescriptor(Object(t),i);return Object.defineProperty(r,i,o||n)},{})}function _o(S){return typeof S=="string"}function Hl(S){return Array.isArray(S)}function oa(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=Fi(S),r;return t.types!==void 0?r=t.types:t.split!==void 0&&(r=t.split),r!==void 0&&(t.types=(_o(r)||Hl(r)?String(r):"").split(",").map(function(i){return String(i).trim()}).filter(function(i){return/((line)|(word)|(char))/i.test(i)})),(t.absolute||t.position)&&(t.absolute=t.absolute||/absolute/.test(S.position)),t}function Wl(S){var t=_o(S)||Hl(S)?String(S):"";return{none:!t,lines:/line/i.test(t),words:/word/i.test(t),chars:/char/i.test(t)}}function wa(S){return S!==null&&typeof S=="object"}function Tb(S){return wa(S)&&/^(1|3|11)$/.test(S.nodeType)}function Eb(S){return typeof S=="number"&&S>-1&&S%1===0}function jb(S){return wa(S)&&Eb(S.length)}function qi(S){return Hl(S)?S:S==null?[]:jb(S)?Array.prototype.slice.call(S):[S]}function Kc(S){var t=S;return _o(S)&&(/^(#[a-z]\w+)$/.test(S.trim())?t=document.getElementById(S.trim().slice(1)):t=document.querySelectorAll(S)),qi(t).reduce(function(r,i){return[].concat(nn(r),nn(qi(i).filter(Tb)))},[])}var Cb=Object.entries,pa="_splittype",On={},Ab=0;function Gn(S,t,r){if(!wa(S))return console.warn("[data.set] owner is not an object"),null;var i=S[pa]||(S[pa]=++Ab),n=On[i]||(On[i]={});return r===void 0?t&&Object.getPrototypeOf(t)===Object.prototype&&(On[i]=Zc(Zc({},n),t)):t!==void 0&&(n[t]=r),r}function Ui(S,t){var r=wa(S)?S[pa]:null,i=r&&On[r]||{};return t===void 0?i:i[t]}function Xd(S){var t=S&&S[pa];t&&(delete S[t],delete On[t])}function Lb(){Object.keys(On).forEach(function(S){delete On[S]})}function Pb(){Cb(On).forEach(function(S){var t=Wd(S,2),r=t[0],i=t[1],n=i.isRoot,o=i.isSplit;(!n||!o)&&(On[r]=null,delete On[r])})}function Rb(S){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:" ",r=S?String(S):"";return r.trim().replace(/\s+/g," ").split(t)}var ql="\\ud800-\\udfff",Yd="\\u0300-\\u036f\\ufe20-\\ufe23",Zd="\\u20d0-\\u20f0",Kd="\\ufe0e\\ufe0f",Db="[".concat(ql,"]"),jl="[".concat(Yd).concat(Zd,"]"),Cl="\\ud83c[\\udffb-\\udfff]",kb="(?:".concat(jl,"|").concat(Cl,")"),$d="[^".concat(ql,"]"),Jd="(?:\\ud83c[\\udde6-\\uddff]){2}",Qd="[\\ud800-\\udbff][\\udc00-\\udfff]",eh="\\u200d",th="".concat(kb,"?"),rh="[".concat(Kd,"]?"),Ob="(?:"+eh+"(?:"+[$d,Jd,Qd].join("|")+")"+rh+th+")*",Ib=rh+th+Ob,Nb="(?:".concat(["".concat($d).concat(jl,"?"),jl,Jd,Qd,Db].join("|"),`
)`),Fb=RegExp("".concat(Cl,"(?=").concat(Cl,")|").concat(Nb).concat(Ib),"g"),Ub=[eh,ql,Yd,Zd,Kd],Bb=RegExp("[".concat(Ub.join(""),"]"));function Gb(S){return S.split("")}function nh(S){return Bb.test(S)}function zb(S){return S.match(Fb)||[]}function Vb(S){return nh(S)?zb(S):Gb(S)}function Hb(S){return S==null?"":String(S)}function Wb(S){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return S=Hb(S),S&&_o(S)&&!t&&nh(S)?Vb(S):S.split(t)}function Al(S,t){var r=document.createElement(S);return t&&Object.keys(t).forEach(function(i){var n=t[i],o=_o(n)?n.trim():n;o===null||o===""||(i==="children"?r.append.apply(r,nn(qi(o))):r.setAttribute(i,o))}),r}var Xl={splitClass:"",lineClass:"line",wordClass:"word",charClass:"char",types:["lines","words","chars"],absolute:!1,tagName:"div"};function qb(S,t){t=Fi(Xl,t);var r=Wl(t.types),i=t.tagName,n=S.nodeValue,o=document.createDocumentFragment(),s=[],a=[];return/^\s/.test(n)&&o.append(" "),s=Rb(n).reduce(function(f,h,l,u){var c,d;return r.chars&&(d=Wb(h).map(function(y){var p=Al(i,{class:"".concat(t.splitClass," ").concat(t.charClass),style:"display: inline-block;",children:y});return Gn(p,"isChar",!0),a=[].concat(nn(a),[p]),p})),r.words||r.lines?(c=Al(i,{class:"".concat(t.wordClass," ").concat(t.splitClass),style:"display: inline-block; ".concat(r.words&&t.absolute?"position: relative;":""),children:r.chars?d:h}),Gn(c,{isWord:!0,isWordStart:!0,isWordEnd:!0}),o.appendChild(c)):d.forEach(function(y){o.appendChild(y)}),l<u.length-1&&o.append(" "),r.words?f.concat(c):f},[]),/\s$/.test(n)&&o.append(" "),S.replaceWith(o),{words:s,chars:a}}function ih(S,t){var r=S.nodeType,i={words:[],chars:[]};if(!/(1|3|11)/.test(r))return i;if(r===3&&/\S/.test(S.nodeValue))return qb(S,t);var n=qi(S.childNodes);if(n.length&&(Gn(S,"isSplit",!0),!Ui(S).isRoot)){S.style.display="inline-block",S.style.position="relative";var o=S.nextSibling,s=S.previousSibling,a=S.textContent||"",f=o?o.textContent:" ",h=s?s.textContent:" ";Gn(S,{isWordEnd:/\s$/.test(a)||/^\s/.test(f),isWordStart:/^\s/.test(a)||/\s$/.test(h)})}return n.reduce(function(l,u){var c=ih(u,t),d=c.words,y=c.chars;return{words:[].concat(nn(l.words),nn(d)),chars:[].concat(nn(l.chars),nn(y))}},i)}function Xb(S,t,r,i){if(!r.absolute)return{top:t?S.offsetTop:null};var n=S.offsetParent,o=Wd(i,2),s=o[0],a=o[1],f=0,h=0;if(n&&n!==document.body){var l=n.getBoundingClientRect();f=l.x+s,h=l.y+a}var u=S.getBoundingClientRect(),c=u.width,d=u.height,y=u.x,p=u.y,m=p+a-h,g=y+s-f;return{width:c,height:d,top:m,left:g}}function sh(S){Ui(S).isWord?(Xd(S),S.replaceWith.apply(S,nn(S.childNodes))):qi(S.children).forEach(function(t){return sh(t)})}var Yb=function(){return document.createDocumentFragment()};function Zb(S,t,r){var i=Wl(t.types),n=t.tagName,o=S.getElementsByTagName("*"),s=[],a=[],f=null,h,l,u,c=[],d=S.parentElement,y=S.nextElementSibling,p=Yb(),m=window.getComputedStyle(S),g=m.textAlign,v=parseFloat(m.fontSize),x=v*.2;return t.absolute&&(u={left:S.offsetLeft,top:S.offsetTop,width:S.offsetWidth},l=S.offsetWidth,h=S.offsetHeight,Gn(S,{cssWidth:S.style.width,cssHeight:S.style.height})),qi(o).forEach(function(T){var w=T.parentElement===S,b=Xb(T,w,t,r),C=b.width,A=b.height,M=b.top,k=b.left;/^br$/i.test(T.nodeName)||(i.lines&&w&&((f===null||M-f>=x)&&(f=M,s.push(a=[])),a.push(T)),t.absolute&&Gn(T,{top:M,left:k,width:C,height:A}))}),d&&d.removeChild(S),i.lines&&(c=s.map(function(T){var w=Al(n,{class:"".concat(t.splitClass," ").concat(t.lineClass),style:"display: block; text-align: ".concat(g,"; width: 100%;")});Gn(w,"isLine",!0);var b={height:0,top:1e4};return p.appendChild(w),T.forEach(function(C,A,M){var k=Ui(C),P=k.isWordEnd,F=k.top,I=k.height,B=M[A+1];b.height=Math.max(b.height,I),b.top=Math.min(b.top,F),w.appendChild(C),P&&Ui(B).isWordStart&&w.append(" ")}),t.absolute&&Gn(w,{height:b.height,top:b.top}),w}),i.words||sh(p),S.replaceChildren(p)),t.absolute&&(S.style.width="".concat(S.style.width||l,"px"),S.style.height="".concat(h,"px"),qi(o).forEach(function(T){var w=Ui(T),b=w.isLine,C=w.top,A=w.left,M=w.width,k=w.height,P=Ui(T.parentElement),F=!b&&P.isLine;T.style.top="".concat(F?C-P.top:C,"px"),T.style.left=b?"".concat(u.left,"px"):"".concat(A-(F?u.left:0),"px"),T.style.height="".concat(k,"px"),T.style.width=b?"".concat(u.width,"px"):"".concat(M,"px"),T.style.position="absolute"})),d&&(y?d.insertBefore(S,y):d.appendChild(S)),c}var ys=Fi(Xl,{}),Kb=function(){Xc(S,null,[{key:"clearData",value:function(){Lb()}},{key:"setDefaults",value:function(r){return ys=Fi(ys,oa(r)),Xl}},{key:"revert",value:function(r){Kc(r).forEach(function(i){var n=Ui(i),o=n.isSplit,s=n.html,a=n.cssWidth,f=n.cssHeight;o&&(i.innerHTML=s,i.style.width=a||"",i.style.height=f||"",Xd(i))})}},{key:"create",value:function(r,i){return new S(r,i)}},{key:"data",get:function(){return On}},{key:"defaults",get:function(){return ys},set:function(r){ys=Fi(ys,oa(r))}}]);function S(t,r){yb(this,S),this.isSplit=!1,this.settings=Fi(ys,oa(r)),this.elements=Kc(t),this.split()}return Xc(S,[{key:"split",value:function(r){var i=this;this.revert(),this.elements.forEach(function(s){Gn(s,"html",s.innerHTML)}),this.lines=[],this.words=[],this.chars=[];var n=[window.pageXOffset,window.pageYOffset];r!==void 0&&(this.settings=Fi(this.settings,oa(r)));var o=Wl(this.settings.types);o.none||(this.elements.forEach(function(s){Gn(s,"isRoot",!0);var a=ih(s,i.settings),f=a.words,h=a.chars;i.words=[].concat(nn(i.words),nn(f)),i.chars=[].concat(nn(i.chars),nn(h))}),this.elements.forEach(function(s){if(o.lines||i.settings.absolute){var a=Zb(s,i.settings,n);i.lines=[].concat(nn(i.lines),nn(a))}}),this.isSplit=!0,window.scrollTo(n[0],n[1]),Pb())}},{key:"revert",value:function(){this.isSplit&&(this.lines=null,this.words=null,this.chars=null,this.isSplit=!1),S.revert(this.elements)}}]),S}();gsap.registerPlugin(ScrollTrigger,ScrollSmoother);alert("happy");ScrollSmoother.create({wrapper:"#smooth-wrapper",content:"#smooth-content",smooth:2.4,effects:!0});ScrollTrigger.create({trigger:".trigger",pin:".pin",start:"bottom center",end:"+=368"});let oh;document.querySelectorAll(".sous-titre");oh=document.querySelectorAll(".sous-titre-wrapper");oh.forEach(S=>{let t=S.querySelector(".sous-titre");t.innerHTML.trim().split("").forEach(function(s){});const n=Kb.create(t,{types:"chars"}).chars;console.log(n);let o=gsap.timeline({paused:"true",scrollTrigger:{trigger:S,start:"top 92%",toggleActions:"restart none none reverse"}});gsap.set(n,{y:24,opacity:0}),o.to(n,{y:0,stagger:{each:.05,from:"left"},duration:.2,ease:"sine.out"},0).to(n,{opacity:1,stagger:{each:.05,from:"left"},duration:.4,ease:"expoScale(0.5,7,none)"},0)});console.log("girs");document.querySelector("#other-drawin");document.querySelector("#croquis");var $b=$("video");$.each($b,function(){this.controls=!1});$("video").click(function(){this.paused?this.play():this.pause()});let Yl=[],ah=[];ah=document.querySelectorAll(".projets");document.querySelectorAll(".arrow-left");document.querySelectorAll(".arrow-right");Yl.forEach((S,t)=>{console.log(S),console.log(t),S.addEventListener("click",r=>{const i=document.getElementById(`projet-${t}`);document.getElementById(`projet-${t+1}`),i.classList.remove("display-none"),i.querySelector(".croix").addEventListener("click",()=>{i.classList.add("display-none")})}),S.querySelector(".arrow-left")});Yl=document.querySelectorAll(".projet");let wn=[];for(let S=0;S<ah.length;S++)wn.push(document.querySelector(`#projet-${S}`));let Ll=document.querySelector("#fond-projet");gsap.set(wn,{opacity:0,display:"none"});gsap.set(Ll,{opacity:0,display:"none"});Yl.forEach((S,t)=>{let r=`#projet-${t}`;S.addEventListener("click",i=>{_s(Ll),_s(r)}),document.querySelector(r).querySelector(".croix").addEventListener("click",()=>{xs(r),xs(Ll)})});function _s(S){gsap.timeline().to(S,{display:"block",duration:0},0).to(S,{autoAlpha:1,opacity:1,duration:1.2,ease:"easeIn"},0)}function xs(S){gsap.timeline().to(S,{opacity:0,autoAlpha:0,duration:1.2,ease:" easeOut"},0).to(S,{display:"none",duration:.01},0)}wn.forEach((S,t)=>{console.log(S);let r=S.querySelector(".arrow-left"),i=S.querySelector(".arrow-right");r.addEventListener("click",()=>{t>0?(xs(wn[t]),_s(wn[t-1])):(_s(wn[3]),xs(wn[t]))}),i.addEventListener("click",()=>{t<wn.length-2?(xs(wn[t]),_s(wn[t+1])):(xs(wn[t]),_s(wn[0]))})})});export default Jb();
